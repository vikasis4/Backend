{"ast":null,"code":"import _regeneratorRuntime from\"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import VerifyContext from'./VerifyContext';import{useContext,useState}from'react';import axios from'axios';import ProfileContext from'../profile/ProfileContext';import{jsx as _jsx}from\"react/jsx-runtime\";var VerifyState=function VerifyState(props){var datas=useContext(ProfileContext);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),verify=_useState2[0],setVerify=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),progress=_useState4[0],setProgress=_useState4[1];var clink=process.env.REACT_APP_LINK;var Runverify=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(name){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(progress<40){setProgress(10);}if(!localStorage.getItem('token')){_context.next=7;break;}_context.next=4;return axios.get(clink+\"/verifyuser\",{headers:{'auth-token':localStorage.getItem('token')}}).then(function(response){if(response.data.message==='success'){setProgress(60);var type='normal';if(response.data.user.refral==='empty'){type='normal';}else{type='refral';}datas.setProfile({username:response.data.user.username,subscription:response.data.user.subscription,void:'no',id:response.data.user._id,current:response.data.user.current,query:response.data.user.query,img:response.data.user.img,vkey:response.data.user.vkey,name:response.data.user.name,quality:response.data.user.quality,subarray:response.data.user.subarray,type:type,room:response.data.user.room,cart:response.data.user.cart});if(response.data.user.subscription==='true'){setVerify('thanks');}else{setVerify('true');}localStorage.setItem('reload-facility','89307988vikasREF');datas.setDisp('none');datas.setDispmessage('Loading');}else if(response.data.message==='tokenExpired'){localStorage.removeItem('token');setVerify('false');alert('You can login to 2 devices only. Login again to use your account on this device and the last logged in device will be logged out');datas.setDisp('none');datas.setDispmessage('Loading');}else if(response.data.message==='nouser'){localStorage.removeItem('token');setVerify('false');datas.setDisp('none');datas.setDispmessage('Loading');}else if(response.data.message==='fail'){localStorage.removeItem('token');setVerify('false');datas.setDisp('none');datas.setDispmessage('Loading');}});case 4:if(name==='/'){setTimeout(function(){setProgress(100);},1000);}else{setProgress(50);}_context.next=9;break;case 7:setTimeout(function(){setProgress(100);},1000);setVerify(\"false\");case 9:case\"end\":return _context.stop();}}},_callee);}));return function Runverify(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(VerifyContext.Provider,{value:{Runverify:Runverify,verify:verify,progress:progress,setProgress:setProgress},children:props.children});};export default VerifyState;","map":{"version":3,"names":["React","VerifyContext","useContext","useState","axios","ProfileContext","VerifyState","props","datas","verify","setVerify","progress","setProgress","clink","process","env","REACT_APP_LINK","Runverify","name","localStorage","getItem","get","headers","then","response","data","message","type","user","refral","setProfile","username","subscription","void","id","_id","current","query","img","vkey","quality","subarray","room","cart","setItem","setDisp","setDispmessage","removeItem","alert","setTimeout","children"],"sources":["/root/rankboost/deployment/website/src/context/verify/VerifyState.js"],"sourcesContent":["import React from 'react'\nimport VerifyContext from './VerifyContext';\nimport { useContext, useState } from 'react'\nimport axios from 'axios';\nimport ProfileContext from '../profile/ProfileContext'\n\n\nconst VerifyState = (props) => {\n\n\n    const datas = useContext(ProfileContext);\n    const [verify, setVerify] = useState('');\n    const [progress, setProgress] = useState('');\n    const clink = process.env.REACT_APP_LINK\n\n\n\n\n    const Runverify = async (name) => {\n\n        if (progress < 40) {\n            setProgress(10)\n        }\n\n        if (localStorage.getItem('token')) {\n            await axios.get(clink + \"/verifyuser\", {\n                headers: { 'auth-token': localStorage.getItem('token') }\n            }).then(function (response) {\n\n                if (response.data.message === 'success') {\n                    setProgress(60)\n                    var type = 'normal';\n                    if (response.data.user.refral === 'empty') {\n                        type = 'normal'\n                    } else {\n                        type = 'refral'\n                    }\n                    datas.setProfile({\n                        username: response.data.user.username,\n                        subscription: response.data.user.subscription,\n                        void: 'no',\n                        id: response.data.user._id,\n                        current: response.data.user.current,\n                        query: response.data.user.query,\n                        img: response.data.user.img,\n                        vkey: response.data.user.vkey,\n                        name: response.data.user.name,\n                        quality: response.data.user.quality,\n                        subarray: response.data.user.subarray,\n                        type,\n                        room: response.data.user.room,\n                        cart: response.data.user.cart,\n                    });\n                    if (response.data.user.subscription === 'true') {\n                        setVerify('thanks')\n                    } else {\n                        setVerify('true')\n                    }\n                    localStorage.setItem('reload-facility', '89307988vikasREF')\n                    datas.setDisp('none')\n                    datas.setDispmessage('Loading')\n                }\n                else if (response.data.message === 'tokenExpired') {\n                    localStorage.removeItem('token')\n                    setVerify('false')\n                    alert('You can login to 2 devices only. Login again to use your account on this device and the last logged in device will be logged out')\n                    datas.setDisp('none')\n                    datas.setDispmessage('Loading')\n                }\n                else if (response.data.message === 'nouser') {\n                    localStorage.removeItem('token')\n                    setVerify('false')\n                    datas.setDisp('none')\n                    datas.setDispmessage('Loading')\n                }\n                else if (response.data.message === 'fail') {\n                    localStorage.removeItem('token')\n                    setVerify('false')\n                    datas.setDisp('none')\n                    datas.setDispmessage('Loading')\n                }\n            })\n            if (name === '/') {\n                setTimeout(() => {\n                    setProgress(100)\n                }, 1000)\n            } else {\n                setProgress(50)\n            }\n\n        } else {\n            setTimeout(() => {\n                setProgress(100)\n            }, 1000)\n            setVerify(\"false\")\n        }\n    }\n\n\n\n    return (\n        <VerifyContext.Provider value={{ Runverify, verify, progress, setProgress }} >\n            {props.children}\n        </VerifyContext.Provider>\n    )\n}\nexport default VerifyState;"],"mappings":"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"},"metadata":{},"sourceType":"module"}