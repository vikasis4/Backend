{"ast":null,"code":"import _regeneratorRuntime from\"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useState}from'react';import PaymentContext from'./PaymentContext';import{useContext}from'react';import ProfileContext from'../profile/ProfileContext';import VerifyContext from'../verify/VerifyContext';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";var PaymentState=function PaymentState(props){var aaverify=useContext(VerifyContext);var aaprofile=useContext(ProfileContext);var clink=process.env.REACT_APP_LINK;/////////////////////////////////////////////////////////////////////////////////// 4\nvar activation=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(pkey){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(aaprofile.profile.void==='no')){_context.next=5;break;}_context.next=3;return axios.put(clink+'/updatesubs',{id:aaprofile.profile.id,pkey:pkey}).then(function(response){console.log(response.data);if(response.data.value==='yes'){alert(\"Your subscription has been activated, Reload your page to start with your course.\");window.location.reload();aaprofile.setProfile(_objectSpread(_objectSpread({},aaprofile.profile),{},{cart:[]}));}else{alert(\"Something went wrong, Do not worry just quickly go to query section and raise a query, we will quickly resolve this issue and will activate your subscription. sorry for the inconvenience\");}});case 3:_context.next=6;break;case 5:activation();case 6:case\"end\":return _context.stop();}}},_callee);}));return function activation(_x){return _ref.apply(this,arguments);};}();///////////////////////////////////////////////////////////////////////// 3\nvar handlerazorpay=function handlerazorpay(maininfo){var id=aaprofile.profile.id;var type=aaprofile.profile.type;var cart=aaprofile.profile.cart;var options={key:\"rzp_test_AmFDUwfCiTTdEz\",amount:maininfo.amount,currency:maininfo.currency,description:'Secure Payment with RazorPay',name:\"JEE/NEET COUNCELLING\",order_id:maininfo.id,handler:function(){var _handler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(response){var balue,verifyurl,_yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;balue=_objectSpread(_objectSpread({},response),{},{id:id,type:type,cart:cart});verifyurl=clink+'/payment/verify';_context2.next=5;return axios.post(verifyurl,balue);case 5:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;if(data.status==='success'){activation(data.pkey);}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));function handler(_x2){return _handler.apply(this,arguments);}return handler;}(),theme:{color:'#3399cc'}};var rzp1=new window.Razorpay(options);rzp1.open();};///////////////////////////////////////////////////////////////////////////   1\nvar paymentverify=function paymentverify(id){aaverify.Runverify('/');if(aaprofile.profile.void===\"no\"){handlepayment(id);}};/////////////////////////////////////////////////////////////////////////////////// 2\nvar handlepayment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){var orderurl,razorpaydata;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;orderurl=clink+'/payment/orders';_context3.next=4;return axios.post(orderurl,{id:id});case 4:razorpaydata=_context3.sent;handlerazorpay(razorpaydata.data);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function handlepayment(_x3){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(PaymentContext.Provider,{value:{paymentverify:paymentverify},children:props.children});};export default PaymentState;","map":{"version":3,"names":["React","useState","PaymentContext","useContext","ProfileContext","VerifyContext","axios","PaymentState","props","aaverify","aaprofile","clink","process","env","REACT_APP_LINK","activation","pkey","profile","void","put","id","then","response","console","log","data","value","alert","window","location","reload","setProfile","cart","handlerazorpay","maininfo","type","options","key","amount","currency","description","name","order_id","handler","balue","verifyurl","post","status","theme","color","rzp1","Razorpay","open","paymentverify","Runverify","handlepayment","orderurl","razorpaydata","children"],"sources":["/root/rankboost/deployment/website/src/context/paymentportal/PaymentState.js"],"sourcesContent":["import React, {useState} from 'react'\nimport PaymentContext from './PaymentContext'\nimport {useContext} from 'react'\nimport ProfileContext from '../profile/ProfileContext'\nimport VerifyContext from '../verify/VerifyContext'\nimport axios from 'axios'\n\n\nconst PaymentState=(props)=>{\n\n\n    const aaverify = useContext(VerifyContext);\n    const aaprofile = useContext(ProfileContext);\n    const clink = process.env.REACT_APP_LINK;\n\n\n/////////////////////////////////////////////////////////////////////////////////// 4\n\n    const activation = async (pkey)=> {\n        if (aaprofile.profile.void === 'no') {\n            await axios.put(clink+'/updatesubs', {id:aaprofile.profile.id, pkey})\n            .then((response)=>{\n                console.log(response.data);\n                if (response.data.value === 'yes') {\n                    alert(\"Your subscription has been activated, Reload your page to start with your course.\");\n                    window.location.reload();\n                    aaprofile.setProfile({...aaprofile.profile, cart:[]})\n                }else {\n                    alert(\"Something went wrong, Do not worry just quickly go to query section and raise a query, we will quickly resolve this issue and will activate your subscription. sorry for the inconvenience\")\n                }\n            })\n        }else{\n            activation()\n        }\n    }\n\n///////////////////////////////////////////////////////////////////////// 3\n    const  handlerazorpay=(maininfo) => {\n\n        const id = aaprofile.profile.id;\n        const type = aaprofile.profile.type;\n        const cart = aaprofile.profile.cart;\n        \n        var options = {\n            key: \"rzp_test_AmFDUwfCiTTdEz\", \n            amount: maininfo.amount, \n            currency: maininfo.currency,\n            description:'Secure Payment with RazorPay',\n            name: \"JEE/NEET COUNCELLING\",\n            order_id: maininfo.id, \n            handler: async (response) => {\n                try {\n                    \n                    const balue = {...response, id, type, cart}\n                    const verifyurl = clink+'/payment/verify';\n                    const {data} = await axios.post(verifyurl, balue);\n                    if (data.status === 'success') {\n                        activation(data.pkey);\n                    }\n                } catch (error) {\n                    console.log(error);\n                }\n            },\n            theme: {\n                color: '#3399cc'\n            },\n        };\n        const rzp1 = new window.Razorpay(options);\n        rzp1.open()\n    }\n    \n///////////////////////////////////////////////////////////////////////////   1\n    const paymentverify = (id) => {\n\n        aaverify.Runverify('/');\n        if (aaprofile.profile.void === \"no\") {\n            handlepayment(id)\n        }\n    }\n/////////////////////////////////////////////////////////////////////////////////// 2\n    const handlepayment = async (id)=> {\n\n        try {\n            \n            const orderurl = clink+'/payment/orders'\n            const razorpaydata = await axios.post(orderurl, {id});\n            handlerazorpay(razorpaydata.data);\n        } catch (error) {\n            console.log(error);\n        }\n    }\n    \n    \n        return (\n        <PaymentContext.Provider value={{paymentverify}} >\n           { props.children}\n        </PaymentContext.Provider>\n        )\n\n}\n     export default PaymentState;"],"mappings":"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"},"metadata":{},"sourceType":"module"}