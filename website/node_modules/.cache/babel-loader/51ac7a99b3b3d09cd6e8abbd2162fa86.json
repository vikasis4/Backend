{"ast":null,"code":"import _slicedToArray from\"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import ProfileContext from'../../context/profile/ProfileContext';import{useNavigate}from'react-router-dom';import'@vime/core/themes/default.css';import{Player,Hls,DefaultUi,Settings,MenuItem,Submenu,MenuRadio,MenuRadioGroup}from'@vime/react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Part=function Part(){var navigate=useNavigate();var file=useContext(ProfileContext);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),url=_useState2[0],setUrl=_useState2[1];var _useState3=useState(480),_useState4=_slicedToArray(_useState3,2),quality=_useState4[0],setQuality=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),rate=_useState6[0],setRate=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),pate=_useState8[0],setPate=_useState8[1];var vlink=process.env.REACT_APP_VIDEO_LINK;var clink=process.env.REACT_APP_LINK;useEffect(function(){setQuality(file.profile.quality);},[]);useEffect(function(){setUrl(\"\".concat(vlink,\"/course/\").concat(file.profile.current.category,\"/\").concat(file.profile.current.bname,\"/v\").concat(quality,\"p/index.m3u8\"));if(file.profile.subscription==='false'){navigate('/');}if(file.profile.quality===quality){////////\n}else{setRate(1);axios.post(clink+'/update/quality',{id:file.profile.id,quality:quality});}},[quality]);var value=quality+'p';var balue=rate+\"x\";var hlsConfig={// ...\n};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Player,{volume:100,playbackRate:rate,children:[/*#__PURE__*/_jsx(Hls,{version:\"latest\",config:hlsConfig,poster:\"/media/poster.png\",children:/*#__PURE__*/_jsx(\"source\",{\"data-src\":url,type:\"application/x-mpegURL\"})}),/*#__PURE__*/_jsx(DefaultUi,{noSettings:true,children:/*#__PURE__*/_jsxs(Settings,{children:[/*#__PURE__*/_jsx(MenuItem,{label:\"Rank boost\",badge:\"Beta\"}),/*#__PURE__*/_jsx(Submenu,{label:\"playback speed\",hint:balue,children:/*#__PURE__*/_jsxs(MenuRadioGroup,{value:balue,children:[/*#__PURE__*/_jsx(MenuRadio,{onClick:function onClick(){setRate(0.5);},label:\"0.50x\",value:\"1\"}),/*#__PURE__*/_jsx(MenuRadio,{onClick:function onClick(){setRate(0.2);},label:\"0.25x\",value:\"2\"}),/*#__PURE__*/_jsx(MenuRadio,{onClick:function onClick(){setRate(1);},label:\"1x\",value:\"3\"}),/*#__PURE__*/_jsx(MenuRadio,{onClick:function onClick(){setRate(1.5);},label:\"1.50x\",value:\"5\"}),/*#__PURE__*/_jsx(MenuRadio,{onClick:function onClick(){setRate(2);},label:\"2x\",value:\"7\"})]})}),/*#__PURE__*/_jsx(Submenu,{label:\"video quality\",hint:value,children:/*#__PURE__*/_jsxs(MenuRadioGroup,{value:value,children:[/*#__PURE__*/_jsx(MenuRadio,{onClick:function onClick(){setQuality(144);},label:\"144p\",value:\"1\"}),/*#__PURE__*/_jsx(MenuRadio,{onClick:function onClick(){setQuality(240);},label:\"240p\",value:\"2\"}),/*#__PURE__*/_jsx(MenuRadio,{onClick:function onClick(){setQuality(360);},label:\"360p\",value:\"3\"}),/*#__PURE__*/_jsx(MenuRadio,{onClick:function onClick(){setQuality(480);},label:\"480p\",value:\"4\"}),/*#__PURE__*/_jsx(MenuRadio,{onClick:function onClick(){setQuality(720);},label:\"720p\",value:\"5\"}),/*#__PURE__*/_jsx(MenuRadio,{onClick:function onClick(){setQuality(1080);},label:\"1080p\",value:\"6\"})]})})]})})]})});};export default Part;","map":{"version":3,"names":["React","useContext","useEffect","useState","ProfileContext","useNavigate","Player","Hls","DefaultUi","Settings","MenuItem","Submenu","MenuRadio","MenuRadioGroup","axios","Part","navigate","file","url","setUrl","quality","setQuality","rate","setRate","pate","setPate","vlink","process","env","REACT_APP_VIDEO_LINK","clink","REACT_APP_LINK","profile","current","category","bname","subscription","post","id","value","balue","hlsConfig"],"sources":["/root/rankboost/deployment/website/src/components/course/Part.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport ProfileContext from '../../context/profile/ProfileContext'\nimport { useNavigate } from 'react-router-dom'\nimport '@vime/core/themes/default.css';\nimport {\n  Player, Hls, DefaultUi,\n  Settings,\n  MenuItem,\n  Submenu,\n  MenuRadio,\n  MenuRadioGroup,\n} from '@vime/react';\nimport axios from 'axios'\n\n\n\n\nconst Part = () => {\n\n  const navigate = useNavigate();\n  const file = useContext(ProfileContext);\n  const [url, setUrl] = useState('');\n  const [quality, setQuality] = useState(480)\n  const [rate, setRate] = useState(1);\n  const [pate, setPate] = useState(1);\n\n  const vlink = process.env.REACT_APP_VIDEO_LINK\n  const clink = process.env.REACT_APP_LINK\n\n\n  useEffect(() => {\n    setQuality(file.profile.quality)\n  },[])\n\n  useEffect(() => {\n    setUrl(`${vlink}/course/${file.profile.current.category}/${file.profile.current.bname}/v${quality}p/index.m3u8`);\n    if (file.profile.subscription === 'false') {\n      navigate('/')\n    }\n  \n    if (file.profile.quality === quality) {\n      ////////\n    }else{\n      setRate(1)\n      axios.post(clink+'/update/quality',{id:file.profile.id, quality})\n    }\n  }, [quality]);\n\n  var value = quality + 'p'\n  var balue = rate + \"x\"\n  const hlsConfig = {\n    // ...\n  };\n\n\n  return (\n    <>\n      <Player volume={100} playbackRate={rate}>\n\n        <Hls version=\"latest\" config={hlsConfig} poster=\"/media/poster.png\">\n          <source data-src={url} type=\"application/x-mpegURL\" />\n        </Hls>\n\n\n\n        <DefaultUi noSettings>\n          <Settings>\n            <MenuItem\n              label=\"Rank boost\"\n              badge=\"Beta\"\n            />\n            <Submenu label=\"playback speed\" hint={balue} >\n              <MenuRadioGroup value={balue} >\n                <MenuRadio onClick={() => { setRate(0.5) }} label=\"0.50x\" value=\"1\" />\n                <MenuRadio onClick={() => { setRate(0.2) }} label=\"0.25x\" value=\"2\" />\n                <MenuRadio onClick={() => { setRate(1) }} label=\"1x\" value=\"3\" />\n                <MenuRadio onClick={() => { setRate(1.5) }} label=\"1.50x\" value=\"5\" />\n                <MenuRadio onClick={() => { setRate(2) }} label=\"2x\" value=\"7\" />\n              </MenuRadioGroup>\n            </Submenu>\n\n            <Submenu label=\"video quality\" hint={value} >\n              <MenuRadioGroup value={value} >\n                <MenuRadio onClick={() => { setQuality(144) }} label=\"144p\" value=\"1\" />\n                <MenuRadio onClick={() => { setQuality(240) }} label=\"240p\" value=\"2\" />\n                <MenuRadio onClick={() => { setQuality(360) }} label=\"360p\" value=\"3\" />\n                <MenuRadio onClick={() => { setQuality(480) }} label=\"480p\" value=\"4\" />\n                <MenuRadio onClick={() => { setQuality(720) }} label=\"720p\" value=\"5\" />\n                <MenuRadio onClick={() => { setQuality(1080) }} label=\"1080p\" value=\"6\" />\n              </MenuRadioGroup>\n            </Submenu>\n          </Settings>\n        </DefaultUi>\n      </Player>\n\n\n    </>\n  )\n}\n\nexport default Part"],"mappings":"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"},"metadata":{},"sourceType":"module"}