{"ast":null,"code":"import _regeneratorRuntime from\"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'./login.css';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Otp=function Otp(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),otp=_useState2[0],setOtp=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),tokn=_useState4[0],setTokn=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),valid=_useState6[0],setValid=_useState6[1];var _useState7=useState(120),_useState8=_slicedToArray(_useState7,2),seconds=_useState8[0],setSeconds=_useState8[1];var navigate=useNavigate();var clink=process.env.REACT_APP_LINK;var id=props.id;useEffect(function(){if(valid==='yes'){localStorage.setItem('token',tokn);alert(\"Registered successfully\");navigate('/price');window.location.reload();}});var sendotp=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var blink;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:blink=90;_context.next=3;return axios.post(clink+'/otp',{otp:otp,id:id,blink:blink}).then(function(response){if(response.data.message==='yes'){setValid(response.data.message);setTokn(response.data.token);}else if(response.data.message==='no'){alert('WRONG');}else{console.log('something went wrong');}});case 3:case\"end\":return _context.stop();}}},_callee);}));return function sendotp(){return _ref.apply(this,arguments);};}();var reotp=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(seconds<70)){_context2.next=6;break;}_context2.next=3;return axios.post(clink+'/endverify',{id:id});case 3:setSeconds(120);_context2.next=7;break;case 6:alert(\"OTP can be resend after \".concat(seconds-70));case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function reotp(){return _ref2.apply(this,arguments);};}();var timer;useEffect(function(){timer=setInterval(function(){setSeconds(seconds-1);if(seconds===0){reotp();setSeconds(120);}},1000);return function(){return clearInterval(timer);};});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"deactivate-dis\",children:[/*#__PURE__*/_jsx(\"form\",{method:\"post\",onSubmit:function onSubmit(e){e.preventDefault();},encType:\"application/json\",children:/*#__PURE__*/_jsx(\"input\",{type:\"otp\",value:otp,onChange:function onChange(e){return setOtp(e.target.value);},autoComplete:\"off\",placeholder:\"OTP\",name:\"otp\",style:{width:'80%'}})}),/*#__PURE__*/_jsx(\"button\",{className:\"login-submit\",type:\"submit\",onClick:sendotp,children:\"Submit\"}),/*#__PURE__*/_jsx(\"a\",{className:\"resend\",onClick:reotp,children:\"Resend Otp\"}),/*#__PURE__*/_jsx(\"div\",{className:\"otp-exp\",children:/*#__PURE__*/_jsx(\"h3\",{id:\"e\",style:{color:'black',marginTop:'2rem',fontFamily:\"\\\"Roboto\\\", sans-serif\",fontSize:'1.2rem'},children:seconds<5&&seconds>0?'EXPIRED, New OTP will be generated':\"OTP will expire in \".concat(seconds)})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"activate-dis\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mkijn\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"MOB-otp\",method:\"post\",onSubmit:function onSubmit(e){e.preventDefault();},encType:\"application/json\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"otp\",value:otp,onChange:function onChange(e){return setOtp(e.target.value);},autoComplete:\"off\",placeholder:\"OTP\",name:\"otp\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"MOB-otp-exp\",children:[/*#__PURE__*/_jsx(\"h3\",{id:\"e\",children:seconds<5&&seconds>0?'EXPIRED, New OTP will be generated':\"OTP will expire in \".concat(seconds)}),/*#__PURE__*/_jsx(\"a\",{className:\"MOB-resend\",onClick:reotp,children:\"Resend Otp\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"MOB-Plogin-submit\",type:\"submit\",onClick:sendotp,children:\"Submit\"})]})})]});};export default Otp;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","Otp","props","otp","setOtp","tokn","setTokn","valid","setValid","seconds","setSeconds","navigate","clink","process","env","REACT_APP_LINK","id","localStorage","setItem","alert","window","location","reload","sendotp","blink","post","then","response","data","message","token","console","log","reotp","timer","setInterval","clearInterval","e","preventDefault","target","value","width","color","marginTop","fontFamily","fontSize"],"sources":["/root/rankboost/deployment/website/src/components/auth/Otp.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport './login.css'\nimport axios from 'axios'\nimport { useNavigate } from 'react-router-dom'\n\n\nconst Otp = (props) => {\n\n    const [otp, setOtp] = useState('');\n    const [tokn, setTokn] = useState('');\n    const [valid, setValid] = useState('');\n    const [seconds, setSeconds] = useState(120);\n    const navigate = useNavigate();\n    const clink = process.env.REACT_APP_LINK\n\n\n\n\n    const { id } = props;\n\n\n    useEffect(() => {\n        if (valid === 'yes') {\n            localStorage.setItem('token', tokn)\n            alert(\"Registered successfully\")\n            navigate('/price')\n            window.location.reload()\n        }\n    })\n\n    const sendotp = async () => {\n\n\n        var blink = 90;\n        await axios.post(clink+'/otp', { otp, id, blink })\n            .then(response => {\n                if (response.data.message === 'yes') {\n                    setValid(response.data.message);\n                    setTokn(response.data.token)\n                }else if (response.data.message === 'no') {\n                    alert('WRONG')\n                }\n                else {\n                    console.log('something went wrong');\n                }\n            })\n\n    }\n    const reotp = async () => {\n\n        if (seconds < 70) {\n            await axios.post(clink+'/endverify', {id})\n            setSeconds(120);\n        }\n        else{\n            alert(`OTP can be resend after ${seconds-70}`)\n        }\n    }\n\n    var timer;\n\n    useEffect(() => {\n\n        timer = setInterval(() => {\n            setSeconds(seconds - 1);\n            if (seconds === 0) {\n                reotp();\n                setSeconds(120);\n            }\n        }, 1000)\n\n        return () => clearInterval(timer)\n    })\n\n\n    return (\n        <>\n            <div className=\"deactivate-dis\">\n                <form method=\"post\" onSubmit={e => { e.preventDefault(); }} encType=\"application/json\">\n                    <input\n                        type=\"otp\"\n                        value={otp}\n                        onChange={(e) => setOtp(e.target.value)}\n                        autoComplete=\"off\"\n                        placeholder=\"OTP\"\n                        name=\"otp\"\n                        style={{ width: '80%' }}\n                    ></input>\n                </form>\n                <button className=\"login-submit\" type=\"submit\" onClick={sendotp}>Submit</button>\n                <a className=\"resend\" onClick={reotp}>Resend Otp</a>\n                <div className=\"otp-exp\">\n                    <h3 id='e' style={{ color: 'black', marginTop: '2rem', fontFamily: `\"Roboto\", sans-serif`, fontSize: '1.2rem' }}>{seconds < 5 && seconds > 0 ? 'EXPIRED, New OTP will be generated' : `OTP will expire in ${seconds}`}</h3>\n                </div>\n            </div>\n\n            {/* MOBILE DEV  */}\n\n            <div className=\"activate-dis\">\n                <div className=\"mkijn\">\n                    <form className=\"MOB-otp\" method=\"post\" onSubmit={e => { e.preventDefault(); }} encType=\"application/json\">\n                        <input\n                            type=\"otp\"\n                            value={otp}\n                            onChange={(e) => setOtp(e.target.value)}\n                            autoComplete=\"off\"\n                            placeholder=\"OTP\"\n                            name=\"otp\"\n                        ></input>\n                        <div className=\"MOB-otp-exp\">\n                            <h3 id='e'>{seconds < 5 && seconds > 0 ? 'EXPIRED, New OTP will be generated' : `OTP will expire in ${seconds}`}</h3>\n                            <a className=\"MOB-resend\" onClick={reotp}>Resend Otp</a>\n                        </div>\n                    </form>\n                    <button className=\"MOB-Plogin-submit\" type=\"submit\" onClick={sendotp}>Submit</button>\n                </div>\n            </div>\n\n        </>\n    )\n}\n\nexport default Otp"],"mappings":"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"},"metadata":{},"sourceType":"module"}