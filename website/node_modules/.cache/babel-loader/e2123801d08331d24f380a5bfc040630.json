{"ast":null,"code":"import _slicedToArray from \"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _defineProperty from \"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _toConsumableArray from \"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _assertThisInitialized from \"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _wrapNativeSuper from \"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js\";\nimport _regeneratorRuntime from \"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _classCallCheck from \"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/root/rankboost/deployment/website/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { getElement, getRenderingRef, writeTask, h, attachShadow, Host, createEvent, Fragment, proxyCustomElement } from '@stencil/core/internal/client';\nexport { setAssetPath, setPlatformOptions } from '@stencil/core/internal/client';\n/**\n * Listen to an event on the given DOM node. Returns a callback to remove the event listener.\n */\n\nfunction listen(node, event, handler, options) {\n  node.addEventListener(event, handler, options);\n  return function () {\n    return node.removeEventListener(event, handler, options);\n  };\n}\n\nfunction fireEventAndRetry(el, event, onFail) {\n  var interval = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 300;\n  var maxRetries = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 10;\n  var timeout;\n  var attempt = 0;\n  var found = false;\n\n  function retry() {\n    if (found) return;\n    timeout = setTimeout(function () {\n      if (attempt === maxRetries) {\n        onFail === null || onFail === void 0 ? void 0 : onFail();\n        return;\n      }\n\n      el.dispatchEvent(event);\n      attempt += 1;\n      retry();\n    }, interval);\n  }\n\n  retry();\n  return function () {\n    window.clearTimeout(timeout);\n    found = true;\n  };\n}\n\nvar isColliding = function isColliding(a, b) {\n  var translateAx = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var translateAy = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  var translateBx = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  var translateBy = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n  var aRect = a.getBoundingClientRect();\n  var bRect = b.getBoundingClientRect();\n  return aRect.left + translateAx < bRect.right + translateBx && aRect.right + translateAx > bRect.left + translateBx && aRect.top + translateAy < bRect.bottom + translateBy && aRect.bottom + translateAy > bRect.top + translateBy;\n};\n/**\n * No-operation (noop).\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-function\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\nvar noop = function noop() {// ...\n};\n/**\n * Checks if `value` is `null`.\n *\n * @param value - The value to check.\n */\n\n\nvar isNull = function isNull(value) {\n  return value === null;\n};\n/**\n * Checks if `value` is `undefined`.\n *\n * @param value - The value to check.\n */\n\n\nvar isUndefined = function isUndefined(value) {\n  return typeof value === 'undefined';\n};\n/**\n * Checks if `value` is `null` or `undefined`.\n *\n * @param value - The value to check.\n */\n\n\nvar isNil = function isNil(value) {\n  return isNull(value) || isUndefined(value);\n};\n/**\n * Returns the constructor of the given `value`.\n *\n * @param value - The value to return the constructor of.\n */\n\n\nvar getConstructor = function getConstructor(value) {\n  return (// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    !isNil(value) ? value.constructor : undefined\n  );\n};\n/**\n * Checks if `value` is classified as a `Object` object.\n *\n * @param value - The value to check.\n */\n\n\nvar isObject = function isObject(value) {\n  return getConstructor(value) === Object;\n};\n/**\n * Checks if `value` is classified as a `Number` object.\n *\n * @param value - The value to check.\n */\n\n\nvar isNumber = function isNumber(value) {\n  return getConstructor(value) === Number && !Number.isNaN(value);\n};\n/**\n * Checks if `value` is classified as a `String` object.\n *\n * @param value - The value to check.\n */\n\n\nvar isString = function isString(value) {\n  return getConstructor(value) === String;\n};\n/**\n * Checks if `value` is classified as a `Boolean` object.\n *\n * @param value - The value to check.\n */\n\n\nvar isBoolean = function isBoolean(value) {\n  return getConstructor(value) === Boolean;\n};\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @param value - The value to check.\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\n\n\nvar isFunction = function isFunction(value) {\n  return getConstructor(value) === Function;\n};\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @param value - The value to check.\n */\n\n\nvar isArray = function isArray(value) {\n  return Array.isArray(value);\n};\n/**\n * Checks if `value` is an instanceof the given `constructor`.\n *\n * @param value - The value to check.\n * @param constructor - The constructor to check against.\n */\n\n\nvar isInstanceOf = function isInstanceOf(value, constructor) {\n  return Boolean(value && constructor && value instanceof constructor);\n};\n/**\n * Creates an empty Promise and defers resolving/rejecting it.\n */\n\n\nvar deferredPromise = function deferredPromise() {\n  var resolve = noop;\n  var reject = noop;\n  var promise = new Promise(function (res, rej) {\n    resolve = res;\n    reject = rej;\n  });\n  return {\n    promise: promise,\n    resolve: resolve,\n    reject: reject\n  };\n};\n\nfunction wrapStencilHook(component, lifecycle, hook) {\n  var prevHook = component[lifecycle];\n\n  component[lifecycle] = function () {\n    hook();\n    return prevHook ? prevHook.call(component) : undefined;\n  };\n}\n\nfunction createStencilHook(component, onConnect, onDisconnect) {\n  var hasLoaded = false;\n\n  if (!isUndefined(onConnect)) {\n    wrapStencilHook(component, 'componentWillLoad', function () {\n      onConnect();\n      hasLoaded = true;\n    });\n    wrapStencilHook(component, 'connectedCallback', function () {\n      if (hasLoaded) onConnect();\n    });\n  }\n\n  if (!isUndefined(onDisconnect)) {\n    wrapStencilHook(component, 'disconnectedCallback', function () {\n      onDisconnect();\n    });\n  }\n}\n\nvar FIND_PLAYER_EVENT = 'vmFindPlayer';\n\nfunction withFindPlayer(player) {\n  var el = getElement(player);\n  var off;\n  createStencilHook(player, function () {\n    off = listen(el, FIND_PLAYER_EVENT, function (event) {\n      event.stopPropagation();\n      event.detail(el);\n    });\n  }, function () {\n    off === null || off === void 0 ? void 0 : off();\n  });\n}\n/**\n * Finds the closest ancestor player element by firing the `vmFindPlayer` event, and waiting\n * for the player to catch it. This function retries finding the player (`maxRetries`) until it\n * gives up and fails.\n *\n * @param ref - A HTMLElement that is within the player's subtree.\n * @param interval - The length of the timeout before trying again in milliseconds.\n * @param maxRetries - The number of times to retry firing the event.\n */\n\n\nvar findPlayer = function findPlayer(ref) {\n  var interval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 300;\n  var maxRetries = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n  var el = isInstanceOf(ref, HTMLElement) ? ref : getElement(ref);\n  var search = deferredPromise(); // eslint-disable-next-line prefer-const\n\n  var stopFiring;\n  var event = new CustomEvent(FIND_PLAYER_EVENT, {\n    bubbles: true,\n    composed: true,\n    detail: function detail(player) {\n      search.resolve(player);\n      stopFiring();\n    }\n  });\n  stopFiring = fireEventAndRetry(el, event, function () {\n    search.reject(\"Could not find player for \".concat(el.nodeName));\n  }, interval, maxRetries);\n  return search.promise;\n};\n\nvar MediaType;\n\n(function (MediaType) {\n  MediaType[\"Audio\"] = \"audio\";\n  MediaType[\"Video\"] = \"video\";\n})(MediaType || (MediaType = {}));\n\nvar STATE_CHANGE_EVENT = 'vmStateChange';\n/**\n * Creates a dispatcher on the given `ref`, to send updates to the closest ancestor player via\n * the custom `vmStateChange` event.\n *\n * @param ref An element to dispatch the state change events from.\n */\n\nvar createDispatcher = function createDispatcher(ref) {\n  return function (prop, value) {\n    var el = isInstanceOf(ref, HTMLElement) ? ref : getElement(ref);\n    var event = new CustomEvent(STATE_CHANGE_EVENT, {\n      bubbles: true,\n      composed: true,\n      detail: {\n        by: el,\n        prop: prop,\n        value: value\n      }\n    });\n    el.dispatchEvent(event);\n  };\n};\n\nvar en = {\n  play: 'Play',\n  pause: 'Pause',\n  playback: 'Playback',\n  scrubber: 'Scrubber',\n  scrubberLabel: '{currentTime} of {duration}',\n  played: 'Played',\n  duration: 'Duration',\n  buffered: 'Buffered',\n  close: 'Close',\n  currentTime: 'Current time',\n  live: 'LIVE',\n  volume: 'Volume',\n  mute: 'Mute',\n  unmute: 'Unmute',\n  audio: 'Audio',\n  default: 'Default',\n  captions: 'Captions',\n  subtitlesOrCc: 'Subtitles/CC',\n  enableCaptions: 'Enable subtitles/captions',\n  disableCaptions: 'Disable subtitles/captions',\n  auto: 'Auto',\n  fullscreen: 'Fullscreen',\n  enterFullscreen: 'Enter fullscreen',\n  exitFullscreen: 'Exit fullscreen',\n  settings: 'Settings',\n  seekForward: 'Seek forward',\n  seekBackward: 'Seek backward',\n  seekTotal: 'Seek total',\n  normal: 'Normal',\n  none: 'None',\n  playbackRate: 'Playback Rate',\n  playbackQuality: 'Playback Quality',\n  loop: 'Loop',\n  disabled: 'Disabled',\n  off: 'Off',\n  enabled: 'Enabled',\n  pip: 'Picture-in-Picture',\n  enterPiP: 'Miniplayer',\n  exitPiP: 'Expand'\n};\nvar initialState = {\n  theme: undefined,\n  paused: true,\n  playing: false,\n  duration: -1,\n  currentProvider: undefined,\n  mediaTitle: undefined,\n  currentSrc: undefined,\n  currentPoster: undefined,\n  textTracks: [],\n  currentTextTrack: -1,\n  audioTracks: [],\n  currentAudioTrack: -1,\n  isTextTrackVisible: true,\n  shouldRenderNativeTextTracks: true,\n  icons: 'vime',\n  currentTime: 0,\n  autoplay: false,\n  ready: false,\n  playbackReady: false,\n  loop: false,\n  muted: false,\n  buffered: 0,\n  playbackRate: 1,\n  playbackRates: [1],\n  playbackQuality: undefined,\n  playbackQualities: [],\n  seeking: false,\n  debug: false,\n  playbackStarted: false,\n  playbackEnded: false,\n  buffering: false,\n  controls: false,\n  isControlsActive: false,\n  volume: 50,\n  isFullscreenActive: false,\n  aspectRatio: '16:9',\n  viewType: undefined,\n  isAudioView: false,\n  isVideoView: false,\n  mediaType: undefined,\n  isAudio: false,\n  isVideo: false,\n  isMobile: false,\n  isTouch: false,\n  isSettingsActive: false,\n  isLive: false,\n  isPiPActive: false,\n  autopause: true,\n  playsinline: false,\n  language: 'en',\n  languages: ['en'],\n  translations: {\n    en: en\n  },\n  i18n: en\n};\nvar writableProps = new Set(['autoplay', 'autopause', 'aspectRatio', 'controls', 'theme', 'debug', 'paused', 'currentTime', 'language', 'loop', 'translations', 'playbackQuality', 'muted', 'playbackRate', 'playsinline', 'volume', 'isSettingsActive', 'isControlsActive', 'shouldRenderNativeTextTracks']);\n\nvar isWritableProp = function isWritableProp(prop) {\n  return writableProps.has(prop);\n};\n/**\n * Player properties that should be reset when the media is changed.\n */\n\n\nvar resetableProps = new Set(['paused', 'currentTime', 'duration', 'buffered', 'seeking', 'playing', 'buffering', 'playbackReady', 'textTracks', 'currentTextTrack', 'audioTracks', 'currentAudioTrack', 'mediaTitle', 'currentSrc', 'currentPoster', 'playbackRate', 'playbackRates', 'playbackStarted', 'playbackEnded', 'playbackQuality', 'playbackQualities', 'mediaType']);\n\nvar shouldPropResetOnMediaChange = function shouldPropResetOnMediaChange(prop) {\n  return resetableProps.has(prop);\n};\n\nvar ViewType;\n\n(function (ViewType) {\n  ViewType[\"Audio\"] = \"audio\";\n  ViewType[\"Video\"] = \"video\";\n})(ViewType || (ViewType = {}));\n\nvar Disposal = /*#__PURE__*/function () {\n  function Disposal() {\n    var dispose = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, Disposal);\n\n    this.dispose = dispose;\n  }\n\n  _createClass(Disposal, [{\n    key: \"add\",\n    value: function add(callback) {\n      this.dispose.push(callback);\n    }\n  }, {\n    key: \"empty\",\n    value: function empty() {\n      this.dispose.forEach(function (fn) {\n        return fn();\n      });\n      this.dispose = [];\n    }\n  }]);\n\n  return Disposal;\n}();\n\nvar __awaiter$y = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar PLAYER_KEY = Symbol('vmPlayerKey');\nvar COMPONENT_NAME_KEY = Symbol('vmNameKey');\nvar REGISTRY_KEY = Symbol('vmRegistryKey');\nvar REGISTRATION_KEY = Symbol('vmRegistrationKey');\nvar REGISTER_COMPONENT_EVENT = 'vmComponentRegister';\nvar COMPONENT_REGISTERED_EVENT = 'vmComponentRegistered';\nvar COMPONENT_DEREGISTERED_EVENT = 'vmComponentDeregistered';\n\nvar getRegistrant = function getRegistrant(ref) {\n  return isInstanceOf(ref, HTMLElement) ? ref : getElement(ref);\n};\n/**\n * Handles registering/deregistering the given `component` in the player registry. All registries\n * are bound per player subtree.\n *\n * @param ref - A Stencil component instance or HTMLElement.\n */\n\n\nfunction withComponentRegistry(ref, name) {\n  var registryId = Symbol('vmRegistryId');\n  var registrant = getRegistrant(ref);\n  registrant[COMPONENT_NAME_KEY] = name !== null && name !== void 0 ? name : registrant.nodeName.toLowerCase();\n  registrant[REGISTRATION_KEY] = registryId;\n\n  var buildEvent = function buildEvent(eventName) {\n    return new CustomEvent(eventName, {\n      bubbles: true,\n      composed: true,\n      detail: registrant\n    });\n  };\n\n  var registerEvent = buildEvent(REGISTER_COMPONENT_EVENT);\n  createStencilHook(ref, function () {\n    registrant.dispatchEvent(registerEvent);\n  });\n}\n\nfunction withComponentRegistrar(player) {\n  var el = getElement(player);\n  var registry = new Map();\n  var disposal = new Disposal(); // TODO properly type this later.\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  el[REGISTRY_KEY] = registry;\n\n  function onDeregister(registrant) {\n    delete registrant[PLAYER_KEY];\n    delete registrant[REGISTRY_KEY];\n    registry.delete(registrant[REGISTRATION_KEY]);\n    el.dispatchEvent(new CustomEvent(COMPONENT_DEREGISTERED_EVENT, {\n      detail: registrant\n    }));\n  }\n\n  function onRegister(e) {\n    var ref = e.detail;\n    var registrant = getRegistrant(ref);\n    registrant[PLAYER_KEY] = el;\n    registrant[REGISTRY_KEY] = registry;\n    registry.set(registrant[REGISTRATION_KEY], registrant);\n    el.dispatchEvent(new CustomEvent(COMPONENT_REGISTERED_EVENT, {\n      detail: registrant\n    }));\n    createStencilHook(ref, undefined, function () {\n      return onDeregister(registrant);\n    });\n  }\n\n  createStencilHook(player, function () {\n    disposal.add(listen(el, REGISTER_COMPONENT_EVENT, onRegister));\n  }, function () {\n    registry.clear();\n    disposal.empty();\n    delete player[REGISTRY_KEY];\n  });\n}\n/**\n * Checks whether any component with the given `name` exists in the registry. All registries\n * are bound per player subtree.\n *\n * @param ref - A Stencil component instance or HTMLElement.\n * @param name - The name of the component to search for.\n */\n\n\nfunction isComponentRegistered(ref, name) {\n  var _a;\n\n  var registrant = getRegistrant(ref);\n  var registry = registrant[REGISTRY_KEY];\n  return Array.from((_a = registry === null || registry === void 0 ? void 0 : registry.values()) !== null && _a !== void 0 ? _a : []).some(function (r) {\n    return r[COMPONENT_NAME_KEY] === name;\n  });\n}\n/**\n * Returns the player for the given `ref`. This will only work after the component has been\n * registered, prefer using `findPlayer`.\n *\n * @param ref - A Stencil component instance or HTMLElement.\n */\n\n\nfunction getPlayerFromRegistry(ref) {\n  var registrant = getRegistrant(ref);\n  return registrant[PLAYER_KEY];\n}\n/**\n * Returns a collection of components from the registry for the given `ref`. All registries\n * are bound per player subtree.\n *\n * @param ref - A Stencil component instance or HTMLElement.\n * @param name - The name of the components to search for in the registry.\n */\n\n\nfunction getComponentFromRegistry(ref, name) {\n  var _a, _b;\n\n  var registrant = getRegistrant(ref);\n  return Array.from((_b = (_a = registrant[REGISTRY_KEY]) === null || _a === void 0 ? void 0 : _a.values()) !== null && _b !== void 0 ? _b : []).filter(function (r) {\n    return r[COMPONENT_NAME_KEY] === name;\n  });\n}\n/**\n * Watches the current registry on the given `ref` for changes. All registries are bound per\n * player subtree.\n *\n * @param ref - A Stencil component instance or HTMLElement.\n * @param name - The name of the component to watch for.\n * @param onChange - A callback that is called when a component is registered/deregistered.\n */\n\n\nfunction watchComponentRegistry(ref, name, onChange) {\n  var _a;\n\n  return __awaiter$y(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var player, disposal, registry, listener;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            listener = function _listener(e) {\n              if (e.detail[COMPONENT_NAME_KEY] === name) onChange === null || onChange === void 0 ? void 0 : onChange(getComponentFromRegistry(player, name));\n            };\n\n            _context.next = 3;\n            return findPlayer(ref);\n\n          case 3:\n            player = _context.sent;\n            disposal = new Disposal();\n            registry = getRegistrant(ref)[REGISTRY_KEY];\n            // Hydrate.\n            Array.from((_a = registry === null || registry === void 0 ? void 0 : registry.values()) !== null && _a !== void 0 ? _a : []).forEach(function (reg) {\n              return listener(new CustomEvent('', {\n                detail: reg\n              }));\n            });\n\n            if (!isUndefined(player)) {\n              disposal.add(listen(player, COMPONENT_REGISTERED_EVENT, listener));\n              disposal.add(listen(player, COMPONENT_DEREGISTERED_EVENT, listener));\n            }\n\n            createStencilHook(ref, function () {// no-op\n            }, function () {\n              disposal.empty();\n            });\n            return _context.abrupt(\"return\", function () {\n              disposal.empty();\n            });\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\n\nvar createDeferredPromise = function createDeferredPromise() {\n  var resolve;\n  var promise = new Promise(function (res) {\n    resolve = res;\n  });\n  return {\n    promise: promise,\n    resolve: resolve\n  };\n};\n\nvar openWormhole = function openWormhole(Component, props, isBlocking) {\n  if (isBlocking === void 0) {\n    isBlocking = true;\n  }\n\n  var isConstructor = Component.constructor.name === 'Function';\n  var Proto = isConstructor ? Component.prototype : Component;\n  var componentWillLoad = Proto.componentWillLoad;\n\n  Proto.componentWillLoad = function () {\n    var _this = this;\n\n    var el = getElement(this);\n    var onOpen = createDeferredPromise();\n    var event = new CustomEvent('openWormhole', {\n      bubbles: true,\n      composed: true,\n      detail: {\n        consumer: this,\n        fields: props,\n        updater: function updater(prop, value) {\n          var target = prop in el ? el : _this;\n          target[prop] = value;\n        },\n        onOpen: onOpen\n      }\n    });\n    el.dispatchEvent(event);\n\n    var willLoad = function willLoad() {\n      if (componentWillLoad) {\n        return componentWillLoad.call(_this);\n      }\n    };\n\n    return isBlocking ? onOpen.promise.then(function () {\n      return willLoad();\n    }) : willLoad();\n  };\n};\n\nvar multiverse = new Map();\n\nvar updateConsumer = function updateConsumer(_a, state) {\n  var fields = _a.fields,\n      updater = _a.updater;\n  fields.forEach(function (field) {\n    updater(field, state[field]);\n  });\n};\n\nvar Universe = {\n  create: function create(creator, initialState) {\n    var el = getElement(creator);\n    var wormholes = new Map();\n    var universe = {\n      wormholes: wormholes,\n      state: initialState\n    };\n    multiverse.set(creator, universe);\n    var connectedCallback = creator.connectedCallback;\n\n    creator.connectedCallback = function () {\n      multiverse.set(creator, universe);\n\n      if (connectedCallback) {\n        connectedCallback.call(creator);\n      }\n    };\n\n    var disconnectedCallback = creator.disconnectedCallback;\n\n    creator.disconnectedCallback = function () {\n      multiverse.delete(creator);\n\n      if (disconnectedCallback) {\n        disconnectedCallback.call(creator);\n      }\n    };\n\n    el.addEventListener('openWormhole', function (event) {\n      event.stopPropagation();\n      var _a = event.detail,\n          consumer = _a.consumer,\n          onOpen = _a.onOpen;\n      if (wormholes.has(consumer)) return;\n\n      if (typeof consumer !== 'symbol') {\n        var connectedCallback_1 = consumer.connectedCallback,\n            disconnectedCallback_1 = consumer.disconnectedCallback;\n\n        consumer.connectedCallback = function () {\n          wormholes.set(consumer, event.detail);\n\n          if (connectedCallback_1) {\n            connectedCallback_1.call(consumer);\n          }\n        };\n\n        consumer.disconnectedCallback = function () {\n          wormholes.delete(consumer);\n\n          if (disconnectedCallback_1) {\n            disconnectedCallback_1.call(consumer);\n          }\n        };\n      }\n\n      wormholes.set(consumer, event.detail);\n      updateConsumer(event.detail, universe.state);\n      onOpen === null || onOpen === void 0 ? void 0 : onOpen.resolve(function () {\n        wormholes.delete(consumer);\n      });\n    });\n    el.addEventListener('closeWormhole', function (event) {\n      var consumer = event.detail;\n      wormholes.delete(consumer);\n    });\n  },\n  Provider: function Provider(_a, children) {\n    var state = _a.state;\n    var creator = getRenderingRef();\n\n    if (multiverse.has(creator)) {\n      var universe = multiverse.get(creator);\n      universe.state = state;\n      universe.wormholes.forEach(function (opening) {\n        updateConsumer(opening, state);\n      });\n    }\n\n    return children;\n  }\n};\nvar LOAD_START_EVENT = 'vmLoadStart'; // Events that toggle state and the prop is named `is{PropName}...`.\n\nvar isToggleStateEvent = new Set(['isFullscreenActive', 'isControlsActive', 'isTextTrackVisible', 'isPiPActive', 'isLive', 'isTouch', 'isAudio', 'isVideo', 'isAudioView', 'isVideoView']); // Events that are emitted without the 'Change' postfix.\n\nvar hasShortenedEventName = new Set(['ready', 'playbackStarted', 'playbackEnded', 'playbackReady']);\n\nvar getEventName = function getEventName(prop) {\n  // Example: isFullscreenActive -> vmFullscreenChange\n  if (isToggleStateEvent.has(prop)) {\n    return \"vm\".concat(prop.replace('is', '').replace('Active', ''), \"Change\");\n  } // Example: playbackStarted -> vmPlaybackStarted\n\n\n  if (hasShortenedEventName.has(prop)) {\n    return \"vm\".concat(prop.charAt(0).toUpperCase()).concat(prop.slice(1));\n  } // Example: currentTime -> vmCurrentTimeChange\n\n\n  return \"vm\".concat(prop.charAt(0).toUpperCase()).concat(prop.slice(1), \"Change\");\n};\n\nfunction firePlayerEvent(el, prop, newValue, oldValue) {\n  var events = [];\n  events.push(new CustomEvent(getEventName(prop), {\n    detail: newValue\n  }));\n  if (prop === 'paused' && !newValue) events.push(new CustomEvent('vmPlay'));\n  if (prop === 'seeking' && oldValue && !newValue) events.push(new CustomEvent('vmSeeked'));\n  events.forEach(function (event) {\n    el.dispatchEvent(event);\n  });\n}\n\nvar __awaiter$x = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n/**\n * Binds props between an instance of a given component class and it's closest ancestor player.\n *\n * @param component A Stencil component instance.\n * @param props A set of props to watch and update on the given component instance.\n */\n\n\nvar withPlayerContext = function withPlayerContext(component, props) {\n  return openWormhole(component, props);\n};\n/**\n * Finds the closest ancestor player to the given `ref` and watches the given props for changes. On\n * a prop change the given `updater` fn is called.\n *\n * @param ref A element within any player's subtree.\n * @param props A set of props to watch and call the `updater` fn with.\n * @param updater This function is called with the prop/value of any watched properties.\n */\n\n\nvar usePlayerContext = function usePlayerContext(ref, props, updater, playerRef) {\n  return __awaiter$x(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    var player, listeners;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!(playerRef !== null && playerRef !== void 0)) {\n              _context2.next = 4;\n              break;\n            }\n\n            _context2.t0 = playerRef;\n            _context2.next = 7;\n            break;\n\n          case 4:\n            _context2.next = 6;\n            return findPlayer(ref);\n\n          case 6:\n            _context2.t0 = _context2.sent;\n\n          case 7:\n            player = _context2.t0;\n            listeners = !isUndefined(player) ? props.map(function (prop) {\n              var event = getEventName(prop);\n              return listen(player, event, function () {\n                updater(prop, player[prop]);\n              });\n            }) : [];\n            return _context2.abrupt(\"return\", function () {\n              listeners.forEach(function (off) {\n                return off();\n              });\n            });\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n};\n\nvar Provider;\n\n(function (Provider) {\n  Provider[\"Audio\"] = \"audio\";\n  Provider[\"Video\"] = \"video\";\n  Provider[\"HLS\"] = \"hls\";\n  Provider[\"Dash\"] = \"dash\";\n  Provider[\"YouTube\"] = \"youtube\";\n  Provider[\"Vimeo\"] = \"vimeo\";\n  Provider[\"Dailymotion\"] = \"dailymotion\";\n})(Provider || (Provider = {}));\n\nvar audioRegex = /\\.(m4a|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\\?)/i;\nvar videoRegex = /\\.(mp4|og[gv]|webm|mov|m4v)($|\\?)/i;\nvar hlsRegex = /\\.(m3u8)($|\\?)/i;\nvar hlsTypeRegex = /^application\\/(x-mpegURL|vnd\\.apple\\.mpegURL)$/i;\nvar dashRegex = /\\.(mpd)($|\\?)/i;\nvar PROVIDER_CHANGE_EVENT = 'vmProviderChange';\n/**\n * Creates a dispatcher on the given `ref`, to send updates to the closest ancestor player via\n * the custom `vmProviderChange` event.\n *\n * @param ref A component reference to dispatch the state change events from.\n */\n\nvar createProviderDispatcher = function createProviderDispatcher(ref) {\n  return function (prop, value) {\n    var el = isInstanceOf(ref, HTMLElement) ? ref : getElement(ref);\n    var event = new CustomEvent(PROVIDER_CHANGE_EVENT, {\n      bubbles: true,\n      composed: true,\n      detail: {\n        by: el,\n        prop: prop,\n        value: value\n      }\n    });\n    el.dispatchEvent(event);\n  };\n};\n\nvar providerWritableProps = new Set(['ready', 'playing', 'playbackReady', 'playbackStarted', 'playbackEnded', 'seeking', 'buffered', 'buffering', 'duration', 'viewType', 'mediaTitle', 'mediaType', 'currentSrc', 'currentPoster', 'playbackRates', 'playbackQualities', 'textTracks', 'currentTextTrack', 'isTextTrackVisible', 'audioTracks', 'currentAudioTrack', 'isPiPActive', 'isFullscreenActive']);\n\nvar isProviderWritableProp = function isProviderWritableProp(prop) {\n  return isWritableProp(prop) || providerWritableProps.has(prop);\n};\n\nvar __awaiter$w = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar PROVIDER_CACHE_KEY = Symbol('vmProviderCache');\nvar PROVIDER_CONNECT_EVENT = 'vmMediaProviderConnect';\nvar PROVIDER_DISCONNECT_EVENT = 'vmMediaProviderDisconnect';\n\nfunction buildProviderConnectEvent(name, host) {\n  return new CustomEvent(name, {\n    bubbles: true,\n    composed: true,\n    detail: host\n  });\n}\n\nfunction withProviderHost(connector) {\n  var el = getElement(connector);\n  var disposal = new Disposal();\n  var cache = new Map();\n  connector[PROVIDER_CACHE_KEY] = cache;\n\n  function initCache() {\n    Object.keys(connector).forEach(function (prop) {\n      cache.set(prop, connector[prop]);\n    });\n  }\n\n  function onDisconnect() {\n    var _this2 = this;\n\n    writeTask(function () {\n      return __awaiter$w(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var _a;\n\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                connector.ready = false;\n                connector.provider = undefined;\n                cache.clear();\n                (_a = connector.onProviderDisconnect) === null || _a === void 0 ? void 0 : _a.call(connector);\n                el.dispatchEvent(buildProviderConnectEvent(PROVIDER_DISCONNECT_EVENT));\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n    });\n  }\n\n  function onConnect(event) {\n    var _this3 = this;\n\n    event.stopImmediatePropagation();\n    initCache();\n    var hostRef = event.detail;\n    var host = getElement(event.detail);\n    if (connector.provider === host) return;\n    var name = host === null || host === void 0 ? void 0 : host.nodeName.toLowerCase().replace('vm-', '');\n    writeTask(function () {\n      return __awaiter$w(_this3, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                connector.provider = host;\n                connector.currentProvider = Object.values(Provider).find(function (provider) {\n                  return name === provider;\n                });\n                createStencilHook(hostRef, undefined, function () {\n                  return onDisconnect();\n                });\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n    });\n  }\n\n  function onChange(event) {\n    var _a;\n\n    event.stopImmediatePropagation();\n    var _event$detail = event.detail,\n        by = _event$detail.by,\n        prop = _event$detail.prop,\n        value = _event$detail.value;\n\n    if (!isProviderWritableProp(prop)) {\n      (_a = connector.logger) === null || _a === void 0 ? void 0 : _a.warn(\"\".concat(by.nodeName, \" tried to change `\").concat(prop, \"` but it is readonly.\"));\n      return;\n    }\n\n    writeTask(function () {\n      cache.set(prop, value);\n      connector[prop] = value;\n    });\n  }\n\n  createStencilHook(connector, function () {\n    disposal.add(listen(el, PROVIDER_CONNECT_EVENT, onConnect));\n    disposal.add(listen(el, PROVIDER_CHANGE_EVENT, onChange));\n  }, function () {\n    disposal.empty();\n    cache.clear();\n  });\n}\n\nfunction withProviderConnect(ref) {\n  var connectEvent = buildProviderConnectEvent(PROVIDER_CONNECT_EVENT, ref);\n  createStencilHook(ref, function () {\n    getElement(ref).dispatchEvent(connectEvent);\n  });\n}\n\nvar __awaiter$v = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar Audio = /*#__PURE__*/function (_HTMLElement) {\n  _inherits(Audio, _HTMLElement);\n\n  var _super = _createSuper(Audio);\n\n  function Audio() {\n    var _this4;\n\n    _classCallCheck(this, Audio);\n\n    _this4 = _super.call(this);\n\n    _this4.__registerHost();\n    /**\n     * @internal Whether an external SDK will attach itself to the media player and control it.\n     */\n\n\n    _this4.willAttach = false;\n    /** @inheritdoc */\n\n    _this4.preload = 'metadata';\n    withComponentRegistry(_assertThisInitialized(_this4));\n    if (!_this4.willAttach) withProviderConnect(_assertThisInitialized(_this4));\n    return _this4;\n  }\n  /** @internal */\n\n\n  _createClass(Audio, [{\n    key: \"getAdapter\",\n    value: function getAdapter() {\n      var _a, _b;\n\n      return __awaiter$v(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var _this5 = this;\n\n        var adapter;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return (_a = this.fileProvider) === null || _a === void 0 ? void 0 : _a.getAdapter();\n\n              case 2:\n                _context6.t1 = _b = _context6.sent;\n                _context6.t0 = _context6.t1 !== null;\n\n                if (!_context6.t0) {\n                  _context6.next = 6;\n                  break;\n                }\n\n                _context6.t0 = _b !== void 0;\n\n              case 6:\n                if (!_context6.t0) {\n                  _context6.next = 10;\n                  break;\n                }\n\n                _context6.t2 = _b;\n                _context6.next = 11;\n                break;\n\n              case 10:\n                _context6.t2 = {};\n\n              case 11:\n                adapter = _context6.t2;\n\n                adapter.canPlay = function (type) {\n                  return __awaiter$v(_this5, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n                    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n                      while (1) {\n                        switch (_context5.prev = _context5.next) {\n                          case 0:\n                            return _context5.abrupt(\"return\", isString(type) && audioRegex.test(type));\n\n                          case 1:\n                          case \"end\":\n                            return _context5.stop();\n                        }\n                      }\n                    }, _callee5);\n                  }));\n                };\n\n                return _context6.abrupt(\"return\", adapter);\n\n              case 14:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return (// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        h(\"vm-file\", {\n          noConnect: true,\n          willAttach: this.willAttach,\n          crossOrigin: this.crossOrigin,\n          preload: this.preload,\n          disableRemotePlayback: this.disableRemotePlayback,\n          mediaTitle: this.mediaTitle,\n          viewType: ViewType.Audio,\n          ref: function ref(el) {\n            _this6.fileProvider = el;\n          }\n        }, h(\"slot\", null))\n      );\n    }\n  }]);\n\n  return Audio;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar captionControlCss = \":host([hidden]){display:none}\";\n\nvar __awaiter$u = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar CaptionControl = /*#__PURE__*/function (_HTMLElement2) {\n  _inherits(CaptionControl, _HTMLElement2);\n\n  var _super2 = _createSuper(CaptionControl);\n\n  function CaptionControl() {\n    var _this7;\n\n    _classCallCheck(this, CaptionControl);\n\n    _this7 = _super2.call(this);\n\n    _this7.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this7));\n    _this7.canToggleCaptionVisibility = false;\n    /**\n     * The URL to an SVG element or fragment to load.\n     */\n\n    _this7.showIcon = 'captions-on';\n    /**\n     * The URL to an SVG element or fragment to load.\n     */\n\n    _this7.hideIcon = 'captions-off';\n    /**\n     * Whether the tooltip is positioned above/below the control.\n     */\n\n    _this7.tooltipPosition = 'top';\n    /**\n     * Whether the tooltip should not be displayed.\n     */\n\n    _this7.hideTooltip = false;\n    /** @inheritdoc */\n\n    _this7.keys = 'c';\n    /** @internal */\n\n    _this7.i18n = {};\n    /** @internal */\n\n    _this7.playbackReady = false;\n    /** @internal */\n\n    _this7.textTracks = [];\n    /** @internal */\n\n    _this7.isTextTrackVisible = false;\n    withComponentRegistry(_assertThisInitialized(_this7));\n    withPlayerContext(_assertThisInitialized(_this7), ['i18n', 'textTracks', 'isTextTrackVisible', 'playbackReady']);\n    return _this7;\n  }\n\n  _createClass(CaptionControl, [{\n    key: \"onTextTracksChange\",\n    value: function onTextTracksChange() {\n      var _a;\n\n      return __awaiter$u(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n        var player;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                player = getPlayerFromRegistry(this);\n                _context7.t0 = this.textTracks.length > 0;\n\n                if (!_context7.t0) {\n                  _context7.next = 15;\n                  break;\n                }\n\n                _context7.next = 5;\n                return player === null || player === void 0 ? void 0 : player.canSetTextTrackVisibility();\n\n              case 5:\n                _context7.t2 = _a = _context7.sent;\n                _context7.t1 = _context7.t2 !== null;\n\n                if (!_context7.t1) {\n                  _context7.next = 9;\n                  break;\n                }\n\n                _context7.t1 = _a !== void 0;\n\n              case 9:\n                if (!_context7.t1) {\n                  _context7.next = 13;\n                  break;\n                }\n\n                _context7.t3 = _a;\n                _context7.next = 14;\n                break;\n\n              case 13:\n                _context7.t3 = false;\n\n              case 14:\n                _context7.t0 = _context7.t3;\n\n              case 15:\n                this.canToggleCaptionVisibility = _context7.t0;\n\n              case 16:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n    }\n  }, {\n    key: \"componentDidLoad\",\n    value: function componentDidLoad() {\n      this.onTextTracksChange();\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick() {\n      var _a;\n\n      var player = getPlayerFromRegistry(this);\n      (_a = player === null || player === void 0 ? void 0 : player.setTextTrackVisibility) === null || _a === void 0 ? void 0 : _a.call(player, !this.isTextTrackVisible);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var tooltip = this.isTextTrackVisible ? this.i18n.disableCaptions : this.i18n.enableCaptions;\n      var tooltipWithHint = !isUndefined(this.keys) ? \"\".concat(tooltip, \" (\").concat(this.keys, \")\") : tooltip;\n      return h(Host, {\n        hidden: !this.canToggleCaptionVisibility\n      }, h(\"vm-control\", {\n        label: this.i18n.captions,\n        keys: this.keys,\n        hidden: !this.canToggleCaptionVisibility,\n        pressed: this.isTextTrackVisible,\n        onClick: this.onClick.bind(this)\n      }, h(\"vm-icon\", {\n        name: this.isTextTrackVisible ? this.showIcon : this.hideIcon,\n        library: this.icons\n      }), h(\"vm-tooltip\", {\n        hidden: this.hideTooltip,\n        position: this.tooltipPosition,\n        direction: this.tooltipDirection\n      }, tooltipWithHint)));\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"textTracks\": [\"onTextTracksChange\"],\n        \"playbackReady\": [\"onTextTracksChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return captionControlCss;\n    }\n  }]);\n\n  return CaptionControl;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n/* eslint-disable func-names */\n\n\nvar watch$1 = new Set();\nvar controls = new Set(); // watchedEl -> (controlsEl -> controlsHeight) saved on collision. Basically keeps track of\n// every collision with all controls for each watched element.\n\nvar collisions = new Map();\n\nfunction update() {\n  writeTask(function () {\n    controls.forEach(function (controlsEl) {\n      var controlsHeight = parseFloat(window.getComputedStyle(controlsEl).height);\n      watch$1.forEach(function (watchedEl) {\n        var watchedElCollisions = collisions.get(watchedEl);\n        var hasCollided = isColliding(watchedEl, controlsEl);\n        var willCollide = isColliding(watchedEl, controlsEl, 0, controlsHeight) || isColliding(watchedEl, controlsEl, 0, -controlsHeight);\n        watchedElCollisions.set(controlsEl, hasCollided || willCollide ? controlsHeight : 0);\n      });\n    }); // Update after assessing all collisions so there are no glitchy movements.\n\n    watch$1.forEach(function (watchedEl) {\n      var watchedElCollisions = collisions.get(watchedEl);\n      watchedEl.style.setProperty('--vm-controls-height', \"\".concat(Math.max(0, Math.max.apply(Math, _toConsumableArray(watchedElCollisions.values()))), \"px\"));\n    });\n  });\n}\n\nfunction registerControlsForCollisionDetection(component) {\n  var el = getElement(component);\n\n  function getInnerEl() {\n    return el.shadowRoot.querySelector('.controls');\n  }\n\n  createStencilHook(component, function () {\n    var innerEl = getInnerEl();\n\n    if (!isNull(innerEl)) {\n      controls.add(innerEl);\n      update();\n    }\n  }, function () {\n    controls.delete(getInnerEl());\n    update();\n  });\n  wrapStencilHook(component, 'componentDidLoad', function () {\n    controls.add(getInnerEl());\n    update();\n  });\n  wrapStencilHook(component, 'componentDidRender', update);\n}\n\nfunction withControlsCollisionDetection(component) {\n  var el = getElement(component);\n  createStencilHook(component, function () {\n    watch$1.add(el);\n    collisions.set(el, new Map());\n    update();\n  }, function () {\n    watch$1.delete(el);\n    collisions.delete(el);\n  });\n}\n\nvar captionsCss = \":host{position:absolute;left:0;bottom:0;width:100%;pointer-events:none;z-index:var(--vm-captions-z-index)}.captions{width:100%;text-align:center;color:var(--vm-captions-text-color);font-size:var(--vm-captions-font-size);padding:$control-spacing;display:none;pointer-events:none;transition:transform 0.4s ease-in-out, opacity 0.3s ease-in-out}.captions.enabled{display:inline-block}.captions.hidden{display:none !important}.captions.inactive{opacity:0;visibility:hidden}.captions.fontMd{font-size:var(--vm-captions-font-size-medium)}.captions.fontLg{font-size:var(--vm-captions-font-size-large)}.captions.fontXl{font-size:var(--vm-captions-font-size-xlarge)}.cue{display:inline-block;background:var(--vm-captions-cue-bg-color);border-radius:var(--vm-captions-cue-border-radius);box-decoration-break:clone;line-height:185%;padding:var(--vm-captions-cue-padding);white-space:pre-wrap;pointer-events:none}.cue>div{display:inline}.cue:empty{display:none}\";\n\nvar __awaiter$t = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar Captions = /*#__PURE__*/function (_HTMLElement3) {\n  _inherits(Captions, _HTMLElement3);\n\n  var _super3 = _createSuper(Captions);\n\n  function Captions() {\n    var _this8;\n\n    _classCallCheck(this, Captions);\n\n    _this8 = _super3.call(this);\n\n    _this8.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this8));\n    _this8.sizeDisposal = new Disposal();\n    _this8.textDisposal = new Disposal();\n    _this8.isEnabled = false;\n    _this8.fontSize = 'sm';\n    /**\n     * Whether the captions should be visible or not.\n     */\n\n    _this8.hidden = false;\n    /** @internal */\n\n    _this8.isControlsActive = false;\n    /** @internal */\n\n    _this8.isVideoView = false;\n    /** @internal */\n\n    _this8.playbackStarted = false;\n    /** @internal */\n\n    _this8.textTracks = [];\n    /** @internal */\n\n    _this8.currentTextTrack = -1;\n    /** @internal */\n\n    _this8.isTextTrackVisible = true;\n    withComponentRegistry(_assertThisInitialized(_this8));\n    withControlsCollisionDetection(_assertThisInitialized(_this8));\n    withPlayerContext(_assertThisInitialized(_this8), ['isVideoView', 'playbackStarted', 'isControlsActive', 'textTracks', 'currentTextTrack', 'isTextTrackVisible']);\n    return _this8;\n  }\n\n  _createClass(Captions, [{\n    key: \"onEnabledChange\",\n    value: function onEnabledChange() {\n      this.isEnabled = this.playbackStarted && this.isVideoView;\n    }\n  }, {\n    key: \"onTextTracksChange\",\n    value: function onTextTracksChange() {\n      var _this9 = this;\n\n      var textTrack = this.textTracks[this.currentTextTrack];\n\n      var renderCues = function renderCues() {\n        var _a;\n\n        var activeCues = Array.from((_a = textTrack.activeCues) !== null && _a !== void 0 ? _a : []);\n\n        _this9.renderCurrentCue(activeCues[0]);\n      };\n\n      this.textDisposal.empty();\n\n      if (!isNil(textTrack)) {\n        renderCues();\n        this.textDisposal.add(listen(textTrack, 'cuechange', renderCues));\n      }\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.dispatch = createDispatcher(this);\n      this.dispatch('shouldRenderNativeTextTracks', false);\n      this.onTextTracksChange();\n      this.onPlayerResize();\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.textDisposal.empty();\n      this.sizeDisposal.empty();\n      this.dispatch('shouldRenderNativeTextTracks', true);\n    }\n  }, {\n    key: \"onPlayerResize\",\n    value: function onPlayerResize() {\n      return __awaiter$t(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n        var _this10 = this;\n\n        var player, container, resizeObs;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return findPlayer(this);\n\n              case 2:\n                player = _context8.sent;\n\n                if (!isUndefined(player)) {\n                  _context8.next = 5;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\");\n\n              case 5:\n                _context8.next = 7;\n                return player.getContainer();\n\n              case 7:\n                container = _context8.sent;\n                resizeObs = new ResizeObserver(function (entries) {\n                  var entry = entries[0];\n                  var width = entry.contentRect.width;\n\n                  if (width >= 1360) {\n                    _this10.fontSize = 'xl';\n                  } else if (width >= 1024) {\n                    _this10.fontSize = 'lg';\n                  } else if (width >= 768) {\n                    _this10.fontSize = 'md';\n                  } else {\n                    _this10.fontSize = 'sm';\n                  }\n                });\n                resizeObs.observe(container);\n\n              case 10:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n    }\n  }, {\n    key: \"renderCurrentCue\",\n    value: function renderCurrentCue(cue) {\n      if (isNil(cue)) {\n        this.cue = '';\n        return;\n      }\n\n      var div = document.createElement('div');\n      div.append(cue.getCueAsHTML());\n      this.cue = div.innerHTML.trim();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        style: {\n          transform: \"translateY(calc(\".concat(this.isControlsActive ? 'var(--vm-controls-height)' : '24px', \" * -1))\")\n        },\n        class: {\n          captions: true,\n          enabled: this.isEnabled,\n          hidden: this.hidden,\n          fontMd: this.fontSize === 'md',\n          fontLg: this.fontSize === 'lg',\n          fontXl: this.fontSize === 'xl',\n          inactive: !this.isTextTrackVisible\n        }\n      }, h(\"span\", {\n        class: \"cue\"\n      }, this.cue));\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"isVideoView\": [\"onEnabledChange\"],\n        \"playbackStarted\": [\"onEnabledChange\"],\n        \"textTracks\": [\"onTextTracksChange\"],\n        \"currentTextTrack\": [\"onTextTracksChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return captionsCss;\n    }\n  }]);\n\n  return Captions;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar clickToPlayCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-click-to-play-z-index)}.clickToPlay{display:none;width:100%;height:100%;pointer-events:none}.clickToPlay.enabled{display:inline-block;pointer-events:auto}\";\n\nvar __awaiter$s = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar ClickToPlay = /*#__PURE__*/function (_HTMLElement4) {\n  _inherits(ClickToPlay, _HTMLElement4);\n\n  var _super4 = _createSuper(ClickToPlay);\n\n  function ClickToPlay() {\n    var _this11;\n\n    _classCallCheck(this, ClickToPlay);\n\n    _this11 = _super4.call(this);\n\n    _this11.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this11));\n    /**\n     * By default this is disabled on mobile to not interfere with playback, set this to `true` to\n     * enable it.\n     */\n\n    _this11.useOnMobile = false;\n    /** @internal */\n\n    _this11.paused = true;\n    /** @internal */\n\n    _this11.isVideoView = false;\n    /** @internal */\n\n    _this11.isMobile = false;\n    withComponentRegistry(_assertThisInitialized(_this11));\n    withPlayerContext(_assertThisInitialized(_this11), ['paused', 'isVideoView', 'isMobile']);\n    return _this11;\n  }\n\n  _createClass(ClickToPlay, [{\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.dispatch = createDispatcher(this);\n    }\n    /** @internal */\n\n  }, {\n    key: \"forceClick\",\n    value: function forceClick() {\n      return __awaiter$s(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                this.onClick();\n\n              case 1:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick() {\n      this.dispatch('paused', !this.paused);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        class: {\n          clickToPlay: true,\n          enabled: this.isVideoView && (!this.isMobile || this.useOnMobile)\n        },\n        onClick: this.onClick.bind(this)\n      });\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return clickToPlayCss;\n    }\n  }]);\n\n  return ClickToPlay;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar controlCss = \"button{display:flex;align-items:center;flex-direction:row;border:var(--vm-control-border);cursor:pointer;flex-shrink:0;font-size:var(--vm-control-icon-size);color:var(--vm-control-color);background:var(--vm-control-bg, transparent);border-radius:var(--vm-control-border-radius);padding:var(--vm-control-padding);position:relative;pointer-events:auto;transition:all 0.3s ease;transform:scale(var(--vm-control-scale, 1));touch-action:manipulation;box-sizing:border-box}button.hidden{display:none}button:focus{outline:0}button.tapHighlight{background:var(--vm-control-tap-highlight)}button.notTouch:focus,button.notTouch:hover,button.notTouch[aria-expanded='true']{background:var(--vm-control-focus-bg);color:var(--vm-control-focus-color);transform:scale(calc(var(--vm-control-scale, 1) + 0.06))}\";\n\nvar __awaiter$r = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar Control = /*#__PURE__*/function (_HTMLElement5) {\n  _inherits(Control, _HTMLElement5);\n\n  var _super5 = _createSuper(Control);\n\n  function Control() {\n    var _this12;\n\n    _classCallCheck(this, Control);\n\n    _this12 = _super5.call(this);\n\n    _this12.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this12));\n    _this12.vmInteractionChange = createEvent(_assertThisInitialized(_this12), \"vmInteractionChange\", 7);\n    _this12.vmFocus = createEvent(_assertThisInitialized(_this12), \"vmFocus\", 7);\n    _this12.vmBlur = createEvent(_assertThisInitialized(_this12), \"vmBlur\", 7);\n    _this12.keyboardDisposal = new Disposal();\n    _this12.showTapHighlight = false;\n    /**\n     * Whether the control should be displayed or not.\n     */\n\n    _this12.hidden = false;\n    /** @internal */\n\n    _this12.isTouch = false;\n    withComponentRegistry(_assertThisInitialized(_this12));\n    withPlayerContext(_assertThisInitialized(_this12), ['isTouch']);\n    return _this12;\n  }\n\n  _createClass(Control, [{\n    key: \"onKeysChange\",\n    value: function onKeysChange() {\n      return __awaiter$r(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n        var _this13 = this;\n\n        var player, codes;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                this.keyboardDisposal.empty();\n\n                if (!isUndefined(this.keys)) {\n                  _context10.next = 3;\n                  break;\n                }\n\n                return _context10.abrupt(\"return\");\n\n              case 3:\n                _context10.next = 5;\n                return findPlayer(this);\n\n              case 5:\n                player = _context10.sent;\n                codes = this.keys.split('/');\n\n                if (!isUndefined(player)) {\n                  _context10.next = 9;\n                  break;\n                }\n\n                return _context10.abrupt(\"return\");\n\n              case 9:\n                this.keyboardDisposal.add(listen(player, 'keydown', function (event) {\n                  if (codes.includes(event.key)) {\n                    _this13.button.click();\n                  }\n                }));\n\n              case 10:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.findTooltip();\n      this.onKeysChange();\n    }\n  }, {\n    key: \"componentWillLoad\",\n    value: function componentWillLoad() {\n      this.findTooltip();\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.keyboardDisposal.empty();\n    }\n    /**\n     * Focuses the control.\n     */\n\n  }, {\n    key: \"focusControl\",\n    value: function focusControl() {\n      var _a;\n\n      return __awaiter$r(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                (_a = this.button) === null || _a === void 0 ? void 0 : _a.focus();\n\n              case 1:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n    }\n    /**\n     * Removes focus from the control.\n     */\n\n  }, {\n    key: \"blurControl\",\n    value: function blurControl() {\n      var _a;\n\n      return __awaiter$r(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {\n        return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                (_a = this.button) === null || _a === void 0 ? void 0 : _a.blur();\n\n              case 1:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n    }\n  }, {\n    key: \"onTouchStart\",\n    value: function onTouchStart() {\n      this.showTapHighlight = true;\n    }\n  }, {\n    key: \"onTouchEnd\",\n    value: function onTouchEnd() {\n      var _this14 = this;\n\n      setTimeout(function () {\n        _this14.showTapHighlight = false;\n      }, 100);\n    }\n  }, {\n    key: \"findTooltip\",\n    value: function findTooltip() {\n      var tooltip = this.host.querySelector('vm-tooltip');\n      if (!isNull(tooltip)) this.describedBy = tooltip.id;\n      return tooltip;\n    }\n  }, {\n    key: \"onShowTooltip\",\n    value: function onShowTooltip() {\n      var tooltip = this.findTooltip();\n      if (!isNull(tooltip)) tooltip.active = true;\n      this.vmInteractionChange.emit(true);\n    }\n  }, {\n    key: \"onHideTooltip\",\n    value: function onHideTooltip() {\n      var tooltip = this.findTooltip();\n      if (!isNull(tooltip)) tooltip.active = false;\n      this.button.blur();\n      this.vmInteractionChange.emit(false);\n    }\n  }, {\n    key: \"onFocus\",\n    value: function onFocus() {\n      this.vmFocus.emit();\n      this.onShowTooltip();\n    }\n  }, {\n    key: \"onBlur\",\n    value: function onBlur() {\n      this.vmBlur.emit();\n      this.onHideTooltip();\n    }\n  }, {\n    key: \"onMouseEnter\",\n    value: function onMouseEnter() {\n      this.onShowTooltip();\n    }\n  }, {\n    key: \"onMouseLeave\",\n    value: function onMouseLeave() {\n      this.onHideTooltip();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this15 = this;\n\n      var isMenuExpanded = this.expanded ? 'true' : 'false';\n      var isPressed = this.pressed ? 'true' : 'false';\n      return h(\"button\", {\n        class: {\n          hidden: this.hidden,\n          notTouch: !this.isTouch,\n          tapHighlight: this.showTapHighlight\n        },\n        id: this.identifier,\n        type: \"button\",\n        \"aria-label\": this.label,\n        \"aria-haspopup\": !isUndefined(this.menu) ? 'true' : undefined,\n        \"aria-controls\": this.menu,\n        \"aria-expanded\": !isUndefined(this.menu) ? isMenuExpanded : undefined,\n        \"aria-pressed\": !isUndefined(this.pressed) ? isPressed : undefined,\n        \"aria-hidden\": this.hidden ? 'true' : 'false',\n        \"aria-describedby\": this.describedBy,\n        onTouchStart: this.onTouchStart.bind(this),\n        onTouchEnd: this.onTouchEnd.bind(this),\n        onFocus: this.onFocus.bind(this),\n        onBlur: this.onBlur.bind(this),\n        onMouseEnter: this.onMouseEnter.bind(this),\n        onMouseLeave: this.onMouseLeave.bind(this),\n        ref: function ref(el) {\n          _this15.button = el;\n        }\n      }, h(\"slot\", null));\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"keys\": [\"onKeysChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return controlCss;\n    }\n  }]);\n\n  return Control;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar controlGroupCss = \":host{width:100%}.controlGroup{position:relative;width:100%;display:flex;flex-wrap:wrap;flex-direction:inherit;align-items:inherit;justify-content:inherit;box-sizing:border-box}.controlGroup.spaceTop{margin-top:var(--vm-control-group-spacing)}.controlGroup.spaceBottom{margin-bottom:var(--vm-control-group-spacing)}::slotted(*){margin-left:var(--vm-controls-spacing)}::slotted(*:first-child){margin-left:0}\";\n\nvar ControlNewLine = /*#__PURE__*/function (_HTMLElement6) {\n  _inherits(ControlNewLine, _HTMLElement6);\n\n  var _super6 = _createSuper(ControlNewLine);\n\n  function ControlNewLine() {\n    var _this16;\n\n    _classCallCheck(this, ControlNewLine);\n\n    _this16 = _super6.call(this);\n\n    _this16.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this16));\n    /**\n     * Determines where to add spacing/margin. The amount of spacing is determined by the CSS variable\n     * `--control-group-spacing`.\n     */\n\n    _this16.space = 'none';\n    withComponentRegistry(_assertThisInitialized(_this16));\n    return _this16;\n  }\n\n  _createClass(ControlNewLine, [{\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        class: {\n          controlGroup: true,\n          spaceTop: this.space !== 'none' && this.space !== 'bottom',\n          spaceBottom: this.space !== 'none' && this.space !== 'top'\n        }\n      }, h(\"slot\", null));\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return controlGroupCss;\n    }\n  }]);\n\n  return ControlNewLine;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar controlSpacerCss = \":host{flex:1}\";\n\nvar ControlSpacer = /*#__PURE__*/function (_HTMLElement7) {\n  _inherits(ControlSpacer, _HTMLElement7);\n\n  var _super7 = _createSuper(ControlSpacer);\n\n  function ControlSpacer() {\n    var _this17;\n\n    _classCallCheck(this, ControlSpacer);\n\n    _this17 = _super7.call(this);\n\n    _this17.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this17));\n    withComponentRegistry(_assertThisInitialized(_this17));\n    return _this17;\n  }\n\n  _createClass(ControlSpacer, null, [{\n    key: \"style\",\n    get: function get() {\n      return controlSpacerCss;\n    }\n  }]);\n\n  return ControlSpacer;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar debounce = function debounce(func) {\n  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n  var immediate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var timeout;\n  return function executedFunction() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    var context = this;\n\n    var later = function delayedFunctionCall() {\n      timeout = undefined;\n      if (!immediate) func.apply(context, args);\n    };\n\n    var callNow = immediate && isUndefined(timeout);\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n};\n\nvar controlsCss = \":host{position:relative;width:100%;z-index:var(--vm-controls-z-index)}:host([video]){position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.controls{display:flex;width:100%;position:absolute;flex-wrap:wrap;pointer-events:auto;box-sizing:border-box;background:var(--vm-controls-bg);padding:var(--vm-controls-padding);border-radius:var(--vm-controls-border-radius);opacity:0;visibility:hidden;transition:var(--vm-fade-transition)}.controls.audio{position:relative}.controls.hidden{display:none}.controls.active{opacity:1;visibility:visible}.controls.fullWidth{width:100%}.controls.fullHeight{height:100%}::slotted(*:not(vm-control-group)){margin-left:var(--vm-controls-spacing)}::slotted(*:not(vm-control-group):first-child){margin-left:0}\";\n\nvar __awaiter$q = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n/**\n * We want to keep the controls active state in-sync per player.\n */\n\n\nvar playerRef = {};\nvar hideControlsTimeout = {};\n\nvar Controls = /*#__PURE__*/function (_HTMLElement8) {\n  _inherits(Controls, _HTMLElement8);\n\n  var _super8 = _createSuper(Controls);\n\n  function Controls() {\n    var _this18;\n\n    _classCallCheck(this, Controls);\n\n    _this18 = _super8.call(this);\n\n    _this18.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this18));\n    _this18.disposal = new Disposal();\n    _this18.isInteracting = false;\n    /**\n     * Whether the controls are visible or not.\n     */\n\n    _this18.hidden = false;\n    /**\n     * Whether the controls container should be 100% width. This has no effect if the view is of\n     * type `audio`.\n     */\n\n    _this18.fullWidth = false;\n    /**\n     * Whether the controls container should be 100% height. This has no effect if the view is of\n     * type `audio`.\n     */\n\n    _this18.fullHeight = false;\n    /**\n     * Sets the `flex-direction` property that manages the direction in which the controls are layed\n     * out.\n     */\n\n    _this18.direction = 'row';\n    /**\n     * Sets the `align-items` flex property that aligns the individual controls on the cross-axis.\n     */\n\n    _this18.align = 'center';\n    /**\n     * Sets the `justify-content` flex property that aligns the individual controls on the main-axis.\n     */\n\n    _this18.justify = 'start';\n    /**\n     * Pins the controls to the defined position inside the video player. This has no effect when\n     * the view is of type `audio`.\n     */\n\n    _this18.pin = 'bottomLeft';\n    /**\n     * The length in milliseconds that the controls are active for before fading out. Audio players\n     * are not effected by this prop.\n     */\n\n    _this18.activeDuration = 2750;\n    /**\n     * Whether the controls should wait for playback to start before being shown. Audio players\n     * are not effected by this prop.\n     */\n\n    _this18.waitForPlaybackStart = false;\n    /**\n     * Whether the controls should show/hide when paused. Audio players are not effected by this prop.\n     */\n\n    _this18.hideWhenPaused = false;\n    /**\n     * Whether the controls should hide when the mouse leaves the player. Audio players are not\n     * effected by this prop.\n     */\n\n    _this18.hideOnMouseLeave = false;\n    /** @internal */\n\n    _this18.isAudioView = false;\n    /** @internal */\n\n    _this18.isSettingsActive = false;\n    /** @internal */\n\n    _this18.playbackReady = false;\n    /** @internal */\n\n    _this18.isControlsActive = false;\n    /** @internal */\n\n    _this18.paused = true;\n    /** @internal */\n\n    _this18.playbackStarted = false;\n    withComponentRegistry(_assertThisInitialized(_this18));\n    registerControlsForCollisionDetection(_assertThisInitialized(_this18));\n    withPlayerContext(_assertThisInitialized(_this18), ['playbackReady', 'isAudioView', 'isControlsActive', 'isSettingsActive', 'paused', 'playbackStarted']);\n    return _this18;\n  }\n\n  _createClass(Controls, [{\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.dispatch = createDispatcher(this);\n      this.onControlsChange();\n      this.setupPlayerListeners();\n    }\n  }, {\n    key: \"componentWillLoad\",\n    value: function componentWillLoad() {\n      this.onControlsChange();\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.disposal.empty();\n      delete hideControlsTimeout[playerRef[this]];\n      delete playerRef[this];\n    }\n  }, {\n    key: \"setupPlayerListeners\",\n    value: function setupPlayerListeners() {\n      return __awaiter$q(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee13() {\n        var _this19 = this;\n\n        var player, events;\n        return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                _context13.next = 2;\n                return findPlayer(this);\n\n              case 2:\n                player = _context13.sent;\n\n                if (!isUndefined(player)) {\n                  _context13.next = 5;\n                  break;\n                }\n\n                return _context13.abrupt(\"return\");\n\n              case 5:\n                events = ['focus', 'keydown', 'click', 'touchstart', 'mouseleave'];\n                events.forEach(function (event) {\n                  _this19.disposal.add(listen(player, event, _this19.onControlsChange.bind(_this19)));\n                });\n                this.disposal.add(listen(player, 'mousemove', debounce(this.onControlsChange, 50, true).bind(this))); // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n\n                playerRef[this] = player;\n\n              case 9:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.dispatch('isControlsActive', true);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.dispatch('isControlsActive', false);\n    }\n  }, {\n    key: \"hideWithDelay\",\n    value: function hideWithDelay() {\n      var _this20 = this;\n\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      clearTimeout(hideControlsTimeout[playerRef[this]]);\n      hideControlsTimeout[playerRef[this]] = setTimeout(function () {\n        _this20.hide();\n      }, this.activeDuration);\n    }\n  }, {\n    key: \"onControlsChange\",\n    value: function onControlsChange(event) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      clearTimeout(hideControlsTimeout[playerRef[this]]);\n\n      if (this.hidden || !this.playbackReady) {\n        this.hide();\n        return;\n      }\n\n      if (this.isAudioView) {\n        this.show();\n        return;\n      }\n\n      if (this.waitForPlaybackStart && !this.playbackStarted) {\n        this.hide();\n        return;\n      }\n\n      if (this.isInteracting || this.isSettingsActive) {\n        this.show();\n        return;\n      }\n\n      if (this.hideWhenPaused && this.paused) {\n        this.hideWithDelay();\n        return;\n      }\n\n      if (this.hideOnMouseLeave && !this.paused && (event === null || event === void 0 ? void 0 : event.type) === 'mouseleave') {\n        this.hide();\n        return;\n      }\n\n      if (!this.paused) {\n        this.show();\n        this.hideWithDelay();\n        return;\n      }\n\n      this.show();\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition() {\n      var _ref;\n\n      if (this.isAudioView) return {};\n\n      if (this.pin === 'center') {\n        return {\n          top: '50%',\n          left: '50%',\n          transform: 'translate(-50%, -50%)'\n        };\n      } // topLeft => { top: 0, left: 0 }\n\n\n      var pos = this.pin.split(/(?=[L|R])/).map(function (s) {\n        return s.toLowerCase();\n      });\n      return _ref = {}, _defineProperty(_ref, pos[0], 0), _defineProperty(_ref, pos[1], 0), _ref;\n    }\n  }, {\n    key: \"onStartInteraction\",\n    value: function onStartInteraction() {\n      this.isInteracting = true;\n    }\n  }, {\n    key: \"onEndInteraction\",\n    value: function onEndInteraction() {\n      this.isInteracting = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(Host, {\n        video: !this.isAudioView\n      }, h(\"div\", {\n        style: Object.assign(Object.assign({}, this.getPosition()), {\n          flexDirection: this.direction,\n          alignItems: this.align === 'center' ? 'center' : \"flex-\".concat(this.align),\n          justifyContent: this.justify\n        }),\n        class: {\n          controls: true,\n          audio: this.isAudioView,\n          hidden: this.hidden,\n          active: this.playbackReady && this.isControlsActive,\n          fullWidth: this.isAudioView || this.fullWidth,\n          fullHeight: !this.isAudioView && this.fullHeight\n        },\n        onMouseEnter: this.onStartInteraction.bind(this),\n        onMouseLeave: this.onEndInteraction.bind(this),\n        onTouchStart: this.onStartInteraction.bind(this),\n        onTouchEnd: this.onEndInteraction.bind(this)\n      }, h(\"slot\", null)));\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"paused\": [\"onControlsChange\"],\n        \"hidden\": [\"onControlsChange\"],\n        \"isAudioView\": [\"onControlsChange\"],\n        \"isInteracting\": [\"onControlsChange\"],\n        \"isSettingsActive\": [\"onControlsChange\"],\n        \"hideWhenPaused\": [\"onControlsChange\"],\n        \"hideOnMouseLeave\": [\"onControlsChange\"],\n        \"playbackStarted\": [\"onControlsChange\"],\n        \"waitForPlaybackStart\": [\"onControlsChange\"],\n        \"playbackReady\": [\"onControlsChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return controlsCss;\n    }\n  }]);\n\n  return Controls;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar currentTimeCss = \":host{display:flex;align-items:center;justify-content:center}\";\n\nvar CurrentTime = /*#__PURE__*/function (_HTMLElement9) {\n  _inherits(CurrentTime, _HTMLElement9);\n\n  var _super9 = _createSuper(CurrentTime);\n\n  function CurrentTime() {\n    var _this21;\n\n    _classCallCheck(this, CurrentTime);\n\n    _this21 = _super9.call(this);\n\n    _this21.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this21));\n    /** @internal */\n\n    _this21.currentTime = 0;\n    /** @internal */\n\n    _this21.i18n = {};\n    /**\n     * Whether the time should always show the hours unit, even if the time is less than\n     * 1 hour (eg: `20:35` -> `00:20:35`).\n     */\n\n    _this21.alwaysShowHours = false;\n    withComponentRegistry(_assertThisInitialized(_this21));\n    withPlayerContext(_assertThisInitialized(_this21), ['currentTime', 'i18n']);\n    return _this21;\n  }\n\n  _createClass(CurrentTime, [{\n    key: \"render\",\n    value: function render() {\n      return h(\"vm-time\", {\n        label: this.i18n.currentTime,\n        seconds: this.currentTime,\n        alwaysShowHours: this.alwaysShowHours\n      });\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return currentTimeCss;\n    }\n  }]);\n\n  return CurrentTime;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar _a, _b;\n\nvar IS_CLIENT = typeof window !== 'undefined';\nvar UA = IS_CLIENT ? (_a = window.navigator) === null || _a === void 0 ? void 0 : _a.userAgent.toLowerCase() : '';\nvar IS_IOS = /iphone|ipad|ipod|ios|CriOS|FxiOS/.test(UA);\nvar IS_ANDROID = /android/.test(UA);\nvar IS_MOBILE = IS_CLIENT && (IS_IOS || IS_ANDROID);\nvar IS_IPHONE = IS_CLIENT && /(iPhone|iPod)/gi.test((_b = window.navigator) === null || _b === void 0 ? void 0 : _b.platform);\n/firefox/.test(UA);\nvar IS_CHROME = IS_CLIENT && window.chrome;\nIS_CLIENT && !IS_CHROME && (window.safari || IS_IOS || /(apple|safari)/.test(UA));\n\nvar onMobileChange = function onMobileChange(callback) {\n  if (!IS_CLIENT || isUndefined(window.ResizeObserver)) {\n    callback(IS_MOBILE);\n    return noop;\n  }\n\n  function onResize() {\n    callback(window.innerWidth <= 480 || IS_MOBILE);\n  }\n\n  callback(window.innerWidth <= 480 || IS_MOBILE);\n  return listen(window, 'resize', onResize);\n};\n\nvar onTouchInputChange = function onTouchInputChange(callback) {\n  if (!IS_CLIENT) return noop;\n  var lastTouchTime = 0;\n  var offTouchListener = listen(document, 'touchstart', function () {\n    lastTouchTime = new Date().getTime();\n    callback(true);\n  }, true);\n  var offMouseListener = listen(document, 'mousemove', function () {\n    // Filter emulated events coming from touch events\n    if (new Date().getTime() - lastTouchTime < 500) return;\n    callback(false);\n  }, true);\n  return function () {\n    offTouchListener();\n    offMouseListener();\n  };\n};\n/**\n * Checks if the screen orientation can be changed.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Screen/orientation\n */\n\n\nvar canRotateScreen = function canRotateScreen() {\n  return IS_CLIENT && window.screen.orientation && !!window.screen.orientation.lock;\n};\n/**\n * Checks if the native HTML5 video player can enter picture-in-picture (PIP) mode when using\n * the Chrome browser.\n *\n * @see  https://developers.google.com/web/updates/2018/10/watch-video-using-picture-in-picture\n */\n\n\nvar canUsePiPInChrome = function canUsePiPInChrome() {\n  if (!IS_CLIENT) return false;\n  var video = document.createElement('video');\n  return !!document.pictureInPictureEnabled && !video.disablePictureInPicture;\n};\n/**\n * Checks if the native HTML5 video player can enter picture-in-picture (PIP) mode when using\n * the desktop Safari browser, iOS Safari appears to \"support\" PiP through the check, however PiP\n * does not function.\n *\n * @see https://developer.apple.com/documentation/webkitjs/adding_picture_in_picture_to_your_safari_media_controls\n */\n\n\nvar canUsePiPInSafari = function canUsePiPInSafari() {\n  if (!IS_CLIENT) return false;\n  var video = document.createElement('video');\n  return isFunction(video.webkitSupportsPresentationMode) && isFunction(video.webkitSetPresentationMode) && !IS_IPHONE;\n}; // Checks if the native HTML5 video player can enter PIP.\n\n\nvar canUsePiP = function canUsePiP() {\n  return canUsePiPInChrome() || canUsePiPInSafari();\n};\n/**\n * To detect autoplay, we create a video element and call play on it, if it is `paused` after\n * a `play()` call, autoplay is supported. Although this unintuitive, it works across browsers\n * and is currently the lightest way to detect autoplay without using a data source.\n *\n * @see https://github.com/ampproject/amphtml/blob/9bc8756536956780e249d895f3e1001acdee0bc0/src/utils/video.js#L25\n */\n\n\nvar _canAutoplay = function canAutoplay() {\n  var muted = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  var playsinline = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  if (!IS_CLIENT) return Promise.resolve(false);\n  var video = document.createElement('video');\n\n  if (muted) {\n    video.setAttribute('muted', '');\n    video.muted = true;\n  }\n\n  if (playsinline) {\n    video.setAttribute('playsinline', '');\n    video.setAttribute('webkit-playsinline', '');\n  }\n\n  video.setAttribute('height', '0');\n  video.setAttribute('width', '0');\n  video.style.position = 'fixed';\n  video.style.top = '0';\n  video.style.width = '0';\n  video.style.height = '0';\n  video.style.opacity = '0'; // Promise wrapped this way to catch both sync throws and async rejections.\n  // More info: https://github.com/tc39/proposal-promise-try\n\n  new Promise(function (resolve) {\n    return resolve(video.play());\n  }).catch(noop);\n  return Promise.resolve(!video.paused);\n};\n/**\n * Attempt to parse json into a POJO.\n */\n\n\nfunction tryParseJSON(json) {\n  if (!isString(json)) return undefined;\n\n  try {\n    return JSON.parse(json);\n  } catch (e) {\n    return undefined;\n  }\n}\n/**\n * Check if the given input is json or a plain object.\n */\n\n\nvar isObjOrJSON = function isObjOrJSON(input) {\n  return !isNil(input) && (isObject(input) || isString(input) && input.startsWith('{'));\n};\n/**\n * If an object return otherwise try to parse it as json.\n */\n\n\nvar objOrParseJSON = function objOrParseJSON(input) {\n  return isObject(input) ? input : tryParseJSON(input);\n};\n/**\n * Load image avoiding xhr/fetch CORS issues. Server status can't be obtained this way\n * unfortunately, so this uses \"naturalWidth\" to determine if the image has been loaded. By\n * default it checks if it is at least 1px.\n */\n\n\nvar loadImage = function loadImage(src) {\n  var minWidth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  return new Promise(function (resolve, reject) {\n    var image = new Image();\n\n    var handler = function handler() {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      delete image.onload; // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n\n      delete image.onerror;\n      image.naturalWidth >= minWidth ? resolve(image) : reject(image);\n    };\n\n    Object.assign(image, {\n      onload: handler,\n      onerror: handler,\n      src: src\n    });\n  });\n};\n\nvar loadScript = function loadScript(src, onLoad) {\n  var onError = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : noop;\n\n  var _a;\n\n  var script = document.createElement('script');\n  script.src = src;\n  script.onload = onLoad;\n  script.onerror = onError;\n  var firstScriptTag = document.getElementsByTagName('script')[0];\n  (_a = firstScriptTag.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(script, firstScriptTag);\n};\n/**\n * Tries to parse json and return a object.\n */\n\n\nvar decodeJSON = function decodeJSON(data) {\n  if (!isObjOrJSON(data)) return undefined;\n  return objOrParseJSON(data);\n};\n/**\n * Attempts to safely decode a URI component, on failure it returns the given fallback.\n */\n\n\nvar tryDecodeURIComponent = function tryDecodeURIComponent(component) {\n  var fallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  if (!IS_CLIENT) return fallback;\n\n  try {\n    return window.decodeURIComponent(component);\n  } catch (e) {\n    return fallback;\n  }\n};\n/**\n * Returns a simple key/value map and duplicate keys are merged into an array.\n *\n * @see https://github.com/ampproject/amphtml/blob/c7c46cec71bac92f5c5da31dcc6366c18577f566/src/url-parse-query-string.js#L31\n */\n\n\nvar QUERY_STRING_REGEX = /(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;\n\nvar parseQueryString = function parseQueryString(qs) {\n  var params = Object.create(null);\n  if (isUndefined(qs)) return params;\n  var match; // eslint-disable-next-line no-cond-assign\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n  while (match = QUERY_STRING_REGEX.exec(qs)) {\n    var name = tryDecodeURIComponent(match[1], match[1]).replace('[]', '');\n    var value = isString(match[2]) ? tryDecodeURIComponent(match[2].replace(/\\+/g, ' '), match[2]) : '';\n    var currValue = params[name];\n    if (currValue && !isArray(currValue)) params[name] = [currValue];\n    currValue ? params[name].push(value) : params[name] = value;\n  }\n\n  return params;\n};\n/**\n * Serializes the given params into a query string.\n */\n\n\nvar serializeQueryString = function serializeQueryString(params) {\n  var qs = [];\n\n  var appendQueryParam = function appendQueryParam(param, v) {\n    qs.push(\"\".concat(encodeURIComponent(param), \"=\").concat(encodeURIComponent(v)));\n  };\n\n  Object.keys(params).forEach(function (param) {\n    var value = params[param];\n    if (isNil(value)) return;\n\n    if (isArray(value)) {\n      value.forEach(function (v) {\n        return appendQueryParam(param, v);\n      });\n    } else {\n      appendQueryParam(param, value);\n    }\n  });\n  return qs.join('&');\n};\n/**\n * Notifies the browser to start establishing a connection with the given URL.\n */\n\n\nvar preconnect = function preconnect(url) {\n  var rel = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'preconnect';\n  var as = arguments.length > 2 ? arguments[2] : undefined;\n  if (!IS_CLIENT) return false;\n  var link = document.createElement('link');\n  link.rel = rel;\n  link.href = url;\n  if (!isUndefined(as)) link.as = as;\n  link.crossOrigin = 'true';\n  document.head.append(link);\n  return true;\n};\n/**\n * Safely appends the given query string to the given URL.\n */\n\n\nvar appendQueryStringToURL = function appendQueryStringToURL(url, qs) {\n  if (isUndefined(qs) || qs.length === 0) return url;\n  var mainAndQuery = url.split('?', 2);\n  return mainAndQuery[0] + (!isUndefined(mainAndQuery[1]) ? \"?\".concat(mainAndQuery[1], \"&\").concat(qs) : \"?\".concat(qs));\n};\n/**\n * Serializes the given params into a query string and appends them to the given URL.\n */\n\n\nvar appendParamsToURL = function appendParamsToURL(url, params) {\n  return appendQueryStringToURL(url, isObject(params) ? serializeQueryString(params) : params);\n};\n/**\n * Tries to convert a query string into a object.\n */\n\n\nvar decodeQueryString = function decodeQueryString(qs) {\n  if (!isString(qs)) return undefined;\n  return parseQueryString(qs);\n};\n\nvar pendingSDKRequests = {};\n/**\n * Loads an SDK into the global window namespace.\n *\n * @see https://github.com/CookPete/react-player/blob/master/src/utils.js#L77\n */\n\nvar loadSDK = function loadSDK(url, sdkGlobalVar, sdkReadyVar) {\n  var isLoaded = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {\n    return true;\n  };\n  var loadScriptFn = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : loadScript;\n\n  var getGlobal = function getGlobal(key) {\n    if (!isUndefined(window[key])) return window[key];\n    if (window.exports && window.exports[key]) return window.exports[key];\n\n    if (window.module && window.module.exports && window.module.exports[key]) {\n      return window.module.exports[key];\n    }\n\n    return undefined;\n  };\n\n  var existingGlobal = getGlobal(sdkGlobalVar);\n\n  if (existingGlobal && isLoaded(existingGlobal)) {\n    return Promise.resolve(existingGlobal);\n  }\n\n  return new Promise(function (resolve, reject) {\n    if (!isUndefined(pendingSDKRequests[url])) {\n      pendingSDKRequests[url].push({\n        resolve: resolve,\n        reject: reject\n      });\n      return;\n    }\n\n    pendingSDKRequests[url] = [{\n      resolve: resolve,\n      reject: reject\n    }];\n\n    var onLoaded = function onLoaded(sdk) {\n      pendingSDKRequests[url].forEach(function (request) {\n        return request.resolve(sdk);\n      });\n    };\n\n    if (!isUndefined(sdkReadyVar)) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var previousOnReady = window[sdkReadyVar]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      window[sdkReadyVar] = function () {\n        if (!isUndefined(previousOnReady)) previousOnReady();\n        onLoaded(getGlobal(sdkGlobalVar));\n      };\n    }\n\n    loadScriptFn(url, function () {\n      if (isUndefined(sdkReadyVar)) onLoaded(getGlobal(sdkGlobalVar));\n    }, function (e) {\n      pendingSDKRequests[url].forEach(function (request) {\n        request.reject(e);\n      });\n      delete pendingSDKRequests[url];\n    });\n  });\n};\n\nvar withProviderContext = function withProviderContext(provider) {\n  var additionalProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return withPlayerContext(provider, ['autoplay', 'controls', 'language', 'muted', 'logger', 'loop', 'aspectRatio', 'playsinline'].concat(_toConsumableArray(additionalProps)));\n};\n\nvar dailymotionCss = \":host{z-index:var(--vm-media-z-index)}\";\n\nvar __awaiter$p = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar videoInfoCache$1 = new Map();\n\nvar Dailymotion = /*#__PURE__*/function (_HTMLElement10) {\n  _inherits(Dailymotion, _HTMLElement10);\n\n  var _super10 = _createSuper(Dailymotion);\n\n  function Dailymotion() {\n    var _this22;\n\n    _classCallCheck(this, Dailymotion);\n\n    _this22 = _super10.call(this);\n\n    _this22.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this22));\n    _this22.vmLoadStart = createEvent(_assertThisInitialized(_this22), \"vmLoadStart\", 7);\n    _this22.vmError = createEvent(_assertThisInitialized(_this22), \"vmError\", 7); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    _this22.defaultInternalState = {};\n    _this22.internalState = {\n      currentTime: 0,\n      volume: 0,\n      muted: false,\n      isAdsPlaying: false,\n      playbackReady: false\n    };\n    _this22.embedSrc = '';\n    _this22.mediaTitle = '';\n    /**\n     * Whether to automatically play the next video in the queue.\n     */\n\n    _this22.shouldAutoplayQueue = false;\n    /**\n     * Whether to show the 'Up Next' queue.\n     */\n\n    _this22.showUpNextQueue = false;\n    /**\n     * Whether to show buttons for sharing the video.\n     */\n\n    _this22.showShareButtons = false;\n    /**\n     * Whether to display the Dailymotion logo.\n     */\n\n    _this22.showDailymotionLogo = false;\n    /**\n     * Whether to show video information (title and owner) on the start screen.\n     */\n\n    _this22.showVideoInfo = true;\n    /** @internal */\n\n    _this22.language = 'en';\n    /** @internal */\n\n    _this22.autoplay = false;\n    /** @internal */\n\n    _this22.controls = false;\n    /** @internal */\n\n    _this22.loop = false;\n    /** @internal */\n\n    _this22.muted = false;\n    /** @internal */\n\n    _this22.playsinline = false;\n    withComponentRegistry(_assertThisInitialized(_this22));\n    withProviderConnect(_assertThisInitialized(_this22));\n    withProviderContext(_assertThisInitialized(_this22));\n    return _this22;\n  }\n\n  _createClass(Dailymotion, [{\n    key: \"onVideoIdChange\",\n    value: function onVideoIdChange() {\n      this.internalState = Object.assign({}, this.defaultInternalState);\n\n      if (!this.videoId) {\n        this.embedSrc = '';\n        return;\n      }\n\n      this.embedSrc = \"\".concat(this.getOrigin(), \"/embed/video/\").concat(this.videoId, \"?api=1\");\n      this.fetchVideoInfo = this.getVideoInfo();\n      this.pendingMediaTitleCall = deferredPromise();\n    }\n  }, {\n    key: \"onControlsChange\",\n    value: function onControlsChange() {\n      if (this.internalState.playbackReady) {\n        this.remoteControl(\"controls\"\n        /* Controls */\n        , this.controls);\n      }\n    }\n  }, {\n    key: \"onCustomPosterChange\",\n    value: function onCustomPosterChange() {\n      this.dispatch('currentPoster', this.poster);\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.dispatch = createProviderDispatcher(this);\n      this.dispatch('viewType', ViewType.Video);\n      this.onVideoIdChange();\n      this.internalState.muted = this.muted;\n      this.defaultInternalState = Object.assign({}, this.internalState);\n    }\n  }, {\n    key: \"componentDidLoad\",\n    value: function componentDidLoad() {\n      this.initialMuted = this.muted;\n    }\n  }, {\n    key: \"getOrigin\",\n    value: function getOrigin() {\n      return 'https://www.dailymotion.com';\n    }\n  }, {\n    key: \"getPreconnections\",\n    value: function getPreconnections() {\n      return [this.getOrigin(), 'https://static1.dmcdn.net'];\n    }\n  }, {\n    key: \"remoteControl\",\n    value: function remoteControl(command, arg) {\n      return this.embed.postMessage({\n        command: command,\n        parameters: arg ? [arg] : []\n      });\n    }\n  }, {\n    key: \"buildParams\",\n    value: function buildParams() {\n      return {\n        autoplay: this.autoplay,\n        mute: this.initialMuted,\n        controls: this.controls,\n        'queue-autoplay-next': this.shouldAutoplayQueue,\n        'queue-enable': this.showUpNextQueue,\n        'sharing-enable': this.showShareButtons,\n        syndication: this.syndication,\n        'ui-highlight': this.color,\n        'ui-logo': this.showDailymotionLogo,\n        'ui-start-screen-info': this.showVideoInfo\n      };\n    }\n  }, {\n    key: \"getVideoInfo\",\n    value: function getVideoInfo() {\n      return __awaiter$p(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee14() {\n        var _this23 = this;\n\n        var apiEndpoint;\n        return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                if (!videoInfoCache$1.has(this.videoId)) {\n                  _context14.next = 2;\n                  break;\n                }\n\n                return _context14.abrupt(\"return\", videoInfoCache$1.get(this.videoId));\n\n              case 2:\n                apiEndpoint = 'https://api.dailymotion.com';\n                return _context14.abrupt(\"return\", window.fetch(\"\".concat(apiEndpoint, \"/video/\").concat(this.videoId, \"?fields=duration,thumbnail_1080_url\")).then(function (response) {\n                  return response.json();\n                }).then(function (data) {\n                  var poster = data.thumbnail_1080_url;\n                  var duration = parseFloat(data.duration);\n                  videoInfoCache$1.set(_this23.videoId, {\n                    poster: poster,\n                    duration: duration\n                  });\n                  return {\n                    poster: poster,\n                    duration: duration\n                  };\n                }));\n\n              case 4:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n    }\n  }, {\n    key: \"onEmbedSrcChange\",\n    value: function onEmbedSrcChange() {\n      this.vmLoadStart.emit();\n      this.dispatch('viewType', ViewType.Video);\n    }\n  }, {\n    key: \"onEmbedMessage\",\n    value: function onEmbedMessage(event) {\n      var _this24 = this;\n\n      var _a, _b;\n\n      var msg = event.detail;\n\n      switch (msg.event) {\n        case \"playback_ready\"\n        /* PlaybackReady */\n        :\n          this.onControlsChange();\n          this.dispatch('currentSrc', this.embedSrc);\n          this.dispatch('mediaType', MediaType.Video);\n          Promise.all([this.fetchVideoInfo, (_a = this.pendingMediaTitleCall) === null || _a === void 0 ? void 0 : _a.promise]).then(function (_ref2) {\n            var _ref3 = _slicedToArray(_ref2, 2),\n                info = _ref3[0],\n                mediaTitle = _ref3[1];\n\n            var _a, _b;\n\n            _this24.dispatch('duration', (_a = info === null || info === void 0 ? void 0 : info.duration) !== null && _a !== void 0 ? _a : -1);\n\n            _this24.dispatch('currentPoster', (_b = _this24.poster) !== null && _b !== void 0 ? _b : info === null || info === void 0 ? void 0 : info.poster);\n\n            _this24.dispatch('mediaTitle', mediaTitle);\n\n            _this24.dispatch('playbackReady', true);\n          });\n          break;\n\n        case \"videochange\"\n        /* VideoChange */\n        :\n          (_b = this.pendingMediaTitleCall) === null || _b === void 0 ? void 0 : _b.resolve(msg.title);\n          break;\n\n        case \"start\"\n        /* Start */\n        :\n          this.dispatch('paused', false);\n          this.dispatch('playbackStarted', true);\n          this.dispatch('buffering', true);\n          break;\n\n        case \"video_start\"\n        /* VideoStart */\n        :\n          // Commands don't go through until ads have finished, so we store them and then replay them\n          // once the video starts.\n          this.remoteControl(\"muted\"\n          /* Muted */\n          , this.internalState.muted);\n          this.remoteControl(\"volume\"\n          /* Volume */\n          , this.internalState.volume);\n\n          if (this.internalState.currentTime > 0) {\n            this.remoteControl(\"seek\"\n            /* Seek */\n            , this.internalState.currentTime);\n          }\n\n          break;\n\n        case \"play\"\n        /* Play */\n        :\n          this.dispatch('paused', false);\n          break;\n\n        case \"pause\"\n        /* Pause */\n        :\n          this.dispatch('paused', true);\n          this.dispatch('playing', false);\n          this.dispatch('buffering', false);\n          break;\n\n        case \"playing\"\n        /* Playing */\n        :\n          this.dispatch('playing', true);\n          this.dispatch('buffering', false);\n          break;\n\n        case \"video_end\"\n        /* VideoEnd */\n        :\n          if (this.loop) {\n            setTimeout(function () {\n              _this24.remoteControl(\"play\"\n              /* Play */\n              );\n            }, 300);\n          } else {\n            this.dispatch('playbackEnded', true);\n          }\n\n          break;\n\n        case \"timeupdate\"\n        /* TimeUpdate */\n        :\n          this.dispatch('currentTime', parseFloat(msg.time));\n          break;\n\n        case \"volumechange\"\n        /* VolumeChange */\n        :\n          this.dispatch('muted', msg.muted === 'true');\n          this.dispatch('volume', Math.floor(parseFloat(msg.volume) * 100));\n          break;\n\n        case \"seeking\"\n        /* Seeking */\n        :\n          this.dispatch('currentTime', parseFloat(msg.time));\n          this.dispatch('seeking', true);\n          break;\n\n        case \"seeked\"\n        /* Seeked */\n        :\n          this.dispatch('currentTime', parseFloat(msg.time));\n          this.dispatch('seeking', false);\n          break;\n\n        case \"waiting\"\n        /* Waiting */\n        :\n          this.dispatch('buffering', true);\n          break;\n\n        case \"progress\"\n        /* Progress */\n        :\n          this.dispatch('buffered', parseFloat(msg.time));\n          break;\n\n        case \"durationchange\"\n        /* DurationChange */\n        :\n          this.dispatch('duration', parseFloat(msg.duration));\n          break;\n\n        case \"qualitiesavailable\"\n        /* QualitiesAvailable */\n        :\n          this.dispatch('playbackQualities', msg.qualities.map(function (q) {\n            return \"\".concat(q, \"p\");\n          }));\n          break;\n\n        case \"qualitychange\"\n        /* QualityChange */\n        :\n          this.dispatch('playbackQuality', \"\".concat(msg.quality, \"p\"));\n          break;\n\n        case \"fullscreenchange\"\n        /* FullscreenChange */\n        :\n          this.dispatch('isFullscreenActive', msg.fullscreen === 'true');\n          break;\n\n        case \"error\"\n        /* Error */\n        :\n          this.vmError.emit(msg.error);\n          break;\n      }\n    }\n    /** @internal */\n\n  }, {\n    key: \"getAdapter\",\n    value: function getAdapter() {\n      return __awaiter$p(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee27() {\n        var _this25 = this;\n\n        var canPlayRegex;\n        return _regeneratorRuntime().wrap(function _callee27$(_context27) {\n          while (1) {\n            switch (_context27.prev = _context27.next) {\n              case 0:\n                canPlayRegex = /(?:dai\\.ly|dailymotion|dailymotion\\.com)\\/(?:video\\/|embed\\/|)(?:video\\/|)((?:\\w)+)/;\n                return _context27.abrupt(\"return\", {\n                  getInternalPlayer: function getInternalPlayer() {\n                    return __awaiter$p(_this25, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee15() {\n                      return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n                        while (1) {\n                          switch (_context15.prev = _context15.next) {\n                            case 0:\n                              return _context15.abrupt(\"return\", this.embed);\n\n                            case 1:\n                            case \"end\":\n                              return _context15.stop();\n                          }\n                        }\n                      }, _callee15, this);\n                    }));\n                  },\n                  play: function play() {\n                    return __awaiter$p(_this25, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee16() {\n                      return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n                        while (1) {\n                          switch (_context16.prev = _context16.next) {\n                            case 0:\n                              this.remoteControl(\"play\"\n                              /* Play */\n                              );\n\n                            case 1:\n                            case \"end\":\n                              return _context16.stop();\n                          }\n                        }\n                      }, _callee16, this);\n                    }));\n                  },\n                  pause: function pause() {\n                    return __awaiter$p(_this25, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee17() {\n                      return _regeneratorRuntime().wrap(function _callee17$(_context17) {\n                        while (1) {\n                          switch (_context17.prev = _context17.next) {\n                            case 0:\n                              this.remoteControl(\"pause\"\n                              /* Pause */\n                              );\n\n                            case 1:\n                            case \"end\":\n                              return _context17.stop();\n                          }\n                        }\n                      }, _callee17, this);\n                    }));\n                  },\n                  canPlay: function canPlay(type) {\n                    return __awaiter$p(_this25, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee18() {\n                      return _regeneratorRuntime().wrap(function _callee18$(_context18) {\n                        while (1) {\n                          switch (_context18.prev = _context18.next) {\n                            case 0:\n                              return _context18.abrupt(\"return\", isString(type) && canPlayRegex.test(type));\n\n                            case 1:\n                            case \"end\":\n                              return _context18.stop();\n                          }\n                        }\n                      }, _callee18);\n                    }));\n                  },\n                  setCurrentTime: function setCurrentTime(time) {\n                    return __awaiter$p(_this25, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee19() {\n                      return _regeneratorRuntime().wrap(function _callee19$(_context19) {\n                        while (1) {\n                          switch (_context19.prev = _context19.next) {\n                            case 0:\n                              if (time !== this.internalState.currentTime) {\n                                this.internalState.currentTime = time;\n                                this.remoteControl(\"seek\"\n                                /* Seek */\n                                , time);\n                              }\n\n                            case 1:\n                            case \"end\":\n                              return _context19.stop();\n                          }\n                        }\n                      }, _callee19, this);\n                    }));\n                  },\n                  setMuted: function setMuted(muted) {\n                    return __awaiter$p(_this25, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee20() {\n                      return _regeneratorRuntime().wrap(function _callee20$(_context20) {\n                        while (1) {\n                          switch (_context20.prev = _context20.next) {\n                            case 0:\n                              this.internalState.muted = muted;\n                              this.remoteControl(\"muted\"\n                              /* Muted */\n                              , muted);\n\n                            case 2:\n                            case \"end\":\n                              return _context20.stop();\n                          }\n                        }\n                      }, _callee20, this);\n                    }));\n                  },\n                  setVolume: function setVolume(volume) {\n                    return __awaiter$p(_this25, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee21() {\n                      return _regeneratorRuntime().wrap(function _callee21$(_context21) {\n                        while (1) {\n                          switch (_context21.prev = _context21.next) {\n                            case 0:\n                              this.internalState.volume = volume / 100;\n                              this.dispatch('volume', volume);\n                              this.remoteControl(\"volume\"\n                              /* Volume */\n                              , volume / 100);\n\n                            case 3:\n                            case \"end\":\n                              return _context21.stop();\n                          }\n                        }\n                      }, _callee21, this);\n                    }));\n                  },\n                  canSetPlaybackQuality: function canSetPlaybackQuality() {\n                    return __awaiter$p(_this25, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee22() {\n                      return _regeneratorRuntime().wrap(function _callee22$(_context22) {\n                        while (1) {\n                          switch (_context22.prev = _context22.next) {\n                            case 0:\n                              return _context22.abrupt(\"return\", true);\n\n                            case 1:\n                            case \"end\":\n                              return _context22.stop();\n                          }\n                        }\n                      }, _callee22);\n                    }));\n                  },\n                  setPlaybackQuality: function setPlaybackQuality(quality) {\n                    return __awaiter$p(_this25, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee23() {\n                      return _regeneratorRuntime().wrap(function _callee23$(_context23) {\n                        while (1) {\n                          switch (_context23.prev = _context23.next) {\n                            case 0:\n                              this.remoteControl(\"quality\"\n                              /* Quality */\n                              , quality.slice(0, -1));\n\n                            case 1:\n                            case \"end\":\n                              return _context23.stop();\n                          }\n                        }\n                      }, _callee23, this);\n                    }));\n                  },\n                  canSetFullscreen: function canSetFullscreen() {\n                    return __awaiter$p(_this25, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee24() {\n                      return _regeneratorRuntime().wrap(function _callee24$(_context24) {\n                        while (1) {\n                          switch (_context24.prev = _context24.next) {\n                            case 0:\n                              return _context24.abrupt(\"return\", true);\n\n                            case 1:\n                            case \"end\":\n                              return _context24.stop();\n                          }\n                        }\n                      }, _callee24);\n                    }));\n                  },\n                  enterFullscreen: function enterFullscreen() {\n                    return __awaiter$p(_this25, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee25() {\n                      return _regeneratorRuntime().wrap(function _callee25$(_context25) {\n                        while (1) {\n                          switch (_context25.prev = _context25.next) {\n                            case 0:\n                              this.remoteControl(\"fullscreen\"\n                              /* Fullscreen */\n                              , true);\n\n                            case 1:\n                            case \"end\":\n                              return _context25.stop();\n                          }\n                        }\n                      }, _callee25, this);\n                    }));\n                  },\n                  exitFullscreen: function exitFullscreen() {\n                    return __awaiter$p(_this25, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee26() {\n                      return _regeneratorRuntime().wrap(function _callee26$(_context26) {\n                        while (1) {\n                          switch (_context26.prev = _context26.next) {\n                            case 0:\n                              this.remoteControl(\"fullscreen\"\n                              /* Fullscreen */\n                              , false);\n\n                            case 1:\n                            case \"end\":\n                              return _context26.stop();\n                          }\n                        }\n                      }, _callee26, this);\n                    }));\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context27.stop();\n            }\n          }\n        }, _callee27);\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this26 = this;\n\n      return h(\"vm-embed\", {\n        embedSrc: this.embedSrc,\n        mediaTitle: this.mediaTitle,\n        origin: this.getOrigin(),\n        params: this.buildParams(),\n        decoder: decodeQueryString,\n        preconnections: this.getPreconnections(),\n        onVmEmbedMessage: this.onEmbedMessage.bind(this),\n        onVmEmbedSrcChange: this.onEmbedSrcChange.bind(this),\n        ref: function ref(el) {\n          _this26.embed = el;\n        }\n      });\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"videoId\": [\"onVideoIdChange\"],\n        \"controls\": [\"onControlsChange\"],\n        \"poster\": [\"onCustomPosterChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return dailymotionCss;\n    }\n  }]);\n\n  return Dailymotion;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar dashCss = \":host{z-index:var(--vm-media-z-index)}\";\n\nvar __awaiter$o = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar Dash = /*#__PURE__*/function (_HTMLElement11) {\n  _inherits(Dash, _HTMLElement11);\n\n  var _super11 = _createSuper(Dash);\n\n  function Dash() {\n    var _this27;\n\n    _classCallCheck(this, Dash);\n\n    _this27 = _super11.call(this);\n\n    _this27.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this27));\n    _this27.vmLoadStart = createEvent(_assertThisInitialized(_this27), \"vmLoadStart\", 7);\n    _this27.vmError = createEvent(_assertThisInitialized(_this27), \"vmError\", 7);\n    _this27.textTracksDisposal = new Disposal();\n    _this27.hasAttached = false;\n    /**\n     * The NPM package version of the `dashjs` library to download and use.\n     */\n\n    _this27.version = 'latest';\n    /**\n     * The `dashjs` configuration.\n     */\n\n    _this27.config = {};\n    /** @internal */\n\n    _this27.autoplay = false;\n    /** @inheritdoc */\n\n    _this27.preload = 'metadata';\n    /**\n     * Are text tracks enabled by default.\n     */\n\n    _this27.enableTextTracksByDefault = true;\n    /** @internal */\n\n    _this27.shouldRenderNativeTextTracks = true;\n    /** @internal */\n\n    _this27.isTextTrackVisible = true;\n    /** @internal */\n\n    _this27.currentTextTrack = -1;\n    withComponentRegistry(_assertThisInitialized(_this27));\n    withProviderConnect(_assertThisInitialized(_this27));\n    withPlayerContext(_assertThisInitialized(_this27), ['autoplay', 'shouldRenderNativeTextTracks', 'isTextTrackVisible', 'currentTextTrack']);\n    return _this27;\n  }\n\n  _createClass(Dash, [{\n    key: \"onSrcChange\",\n    value: function onSrcChange() {\n      var _a;\n\n      if (!this.hasAttached) return;\n      this.vmLoadStart.emit();\n      (_a = this.dash) === null || _a === void 0 ? void 0 : _a.attachSource(this.src);\n    }\n  }, {\n    key: \"onShouldRenderNativeTextTracks\",\n    value: function onShouldRenderNativeTextTracks() {\n      var _a;\n\n      if (this.shouldRenderNativeTextTracks) {\n        this.textTracksDisposal.empty();\n      } else {\n        this.hideCurrentTextTrack();\n      }\n\n      (_a = this.dash) === null || _a === void 0 ? void 0 : _a.enableForcedTextStreaming(!this.shouldRenderNativeTextTracks);\n    }\n  }, {\n    key: \"onTextTrackChange\",\n    value: function onTextTrackChange() {\n      var _a, _b;\n\n      if (!this.shouldRenderNativeTextTracks || isUndefined(this.dash)) return;\n      this.dash.setTextTrack(!this.isTextTrackVisible ? -1 : this.currentTextTrack);\n\n      if (!this.isTextTrackVisible) {\n        var track = Array.from((_b = (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.textTracks) !== null && _b !== void 0 ? _b : [])[this.currentTextTrack];\n        if ((track === null || track === void 0 ? void 0 : track.mode) === 'hidden') this.dispatch('currentTextTrack', -1);\n      }\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.dispatch = createProviderDispatcher(this);\n      if (this.mediaEl) this.setupDash();\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.textTracksDisposal.empty();\n      this.destroyDash();\n    }\n  }, {\n    key: \"setupDash\",\n    value: function setupDash() {\n      return __awaiter$o(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee28() {\n        var _this28 = this;\n\n        var url, DashSDK;\n        return _regeneratorRuntime().wrap(function _callee28$(_context28) {\n          while (1) {\n            switch (_context28.prev = _context28.next) {\n              case 0:\n                _context28.prev = 0;\n                url = this.libSrc || \"https://cdn.jsdelivr.net/npm/dashjs@\".concat(this.version, \"/dist/dash.all.min.js\");\n                _context28.next = 4;\n                return loadSDK(url, 'dashjs');\n\n              case 4:\n                DashSDK = _context28.sent;\n                this.dash = DashSDK.MediaPlayer(this.config).create();\n                this.dash.initialize(this.mediaEl, null, this.autoplay);\n                this.dash.setTextDefaultEnabled(this.enableTextTracksByDefault);\n                this.dash.enableForcedTextStreaming(!this.shouldRenderNativeTextTracks);\n                this.dash.on(DashSDK.MediaPlayer.events.PLAYBACK_METADATA_LOADED, function () {\n                  _this28.dispatch('mediaType', MediaType.Video);\n\n                  _this28.dispatch('currentSrc', _this28.src);\n\n                  _this28.dispatchLevels();\n\n                  _this28.listenToTextTracksForChanges();\n\n                  _this28.dispatch('playbackReady', true);\n                });\n                this.dash.on(DashSDK.MediaPlayer.events.TRACK_CHANGE_RENDERED, function () {\n                  if (!_this28.shouldRenderNativeTextTracks) _this28.hideCurrentTextTrack();\n                });\n                this.dash.on(DashSDK.MediaPlayer.events.ERROR, function (e) {\n                  _this28.vmError.emit(e);\n                });\n                this.hasAttached = true;\n                _context28.next = 18;\n                break;\n\n              case 15:\n                _context28.prev = 15;\n                _context28.t0 = _context28[\"catch\"](0);\n                this.vmError.emit(_context28.t0);\n\n              case 18:\n              case \"end\":\n                return _context28.stop();\n            }\n          }\n        }, _callee28, this, [[0, 15]]);\n      }));\n    }\n  }, {\n    key: \"destroyDash\",\n    value: function destroyDash() {\n      var _a;\n\n      return __awaiter$o(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee29() {\n        return _regeneratorRuntime().wrap(function _callee29$(_context29) {\n          while (1) {\n            switch (_context29.prev = _context29.next) {\n              case 0:\n                (_a = this.dash) === null || _a === void 0 ? void 0 : _a.reset();\n                this.hasAttached = false;\n\n              case 2:\n              case \"end\":\n                return _context29.stop();\n            }\n          }\n        }, _callee29, this);\n      }));\n    }\n  }, {\n    key: \"onMediaElChange\",\n    value: function onMediaElChange(event) {\n      return __awaiter$o(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee30() {\n        return _regeneratorRuntime().wrap(function _callee30$(_context30) {\n          while (1) {\n            switch (_context30.prev = _context30.next) {\n              case 0:\n                this.destroyDash();\n\n                if (!isUndefined(event.detail)) {\n                  _context30.next = 3;\n                  break;\n                }\n\n                return _context30.abrupt(\"return\");\n\n              case 3:\n                this.mediaEl = event.detail;\n                _context30.next = 6;\n                return this.setupDash();\n\n              case 6:\n              case \"end\":\n                return _context30.stop();\n            }\n          }\n        }, _callee30, this);\n      }));\n    }\n  }, {\n    key: \"levelToPlaybackQuality\",\n    value: function levelToPlaybackQuality(level) {\n      return level === -1 ? 'Auto' : \"\".concat(level.height, \"p\");\n    }\n  }, {\n    key: \"findLevelIndexFromQuality\",\n    value: function findLevelIndexFromQuality(quality) {\n      var _this29 = this;\n\n      return this.dash.getBitrateInfoListFor('video').findIndex(function (level) {\n        return _this29.levelToPlaybackQuality(level) === quality;\n      });\n    }\n  }, {\n    key: \"dispatchLevels\",\n    value: function dispatchLevels() {\n      try {\n        var levels = this.dash.getBitrateInfoListFor('video');\n\n        if ((levels === null || levels === void 0 ? void 0 : levels.length) > 0) {\n          this.dispatch('playbackQualities', ['Auto'].concat(_toConsumableArray(levels.map(this.levelToPlaybackQuality))));\n          this.dispatch('playbackQuality', 'Auto');\n        }\n      } catch (e) {\n        this.vmError.emit(e);\n      }\n    }\n  }, {\n    key: \"listenToTextTracksForChanges\",\n    value: function listenToTextTracksForChanges() {\n      var _a, _b, _c;\n\n      this.textTracksDisposal.empty();\n      if (isUndefined(this.mediaEl) || this.shouldRenderNativeTextTracks) return; // Init current track.\n\n      var currentTrack = (_c = ((_b = (_a = this.dash) === null || _a === void 0 ? void 0 : _a.getCurrentTrackFor('text')) === null || _b === void 0 ? void 0 : _b.index) - 1) !== null && _c !== void 0 ? _c : -1;\n      this.currentTextTrack = currentTrack;\n      this.dispatch('currentTextTrack', currentTrack);\n      this.textTracksDisposal.add(listen(this.mediaEl.textTracks, 'change', this.onTextTracksChange.bind(this)));\n    }\n  }, {\n    key: \"getTextTracks\",\n    value: function getTextTracks() {\n      var _a, _b;\n\n      return Array.from((_b = (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.textTracks) !== null && _b !== void 0 ? _b : []);\n    }\n  }, {\n    key: \"hideCurrentTextTrack\",\n    value: function hideCurrentTextTrack() {\n      var textTracks = this.getTextTracks();\n\n      if (textTracks[this.currentTextTrack] && this.isTextTrackVisible) {\n        textTracks[this.currentTextTrack].mode = 'hidden';\n      }\n    }\n  }, {\n    key: \"onTextTracksChange\",\n    value: function onTextTracksChange() {\n      this.hideCurrentTextTrack();\n      this.dispatch('textTracks', this.getTextTracks());\n      this.dispatch('isTextTrackVisible', this.isTextTrackVisible);\n      this.dispatch('currentTextTrack', this.currentTextTrack);\n    }\n    /** @internal */\n\n  }, {\n    key: \"getAdapter\",\n    value: function getAdapter() {\n      var _a, _b;\n\n      return __awaiter$o(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee37() {\n        var _this30 = this;\n\n        var adapter, canVideoProviderPlay;\n        return _regeneratorRuntime().wrap(function _callee37$(_context37) {\n          while (1) {\n            switch (_context37.prev = _context37.next) {\n              case 0:\n                _context37.next = 2;\n                return (_a = this.videoProvider) === null || _a === void 0 ? void 0 : _a.getAdapter();\n\n              case 2:\n                _context37.t1 = _b = _context37.sent;\n                _context37.t0 = _context37.t1 !== null;\n\n                if (!_context37.t0) {\n                  _context37.next = 6;\n                  break;\n                }\n\n                _context37.t0 = _b !== void 0;\n\n              case 6:\n                if (!_context37.t0) {\n                  _context37.next = 10;\n                  break;\n                }\n\n                _context37.t2 = _b;\n                _context37.next = 11;\n                break;\n\n              case 10:\n                _context37.t2 = {};\n\n              case 11:\n                adapter = _context37.t2;\n                canVideoProviderPlay = adapter.canPlay;\n                return _context37.abrupt(\"return\", Object.assign(Object.assign({}, adapter), {\n                  getInternalPlayer: function getInternalPlayer() {\n                    return __awaiter$o(_this30, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee31() {\n                      return _regeneratorRuntime().wrap(function _callee31$(_context31) {\n                        while (1) {\n                          switch (_context31.prev = _context31.next) {\n                            case 0:\n                              return _context31.abrupt(\"return\", this.dash);\n\n                            case 1:\n                            case \"end\":\n                              return _context31.stop();\n                          }\n                        }\n                      }, _callee31, this);\n                    }));\n                  },\n                  canPlay: function canPlay(type) {\n                    return __awaiter$o(_this30, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee32() {\n                      var _c;\n\n                      return _regeneratorRuntime().wrap(function _callee32$(_context32) {\n                        while (1) {\n                          switch (_context32.prev = _context32.next) {\n                            case 0:\n                              return _context32.abrupt(\"return\", isString(type) && dashRegex.test(type) || ((_c = canVideoProviderPlay === null || canVideoProviderPlay === void 0 ? void 0 : canVideoProviderPlay(type)) !== null && _c !== void 0 ? _c : false));\n\n                            case 1:\n                            case \"end\":\n                              return _context32.stop();\n                          }\n                        }\n                      }, _callee32);\n                    }));\n                  },\n                  canSetPlaybackQuality: function canSetPlaybackQuality() {\n                    return __awaiter$o(_this30, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee33() {\n                      var _d, _e;\n\n                      return _regeneratorRuntime().wrap(function _callee33$(_context33) {\n                        while (1) {\n                          switch (_context33.prev = _context33.next) {\n                            case 0:\n                              _context33.prev = 0;\n                              return _context33.abrupt(\"return\", ((_e = (_d = this.dash) === null || _d === void 0 ? void 0 : _d.getBitrateInfoListFor('video')) === null || _e === void 0 ? void 0 : _e.length) > 0);\n\n                            case 4:\n                              _context33.prev = 4;\n                              _context33.t0 = _context33[\"catch\"](0);\n                              this.vmError.emit(_context33.t0);\n                              return _context33.abrupt(\"return\", false);\n\n                            case 8:\n                            case \"end\":\n                              return _context33.stop();\n                          }\n                        }\n                      }, _callee33, this, [[0, 4]]);\n                    }));\n                  },\n                  setPlaybackQuality: function setPlaybackQuality(quality) {\n                    return __awaiter$o(_this30, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee34() {\n                      var index;\n                      return _regeneratorRuntime().wrap(function _callee34$(_context34) {\n                        while (1) {\n                          switch (_context34.prev = _context34.next) {\n                            case 0:\n                              if (!isUndefined(this.dash)) {\n                                index = this.findLevelIndexFromQuality(quality);\n                                this.dash.updateSettings({\n                                  streaming: {\n                                    abr: {\n                                      autoSwitchBitrate: {\n                                        video: index === -1\n                                      }\n                                    }\n                                  }\n                                });\n                                if (index >= 0) this.dash.setQualityFor('video', index); // Update the provider cache.\n\n                                this.dispatch('playbackQuality', quality);\n                              }\n\n                            case 1:\n                            case \"end\":\n                              return _context34.stop();\n                          }\n                        }\n                      }, _callee34, this);\n                    }));\n                  },\n                  setCurrentTextTrack: function setCurrentTextTrack(trackId) {\n                    return __awaiter$o(_this30, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee35() {\n                      var _f;\n\n                      return _regeneratorRuntime().wrap(function _callee35$(_context35) {\n                        while (1) {\n                          switch (_context35.prev = _context35.next) {\n                            case 0:\n                              if (this.shouldRenderNativeTextTracks) {\n                                adapter.setCurrentTextTrack(trackId);\n                              } else {\n                                this.currentTextTrack = trackId;\n                                (_f = this.dash) === null || _f === void 0 ? void 0 : _f.setTextTrack(trackId);\n                                this.onTextTracksChange();\n                              }\n\n                            case 1:\n                            case \"end\":\n                              return _context35.stop();\n                          }\n                        }\n                      }, _callee35, this);\n                    }));\n                  },\n                  setTextTrackVisibility: function setTextTrackVisibility(isVisible) {\n                    return __awaiter$o(_this30, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee36() {\n                      var _g;\n\n                      return _regeneratorRuntime().wrap(function _callee36$(_context36) {\n                        while (1) {\n                          switch (_context36.prev = _context36.next) {\n                            case 0:\n                              if (this.shouldRenderNativeTextTracks) {\n                                adapter.setTextTrackVisibility(isVisible);\n                              } else {\n                                this.isTextTrackVisible = isVisible;\n                                (_g = this.dash) === null || _g === void 0 ? void 0 : _g.enableText(isVisible);\n                                this.onTextTracksChange();\n                              }\n\n                            case 1:\n                            case \"end\":\n                              return _context36.stop();\n                          }\n                        }\n                      }, _callee36, this);\n                    }));\n                  }\n                }));\n\n              case 14:\n              case \"end\":\n                return _context37.stop();\n            }\n          }\n        }, _callee37, this);\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this31 = this;\n\n      return h(\"vm-video\", {\n        willAttach: true,\n        crossOrigin: this.crossOrigin,\n        preload: this.preload,\n        poster: this.poster,\n        controlsList: this.controlsList,\n        autoPiP: this.autoPiP,\n        disablePiP: this.disablePiP,\n        hasCustomTextManager: !this.shouldRenderNativeTextTracks,\n        disableRemotePlayback: this.disableRemotePlayback,\n        mediaTitle: this.mediaTitle,\n        ref: function ref(el) {\n          _this31.videoProvider = el;\n        }\n      });\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"src\": [\"onSrcChange\"],\n        \"hasAttached\": [\"onSrcChange\"],\n        \"shouldRenderNativeTextTracks\": [\"onShouldRenderNativeTextTracks\"],\n        \"isTextTrackVisible\": [\"onTextTrackChange\"],\n        \"currentTextTrack\": [\"onTextTrackChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return dashCss;\n    }\n  }]);\n\n  return Dash;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar dblClickFullscreenCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-dbl-click-fullscreen-z-index)}.dblClickFullscreen{display:none;width:100%;height:100%;pointer-events:none}.dblClickFullscreen.enabled{display:inline-block;pointer-events:auto}\";\n\nvar __awaiter$n = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar DblClickFullscreen = /*#__PURE__*/function (_HTMLElement12) {\n  _inherits(DblClickFullscreen, _HTMLElement12);\n\n  var _super12 = _createSuper(DblClickFullscreen);\n\n  function DblClickFullscreen() {\n    var _this32;\n\n    _classCallCheck(this, DblClickFullscreen);\n\n    _this32 = _super12.call(this);\n\n    _this32.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this32));\n    _this32.canSetFullscreen = false;\n    /**\n     * By default this is disabled on mobile to not interfere with playback, set this to `true` to\n     * enable it.\n     */\n\n    _this32.useOnMobile = false;\n    /** @internal */\n\n    _this32.isFullscreenActive = true;\n    /** @internal */\n\n    _this32.isVideoView = false;\n    /** @internal */\n\n    _this32.playbackReady = false;\n    /** @internal */\n\n    _this32.isMobile = false;\n    _this32.clicks = 0;\n    withComponentRegistry(_assertThisInitialized(_this32));\n    withPlayerContext(_assertThisInitialized(_this32), ['playbackReady', 'isFullscreenActive', 'isVideoView', 'isMobile']);\n    return _this32;\n  }\n\n  _createClass(DblClickFullscreen, [{\n    key: \"onPlaybackReadyChange\",\n    value: function onPlaybackReadyChange() {\n      return __awaiter$n(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee38() {\n        var player;\n        return _regeneratorRuntime().wrap(function _callee38$(_context38) {\n          while (1) {\n            switch (_context38.prev = _context38.next) {\n              case 0:\n                _context38.next = 2;\n                return findPlayer(this);\n\n              case 2:\n                player = _context38.sent;\n\n                if (!isUndefined(player)) {\n                  _context38.next = 5;\n                  break;\n                }\n\n                return _context38.abrupt(\"return\");\n\n              case 5:\n                _context38.next = 7;\n                return player.canSetFullscreen();\n\n              case 7:\n                this.canSetFullscreen = _context38.sent;\n\n              case 8:\n              case \"end\":\n                return _context38.stop();\n            }\n          }\n        }, _callee38, this);\n      }));\n    }\n  }, {\n    key: \"onTriggerClickToPlay\",\n    value: function onTriggerClickToPlay() {\n      return __awaiter$n(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee39() {\n        var _getComponentFromRegi, _getComponentFromRegi2, clickToPlay;\n\n        return _regeneratorRuntime().wrap(function _callee39$(_context39) {\n          while (1) {\n            switch (_context39.prev = _context39.next) {\n              case 0:\n                _getComponentFromRegi = getComponentFromRegistry(this, 'vm-click-to-play'), _getComponentFromRegi2 = _slicedToArray(_getComponentFromRegi, 1), clickToPlay = _getComponentFromRegi2[0];\n                _context39.next = 3;\n                return clickToPlay === null || clickToPlay === void 0 ? void 0 : clickToPlay.forceClick();\n\n              case 3:\n              case \"end\":\n                return _context39.stop();\n            }\n          }\n        }, _callee39, this);\n      }));\n    }\n  }, {\n    key: \"onToggleFullscreen\",\n    value: function onToggleFullscreen() {\n      return __awaiter$n(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee40() {\n        var player;\n        return _regeneratorRuntime().wrap(function _callee40$(_context40) {\n          while (1) {\n            switch (_context40.prev = _context40.next) {\n              case 0:\n                _context40.next = 2;\n                return findPlayer(this);\n\n              case 2:\n                player = _context40.sent;\n\n                if (!isUndefined(player)) {\n                  _context40.next = 5;\n                  break;\n                }\n\n                return _context40.abrupt(\"return\");\n\n              case 5:\n                this.isFullscreenActive ? player.exitFullscreen() : player.enterFullscreen();\n\n              case 6:\n              case \"end\":\n                return _context40.stop();\n            }\n          }\n        }, _callee40, this);\n      }));\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick() {\n      var _this33 = this;\n\n      this.clicks += 1;\n\n      if (this.clicks === 1) {\n        setTimeout(function () {\n          if (_this33.clicks === 1) {\n            _this33.onTriggerClickToPlay();\n          } else {\n            _this33.onToggleFullscreen();\n          }\n\n          _this33.clicks = 0;\n        }, 300);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        class: {\n          dblClickFullscreen: true,\n          enabled: this.playbackReady && this.canSetFullscreen && this.isVideoView && (!this.isMobile || this.useOnMobile)\n        },\n        onClick: this.onClick.bind(this)\n      });\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"playbackReady\": [\"onPlaybackReadyChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return dblClickFullscreenCss;\n    }\n  }]);\n\n  return DblClickFullscreen;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar defaultControlsCss = \":host{display:contents;pointer-events:none;z-index:var(--vm-controls-z-index)}\";\n\nvar DefaultControls = /*#__PURE__*/function (_HTMLElement13) {\n  _inherits(DefaultControls, _HTMLElement13);\n\n  var _super13 = _createSuper(DefaultControls);\n\n  function DefaultControls() {\n    var _this34;\n\n    _classCallCheck(this, DefaultControls);\n\n    _this34 = _super13.call(this);\n\n    _this34.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this34));\n    /**\n     * The length in milliseconds that the controls are active for before fading out. Audio players\n     * are not effected by this prop.\n     */\n\n    _this34.activeDuration = 2750;\n    /**\n     * Whether the controls should wait for playback to start before being shown. Audio players\n     * are not effected by this prop.\n     */\n\n    _this34.waitForPlaybackStart = false;\n    /**\n     * Whether the controls should show/hide when paused. Audio players are not effected by this prop.\n     */\n\n    _this34.hideWhenPaused = false;\n    /**\n     * Whether the controls should hide when the mouse leaves the player. Audio players are not\n     * effected by this prop.\n     */\n\n    _this34.hideOnMouseLeave = false;\n    /** @internal */\n\n    _this34.isMobile = false;\n    /** @internal */\n\n    _this34.isLive = false;\n    /** @internal */\n\n    _this34.isAudioView = false;\n    /** @internal */\n\n    _this34.isVideoView = false;\n    withComponentRegistry(_assertThisInitialized(_this34));\n    withPlayerContext(_assertThisInitialized(_this34), ['theme', 'isMobile', 'isAudioView', 'isVideoView', 'isLive']);\n    return _this34;\n  }\n\n  _createClass(DefaultControls, [{\n    key: \"buildAudioControls\",\n    value: function buildAudioControls() {\n      return h(\"vm-controls\", {\n        fullWidth: true\n      }, h(\"vm-playback-control\", {\n        tooltipDirection: \"right\"\n      }), h(\"vm-volume-control\", null), !this.isLive && h(\"vm-current-time\", null), this.isLive && h(\"vm-control-spacer\", null), !this.isLive && h(\"vm-scrubber-control\", null), this.isLive && h(\"vm-live-indicator\", null), !this.isLive && h(\"vm-end-time\", null), !this.isLive && h(\"vm-settings-control\", {\n        tooltipDirection: \"left\"\n      }), h(\"div\", {\n        style: {\n          marginLeft: '0',\n          paddingRight: '2px'\n        }\n      }));\n    }\n  }, {\n    key: \"buildMobileVideoControls\",\n    value: function buildMobileVideoControls() {\n      return h(Fragment, null, h(\"vm-scrim\", {\n        gradient: \"up\"\n      }), h(\"vm-controls\", {\n        pin: \"topLeft\",\n        fullWidth: true,\n        activeDuration: this.activeDuration,\n        waitForPlaybackStart: this.waitForPlaybackStart,\n        hideWhenPaused: this.hideWhenPaused\n      }, h(\"vm-control-spacer\", null), h(\"vm-volume-control\", null), !this.isLive && h(\"vm-caption-control\", null), !this.isLive && h(\"vm-settings-control\", null), this.isLive && h(\"vm-fullscreen-control\", null)), h(\"vm-controls\", {\n        pin: \"center\",\n        justify: \"center\",\n        activeDuration: this.activeDuration,\n        waitForPlaybackStart: this.waitForPlaybackStart,\n        hideWhenPaused: this.hideWhenPaused\n      }, h(\"vm-playback-control\", {\n        style: {\n          '--vm-control-scale': '1.3'\n        }\n      })), !this.isLive && h(\"vm-controls\", {\n        pin: \"bottomLeft\",\n        fullWidth: true,\n        activeDuration: this.activeDuration,\n        waitForPlaybackStart: this.waitForPlaybackStart,\n        hideWhenPaused: this.hideWhenPaused\n      }, h(\"vm-control-group\", null, h(\"vm-current-time\", null), h(\"vm-control-spacer\", null), h(\"vm-end-time\", null), h(\"vm-fullscreen-control\", null)), h(\"vm-control-group\", {\n        space: \"top\"\n      }, h(\"vm-scrubber-control\", null))));\n    }\n  }, {\n    key: \"buildDesktopVideoControls\",\n    value: function buildDesktopVideoControls() {\n      return h(Fragment, null, this.theme !== 'light' && h(\"vm-scrim\", {\n        gradient: \"up\"\n      }), h(\"vm-controls\", {\n        fullWidth: true,\n        pin: \"bottomRight\",\n        activeDuration: this.activeDuration,\n        waitForPlaybackStart: this.waitForPlaybackStart,\n        hideWhenPaused: this.hideWhenPaused,\n        hideOnMouseLeave: this.hideOnMouseLeave\n      }, !this.isLive && h(\"vm-control-group\", null, h(\"vm-scrubber-control\", null)), h(\"vm-control-group\", {\n        space: this.isLive ? 'none' : 'top'\n      }, h(\"vm-playback-control\", {\n        tooltipDirection: \"right\"\n      }), h(\"vm-volume-control\", null), !this.isLive && h(\"vm-time-progress\", null), h(\"vm-control-spacer\", null), !this.isLive && h(\"vm-caption-control\", null), this.isLive && h(\"vm-live-indicator\", null), h(\"vm-pip-control\", null), !this.isLive && h(\"vm-settings-control\", null), h(\"vm-fullscreen-control\", {\n        tooltipDirection: \"left\"\n      }))));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.isAudioView) return this.buildAudioControls();\n      if (this.isVideoView && this.isMobile) return this.buildMobileVideoControls();\n      if (this.isVideoView) return this.buildDesktopVideoControls();\n      return null;\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return defaultControlsCss;\n    }\n  }]);\n\n  return DefaultControls;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar defaultSettingsCss = \":host{z-index:var(--vm-menu-z-index)}\";\n\nvar __awaiter$m = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar DefaultSettings = /*#__PURE__*/function (_HTMLElement14) {\n  _inherits(DefaultSettings, _HTMLElement14);\n\n  var _super14 = _createSuper(DefaultSettings);\n\n  function DefaultSettings() {\n    var _this35;\n\n    _classCallCheck(this, DefaultSettings);\n\n    _this35 = _super14.call(this);\n\n    _this35.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this35));\n    _this35.textTracksDisposal = new Disposal();\n    _this35.canSetPlaybackRate = false;\n    _this35.canSetPlaybackQuality = false;\n    _this35.canSetTextTrack = false;\n    _this35.canSetAudioTrack = false;\n    /**\n     * Pins the settings to the defined position inside the video player. This has no effect when\n     * the view is of type `audio`, it will always be `bottomRight`.\n     */\n\n    _this35.pin = 'bottomRight';\n    /** @internal */\n\n    _this35.i18n = {};\n    /** @internal */\n\n    _this35.playbackReady = false;\n    /** @internal */\n\n    _this35.playbackRate = 1;\n    /** @internal */\n\n    _this35.playbackRates = [1];\n    /** @internal */\n\n    _this35.isVideoView = false;\n    /** @internal */\n\n    _this35.playbackQualities = [];\n    /** @internal */\n\n    _this35.textTracks = [];\n    /** @internal */\n\n    _this35.currentTextTrack = -1;\n    /** @internal */\n\n    _this35.audioTracks = [];\n    /** @internal */\n\n    _this35.currentAudioTrack = -1;\n    /** @internal */\n\n    _this35.isTextTrackVisible = true;\n    withComponentRegistry(_assertThisInitialized(_this35));\n    withPlayerContext(_assertThisInitialized(_this35), ['i18n', 'playbackReady', 'playbackRate', 'playbackRates', 'playbackQuality', 'playbackQualities', 'isVideoView', 'textTracks', 'currentTextTrack', 'isTextTrackVisible', 'audioTracks', 'currentAudioTrack']);\n    return _this35;\n  }\n\n  _createClass(DefaultSettings, [{\n    key: \"onPlaybackReady\",\n    value: function onPlaybackReady() {\n      return __awaiter$m(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee41() {\n        var player;\n        return _regeneratorRuntime().wrap(function _callee41$(_context41) {\n          while (1) {\n            switch (_context41.prev = _context41.next) {\n              case 0:\n                _context41.next = 2;\n                return findPlayer(this);\n\n              case 2:\n                player = _context41.sent;\n\n                if (!isUndefined(player)) {\n                  _context41.next = 5;\n                  break;\n                }\n\n                return _context41.abrupt(\"return\");\n\n              case 5:\n                _context41.next = 7;\n                return player.canSetPlaybackQuality();\n\n              case 7:\n                this.canSetPlaybackQuality = _context41.sent;\n                _context41.next = 10;\n                return player.canSetPlaybackRate();\n\n              case 10:\n                this.canSetPlaybackRate = _context41.sent;\n\n              case 11:\n              case \"end\":\n                return _context41.stop();\n            }\n          }\n        }, _callee41, this);\n      }));\n    }\n  }, {\n    key: \"onAudioTracksChange\",\n    value: function onAudioTracksChange() {\n      var _a;\n\n      return __awaiter$m(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee42() {\n        var player;\n        return _regeneratorRuntime().wrap(function _callee42$(_context42) {\n          while (1) {\n            switch (_context42.prev = _context42.next) {\n              case 0:\n                player = getPlayerFromRegistry(this);\n                _context42.next = 3;\n                return player === null || player === void 0 ? void 0 : player.canSetAudioTrack();\n\n              case 3:\n                _context42.t1 = _a = _context42.sent;\n                _context42.t0 = _context42.t1 !== null;\n\n                if (!_context42.t0) {\n                  _context42.next = 7;\n                  break;\n                }\n\n                _context42.t0 = _a !== void 0;\n\n              case 7:\n                if (!_context42.t0) {\n                  _context42.next = 11;\n                  break;\n                }\n\n                _context42.t2 = _a;\n                _context42.next = 12;\n                break;\n\n              case 11:\n                _context42.t2 = false;\n\n              case 12:\n                this.canSetAudioTrack = _context42.t2;\n\n              case 13:\n              case \"end\":\n                return _context42.stop();\n            }\n          }\n        }, _callee42, this);\n      }));\n    }\n  }, {\n    key: \"onTextTracksChange\",\n    value: function onTextTracksChange() {\n      var _a;\n\n      return __awaiter$m(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee43() {\n        var player;\n        return _regeneratorRuntime().wrap(function _callee43$(_context43) {\n          while (1) {\n            switch (_context43.prev = _context43.next) {\n              case 0:\n                player = getPlayerFromRegistry(this);\n                _context43.next = 3;\n                return player === null || player === void 0 ? void 0 : player.canSetTextTrack();\n\n              case 3:\n                _context43.t1 = _a = _context43.sent;\n                _context43.t0 = _context43.t1 !== null;\n\n                if (!_context43.t0) {\n                  _context43.next = 7;\n                  break;\n                }\n\n                _context43.t0 = _a !== void 0;\n\n              case 7:\n                if (!_context43.t0) {\n                  _context43.next = 11;\n                  break;\n                }\n\n                _context43.t2 = _a;\n                _context43.next = 12;\n                break;\n\n              case 11:\n                _context43.t2 = false;\n\n              case 12:\n                this.canSetTextTrack = _context43.t2;\n\n              case 13:\n              case \"end\":\n                return _context43.stop();\n            }\n          }\n        }, _callee43, this);\n      }));\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.dispatch = createDispatcher(this);\n    }\n  }, {\n    key: \"componentDidLoad\",\n    value: function componentDidLoad() {\n      this.onTextTracksChange();\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.textTracksDisposal.empty();\n    }\n  }, {\n    key: \"onPlaybackRateSelect\",\n    value: function onPlaybackRateSelect(event) {\n      var radio = event.target;\n      this.dispatch('playbackRate', parseFloat(radio.value));\n    }\n  }, {\n    key: \"buildPlaybackRateSubmenu\",\n    value: function buildPlaybackRateSubmenu() {\n      var _this36 = this;\n\n      if (this.playbackRates.length <= 1 || !this.canSetPlaybackRate) {\n        return h(\"vm-menu-item\", {\n          label: this.i18n.playbackRate,\n          hint: this.i18n.normal\n        });\n      }\n\n      var formatRate = function formatRate(rate) {\n        return rate === 1 ? _this36.i18n.normal : \"\".concat(rate);\n      };\n\n      return h(\"vm-submenu\", {\n        label: this.i18n.playbackRate,\n        hint: formatRate(this.playbackRate)\n      }, h(\"vm-menu-radio-group\", {\n        value: \"\".concat(this.playbackRate),\n        onVmCheck: this.onPlaybackRateSelect.bind(this)\n      }, this.playbackRates.map(function (rate) {\n        return h(\"vm-menu-radio\", {\n          label: formatRate(rate),\n          value: \"\".concat(rate)\n        });\n      })));\n    }\n  }, {\n    key: \"onPlaybackQualitySelect\",\n    value: function onPlaybackQualitySelect(event) {\n      var radio = event.target;\n      this.dispatch('playbackQuality', radio.value);\n    }\n  }, {\n    key: \"buildPlaybackQualitySubmenu\",\n    value: function buildPlaybackQualitySubmenu() {\n      var _a;\n\n      if (this.playbackQualities.length <= 1 || !this.canSetPlaybackQuality) {\n        return h(\"vm-menu-item\", {\n          label: this.i18n.playbackQuality,\n          hint: (_a = this.playbackQuality) !== null && _a !== void 0 ? _a : this.i18n.auto\n        });\n      } // @TODO this doesn't account for audio qualities yet.\n\n\n      var getBadge = function getBadge(quality) {\n        var verticalPixels = parseInt(quality.slice(0, -1), 10);\n        if (verticalPixels >= 2160) return 'UHD';\n        if (verticalPixels >= 1080) return 'HD';\n        return undefined;\n      };\n\n      return h(\"vm-submenu\", {\n        label: this.i18n.playbackQuality,\n        hint: this.playbackQuality\n      }, h(\"vm-menu-radio-group\", {\n        value: this.playbackQuality,\n        onVmCheck: this.onPlaybackQualitySelect.bind(this)\n      }, this.playbackQualities.map(function (quality) {\n        return h(\"vm-menu-radio\", {\n          label: quality,\n          value: quality,\n          badge: getBadge(quality)\n        });\n      })));\n    }\n  }, {\n    key: \"onTextTrackSelect\",\n    value: function onTextTrackSelect(event) {\n      var radio = event.target;\n      var trackId = parseInt(radio.value, 10);\n      var player = getPlayerFromRegistry(this);\n\n      if (trackId === -1) {\n        player === null || player === void 0 ? void 0 : player.setTextTrackVisibility(false);\n        return;\n      }\n\n      player === null || player === void 0 ? void 0 : player.setTextTrackVisibility(true);\n      player === null || player === void 0 ? void 0 : player.setCurrentTextTrack(trackId);\n    }\n  }, {\n    key: \"buildTextTracksSubmenu\",\n    value: function buildTextTracksSubmenu() {\n      var _a, _b, _c;\n\n      if (this.textTracks.length <= 1 || !this.canSetTextTrack) {\n        return h(\"vm-menu-item\", {\n          label: this.i18n.subtitlesOrCc,\n          hint: (_b = (_a = this.textTracks[this.currentTextTrack]) === null || _a === void 0 ? void 0 : _a.label) !== null && _b !== void 0 ? _b : this.i18n.none\n        });\n      }\n\n      return h(\"vm-submenu\", {\n        label: this.i18n.subtitlesOrCc,\n        hint: this.isTextTrackVisible ? (_c = this.textTracks[this.currentTextTrack]) === null || _c === void 0 ? void 0 : _c.label : this.i18n.off\n      }, h(\"vm-menu-radio-group\", {\n        value: \"\".concat(!this.isTextTrackVisible ? -1 : this.currentTextTrack),\n        onVmCheck: this.onTextTrackSelect.bind(this)\n      }, [h(\"vm-menu-radio\", {\n        label: this.i18n.off,\n        value: \"-1\"\n      })].concat(this.textTracks.map(function (track, i) {\n        return h(\"vm-menu-radio\", {\n          label: track.label,\n          value: \"\".concat(i)\n        });\n      }))));\n    }\n  }, {\n    key: \"onAudioTrackSelect\",\n    value: function onAudioTrackSelect(event) {\n      var radio = event.target;\n      var trackId = parseInt(radio.value, 10);\n      var player = getPlayerFromRegistry(this);\n      player === null || player === void 0 ? void 0 : player.setCurrentAudioTrack(trackId);\n    }\n  }, {\n    key: \"buildAudioTracksMenu\",\n    value: function buildAudioTracksMenu() {\n      var _a, _b, _c;\n\n      if (this.audioTracks.length <= 1 || !this.canSetAudioTrack) {\n        return h(\"vm-menu-item\", {\n          label: this.i18n.audio,\n          hint: (_b = (_a = this.audioTracks[this.currentAudioTrack]) === null || _a === void 0 ? void 0 : _a.label) !== null && _b !== void 0 ? _b : this.i18n.default\n        });\n      }\n\n      return h(\"vm-submenu\", {\n        label: this.i18n.audio,\n        hint: (_c = this.audioTracks[this.currentAudioTrack]) === null || _c === void 0 ? void 0 : _c.label\n      }, h(\"vm-menu-radio-group\", {\n        value: \"\".concat(this.currentAudioTrack),\n        onVmCheck: this.onAudioTrackSelect.bind(this)\n      }, this.audioTracks.map(function (track, i) {\n        return h(\"vm-menu-radio\", {\n          label: track.label,\n          value: \"\".concat(i)\n        });\n      })));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(\"vm-settings\", {\n        pin: this.pin\n      }, this.buildAudioTracksMenu(), this.buildPlaybackRateSubmenu(), this.buildPlaybackQualitySubmenu(), this.isVideoView && this.buildTextTracksSubmenu(), h(\"slot\", null));\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"playbackReady\": [\"onPlaybackReady\", \"onAudioTracksChange\", \"onTextTracksChange\"],\n        \"audioTracks\": [\"onAudioTracksChange\"],\n        \"textTracks\": [\"onTextTracksChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return defaultSettingsCss;\n    }\n  }]);\n\n  return DefaultSettings;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar defaultUiCss = \":host{display:contents;pointer-events:none}\";\n\nvar DefaultUI = /*#__PURE__*/function (_HTMLElement15) {\n  _inherits(DefaultUI, _HTMLElement15);\n\n  var _super15 = _createSuper(DefaultUI);\n\n  function DefaultUI() {\n    var _this37;\n\n    _classCallCheck(this, DefaultUI);\n\n    _this37 = _super15.call(this);\n\n    _this37.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this37));\n    /**\n     * Whether clicking the player should not toggle playback.\n     */\n\n    _this37.noClickToPlay = false;\n    /**\n     * Whether double clicking the player should not toggle fullscreen mode.\n     */\n\n    _this37.noDblClickFullscreen = false;\n    /**\n     * Whether the custom captions UI should not be loaded.\n     */\n\n    _this37.noCaptions = false;\n    /**\n     * Whether the custom poster UI should not be loaded.\n     */\n\n    _this37.noPoster = false;\n    /**\n     * Whether the custom spinner UI should not be loaded.\n     */\n\n    _this37.noSpinner = false;\n    /**\n     * Whether the custom default controls should not be loaded.\n     */\n\n    _this37.noControls = false;\n    /**\n     * Whether the custom default settings menu should not be loaded.\n     */\n\n    _this37.noSettings = false;\n    /**\n     * Whether the default loading screen should not be loaded.\n     */\n\n    _this37.noLoadingScreen = false;\n    withComponentRegistry(_assertThisInitialized(_this37));\n    return _this37;\n  }\n\n  _createClass(DefaultUI, [{\n    key: \"render\",\n    value: function render() {\n      return h(\"vm-ui\", null, !this.noClickToPlay && h(\"vm-click-to-play\", null), !this.noDblClickFullscreen && h(\"vm-dbl-click-fullscreen\", null), !this.noCaptions && h(\"vm-captions\", null), !this.noPoster && h(\"vm-poster\", null), !this.noSpinner && h(\"vm-spinner\", null), !this.noLoadingScreen && h(\"vm-loading-screen\", null), !this.noControls && h(\"vm-default-controls\", null), !this.noSettings && h(\"vm-default-settings\", null), h(\"slot\", null));\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return defaultUiCss;\n    }\n  }]);\n\n  return DefaultUI;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar LazyLoader = /*#__PURE__*/function () {\n  function LazyLoader(el, attributes, onLoad) {\n    _classCallCheck(this, LazyLoader);\n\n    var _a;\n\n    this.el = el;\n    this.attributes = attributes;\n    this.onLoad = onLoad;\n    this.hasLoaded = false;\n    if (isNil(this.el)) return;\n    this.intersectionObs = this.canObserveIntersection() ? new IntersectionObserver(this.onIntersection.bind(this)) : undefined;\n    this.mutationObs = this.canObserveMutations() ? new MutationObserver(this.onMutation.bind(this)) : undefined;\n    (_a = this.mutationObs) === null || _a === void 0 ? void 0 : _a.observe(this.el, {\n      childList: true,\n      subtree: true,\n      attributeFilter: this.attributes\n    });\n    this.lazyLoad();\n  }\n\n  _createClass(LazyLoader, [{\n    key: \"didLoad\",\n    value: function didLoad() {\n      return this.hasLoaded;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _a, _b;\n\n      (_a = this.intersectionObs) === null || _a === void 0 ? void 0 : _a.disconnect();\n      (_b = this.mutationObs) === null || _b === void 0 ? void 0 : _b.disconnect();\n    }\n  }, {\n    key: \"canObserveIntersection\",\n    value: function canObserveIntersection() {\n      return IS_CLIENT && window.IntersectionObserver;\n    }\n  }, {\n    key: \"canObserveMutations\",\n    value: function canObserveMutations() {\n      return IS_CLIENT && window.MutationObserver;\n    }\n  }, {\n    key: \"lazyLoad\",\n    value: function lazyLoad() {\n      var _a;\n\n      if (this.canObserveIntersection()) {\n        (_a = this.intersectionObs) === null || _a === void 0 ? void 0 : _a.observe(this.el);\n      } else {\n        this.load();\n      }\n    }\n  }, {\n    key: \"onIntersection\",\n    value: function onIntersection(entries) {\n      var _this38 = this;\n\n      entries.forEach(function (entry) {\n        if (entry.intersectionRatio > 0 || entry.isIntersecting) {\n          _this38.load();\n\n          _this38.intersectionObs.unobserve(entry.target);\n        }\n      });\n    }\n  }, {\n    key: \"onMutation\",\n    value: function onMutation() {\n      if (this.hasLoaded) this.load();\n    }\n  }, {\n    key: \"getLazyElements\",\n    value: function getLazyElements() {\n      var root = !isNil(this.el.shadowRoot) ? this.el.shadowRoot : this.el;\n      return root.querySelectorAll('.lazy');\n    }\n  }, {\n    key: \"load\",\n    value: function load() {\n      var _this39 = this;\n\n      window.requestAnimationFrame(function () {\n        _this39.getLazyElements().forEach(_this39.loadEl.bind(_this39));\n      });\n    }\n  }, {\n    key: \"loadEl\",\n    value: function loadEl(el) {\n      var _a, _b;\n\n      (_a = this.intersectionObs) === null || _a === void 0 ? void 0 : _a.unobserve(el);\n      this.hasLoaded = true;\n      (_b = this.onLoad) === null || _b === void 0 ? void 0 : _b.call(this, el);\n    }\n  }]);\n\n  return LazyLoader;\n}();\n\nvar embedCss = \":host{z-index:var(--vm-media-z-index)}iframe{position:absolute;top:0;left:0;border:0;width:100%;height:100%;user-select:none}\";\n\nvar __awaiter$l = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar idCount$4 = 0;\nvar connected = new Set();\n\nvar Embed = /*#__PURE__*/function (_HTMLElement16) {\n  _inherits(Embed, _HTMLElement16);\n\n  var _super16 = _createSuper(Embed);\n\n  function Embed() {\n    var _this40;\n\n    _classCallCheck(this, Embed);\n\n    _this40 = _super16.call(this);\n\n    _this40.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this40));\n    _this40.vmEmbedSrcChange = createEvent(_assertThisInitialized(_this40), \"vmEmbedSrcChange\", 3);\n    _this40.vmEmbedMessage = createEvent(_assertThisInitialized(_this40), \"vmEmbedMessage\", 3);\n    _this40.vmEmbedLoaded = createEvent(_assertThisInitialized(_this40), \"vmEmbedLoaded\", 3);\n    _this40.srcWithParams = '';\n    _this40.hasEnteredViewport = false;\n    /**\n     * A URL that will load the external player and media (Eg: https://www.youtube.com/embed/DyTCOwB0DVw).\n     */\n\n    _this40.embedSrc = '';\n    /**\n     * The title of the current media so it can be set on the inner `iframe` for screen readers.\n     */\n\n    _this40.mediaTitle = '';\n    /**\n     * The parameters to pass to the embedded player which are appended to the `embedSrc` prop. These\n     * can be passed in as a query string or object.\n     */\n\n    _this40.params = '';\n    /**\n     * A collection of URLs to that the browser should immediately start establishing a connection\n     * with.\n     */\n\n    _this40.preconnections = [];\n    withComponentRegistry(_assertThisInitialized(_this40));\n    return _this40;\n  }\n\n  _createClass(Embed, [{\n    key: \"onEmbedSrcChange\",\n    value: function onEmbedSrcChange() {\n      this.srcWithParams = isString(this.embedSrc) && this.embedSrc.length > 0 ? appendParamsToURL(this.embedSrc, this.params) : undefined;\n    }\n  }, {\n    key: \"srcWithParamsChange\",\n    value: function srcWithParamsChange() {\n      if (isUndefined(this.srcWithParams)) {\n        this.vmEmbedSrcChange.emit(this.srcWithParams);\n        return;\n      }\n\n      if (!this.hasEnteredViewport && !connected.has(this.embedSrc)) {\n        if (preconnect(this.srcWithParams)) connected.add(this.embedSrc);\n      }\n\n      this.vmEmbedSrcChange.emit(this.srcWithParams);\n    }\n  }, {\n    key: \"preconnectionsChange\",\n    value: function preconnectionsChange() {\n      if (this.hasEnteredViewport) {\n        return;\n      }\n\n      this.preconnections.filter(function (connection) {\n        return !connected.has(connection);\n      }).forEach(function (connection) {\n        if (preconnect(connection)) connected.add(connection);\n      });\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.lazyLoader = new LazyLoader(this.host, ['data-src'], function (el) {\n        var src = el.getAttribute('data-src');\n        el.removeAttribute('src');\n        if (!isNull(src)) el.setAttribute('src', src);\n      });\n      this.onEmbedSrcChange();\n      this.genIframeId();\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.lazyLoader.destroy();\n    }\n  }, {\n    key: \"onWindowMessage\",\n    value: function onWindowMessage(e) {\n      var _a, _b, _c;\n\n      var originMatches = e.source === ((_a = this.iframe) === null || _a === void 0 ? void 0 : _a.contentWindow) && (!isString(this.origin) || this.origin === e.origin);\n      if (!originMatches) return;\n      var message = (_c = (_b = this.decoder) === null || _b === void 0 ? void 0 : _b.call(this, e.data)) !== null && _c !== void 0 ? _c : e.data;\n      if (message) this.vmEmbedMessage.emit(message);\n    }\n    /**\n     * Posts a message to the embedded media player.\n     */\n\n  }, {\n    key: \"postMessage\",\n    value: function postMessage(message, target) {\n      var _a, _b;\n\n      return __awaiter$l(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee44() {\n        return _regeneratorRuntime().wrap(function _callee44$(_context44) {\n          while (1) {\n            switch (_context44.prev = _context44.next) {\n              case 0:\n                (_b = (_a = this.iframe) === null || _a === void 0 ? void 0 : _a.contentWindow) === null || _b === void 0 ? void 0 : _b.postMessage(JSON.stringify(message), target !== null && target !== void 0 ? target : '*');\n\n              case 1:\n              case \"end\":\n                return _context44.stop();\n            }\n          }\n        }, _callee44, this);\n      }));\n    }\n  }, {\n    key: \"onLoad\",\n    value: function onLoad() {\n      this.vmEmbedLoaded.emit();\n    }\n  }, {\n    key: \"genIframeId\",\n    value: function genIframeId() {\n      idCount$4 += 1;\n      this.id = \"vm-iframe-\".concat(idCount$4);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this41 = this;\n\n      return h(\"iframe\", {\n        id: this.id,\n        class: \"lazy\",\n        title: this.mediaTitle,\n        \"data-src\": this.srcWithParams,\n        allowFullScreen: true,\n        allow: \"autoplay; encrypted-media; picture-in-picture;\",\n        onLoad: this.onLoad.bind(this),\n        ref: function ref(el) {\n          _this41.iframe = el;\n        }\n      });\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"embedSrc\": [\"onEmbedSrcChange\"],\n        \"params\": [\"onEmbedSrcChange\"],\n        \"srcWithParams\": [\"srcWithParamsChange\"],\n        \"preconnections\": [\"preconnectionsChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return embedCss;\n    }\n  }]);\n\n  return Embed;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar endTimeCss = \":host{display:flex;align-items:center;justify-content:center}\";\n\nvar EndTime = /*#__PURE__*/function (_HTMLElement17) {\n  _inherits(EndTime, _HTMLElement17);\n\n  var _super17 = _createSuper(EndTime);\n\n  function EndTime() {\n    var _this42;\n\n    _classCallCheck(this, EndTime);\n\n    _this42 = _super17.call(this);\n\n    _this42.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this42));\n    /** @internal */\n\n    _this42.duration = -1;\n    /** @internal */\n\n    _this42.i18n = {};\n    /**\n     * Whether the time should always show the hours unit, even if the time is less than\n     * 1 hour (eg: `20:35` -> `00:20:35`).\n     */\n\n    _this42.alwaysShowHours = false;\n    withComponentRegistry(_assertThisInitialized(_this42));\n    withPlayerContext(_assertThisInitialized(_this42), ['duration', 'i18n']);\n    return _this42;\n  }\n\n  _createClass(EndTime, [{\n    key: \"render\",\n    value: function render() {\n      return h(\"vm-time\", {\n        label: this.i18n.duration,\n        seconds: Math.max(0, this.duration),\n        alwaysShowHours: this.alwaysShowHours\n      });\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return endTimeCss;\n    }\n  }]);\n\n  return EndTime;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar key = {\n  fullscreenEnabled: 0,\n  fullscreenElement: 1,\n  requestFullscreen: 2,\n  exitFullscreen: 3,\n  fullscreenchange: 4,\n  fullscreenerror: 5,\n  fullscreen: 6\n};\nvar webkit = ['webkitFullscreenEnabled', 'webkitFullscreenElement', 'webkitRequestFullscreen', 'webkitExitFullscreen', 'webkitfullscreenchange', 'webkitfullscreenerror', '-webkit-full-screen'];\nvar moz = ['mozFullScreenEnabled', 'mozFullScreenElement', 'mozRequestFullScreen', 'mozCancelFullScreen', 'mozfullscreenchange', 'mozfullscreenerror', '-moz-full-screen'];\nvar ms = ['msFullscreenEnabled', 'msFullscreenElement', 'msRequestFullscreen', 'msExitFullscreen', 'MSFullscreenChange', 'MSFullscreenError', '-ms-fullscreen']; // so it doesn't throw if no window or document\n\nvar document$1 = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\nvar vendor = 'fullscreenEnabled' in document$1 && Object.keys(key) || webkit[0] in document$1 && webkit || moz[0] in document$1 && moz || ms[0] in document$1 && ms || [];\nvar fscreen = {\n  requestFullscreen: function requestFullscreen(element) {\n    return element[vendor[key.requestFullscreen]]();\n  },\n  requestFullscreenFunction: function requestFullscreenFunction(element) {\n    return element[vendor[key.requestFullscreen]];\n  },\n\n  get exitFullscreen() {\n    return document$1[vendor[key.exitFullscreen]].bind(document$1);\n  },\n\n  get fullscreenPseudoClass() {\n    return \":\" + vendor[key.fullscreen];\n  },\n\n  addEventListener: function addEventListener(type, handler, options) {\n    return document$1.addEventListener(vendor[key[type]], handler, options);\n  },\n  removeEventListener: function removeEventListener(type, handler, options) {\n    return document$1.removeEventListener(vendor[key[type]], handler, options);\n  },\n\n  get fullscreenEnabled() {\n    return Boolean(document$1[vendor[key.fullscreenEnabled]]);\n  },\n\n  set fullscreenEnabled(val) {},\n\n  get fullscreenElement() {\n    return document$1[vendor[key.fullscreenElement]];\n  },\n\n  set fullscreenElement(val) {},\n\n  get onfullscreenchange() {\n    return document$1[(\"on\" + vendor[key.fullscreenchange]).toLowerCase()];\n  },\n\n  set onfullscreenchange(handler) {\n    return document$1[(\"on\" + vendor[key.fullscreenchange]).toLowerCase()] = handler;\n  },\n\n  get onfullscreenerror() {\n    return document$1[(\"on\" + vendor[key.fullscreenerror]).toLowerCase()];\n  },\n\n  set onfullscreenerror(handler) {\n    return document$1[(\"on\" + vendor[key.fullscreenerror]).toLowerCase()] = handler;\n  }\n\n};\n\nfunction mitt(n) {\n  return {\n    all: n = n || new Map(),\n    on: function on(t, e) {\n      var i = n.get(t);\n      i ? i.push(e) : n.set(t, [e]);\n    },\n    off: function off(t, e) {\n      var i = n.get(t);\n      i && (e ? i.splice(i.indexOf(e) >>> 0, 1) : n.set(t, []));\n    },\n    emit: function emit(t, e) {\n      var i = n.get(t);\n      i && i.slice().map(function (n) {\n        n(e);\n      }), (i = n.get(\"*\")) && i.slice().map(function (n) {\n        n(t, e);\n      });\n    }\n  };\n}\n\nvar __awaiter$k = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n/**\n * Unfortunately fullscreen isn't straight forward due to cross-browser inconsistencies. This\n * class abstract the logic for handling fullscreen across browsers.\n */\n\n\nvar FullscreenController = /*#__PURE__*/function () {\n  function FullscreenController(host) {\n    _classCallCheck(this, FullscreenController);\n\n    this.host = host;\n    this.disposal = new Disposal();\n    this.emitter = mitt();\n  }\n  /**\n   * Whether fullscreen mode can be requested, generally is an API available to do so.\n   */\n\n\n  _createClass(FullscreenController, [{\n    key: \"isSupported\",\n    get: function get() {\n      return this.isSupportedNatively;\n    }\n    /**\n     * Whether the native Fullscreen API is enabled/available.\n     */\n\n  }, {\n    key: \"isSupportedNatively\",\n    get: function get() {\n      return fscreen.fullscreenEnabled;\n    }\n    /**\n     * Whether the host element is in fullscreen mode.\n     */\n\n  }, {\n    key: \"isFullscreen\",\n    get: function get() {\n      return this.isNativeFullscreen;\n    }\n    /**\n     * Whether the host element is in fullscreen mode via the native Fullscreen API.\n     */\n\n  }, {\n    key: \"isNativeFullscreen\",\n    get: function get() {\n      if (fscreen.fullscreenElement === this.host) return true;\n\n      try {\n        // Throws in iOS Safari...\n        return this.host.matches( // Property `fullscreenPseudoClass` is missing from `@types/fscreen`.\n        fscreen.fullscreenPseudoClass);\n      } catch (error) {\n        return false;\n      }\n    }\n  }, {\n    key: \"on\",\n    value: function on(type, handler) {\n      // @ts-expect-error - not typed yet.\n      this.emitter.on(type, handler);\n    }\n  }, {\n    key: \"off\",\n    value: function off(type, handler) {\n      // @ts-expect-error - not typed yet.\n      this.emitter.off(type, handler);\n    }\n    /**\n     * Dispose of any event listeners and exit fullscreen (if active).\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      return __awaiter$k(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee45() {\n        return _regeneratorRuntime().wrap(function _callee45$(_context45) {\n          while (1) {\n            switch (_context45.prev = _context45.next) {\n              case 0:\n                if (!this.isFullscreen) {\n                  _context45.next = 3;\n                  break;\n                }\n\n                _context45.next = 3;\n                return this.exitFullscreen();\n\n              case 3:\n                this.disposal.empty();\n                this.emitter.all.clear();\n\n              case 5:\n              case \"end\":\n                return _context45.stop();\n            }\n          }\n        }, _callee45, this);\n      }));\n    }\n  }, {\n    key: \"addFullscreenChangeEventListener\",\n    value: function addFullscreenChangeEventListener(handler) {\n      if (!this.isSupported) return noop;\n      return listen(fscreen, 'fullscreenchange', handler);\n    }\n  }, {\n    key: \"addFullscreenErrorEventListener\",\n    value: function addFullscreenErrorEventListener(handler) {\n      if (!this.isSupported) return noop;\n      return listen(fscreen, 'fullscreenerror', handler);\n    }\n  }, {\n    key: \"requestFullscreen\",\n    value: function requestFullscreen() {\n      return __awaiter$k(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee46() {\n        return _regeneratorRuntime().wrap(function _callee46$(_context46) {\n          while (1) {\n            switch (_context46.prev = _context46.next) {\n              case 0:\n                if (!this.isFullscreen) {\n                  _context46.next = 2;\n                  break;\n                }\n\n                return _context46.abrupt(\"return\");\n\n              case 2:\n                this.throwIfNoFullscreenSupport(); // TODO: Check if PiP is active, if so make sure to exit - need PipController.\n\n                this.disposal.add(this.addFullscreenChangeEventListener(this.handleFullscreenChange.bind(this)));\n                this.disposal.add(this.addFullscreenErrorEventListener(this.handleFullscreenError.bind(this)));\n                return _context46.abrupt(\"return\", this.makeEnterFullscreenRequest());\n\n              case 6:\n              case \"end\":\n                return _context46.stop();\n            }\n          }\n        }, _callee46, this);\n      }));\n    }\n  }, {\n    key: \"makeEnterFullscreenRequest\",\n    value: function makeEnterFullscreenRequest() {\n      return __awaiter$k(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee47() {\n        return _regeneratorRuntime().wrap(function _callee47$(_context47) {\n          while (1) {\n            switch (_context47.prev = _context47.next) {\n              case 0:\n                return _context47.abrupt(\"return\", fscreen.requestFullscreen(this.host));\n\n              case 1:\n              case \"end\":\n                return _context47.stop();\n            }\n          }\n        }, _callee47, this);\n      }));\n    }\n  }, {\n    key: \"handleFullscreenChange\",\n    value: function handleFullscreenChange() {\n      if (!this.isFullscreen) this.disposal.empty();\n      this.emitter.emit('change', this.isFullscreen);\n    }\n  }, {\n    key: \"handleFullscreenError\",\n    value: function handleFullscreenError(event) {\n      this.emitter.emit('error', event);\n    }\n  }, {\n    key: \"exitFullscreen\",\n    value: function exitFullscreen() {\n      return __awaiter$k(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee48() {\n        return _regeneratorRuntime().wrap(function _callee48$(_context48) {\n          while (1) {\n            switch (_context48.prev = _context48.next) {\n              case 0:\n                if (this.isFullscreen) {\n                  _context48.next = 2;\n                  break;\n                }\n\n                return _context48.abrupt(\"return\");\n\n              case 2:\n                this.throwIfNoFullscreenSupport();\n                return _context48.abrupt(\"return\", this.makeExitFullscreenRequest());\n\n              case 4:\n              case \"end\":\n                return _context48.stop();\n            }\n          }\n        }, _callee48, this);\n      }));\n    }\n  }, {\n    key: \"makeExitFullscreenRequest\",\n    value: function makeExitFullscreenRequest() {\n      return __awaiter$k(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee49() {\n        return _regeneratorRuntime().wrap(function _callee49$(_context49) {\n          while (1) {\n            switch (_context49.prev = _context49.next) {\n              case 0:\n                return _context49.abrupt(\"return\", fscreen.exitFullscreen());\n\n              case 1:\n              case \"end\":\n                return _context49.stop();\n            }\n          }\n        }, _callee49);\n      }));\n    }\n  }, {\n    key: \"throwIfNoFullscreenSupport\",\n    value: function throwIfNoFullscreenSupport() {\n      if (this.isSupported) return;\n      throw Error('Fullscreen API is not enabled or supported in this environment.');\n    }\n  }]);\n\n  return FullscreenController;\n}();\n\nvar __awaiter$j = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n/**\n * Extends the base `FullscreenController` with additional logic for handling fullscreen\n * on iOS Safari where the native Fullscreen API is not available (in this case it fallsback to\n * using the `VideoPresentationController`).\n */\n\n\nvar VideoFullscreenController = /*#__PURE__*/function (_FullscreenController) {\n  _inherits(VideoFullscreenController, _FullscreenController);\n\n  var _super18 = _createSuper(VideoFullscreenController);\n\n  function VideoFullscreenController(host, presentationController) {\n    var _this43;\n\n    _classCallCheck(this, VideoFullscreenController);\n\n    _this43 = _super18.call(this, host);\n    _this43.host = host;\n    _this43.presentationController = presentationController;\n    return _this43;\n  }\n\n  _createClass(VideoFullscreenController, [{\n    key: \"isFullscreen\",\n    get: function get() {\n      return this.presentationController.isFullscreenMode;\n    }\n    /**\n     * Whether a fallback fullscreen API is available on Safari using presentation modes. This\n     * is only used on iOS where the native fullscreen API is not available.\n     *\n     * @link https://developer.apple.com/documentation/webkitjs/htmlvideoelement/1631913-webkitpresentationmode\n     */\n\n  }, {\n    key: \"isSupported\",\n    get: function get() {\n      return this.presentationController.isSupported;\n    }\n  }, {\n    key: \"makeEnterFullscreenRequest\",\n    value: function makeEnterFullscreenRequest() {\n      return __awaiter$j(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee50() {\n        return _regeneratorRuntime().wrap(function _callee50$(_context50) {\n          while (1) {\n            switch (_context50.prev = _context50.next) {\n              case 0:\n                return _context50.abrupt(\"return\", this.presentationController.setPresentationMode('fullscreen'));\n\n              case 1:\n              case \"end\":\n                return _context50.stop();\n            }\n          }\n        }, _callee50, this);\n      }));\n    }\n  }, {\n    key: \"makeExitFullscreenRequest\",\n    value: function makeExitFullscreenRequest() {\n      return __awaiter$j(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee51() {\n        return _regeneratorRuntime().wrap(function _callee51$(_context51) {\n          while (1) {\n            switch (_context51.prev = _context51.next) {\n              case 0:\n                return _context51.abrupt(\"return\", this.presentationController.setPresentationMode('inline'));\n\n              case 1:\n              case \"end\":\n                return _context51.stop();\n            }\n          }\n        }, _callee51, this);\n      }));\n    }\n  }, {\n    key: \"addFullscreenChangeEventListener\",\n    value: function addFullscreenChangeEventListener() {\n      var _this44 = this;\n\n      if (!this.isSupported) return noop;\n      this.presentationController.on('change', this.handlePresentationModeChange.bind(this));\n      return function () {\n        _this44.presentationController.off('change', _this44.handlePresentationModeChange.bind(_this44));\n      };\n    }\n  }, {\n    key: \"handlePresentationModeChange\",\n    value: function handlePresentationModeChange() {\n      this.handleFullscreenChange();\n    }\n  }, {\n    key: \"addFullscreenErrorEventListener\",\n    value: function addFullscreenErrorEventListener() {\n      return noop;\n    }\n  }]);\n\n  return VideoFullscreenController;\n}(FullscreenController);\n\nvar __awaiter$i = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n/**\n * Contains the logic for handling presentation modes on Safari. This class is used by\n * the `VideoFullscreenController` as a fallback when the native Fullscreen API is not\n * available (ie: iOS Safari).\n */\n\n\nvar VideoPresentationController = /*#__PURE__*/function () {\n  function VideoPresentationController(host) {\n    var _this45 = this;\n\n    _classCallCheck(this, VideoPresentationController);\n\n    this.host = host;\n    this.disposal = new Disposal();\n    this.emitter = mitt();\n    var disconnectedCallback = host.disconnectedCallback;\n\n    host.disconnectedCallback = function () {\n      return __awaiter$i(_this45, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee52() {\n        return _regeneratorRuntime().wrap(function _callee52$(_context52) {\n          while (1) {\n            switch (_context52.prev = _context52.next) {\n              case 0:\n                _context52.next = 2;\n                return this.destroy();\n\n              case 2:\n                disconnectedCallback === null || disconnectedCallback === void 0 ? void 0 : disconnectedCallback.call(host);\n\n              case 3:\n              case \"end\":\n                return _context52.stop();\n            }\n          }\n        }, _callee52, this);\n      }));\n    };\n  }\n\n  _createClass(VideoPresentationController, [{\n    key: \"videoElement\",\n    get: function get() {\n      var _a;\n\n      if (((_a = this.host.mediaEl) === null || _a === void 0 ? void 0 : _a.tagName.toLowerCase()) === 'video') {\n        return this.host.mediaEl;\n      }\n\n      return undefined;\n    }\n    /**\n     * The current presentation mode, possible values include `inline`, `picture-in-picture` and\n     * `fullscreen`. Only available in Safari.\n     *\n     * @default undefined\n     * @link https://developer.apple.com/documentation/webkitjs/htmlvideoelement/1631913-webkitpresentationmode\n     */\n\n  }, {\n    key: \"presentationMode\",\n    get: function get() {\n      var _a;\n\n      return (_a = this.videoElement) === null || _a === void 0 ? void 0 : _a.webkitPresentationMode;\n    }\n    /**\n     * Whether the current `presentationMode` is `inline`.\n     */\n\n  }, {\n    key: \"isInlineMode\",\n    get: function get() {\n      return this.presentationMode === 'inline';\n    }\n    /**\n     * Whether the current `presentationMode` is `picture-in-picture`.\n     */\n\n  }, {\n    key: \"isPictureInPictureMode\",\n    get: function get() {\n      return this.presentationMode === 'inline';\n    }\n    /**\n     * Whether the current `presentationMode` is `fullscreen`.\n     */\n\n  }, {\n    key: \"isFullscreenMode\",\n    get: function get() {\n      return this.presentationMode === 'fullscreen';\n    }\n    /**\n     * Whether the presentation mode API is available.\n     *\n     * @link https://developer.apple.com/documentation/webkitjs/htmlvideoelement/1628805-webkitsupportsfullscreen\n     */\n\n  }, {\n    key: \"isSupported\",\n    get: function get() {\n      var _a, _b, _c;\n\n      return IS_IOS && isFunction((_a = this.videoElement) === null || _a === void 0 ? void 0 : _a.webkitSetPresentationMode) && ((_c = (_b = this.videoElement) === null || _b === void 0 ? void 0 : _b.webkitSupportsFullscreen) !== null && _c !== void 0 ? _c : false);\n    }\n  }, {\n    key: \"setPresentationMode\",\n    value: function setPresentationMode(mode) {\n      var _a, _b;\n\n      (_b = (_a = this.videoElement) === null || _a === void 0 ? void 0 : _a.webkitSetPresentationMode) === null || _b === void 0 ? void 0 : _b.call(_a, mode);\n    }\n  }, {\n    key: \"on\",\n    value: function on(type, handler) {\n      // @ts-expect-error - not typed yet.\n      this.emitter.on(type, handler);\n    }\n  }, {\n    key: \"off\",\n    value: function off(type, handler) {\n      // @ts-expect-error - not typed yet.\n      this.emitter.off(type, handler);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.setPresentationMode('inline');\n      this.disposal.empty();\n    }\n  }, {\n    key: \"addPresentationModeChangeEventListener\",\n    value: function addPresentationModeChangeEventListener() {\n      if (!this.isSupported || isNil(this.videoElement)) return noop;\n      return listen(this.videoElement, 'webkitpresentationmodechanged', this.handlePresentationModeChange.bind(this));\n    }\n  }, {\n    key: \"handlePresentationModeChange\",\n    value: function handlePresentationModeChange() {\n      this.emitter.emit('change', this.presentationMode);\n    }\n  }]);\n\n  return VideoPresentationController;\n}();\n\nvar fileCss = \"audio.sc-vm-file,video.sc-vm-file{border-radius:inherit;vertical-align:middle;width:100%;outline:0}video.sc-vm-file{position:absolute;top:0;left:0;border:0;height:100%;user-select:none}\";\n\nvar __awaiter$h = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar File = /*#__PURE__*/function (_HTMLElement18) {\n  _inherits(File, _HTMLElement18);\n\n  var _super19 = _createSuper(File);\n\n  function File() {\n    var _this46;\n\n    _classCallCheck(this, File);\n\n    _this46 = _super19.call(this);\n\n    _this46.__registerHost();\n\n    _this46.vmLoadStart = createEvent(_assertThisInitialized(_this46), \"vmLoadStart\", 7);\n    _this46.vmError = createEvent(_assertThisInitialized(_this46), \"vmError\", 7);\n    _this46.vmMediaElChange = createEvent(_assertThisInitialized(_this46), \"vmMediaElChange\", 7);\n    _this46.vmSrcSetChange = createEvent(_assertThisInitialized(_this46), \"vmSrcSetChange\", 7);\n    _this46.textTracksDisposal = new Disposal();\n    _this46.wasPausedBeforeSeeking = true;\n    _this46.currentSrcSet = [];\n    _this46.mediaQueryDisposal = new Disposal();\n    /** @internal Whether an external SDK will attach itself to the media player and control it. */\n\n    _this46.willAttach = false;\n    /** @inheritdoc */\n\n    _this46.preload = 'metadata';\n    /**\n     * The playback rates that are available for this media.\n     */\n\n    _this46.playbackRates = [0.25, 0.5, 0.75, 1, 1.25, 1.5, 2];\n    /** @internal */\n\n    _this46.language = 'en';\n    /** @internal */\n\n    _this46.autoplay = false;\n    /** @internal */\n\n    _this46.controls = false;\n    /** @internal */\n\n    _this46.loop = false;\n    /** @internal */\n\n    _this46.muted = false;\n    /** @internal */\n\n    _this46.playsinline = false;\n    /** @internal */\n\n    _this46.noConnect = false;\n    /** @internal */\n\n    _this46.paused = true;\n    /** @internal */\n\n    _this46.currentTime = 0;\n    /** @internal */\n\n    _this46.volume = 0;\n    /** @internal */\n\n    _this46.playbackReady = false;\n    /** @internal */\n\n    _this46.playbackStarted = false;\n    _this46.presentationController = new VideoPresentationController(_assertThisInitialized(_this46));\n    _this46.fullscreenController = new VideoFullscreenController(_assertThisInitialized(_this46), _this46.presentationController);\n    /** @internal */\n\n    _this46.currentTextTrack = -1;\n    /** @internal */\n\n    _this46.hasCustomTextManager = false;\n    /** @internal */\n\n    _this46.isTextTrackVisible = true;\n    /** @internal */\n\n    _this46.shouldRenderNativeTextTracks = true;\n    withComponentRegistry(_assertThisInitialized(_this46));\n    withProviderConnect(_assertThisInitialized(_this46));\n    withProviderContext(_assertThisInitialized(_this46), ['playbackReady', 'playbackStarted', 'currentTime', 'volume', 'paused', 'currentTextTrack', 'isTextTrackVisible', 'shouldRenderNativeTextTracks']);\n    watchComponentRegistry(_assertThisInitialized(_this46), 'vm-poster', function (regs) {\n      var _regs = _slicedToArray(regs, 1);\n\n      _this46.vmPoster = _regs[0];\n    });\n    return _this46;\n  }\n\n  _createClass(File, [{\n    key: \"onMediaTitleChange\",\n    value: function onMediaTitleChange() {\n      this.dispatch('mediaTitle', this.mediaTitle);\n    }\n  }, {\n    key: \"onPosterChange\",\n    value: function onPosterChange() {\n      var _a;\n\n      if (!this.playbackStarted) (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.load();\n    }\n  }, {\n    key: \"onViewTypeChange\",\n    value: function onViewTypeChange() {\n      this.dispatch('viewType', this.viewType);\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.initLazyLoader();\n      this.dispatch = createProviderDispatcher(this);\n      this.onViewTypeChange();\n      this.onPosterChange();\n      this.onMediaTitleChange();\n      this.addPresentationControllerListeners();\n    }\n  }, {\n    key: \"componentDidRender\",\n    value: function componentDidRender() {\n      if (this.prevMediaEl !== this.mediaEl) {\n        this.prevMediaEl = this.mediaEl;\n        this.vmMediaElChange.emit(this.mediaEl);\n        this.presentationController.addPresentationModeChangeEventListener();\n      }\n    }\n  }, {\n    key: \"componentDidLoad\",\n    value: function componentDidLoad() {\n      this.onViewTypeChange();\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      var _a;\n\n      this.mediaQueryDisposal.empty();\n      this.textTracksDisposal.empty();\n      this.cancelTimeUpdates();\n      (_a = this.lazyLoader) === null || _a === void 0 ? void 0 : _a.destroy();\n      this.wasPausedBeforeSeeking = true;\n    }\n  }, {\n    key: \"initLazyLoader\",\n    value: function initLazyLoader() {\n      var _this47 = this;\n\n      this.lazyLoader = new LazyLoader(this.host, ['data-src', 'data-poster'], function () {\n        if (isNil(_this47.mediaEl)) return;\n\n        var poster = _this47.mediaEl.getAttribute('data-poster');\n\n        if (!isNull(poster)) _this47.mediaEl.setAttribute('poster', poster);\n\n        _this47.refresh();\n\n        _this47.didSrcSetChange();\n      });\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      if (isNil(this.mediaEl)) return;\n      var children = this.mediaEl.children;\n\n      for (var i = 0; i <= children.length - 1; i += 1) {\n        var child = children[i];\n        var src = child.getAttribute('data-src') || child.getAttribute('src') || child.getAttribute('data-vs');\n        child.removeAttribute('src');\n        if (isNull(src)) continue;\n        child.setAttribute('data-vs', src);\n        child.setAttribute('src', src);\n      }\n    }\n  }, {\n    key: \"didSrcSetChange\",\n    value: function didSrcSetChange() {\n      var _this48 = this;\n\n      if (isNil(this.mediaEl)) return;\n      var sources = Array.from(this.mediaEl.querySelectorAll('source'));\n      var srcSet = sources.map(function (source) {\n        var _a;\n\n        return {\n          src: source.getAttribute('data-vs'),\n          media: (_a = source.getAttribute('data-media')) !== null && _a !== void 0 ? _a : undefined,\n          ref: source\n        };\n      });\n      var didChange = this.currentSrcSet.length !== srcSet.length || srcSet.some(function (resource, i) {\n        return _this48.currentSrcSet[i].src !== resource.src;\n      });\n\n      if (didChange) {\n        this.currentSrcSet = srcSet;\n        this.onSrcSetChange();\n      }\n    }\n  }, {\n    key: \"onSrcSetChange\",\n    value: function onSrcSetChange() {\n      var _a;\n\n      this.textTracksDisposal.empty();\n      this.mediaQueryDisposal.empty();\n      this.vmLoadStart.emit();\n      this.vmSrcSetChange.emit(this.currentSrcSet);\n      if (!this.willAttach) (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.load();\n    }\n  }, {\n    key: \"hasCustomPoster\",\n    value: function hasCustomPoster() {\n      return !IS_IOS && !isUndefined(this.vmPoster);\n    }\n  }, {\n    key: \"cancelTimeUpdates\",\n    value: function cancelTimeUpdates() {\n      if (isNumber(this.timeRAF)) window.cancelAnimationFrame(this.timeRAF);\n      this.timeRAF = undefined;\n    }\n  }, {\n    key: \"requestTimeUpdates\",\n    value: function requestTimeUpdates() {\n      var _this49 = this;\n\n      var _a, _b;\n\n      this.dispatch('currentTime', (_b = (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.currentTime) !== null && _b !== void 0 ? _b : 0);\n      this.timeRAF = window.requestAnimationFrame(function () {\n        _this49.requestTimeUpdates();\n      });\n    }\n  }, {\n    key: \"getMediaType\",\n    value: function getMediaType() {\n      var currentSrc = this.mediaEl.currentSrc;\n      if (audioRegex.test(currentSrc)) return MediaType.Audio;\n      if (videoRegex.test(currentSrc) || hlsRegex.test(currentSrc)) return MediaType.Video;\n      return undefined;\n    }\n  }, {\n    key: \"onLoadedMetadata\",\n    value: function onLoadedMetadata() {\n      this.mediaEl.volume = this.volume / 100;\n      this.listenToTextTracksForChanges();\n      this.onTextTracksChange();\n      this.onProgress();\n      this.dispatch('currentPoster', this.poster);\n      this.dispatch('duration', this.mediaEl.duration);\n      this.dispatch('playbackRates', this.playbackRates);\n\n      if (!this.willAttach) {\n        this.dispatch('currentSrc', this.mediaEl.currentSrc);\n        this.dispatch('mediaType', this.getMediaType());\n        this.dispatch('playbackReady', true);\n      }\n    }\n  }, {\n    key: \"onProgress\",\n    value: function onProgress() {\n      var _this$mediaEl = this.mediaEl,\n          buffered = _this$mediaEl.buffered,\n          duration = _this$mediaEl.duration;\n      var end = buffered.length === 0 ? 0 : buffered.end(buffered.length - 1);\n      this.dispatch('buffered', end > duration ? duration : end);\n    }\n  }, {\n    key: \"onPlay\",\n    value: function onPlay() {\n      this.requestTimeUpdates();\n      this.dispatch('paused', false);\n      if (!this.playbackStarted) this.dispatch('playbackStarted', true);\n    }\n  }, {\n    key: \"onPause\",\n    value: function onPause() {\n      this.cancelTimeUpdates();\n      this.dispatch('paused', true);\n      this.dispatch('buffering', false);\n    }\n  }, {\n    key: \"onPlaying\",\n    value: function onPlaying() {\n      this.dispatch('playing', true);\n      this.dispatch('buffering', false);\n    }\n  }, {\n    key: \"onSeeking\",\n    value: function onSeeking() {\n      if (!this.wasPausedBeforeSeeking) this.wasPausedBeforeSeeking = this.mediaEl.paused;\n      this.dispatch('currentTime', this.mediaEl.currentTime);\n      this.dispatch('seeking', true);\n    }\n  }, {\n    key: \"onSeeked\",\n    value: function onSeeked() {\n      // Avoid calling `attemptToPlay` if seeking to 0 on 0.\n      if (this.currentTime === 0 && !this.playbackStarted) return;\n      this.dispatch('seeking', false);\n      if (!this.playbackStarted || !this.wasPausedBeforeSeeking) this.attemptToPlay();\n      this.wasPausedBeforeSeeking = true;\n    }\n  }, {\n    key: \"onRateChange\",\n    value: function onRateChange() {\n      this.dispatch('playbackRate', this.mediaEl.playbackRate);\n    }\n  }, {\n    key: \"onVolumeChange\",\n    value: function onVolumeChange() {\n      this.dispatch('muted', this.mediaEl.muted);\n      this.dispatch('volume', this.mediaEl.volume * 100);\n    }\n  }, {\n    key: \"onDurationChange\",\n    value: function onDurationChange() {\n      this.dispatch('duration', this.mediaEl.duration);\n    }\n  }, {\n    key: \"onWaiting\",\n    value: function onWaiting() {\n      this.dispatch('buffering', true);\n    }\n  }, {\n    key: \"onSuspend\",\n    value: function onSuspend() {\n      this.dispatch('buffering', false);\n    }\n  }, {\n    key: \"onEnded\",\n    value: function onEnded() {\n      if (!this.loop) this.dispatch('playbackEnded', true);\n    }\n  }, {\n    key: \"onError\",\n    value: function onError() {\n      this.vmError.emit(this.mediaEl.error);\n    }\n  }, {\n    key: \"attemptToPlay\",\n    value: function attemptToPlay() {\n      var _a;\n\n      try {\n        (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.play();\n      } catch (e) {\n        this.vmError.emit(e);\n      }\n    }\n  }, {\n    key: \"togglePiPInChrome\",\n    value: function togglePiPInChrome(toggle) {\n      var _a;\n\n      return toggle ? (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.requestPictureInPicture() : document.exitPictureInPicture();\n    }\n  }, {\n    key: \"togglePiPInSafari\",\n    value: function togglePiPInSafari(toggle) {\n      var _a, _b;\n\n      var mode = toggle ? \"picture-in-picture\"\n      /* PiP */\n      : \"inline\"\n      /* Inline */\n      ;\n\n      if (!((_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.webkitSupportsPresentationMode(mode))) {\n        throw new Error('PiP API is not available.');\n      }\n\n      return (_b = this.mediaEl) === null || _b === void 0 ? void 0 : _b.webkitSetPresentationMode(mode);\n    }\n  }, {\n    key: \"togglePiP\",\n    value: function togglePiP(toggle) {\n      return __awaiter$h(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee53() {\n        return _regeneratorRuntime().wrap(function _callee53$(_context53) {\n          while (1) {\n            switch (_context53.prev = _context53.next) {\n              case 0:\n                if (!canUsePiPInChrome()) {\n                  _context53.next = 2;\n                  break;\n                }\n\n                return _context53.abrupt(\"return\", this.togglePiPInChrome(toggle));\n\n              case 2:\n                if (!canUsePiPInSafari()) {\n                  _context53.next = 4;\n                  break;\n                }\n\n                return _context53.abrupt(\"return\", this.togglePiPInSafari(toggle));\n\n              case 4:\n                throw new Error('PiP API is not available.');\n\n              case 5:\n              case \"end\":\n                return _context53.stop();\n            }\n          }\n        }, _callee53, this);\n      }));\n    }\n  }, {\n    key: \"onEnterPiP\",\n    value: function onEnterPiP() {\n      this.dispatch('isPiPActive', true);\n    }\n  }, {\n    key: \"onLeavePiP\",\n    value: function onLeavePiP() {\n      this.dispatch('isPiPActive', false);\n    }\n  }, {\n    key: \"addPresentationControllerListeners\",\n    value: function addPresentationControllerListeners() {\n      var _this50 = this;\n\n      this.presentationController.on('change', function (mode) {\n        _this50.dispatch('isPiPActive', mode === \"picture-in-picture\"\n        /* PiP */\n        );\n\n        _this50.dispatch('isFullscreenActive', mode === \"fullscreen\"\n        /* Fullscreen */\n        );\n      });\n    }\n    /** @internal */\n\n  }, {\n    key: \"getAdapter\",\n    value: function getAdapter() {\n      return __awaiter$h(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee67() {\n        var _this51 = this;\n\n        return _regeneratorRuntime().wrap(function _callee67$(_context67) {\n          while (1) {\n            switch (_context67.prev = _context67.next) {\n              case 0:\n                return _context67.abrupt(\"return\", {\n                  getInternalPlayer: function getInternalPlayer() {\n                    return __awaiter$h(_this51, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee54() {\n                      return _regeneratorRuntime().wrap(function _callee54$(_context54) {\n                        while (1) {\n                          switch (_context54.prev = _context54.next) {\n                            case 0:\n                              return _context54.abrupt(\"return\", this.mediaEl);\n\n                            case 1:\n                            case \"end\":\n                              return _context54.stop();\n                          }\n                        }\n                      }, _callee54, this);\n                    }));\n                  },\n                  play: function play() {\n                    return __awaiter$h(_this51, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee55() {\n                      var _a;\n\n                      return _regeneratorRuntime().wrap(function _callee55$(_context55) {\n                        while (1) {\n                          switch (_context55.prev = _context55.next) {\n                            case 0:\n                              return _context55.abrupt(\"return\", (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.play());\n\n                            case 1:\n                            case \"end\":\n                              return _context55.stop();\n                          }\n                        }\n                      }, _callee55, this);\n                    }));\n                  },\n                  pause: function pause() {\n                    return __awaiter$h(_this51, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee56() {\n                      var _b;\n\n                      return _regeneratorRuntime().wrap(function _callee56$(_context56) {\n                        while (1) {\n                          switch (_context56.prev = _context56.next) {\n                            case 0:\n                              return _context56.abrupt(\"return\", (_b = this.mediaEl) === null || _b === void 0 ? void 0 : _b.pause());\n\n                            case 1:\n                            case \"end\":\n                              return _context56.stop();\n                          }\n                        }\n                      }, _callee56, this);\n                    }));\n                  },\n                  canPlay: function canPlay(type) {\n                    return __awaiter$h(_this51, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee57() {\n                      return _regeneratorRuntime().wrap(function _callee57$(_context57) {\n                        while (1) {\n                          switch (_context57.prev = _context57.next) {\n                            case 0:\n                              return _context57.abrupt(\"return\", isString(type) && (audioRegex.test(type) || videoRegex.test(type)));\n\n                            case 1:\n                            case \"end\":\n                              return _context57.stop();\n                          }\n                        }\n                      }, _callee57);\n                    }));\n                  },\n                  setCurrentTime: function setCurrentTime(time) {\n                    return __awaiter$h(_this51, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee58() {\n                      return _regeneratorRuntime().wrap(function _callee58$(_context58) {\n                        while (1) {\n                          switch (_context58.prev = _context58.next) {\n                            case 0:\n                              if (this.mediaEl) this.mediaEl.currentTime = time;\n\n                            case 1:\n                            case \"end\":\n                              return _context58.stop();\n                          }\n                        }\n                      }, _callee58, this);\n                    }));\n                  },\n                  setMuted: function setMuted(muted) {\n                    return __awaiter$h(_this51, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee59() {\n                      return _regeneratorRuntime().wrap(function _callee59$(_context59) {\n                        while (1) {\n                          switch (_context59.prev = _context59.next) {\n                            case 0:\n                              if (this.mediaEl) this.mediaEl.muted = muted;\n\n                            case 1:\n                            case \"end\":\n                              return _context59.stop();\n                          }\n                        }\n                      }, _callee59, this);\n                    }));\n                  },\n                  setVolume: function setVolume(volume) {\n                    return __awaiter$h(_this51, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee60() {\n                      return _regeneratorRuntime().wrap(function _callee60$(_context60) {\n                        while (1) {\n                          switch (_context60.prev = _context60.next) {\n                            case 0:\n                              if (this.mediaEl) this.mediaEl.volume = volume / 100;\n\n                            case 1:\n                            case \"end\":\n                              return _context60.stop();\n                          }\n                        }\n                      }, _callee60, this);\n                    }));\n                  },\n                  canSetPlaybackRate: function canSetPlaybackRate() {\n                    return __awaiter$h(_this51, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee61() {\n                      return _regeneratorRuntime().wrap(function _callee61$(_context61) {\n                        while (1) {\n                          switch (_context61.prev = _context61.next) {\n                            case 0:\n                              return _context61.abrupt(\"return\", true);\n\n                            case 1:\n                            case \"end\":\n                              return _context61.stop();\n                          }\n                        }\n                      }, _callee61);\n                    }));\n                  },\n                  setPlaybackRate: function setPlaybackRate(rate) {\n                    return __awaiter$h(_this51, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee62() {\n                      return _regeneratorRuntime().wrap(function _callee62$(_context62) {\n                        while (1) {\n                          switch (_context62.prev = _context62.next) {\n                            case 0:\n                              if (this.mediaEl) this.mediaEl.playbackRate = rate;\n\n                            case 1:\n                            case \"end\":\n                              return _context62.stop();\n                          }\n                        }\n                      }, _callee62, this);\n                    }));\n                  },\n                  canSetPiP: function canSetPiP() {\n                    return __awaiter$h(_this51, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee63() {\n                      return _regeneratorRuntime().wrap(function _callee63$(_context63) {\n                        while (1) {\n                          switch (_context63.prev = _context63.next) {\n                            case 0:\n                              return _context63.abrupt(\"return\", canUsePiP());\n\n                            case 1:\n                            case \"end\":\n                              return _context63.stop();\n                          }\n                        }\n                      }, _callee63);\n                    }));\n                  },\n                  enterPiP: function enterPiP() {\n                    return _this51.togglePiP(true);\n                  },\n                  exitPiP: function exitPiP() {\n                    return _this51.togglePiP(false);\n                  },\n                  canSetFullscreen: function canSetFullscreen() {\n                    return __awaiter$h(_this51, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee64() {\n                      return _regeneratorRuntime().wrap(function _callee64$(_context64) {\n                        while (1) {\n                          switch (_context64.prev = _context64.next) {\n                            case 0:\n                              return _context64.abrupt(\"return\", this.fullscreenController.isSupported);\n\n                            case 1:\n                            case \"end\":\n                              return _context64.stop();\n                          }\n                        }\n                      }, _callee64, this);\n                    }));\n                  },\n                  enterFullscreen: function enterFullscreen() {\n                    return _this51.fullscreenController.requestFullscreen();\n                  },\n                  exitFullscreen: function exitFullscreen() {\n                    return _this51.fullscreenController.exitFullscreen();\n                  },\n                  setCurrentTextTrack: function setCurrentTextTrack(trackId) {\n                    return __awaiter$h(_this51, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee65() {\n                      return _regeneratorRuntime().wrap(function _callee65$(_context65) {\n                        while (1) {\n                          switch (_context65.prev = _context65.next) {\n                            case 0:\n                              if (trackId !== this.currentTextTrack) this.toggleTextTrackModes(trackId);\n\n                            case 1:\n                            case \"end\":\n                              return _context65.stop();\n                          }\n                        }\n                      }, _callee65, this);\n                    }));\n                  },\n                  setTextTrackVisibility: function setTextTrackVisibility(isVisible) {\n                    return __awaiter$h(_this51, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee66() {\n                      return _regeneratorRuntime().wrap(function _callee66$(_context66) {\n                        while (1) {\n                          switch (_context66.prev = _context66.next) {\n                            case 0:\n                              this.isTextTrackVisible = isVisible;\n                              this.toggleTextTrackModes(this.currentTextTrack);\n\n                            case 2:\n                            case \"end\":\n                              return _context66.stop();\n                          }\n                        }\n                      }, _callee66, this);\n                    }));\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context67.stop();\n            }\n          }\n        }, _callee67);\n      }));\n    }\n  }, {\n    key: \"onHasCustomTextManagerChange\",\n    value: function onHasCustomTextManagerChange() {\n      if (this.hasCustomTextManager) {\n        this.textTracksDisposal.empty();\n      } else if (this.playbackReady) {\n        this.listenToTextTracksForChanges();\n      }\n    }\n  }, {\n    key: \"onShouldRenderNativeTextTracksChange\",\n    value: function onShouldRenderNativeTextTracksChange() {\n      if (this.hasCustomTextManager) return;\n      this.toggleTextTrackModes(this.currentTextTrack);\n    }\n  }, {\n    key: \"onProviderConnect\",\n    value: function onProviderConnect(event) {\n      if (this.noConnect) event.stopImmediatePropagation();\n    }\n  }, {\n    key: \"onProviderDisconnect\",\n    value: function onProviderDisconnect(event) {\n      if (this.noConnect) event.stopImmediatePropagation();\n    }\n  }, {\n    key: \"getFilteredTextTracks\",\n    value: function getFilteredTextTracks() {\n      var tracks = [];\n      var textTrackList = Array.from(this.mediaEl.textTracks);\n\n      for (var i = 0; i < textTrackList.length; i += 1) {\n        var track = textTrackList[i]; // Edge adds a track without a label; we don't want to use it.\n\n        if ((track.kind === 'subtitles' || track.kind === 'captions') && track.label) {\n          tracks.push(textTrackList[i]);\n        }\n      }\n\n      return tracks;\n    }\n  }, {\n    key: \"listenToTextTracksForChanges\",\n    value: function listenToTextTracksForChanges() {\n      if (this.hasCustomTextManager) return;\n      this.textTracksDisposal.empty();\n      if (isUndefined(this.mediaEl)) return;\n      this.textTracksDisposal.add(listen(this.mediaEl.textTracks, 'change', this.onTextTracksChange.bind(this)));\n    }\n  }, {\n    key: \"onTextTracksChange\",\n    value: function onTextTracksChange() {\n      var _a;\n\n      var tracks = this.getFilteredTextTracks();\n      var trackId = -1;\n\n      for (var id = 0; id < tracks.length; id += 1) {\n        if (tracks[id].mode === 'hidden') {\n          // Do not break in case there is a following track with showing.\n          trackId = id;\n        } else if (tracks[id].mode === 'showing') {\n          trackId = id;\n          break;\n        }\n      }\n\n      if (!this.shouldRenderNativeTextTracks && ((_a = tracks[trackId]) === null || _a === void 0 ? void 0 : _a.mode) === 'showing') {\n        tracks[trackId].mode = 'hidden';\n        return;\n      }\n\n      if (this.shouldRenderNativeTextTracks) {\n        this.isTextTrackVisible = trackId !== -1 && tracks[trackId].mode === 'showing';\n        this.dispatch('isTextTrackVisible', this.isTextTrackVisible);\n      }\n\n      this.dispatch('textTracks', tracks);\n      this.dispatch('currentTextTrack', this.shouldRenderNativeTextTracks && !this.isTextTrackVisible ? -1 : trackId);\n    }\n  }, {\n    key: \"toggleTextTrackModes\",\n    value: function toggleTextTrackModes(newTrackId) {\n      if (isNil(this.mediaEl)) return;\n      var textTracks = this.mediaEl.textTracks;\n\n      if (newTrackId === -1) {\n        Array.from(textTracks).forEach(function (track) {\n          track.mode = 'disabled';\n        });\n      } else {\n        var oldTrack = textTracks[this.currentTextTrack];\n        if (oldTrack) oldTrack.mode = 'disabled';\n      }\n\n      var nextTrack = textTracks[newTrackId];\n\n      if (nextTrack) {\n        nextTrack.mode = this.isTextTrackVisible && this.shouldRenderNativeTextTracks ? 'showing' : 'hidden';\n      }\n\n      this.dispatch('currentTextTrack', this.shouldRenderNativeTextTracks && !this.isTextTrackVisible ? -1 : newTrackId);\n      this.dispatch('isTextTrackVisible', this.isTextTrackVisible);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this52 = this;\n\n      var mediaProps = {\n        autoplay: this.autoplay,\n        muted: this.muted,\n        playsinline: this.playsinline,\n        playsInline: this.playsinline,\n        'x5-playsinline': this.playsinline,\n        'webkit-playsinline': this.playsinline,\n        controls: this.controls,\n        crossorigin: this.crossOrigin === '' ? 'anonymous' : this.crossOrigin,\n        controlslist: this.controlsList,\n        'data-poster': !this.hasCustomPoster() ? this.poster : undefined,\n        loop: this.loop,\n        preload: this.preload,\n        disablePictureInPicture: this.disablePiP,\n        autoPictureInPicture: this.autoPiP,\n        disableRemotePlayback: this.disableRemotePlayback,\n        'x-webkit-airplay': this.disableRemotePlayback ? 'deny' : 'allow',\n        ref: function ref(el) {\n          _this52.mediaEl = el;\n        },\n        onLoadedMetadata: this.onLoadedMetadata.bind(this),\n        onProgress: this.onProgress.bind(this),\n        onPlay: this.onPlay.bind(this),\n        onPause: this.onPause.bind(this),\n        onPlaying: this.onPlaying.bind(this),\n        onSeeking: this.onSeeking.bind(this),\n        onSeeked: this.onSeeked.bind(this),\n        onRateChange: this.onRateChange.bind(this),\n        onVolumeChange: this.onVolumeChange.bind(this),\n        onDurationChange: this.onDurationChange.bind(this),\n        onWaiting: this.onWaiting.bind(this),\n        onSuspend: this.onSuspend.bind(this),\n        onEnded: this.onEnded.bind(this),\n        onError: this.onError.bind(this)\n      };\n      var audio = h(\"audio\", Object.assign({\n        class: \"lazy\"\n      }, mediaProps), h(\"slot\", null), \"Your browser does not support the\", h(\"code\", null, \"audio\"), \"element.\");\n      var video = h(\"video\", Object.assign({\n        class: \"lazy\"\n      }, mediaProps, {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        onenterpictureinpicture: this.onEnterPiP.bind(this),\n        onleavepictureinpicture: this.onLeavePiP.bind(this)\n      }), h(\"slot\", null), \"Your browser does not support the\", h(\"code\", null, \"video\"), \"element.\");\n      return this.viewType === ViewType.Audio ? audio : video;\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"mediaTitle\": [\"onMediaTitleChange\"],\n        \"poster\": [\"onPosterChange\"],\n        \"viewType\": [\"onViewTypeChange\"],\n        \"hasCustomTextManager\": [\"onHasCustomTextManagerChange\"],\n        \"shouldRenderNativeTextTracks\": [\"onShouldRenderNativeTextTracksChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return fileCss;\n    }\n  }]);\n\n  return File;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar fullscreenControlCss = \":host([hidden]){display:none}\";\n\nvar __awaiter$g = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar FullscreenControl = /*#__PURE__*/function (_HTMLElement19) {\n  _inherits(FullscreenControl, _HTMLElement19);\n\n  var _super20 = _createSuper(FullscreenControl);\n\n  function FullscreenControl() {\n    var _this53;\n\n    _classCallCheck(this, FullscreenControl);\n\n    _this53 = _super20.call(this);\n\n    _this53.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this53));\n    _this53.canSetFullscreen = false;\n    /**\n     * The name of the enter fullscreen icon to resolve from the icon library.\n     */\n\n    _this53.enterIcon = 'fullscreen-enter';\n    /**\n     * The name of the exit fullscreen icon to resolve from the icon library.\n     */\n\n    _this53.exitIcon = 'fullscreen-exit';\n    /**\n     * Whether the tooltip is positioned above/below the control.\n     */\n\n    _this53.tooltipPosition = 'top';\n    /**\n     * Whether the tooltip should not be displayed.\n     */\n\n    _this53.hideTooltip = false;\n    /** @inheritdoc */\n\n    _this53.keys = 'f';\n    /** @internal */\n\n    _this53.isFullscreenActive = false;\n    /** @internal */\n\n    _this53.i18n = {};\n    /** @internal */\n\n    _this53.playbackReady = false;\n    withComponentRegistry(_assertThisInitialized(_this53));\n    withPlayerContext(_assertThisInitialized(_this53), ['isFullscreenActive', 'playbackReady', 'i18n']);\n    return _this53;\n  }\n\n  _createClass(FullscreenControl, [{\n    key: \"onPlaybackReadyChange\",\n    value: function onPlaybackReadyChange() {\n      var _a;\n\n      return __awaiter$g(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee68() {\n        var player;\n        return _regeneratorRuntime().wrap(function _callee68$(_context68) {\n          while (1) {\n            switch (_context68.prev = _context68.next) {\n              case 0:\n                player = getPlayerFromRegistry(this);\n                _context68.next = 3;\n                return player === null || player === void 0 ? void 0 : player.canSetFullscreen();\n\n              case 3:\n                _context68.t1 = _a = _context68.sent;\n                _context68.t0 = _context68.t1 !== null;\n\n                if (!_context68.t0) {\n                  _context68.next = 7;\n                  break;\n                }\n\n                _context68.t0 = _a !== void 0;\n\n              case 7:\n                if (!_context68.t0) {\n                  _context68.next = 11;\n                  break;\n                }\n\n                _context68.t2 = _a;\n                _context68.next = 12;\n                break;\n\n              case 11:\n                _context68.t2 = false;\n\n              case 12:\n                this.canSetFullscreen = _context68.t2;\n\n              case 13:\n              case \"end\":\n                return _context68.stop();\n            }\n          }\n        }, _callee68, this);\n      }));\n    }\n  }, {\n    key: \"componentDidLoad\",\n    value: function componentDidLoad() {\n      this.onPlaybackReadyChange();\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick() {\n      var player = getPlayerFromRegistry(this);\n      !this.isFullscreenActive ? player === null || player === void 0 ? void 0 : player.enterFullscreen() : player === null || player === void 0 ? void 0 : player.exitFullscreen();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var tooltip = this.isFullscreenActive ? this.i18n.exitFullscreen : this.i18n.enterFullscreen;\n      var tooltipWithHint = !isUndefined(this.keys) ? \"\".concat(tooltip, \" (\").concat(this.keys, \")\") : tooltip;\n      return h(Host, {\n        hidden: !this.canSetFullscreen\n      }, h(\"vm-control\", {\n        label: this.i18n.fullscreen,\n        keys: this.keys,\n        pressed: this.isFullscreenActive,\n        hidden: !this.canSetFullscreen,\n        onClick: this.onClick.bind(this)\n      }, h(\"vm-icon\", {\n        name: this.isFullscreenActive ? this.exitIcon : this.enterIcon,\n        library: this.icons\n      }), h(\"vm-tooltip\", {\n        hidden: this.hideTooltip,\n        position: this.tooltipPosition,\n        direction: this.tooltipDirection\n      }, tooltipWithHint)));\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"playbackReady\": [\"onPlaybackReadyChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return fullscreenControlCss;\n    }\n  }]);\n\n  return FullscreenControl;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar __awaiter$f = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar HLS = /*#__PURE__*/function (_HTMLElement20) {\n  _inherits(HLS, _HTMLElement20);\n\n  var _super21 = _createSuper(HLS);\n\n  function HLS() {\n    var _this54;\n\n    _classCallCheck(this, HLS);\n\n    _this54 = _super21.call(this);\n\n    _this54.__registerHost();\n\n    _this54.vmLoadStart = createEvent(_assertThisInitialized(_this54), \"vmLoadStart\", 7);\n    _this54.vmError = createEvent(_assertThisInitialized(_this54), \"vmError\", 7);\n    _this54.hasAttached = false;\n    /**\n     * The NPM package version of the `hls.js` library to download and use if HLS is not natively\n     * supported.\n     */\n\n    _this54.version = 'latest';\n    /** @inheritdoc */\n\n    _this54.preload = 'metadata';\n    /** @internal */\n\n    _this54.playbackReady = false;\n    withComponentRegistry(_assertThisInitialized(_this54));\n    withProviderConnect(_assertThisInitialized(_this54));\n    withPlayerContext(_assertThisInitialized(_this54), ['playbackReady']);\n    return _this54;\n  }\n\n  _createClass(HLS, [{\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.dispatch = createProviderDispatcher(this);\n      if (this.mediaEl) this.setupHls();\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.destroyHls();\n    }\n  }, {\n    key: \"src\",\n    get: function get() {\n      if (isNil(this.videoProvider)) return undefined;\n      var sources = this.videoProvider.querySelectorAll('source');\n      var currSource = Array.from(sources).find(function (source) {\n        return hlsRegex.test(source.src) || hlsTypeRegex.test(source.type);\n      });\n      return currSource === null || currSource === void 0 ? void 0 : currSource.src;\n    }\n  }, {\n    key: \"setupHls\",\n    value: function setupHls() {\n      return __awaiter$f(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee69() {\n        var _this55 = this;\n\n        var url, Hls;\n        return _regeneratorRuntime().wrap(function _callee69$(_context69) {\n          while (1) {\n            switch (_context69.prev = _context69.next) {\n              case 0:\n                if (isUndefined(this.hls)) {\n                  _context69.next = 2;\n                  break;\n                }\n\n                return _context69.abrupt(\"return\");\n\n              case 2:\n                _context69.prev = 2;\n                url = this.libSrc || \"https://cdn.jsdelivr.net/npm/hls.js@\".concat(this.version, \"/dist/hls.min.js\");\n                _context69.next = 6;\n                return loadSDK(url, 'Hls');\n\n              case 6:\n                Hls = _context69.sent;\n\n                if (Hls.isSupported()) {\n                  _context69.next = 10;\n                  break;\n                }\n\n                this.vmError.emit('hls.js is not supported');\n                return _context69.abrupt(\"return\");\n\n              case 10:\n                this.hls = new Hls(this.config);\n                this.hls.on(Hls.Events.MEDIA_ATTACHED, function () {\n                  _this55.hasAttached = true;\n\n                  _this55.onSrcChange();\n                });\n                this.hls.on(Hls.Events.AUDIO_TRACKS_UPDATED, function () {\n                  _this55.dispatch('audioTracks', _this55.hls.audioTracks);\n\n                  _this55.dispatch('currentAudioTrack', _this55.hls.audioTrack);\n                });\n                this.hls.on(Hls.Events.AUDIO_TRACK_SWITCHED, function () {\n                  _this55.dispatch('currentAudioTrack', _this55.hls.audioTrack);\n                });\n                this.hls.on(Hls.Events.ERROR, function (event, data) {\n                  if (data.fatal) {\n                    switch (data.type) {\n                      case Hls.ErrorTypes.NETWORK_ERROR:\n                        _this55.hls.startLoad();\n\n                        break;\n\n                      case Hls.ErrorTypes.MEDIA_ERROR:\n                        _this55.hls.recoverMediaError();\n\n                        break;\n\n                      default:\n                        _this55.destroyHls();\n\n                        break;\n                    }\n                  }\n\n                  _this55.vmError.emit({\n                    event: event,\n                    data: data\n                  });\n                });\n                this.hls.on(Hls.Events.MANIFEST_PARSED, function () {\n                  _this55.dispatch('mediaType', MediaType.Video);\n\n                  _this55.dispatch('currentSrc', _this55.src);\n\n                  _this55.dispatchLevels();\n                });\n                this.hls.on(Hls.Events.LEVEL_LOADED, function (_, data) {\n                  if (!_this55.playbackReady) {\n                    _this55.dispatch('duration', data.details.totalduration);\n\n                    _this55.dispatch('playbackReady', true);\n                  }\n                });\n                this.hls.attachMedia(this.mediaEl);\n                _context69.next = 23;\n                break;\n\n              case 20:\n                _context69.prev = 20;\n                _context69.t0 = _context69[\"catch\"](2);\n                this.vmError.emit(_context69.t0);\n\n              case 23:\n              case \"end\":\n                return _context69.stop();\n            }\n          }\n        }, _callee69, this, [[2, 20]]);\n      }));\n    }\n  }, {\n    key: \"dispatchLevels\",\n    value: function dispatchLevels() {\n      if (!this.hls.levels || this.hls.levels.length === 0) return;\n      this.dispatch('playbackQualities', ['Auto'].concat(_toConsumableArray(this.hls.levels.map(this.levelToPlaybackQuality))));\n      this.dispatch('playbackQuality', 'Auto');\n    }\n  }, {\n    key: \"levelToPlaybackQuality\",\n    value: function levelToPlaybackQuality(level) {\n      return level === -1 ? 'Auto' : \"\".concat(level.height, \"p\");\n    }\n  }, {\n    key: \"findLevelIndexFromQuality\",\n    value: function findLevelIndexFromQuality(quality) {\n      var _this56 = this;\n\n      return this.hls.levels.findIndex(function (level) {\n        return _this56.levelToPlaybackQuality(level) === quality;\n      });\n    }\n  }, {\n    key: \"destroyHls\",\n    value: function destroyHls() {\n      var _a;\n\n      (_a = this.hls) === null || _a === void 0 ? void 0 : _a.destroy();\n      this.hasAttached = false;\n    }\n  }, {\n    key: \"onMediaElChange\",\n    value: function onMediaElChange(event) {\n      return __awaiter$f(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee71() {\n        var _this57 = this;\n\n        return _regeneratorRuntime().wrap(function _callee71$(_context71) {\n          while (1) {\n            switch (_context71.prev = _context71.next) {\n              case 0:\n                this.destroyHls();\n\n                if (!isUndefined(event.detail)) {\n                  _context71.next = 3;\n                  break;\n                }\n\n                return _context71.abrupt(\"return\");\n\n              case 3:\n                this.mediaEl = event.detail; // Need a small delay incase the media element changes rapidly and Hls.js can't reattach.\n\n                setTimeout(function () {\n                  return __awaiter$f(_this57, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee70() {\n                    return _regeneratorRuntime().wrap(function _callee70$(_context70) {\n                      while (1) {\n                        switch (_context70.prev = _context70.next) {\n                          case 0:\n                            _context70.next = 2;\n                            return this.setupHls();\n\n                          case 2:\n                          case \"end\":\n                            return _context70.stop();\n                        }\n                      }\n                    }, _callee70, this);\n                  }));\n                }, 50);\n\n              case 5:\n              case \"end\":\n                return _context71.stop();\n            }\n          }\n        }, _callee71, this);\n      }));\n    }\n  }, {\n    key: \"onSrcChange\",\n    value: function onSrcChange() {\n      var _a;\n\n      return __awaiter$f(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee72() {\n        return _regeneratorRuntime().wrap(function _callee72$(_context72) {\n          while (1) {\n            switch (_context72.prev = _context72.next) {\n              case 0:\n                if (this.hasAttached && this.hls.url !== this.src) {\n                  this.vmLoadStart.emit();\n                  (_a = this.hls) === null || _a === void 0 ? void 0 : _a.loadSource(this.src);\n                }\n\n              case 1:\n              case \"end\":\n                return _context72.stop();\n            }\n          }\n        }, _callee72, this);\n      }));\n    }\n    /** @internal */\n\n  }, {\n    key: \"getAdapter\",\n    value: function getAdapter() {\n      var _a, _b;\n\n      return __awaiter$f(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee78() {\n        var _this58 = this;\n\n        var adapter, canVideoProviderPlay;\n        return _regeneratorRuntime().wrap(function _callee78$(_context78) {\n          while (1) {\n            switch (_context78.prev = _context78.next) {\n              case 0:\n                _context78.next = 2;\n                return (_a = this.videoProvider) === null || _a === void 0 ? void 0 : _a.getAdapter();\n\n              case 2:\n                _context78.t1 = _b = _context78.sent;\n                _context78.t0 = _context78.t1 !== null;\n\n                if (!_context78.t0) {\n                  _context78.next = 6;\n                  break;\n                }\n\n                _context78.t0 = _b !== void 0;\n\n              case 6:\n                if (!_context78.t0) {\n                  _context78.next = 10;\n                  break;\n                }\n\n                _context78.t2 = _b;\n                _context78.next = 11;\n                break;\n\n              case 10:\n                _context78.t2 = {};\n\n              case 11:\n                adapter = _context78.t2;\n                canVideoProviderPlay = adapter.canPlay;\n                return _context78.abrupt(\"return\", Object.assign(Object.assign({}, adapter), {\n                  getInternalPlayer: function getInternalPlayer() {\n                    return __awaiter$f(_this58, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee73() {\n                      return _regeneratorRuntime().wrap(function _callee73$(_context73) {\n                        while (1) {\n                          switch (_context73.prev = _context73.next) {\n                            case 0:\n                              return _context73.abrupt(\"return\", this.hls);\n\n                            case 1:\n                            case \"end\":\n                              return _context73.stop();\n                          }\n                        }\n                      }, _callee73, this);\n                    }));\n                  },\n                  canPlay: function canPlay(type) {\n                    return __awaiter$f(_this58, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee74() {\n                      var _c;\n\n                      return _regeneratorRuntime().wrap(function _callee74$(_context74) {\n                        while (1) {\n                          switch (_context74.prev = _context74.next) {\n                            case 0:\n                              return _context74.abrupt(\"return\", isString(type) && hlsRegex.test(type) || ((_c = canVideoProviderPlay === null || canVideoProviderPlay === void 0 ? void 0 : canVideoProviderPlay(type)) !== null && _c !== void 0 ? _c : false));\n\n                            case 1:\n                            case \"end\":\n                              return _context74.stop();\n                          }\n                        }\n                      }, _callee74);\n                    }));\n                  },\n                  canSetPlaybackQuality: function canSetPlaybackQuality() {\n                    return __awaiter$f(_this58, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee75() {\n                      var _d, _e;\n\n                      return _regeneratorRuntime().wrap(function _callee75$(_context75) {\n                        while (1) {\n                          switch (_context75.prev = _context75.next) {\n                            case 0:\n                              return _context75.abrupt(\"return\", ((_e = (_d = this.hls) === null || _d === void 0 ? void 0 : _d.levels) === null || _e === void 0 ? void 0 : _e.length) > 0);\n\n                            case 1:\n                            case \"end\":\n                              return _context75.stop();\n                          }\n                        }\n                      }, _callee75, this);\n                    }));\n                  },\n                  setPlaybackQuality: function setPlaybackQuality(quality) {\n                    return __awaiter$f(_this58, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee76() {\n                      return _regeneratorRuntime().wrap(function _callee76$(_context76) {\n                        while (1) {\n                          switch (_context76.prev = _context76.next) {\n                            case 0:\n                              if (!isUndefined(this.hls)) {\n                                this.hls.currentLevel = this.findLevelIndexFromQuality(quality); // Update the provider cache.\n\n                                this.dispatch('playbackQuality', quality);\n                              }\n\n                            case 1:\n                            case \"end\":\n                              return _context76.stop();\n                          }\n                        }\n                      }, _callee76, this);\n                    }));\n                  },\n                  setCurrentAudioTrack: function setCurrentAudioTrack(trackId) {\n                    return __awaiter$f(_this58, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee77() {\n                      return _regeneratorRuntime().wrap(function _callee77$(_context77) {\n                        while (1) {\n                          switch (_context77.prev = _context77.next) {\n                            case 0:\n                              if (!isUndefined(this.hls)) {\n                                this.hls.audioTrack = trackId;\n                              }\n\n                            case 1:\n                            case \"end\":\n                              return _context77.stop();\n                          }\n                        }\n                      }, _callee77, this);\n                    }));\n                  }\n                }));\n\n              case 14:\n              case \"end\":\n                return _context78.stop();\n            }\n          }\n        }, _callee78, this);\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this59 = this;\n\n      return h(\"vm-video\", {\n        willAttach: true,\n        crossOrigin: this.crossOrigin,\n        preload: this.preload,\n        poster: this.poster,\n        controlsList: this.controlsList,\n        autoPiP: this.autoPiP,\n        disablePiP: this.disablePiP,\n        disableRemotePlayback: this.disableRemotePlayback,\n        mediaTitle: this.mediaTitle,\n        ref: function ref(el) {\n          _this59.videoProvider = el;\n        }\n      }, h(\"slot\", null));\n    }\n  }]);\n\n  return HLS;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n/**\n * INSPIRED BY: https://github.com/shoelace-style/shoelace/blob/next/src/components/icon-library/icon-library-registry.ts\n */\n\n\nvar ICONS_BASE_CDN_URL = 'https://cdn.jsdelivr.net/npm/@vime/core@latest/icons';\nvar registry = new Map(Object.entries({\n  vime: function vime(iconName) {\n    return \"\".concat(ICONS_BASE_CDN_URL, \"/vime/vm-\").concat(iconName, \".svg\");\n  },\n  material: function material(iconName) {\n    return \"\".concat(ICONS_BASE_CDN_URL, \"/material/md-\").concat(iconName, \".svg\");\n  }\n}));\nvar watch = new Set();\n\nfunction withIconRegistry(component) {\n  var el = getElement(component);\n  createStencilHook(component, function () {\n    watch.add(el);\n  }, function () {\n    watch.delete(el);\n  });\n}\n\nvar getIconLibraryResolver = function getIconLibraryResolver(name) {\n  return registry.get(name);\n};\n\nfunction registerIconLibrary(name, resolver) {\n  if (!isUndefined(resolver)) {\n    registry.set(name, resolver);\n  } // Redraw watched icons.\n\n\n  watch.forEach(function (iconEl) {\n    if (iconEl.library === name) iconEl.redraw();\n  });\n}\n\nfunction deregisterIconLibrary(name) {\n  registry.delete(name);\n}\n/**\n * INSPIRED BY: https://github.com/shoelace-style/shoelace/blob/next/src/components/icon/request.ts\n */\n\n\nvar __awaiter$e = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar iconFiles = new Map();\n\nvar requestIcon = function requestIcon(url) {\n  if (iconFiles.has(url)) return iconFiles.get(url);\n  var request = fetch(url).then(function (response) {\n    return __awaiter$e(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee79() {\n      var div, svg;\n      return _regeneratorRuntime().wrap(function _callee79$(_context79) {\n        while (1) {\n          switch (_context79.prev = _context79.next) {\n            case 0:\n              if (!response.ok) {\n                _context79.next = 7;\n                break;\n              }\n\n              div = document.createElement('div');\n              _context79.next = 4;\n              return response.text();\n\n            case 4:\n              div.innerHTML = _context79.sent;\n              svg = div.firstElementChild;\n              return _context79.abrupt(\"return\", {\n                ok: response.ok,\n                status: response.status,\n                svg: svg && svg.tagName.toLowerCase() === 'svg' ? svg.outerHTML : ''\n              });\n\n            case 7:\n              return _context79.abrupt(\"return\", {\n                ok: response.ok,\n                status: response.status\n              });\n\n            case 8:\n            case \"end\":\n              return _context79.stop();\n          }\n        }\n      }, _callee79);\n    }));\n  });\n  iconFiles.set(url, request);\n  return request;\n};\n\nvar iconCss = \":host{display:inline-block;width:1em;height:1em;contain:strict;box-sizing:content-box !important}.icon,svg{display:block;height:100%;width:100%;transition:var(--vm-icon-transition);transform:var(--vm-icon-transform);fill:var(--vm-icon-fill, currentColor);stroke:var(--vm-icon-stroke)}\";\n/**\n * INSPIRED BY: https://github.com/shoelace-style/shoelace/blob/next/src/components/icon/icon.tsx\n */\n\nvar __awaiter$d = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar parser = new DOMParser();\n\nvar Icon = /*#__PURE__*/function (_HTMLElement21) {\n  _inherits(Icon, _HTMLElement21);\n\n  var _super22 = _createSuper(Icon);\n\n  function Icon() {\n    var _this60;\n\n    _classCallCheck(this, Icon);\n\n    _this60 = _super22.call(this);\n\n    _this60.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this60));\n    _this60.vmLoad = createEvent(_assertThisInitialized(_this60), \"vmLoad\", 7);\n    _this60.vmError = createEvent(_assertThisInitialized(_this60), \"vmError\", 7);\n    /** @internal */\n\n    _this60.icons = 'material';\n    withComponentRegistry(_assertThisInitialized(_this60));\n    withIconRegistry(_assertThisInitialized(_this60));\n    return _this60;\n  }\n\n  _createClass(Icon, [{\n    key: \"handleChange\",\n    value: function handleChange() {\n      this.setIcon();\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      withPlayerContext(this, ['icons']);\n    }\n  }, {\n    key: \"componentDidLoad\",\n    value: function componentDidLoad() {\n      this.setIcon();\n    }\n    /**\n     * @internal Fetches the icon and redraws it. Used to handle library registrations.\n     */\n\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      return __awaiter$d(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee80() {\n        return _regeneratorRuntime().wrap(function _callee80$(_context80) {\n          while (1) {\n            switch (_context80.prev = _context80.next) {\n              case 0:\n                this.setIcon();\n\n              case 1:\n              case \"end\":\n                return _context80.stop();\n            }\n          }\n        }, _callee80, this);\n      }));\n    }\n  }, {\n    key: \"getLabel\",\n    value: function getLabel() {\n      var label = '';\n\n      if (this.label) {\n        label = this.label;\n      } else if (this.name) {\n        label = this.name.replace(/-/g, ' ');\n      } else if (this.src) {\n        label = this.src.replace(/.*\\//, '').replace(/-/g, ' ').replace(/\\.svg/i, '');\n      }\n\n      return label;\n    }\n  }, {\n    key: \"setIcon\",\n    value: function setIcon() {\n      var _a;\n\n      return __awaiter$d(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee81() {\n        var resolver, url, file, doc, svg;\n        return _regeneratorRuntime().wrap(function _callee81$(_context81) {\n          while (1) {\n            switch (_context81.prev = _context81.next) {\n              case 0:\n                resolver = getIconLibraryResolver((_a = this.library) !== null && _a !== void 0 ? _a : this.icons);\n                url = this.src;\n\n                if (this.name && resolver) {\n                  url = resolver(this.name);\n                }\n\n                if (!url) {\n                  _context81.next = 14;\n                  break;\n                }\n\n                _context81.prev = 4;\n                _context81.next = 7;\n                return requestIcon(url);\n\n              case 7:\n                file = _context81.sent;\n\n                if (file.ok) {\n                  doc = parser.parseFromString(file.svg, 'text/html');\n                  svg = doc.body.querySelector('svg');\n\n                  if (svg) {\n                    this.svg = svg.outerHTML;\n                    this.vmLoad.emit();\n                  } else {\n                    this.svg = '';\n                    this.vmError.emit({\n                      status: file.status\n                    });\n                  }\n                }\n\n                _context81.next = 14;\n                break;\n\n              case 11:\n                _context81.prev = 11;\n                _context81.t0 = _context81[\"catch\"](4);\n                this.vmError.emit();\n\n              case 14:\n              case \"end\":\n                return _context81.stop();\n            }\n          }\n        }, _callee81, this, [[4, 11]]);\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        class: \"icon\",\n        role: \"img\",\n        \"aria-label\": this.getLabel(),\n        innerHTML: this.svg\n      });\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"name\": [\"handleChange\"],\n        \"src\": [\"handleChange\"],\n        \"library\": [\"handleChange\"],\n        \"icons\": [\"handleChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return iconCss;\n    }\n  }]);\n\n  return Icon;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar IconLibrary = /*#__PURE__*/function (_HTMLElement22) {\n  _inherits(IconLibrary, _HTMLElement22);\n\n  var _super23 = _createSuper(IconLibrary);\n\n  function IconLibrary() {\n    var _this61;\n\n    _classCallCheck(this, IconLibrary);\n\n    _this61 = _super23.call(this);\n\n    _this61.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this61));\n    /** @internal */\n\n    _this61.icons = 'material';\n    withComponentRegistry(_assertThisInitialized(_this61));\n    withPlayerContext(_assertThisInitialized(_this61), ['icons']);\n    return _this61;\n  }\n\n  _createClass(IconLibrary, [{\n    key: \"handleUpdate\",\n    value: function handleUpdate() {\n      this.register();\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.register();\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      if (!isUndefined(this.name)) deregisterIconLibrary(this.name);\n    }\n  }, {\n    key: \"register\",\n    value: function register() {\n      var _a;\n\n      registerIconLibrary((_a = this.name) !== null && _a !== void 0 ? _a : this.icons, this.name ? this.resolver : undefined);\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"name\": [\"handleUpdate\"],\n        \"resolver\": [\"handleUpdate\"],\n        \"icons\": [\"handleUpdate\"]\n      };\n    }\n  }]);\n\n  return IconLibrary;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar liveIndicatorCss = \".liveIndicator{display:flex;align-items:center;font-size:13px;font-weight:bold;letter-spacing:0.6px;color:var(--vm-control-color)}.liveIndicator.hidden{display:none}.indicator{display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:4px;background-color:var(--vm-live-indicator-color, red)}\";\n\nvar LiveIndicator = /*#__PURE__*/function (_HTMLElement23) {\n  _inherits(LiveIndicator, _HTMLElement23);\n\n  var _super24 = _createSuper(LiveIndicator);\n\n  function LiveIndicator() {\n    var _this62;\n\n    _classCallCheck(this, LiveIndicator);\n\n    _this62 = _super24.call(this);\n\n    _this62.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this62));\n    /** @internal */\n\n    _this62.isLive = false;\n    /** @internal */\n\n    _this62.i18n = {};\n    withComponentRegistry(_assertThisInitialized(_this62));\n    withPlayerContext(_assertThisInitialized(_this62), ['isLive', 'i18n']);\n    return _this62;\n  }\n\n  _createClass(LiveIndicator, [{\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        class: {\n          liveIndicator: true,\n          hidden: !this.isLive\n        }\n      }, h(\"div\", {\n        class: \"indicator\"\n      }), this.i18n.live);\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return liveIndicatorCss;\n    }\n  }]);\n\n  return LiveIndicator;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar loadingScreenCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-loading-screen-z-index);display:flex;align-items:center;justify-content:center}.loadingScreen{opacity:100;transition:var(--vm-fade-transition)}.loadingScreen.inactive{opacity:0}.dotPulse{position:relative;left:-9999px;width:var(--vm-loading-screen-dot-size);height:var(--vm-loading-screen-dot-size);border-radius:calc(var(--vm-loading-screen-dot-size) / 2);background-color:var(--vm-loading-screen-dot-color);color:var(--vm-loading-screen-dot-color);box-shadow:9999px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n    var(--vm-loading-screen-dot-color);animation:dotPulse var(--vm-loading-screen-pulse-duration) infinite linear;animation-delay:calc(var(--vm-loading-screen-pulse-duration) / 6)}.dotPulse::before,.dotPulse::after{content:'';display:inline-block;position:absolute;top:0;width:var(--vm-loading-screen-dot-size);height:var(--vm-loading-screen-dot-size);border-radius:calc(var(--vm-loading-screen-dot-size) / 2);background-color:var(--vm-loading-screen-dot-color);color:var(--vm-loading-screen-dot-color)}.dotPulse::before{box-shadow:9984px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n    var(--vm-loading-screen-dot-color);animation:dotPulseBefore var(--vm-loading-screen-pulse-duration) infinite\\n    linear;animation-delay:0s}.dotPulse::after{box-shadow:10014px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n    var(--vm-loading-screen-dot-color);animation:dotPulseAfter var(--vm-loading-screen-pulse-duration) infinite\\n    linear;animation-delay:calc(var(--vm-loading-screen-pulse-duration) / 3)}@keyframes dotPulseBefore{0%{box-shadow:9984px 0 0\\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n      var(--vm-loading-screen-dot-color)}30%{box-shadow:9984px 0 0 2px var(--vm-loading-screen-dot-color)}60%,100%{box-shadow:9984px 0 0\\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n      var(--vm-loading-screen-dot-color)}}@keyframes dotPulse{0%{box-shadow:9999px 0 0\\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n      var(--vm-loading-screen-dot-color)}30%{box-shadow:9999px 0 0 2px var(--vm-loading-screen-dot-color)}60%,100%{box-shadow:9999px 0 0\\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n      var(--vm-loading-screen-dot-color)}}@keyframes dotPulseAfter{0%{box-shadow:10014px 0 0\\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n      var(--vm-loading-screen-dot-color)}30%{box-shadow:10014px 0 0 2px var(--vm-loading-screen-dot-color)}60%,100%{box-shadow:10014px 0 0\\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n      var(--vm-loading-screen-dot-color)}}\";\n\nvar LoadingScreen = /*#__PURE__*/function (_HTMLElement24) {\n  _inherits(LoadingScreen, _HTMLElement24);\n\n  var _super25 = _createSuper(LoadingScreen);\n\n  function LoadingScreen() {\n    var _this63;\n\n    _classCallCheck(this, LoadingScreen);\n\n    _this63 = _super25.call(this);\n\n    _this63.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this63));\n    /** @internal */\n\n    _this63.playbackReady = false;\n    /**\n     * Whether the loading dots are hidden or not.\n     */\n\n    _this63.hideDots = false;\n    withComponentRegistry(_assertThisInitialized(_this63));\n    withPlayerContext(_assertThisInitialized(_this63), ['playbackReady']);\n    return _this63;\n  }\n\n  _createClass(LoadingScreen, [{\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        class: {\n          loadingScreen: true,\n          inactive: this.playbackReady\n        }\n      }, h(\"slot\", null), !this.hideDots && h(\"div\", {\n        class: \"dotPulse\"\n      }));\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return loadingScreenCss;\n    }\n  }]);\n\n  return LoadingScreen;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nfunction unwrapSubmenu(el) {\n  if (el.tagName.toLowerCase() !== 'vm-submenu') return el;\n  var submenu = el;\n  return submenu.shadowRoot.querySelector('vm-menu-item');\n}\n\nfunction unwrapRadioGroup(el) {\n  var _a;\n\n  if (el.tagName.toLowerCase() !== 'vm-menu-radio-group') return el;\n  var radioGroup = el;\n  var slot = radioGroup.shadowRoot.querySelector('slot');\n  var assignedElements = Array.from((_a = slot === null || slot === void 0 ? void 0 : slot.assignedElements()) !== null && _a !== void 0 ? _a : []);\n  return assignedElements.filter(function (radio) {\n    return radio.tagName.toLowerCase() === 'vm-menu-radio';\n  }).map(function (radio) {\n    return radio.shadowRoot.querySelector('vm-menu-item');\n  });\n}\n\nfunction menuItemHunter(assignedElements) {\n  if (isUndefined(assignedElements)) return [];\n  var allowed = ['vm-menu-item', 'vm-menu-radio-group', 'vm-submenu'];\n  return Array.from(assignedElements !== null && assignedElements !== void 0 ? assignedElements : []).filter(function (el) {\n    return allowed.includes(el.tagName.toLowerCase());\n  }).map(function (el) {\n    return unwrapSubmenu(el);\n  }).map(function (el) {\n    return unwrapRadioGroup(el);\n  }).reduce(function (acc, val) {\n    return acc.concat(val);\n  }, []);\n}\n\nvar menuCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;pointer-events:none;z-index:var(--vm-menu-z-index)}:host([active]){pointer-events:auto;z-index:calc(var(--vm-menu-z-index) + 1)}.menu{position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box;transition:var(--vm-menu-transition)}.menu.slideIn{transform:translateX(0)}.menu[aria-hidden='true'].slideInFromLeft{transform:translateX(-100%)}.menu[aria-hidden='true'].slideInFromRight{transform:translateX(100%)}.container{display:flex;flex-direction:column;position:relative;text-align:left;width:100%;height:100%;color:var(--vm-menu-color);background:var(--vm-menu-bg);font-size:var(--vm-menu-font-size);font-weight:var(--vm-menu-font-weight)}.menu:focus{outline:0}\";\n\nvar __awaiter$c = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar Menu = /*#__PURE__*/function (_HTMLElement25) {\n  _inherits(Menu, _HTMLElement25);\n\n  var _super26 = _createSuper(Menu);\n\n  function Menu() {\n    var _this64;\n\n    _classCallCheck(this, Menu);\n\n    _this64 = _super26.call(this);\n\n    _this64.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this64));\n    _this64.vmOpen = createEvent(_assertThisInitialized(_this64), \"vmOpen\", 7);\n    _this64.vmClose = createEvent(_assertThisInitialized(_this64), \"vmClose\", 7);\n    _this64.vmFocus = createEvent(_assertThisInitialized(_this64), \"vmFocus\", 7);\n    _this64.vmBlur = createEvent(_assertThisInitialized(_this64), \"vmBlur\", 7);\n    _this64.vmActiveSubmenuChange = createEvent(_assertThisInitialized(_this64), \"vmActiveSubmenuChange\", 7);\n    _this64.vmActiveMenuItemChange = createEvent(_assertThisInitialized(_this64), \"vmActiveMenuItemChange\", 7);\n    _this64.vmMenuHeightChange = createEvent(_assertThisInitialized(_this64), \"vmMenuHeightChange\", 3);\n    _this64.hasDisconnected = false;\n    /**\n     * Whether the menu is open/visible.\n     */\n\n    _this64.active = false;\n    withComponentRegistry(_assertThisInitialized(_this64));\n    return _this64;\n  }\n\n  _createClass(Menu, [{\n    key: \"onActiveMenuitemChange\",\n    value: function onActiveMenuitemChange() {\n      this.vmActiveMenuItemChange.emit(this.activeMenuItem);\n    }\n  }, {\n    key: \"onActiveSubmenuChange\",\n    value: function onActiveSubmenuChange() {\n      this.vmActiveSubmenuChange.emit(this.activeSubmenu);\n    }\n  }, {\n    key: \"onActiveChange\",\n    value: function onActiveChange() {\n      var _a;\n\n      if (this.hasDisconnected) return;\n      this.active ? this.vmOpen.emit(this.host) : this.vmClose.emit(this.host);\n\n      if (((_a = this.controller) === null || _a === void 0 ? void 0 : _a.tagName.toLowerCase()) === 'vm-menu-item') {\n        this.controller.expanded = true;\n      }\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.hasDisconnected = false;\n    }\n  }, {\n    key: \"componentDidRender\",\n    value: function componentDidRender() {\n      var _this65 = this;\n\n      writeTask(function () {\n        if (!_this65.hasDisconnected) _this65.calculateHeight();\n      });\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.controller = undefined;\n      this.hasDisconnected = true;\n    }\n    /**\n     * Focuses the menu.\n     */\n\n  }, {\n    key: \"focusMenu\",\n    value: function focusMenu() {\n      var _a;\n\n      return __awaiter$c(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee82() {\n        return _regeneratorRuntime().wrap(function _callee82$(_context82) {\n          while (1) {\n            switch (_context82.prev = _context82.next) {\n              case 0:\n                (_a = this.menu) === null || _a === void 0 ? void 0 : _a.focus();\n\n              case 1:\n              case \"end\":\n                return _context82.stop();\n            }\n          }\n        }, _callee82, this);\n      }));\n    }\n    /**\n     * Removes focus from the menu.\n     */\n\n  }, {\n    key: \"blurMenu\",\n    value: function blurMenu() {\n      var _a;\n\n      return __awaiter$c(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee83() {\n        return _regeneratorRuntime().wrap(function _callee83$(_context83) {\n          while (1) {\n            switch (_context83.prev = _context83.next) {\n              case 0:\n                (_a = this.menu) === null || _a === void 0 ? void 0 : _a.blur();\n\n              case 1:\n              case \"end\":\n                return _context83.stop();\n            }\n          }\n        }, _callee83, this);\n      }));\n    }\n    /**\n     * Returns the currently focused menu item.\n     */\n\n  }, {\n    key: \"getActiveMenuItem\",\n    value: function getActiveMenuItem() {\n      return __awaiter$c(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee84() {\n        return _regeneratorRuntime().wrap(function _callee84$(_context84) {\n          while (1) {\n            switch (_context84.prev = _context84.next) {\n              case 0:\n                return _context84.abrupt(\"return\", this.activeMenuItem);\n\n              case 1:\n              case \"end\":\n                return _context84.stop();\n            }\n          }\n        }, _callee84, this);\n      }));\n    }\n    /**\n     * Sets the currently focused menu item.\n     */\n\n  }, {\n    key: \"setActiveMenuItem\",\n    value: function setActiveMenuItem(item) {\n      return __awaiter$c(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee85() {\n        return _regeneratorRuntime().wrap(function _callee85$(_context85) {\n          while (1) {\n            switch (_context85.prev = _context85.next) {\n              case 0:\n                item === null || item === void 0 ? void 0 : item.focusItem();\n                this.activeMenuItem = item;\n\n              case 2:\n              case \"end\":\n                return _context85.stop();\n            }\n          }\n        }, _callee85, this);\n      }));\n    }\n    /**\n     * Calculates the height of the settings menu based on its children.\n     */\n\n  }, {\n    key: \"calculateHeight\",\n    value: function calculateHeight() {\n      var _a, _b;\n\n      return __awaiter$c(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee86() {\n        var height, submenu, children;\n        return _regeneratorRuntime().wrap(function _callee86$(_context86) {\n          while (1) {\n            switch (_context86.prev = _context86.next) {\n              case 0:\n                height = 0;\n\n                if (!this.activeSubmenu) {\n                  _context86.next = 23;\n                  break;\n                }\n\n                _context86.next = 4;\n                return this.activeSubmenu.getMenu();\n\n              case 4:\n                submenu = _context86.sent;\n                _context86.next = 7;\n                return submenu === null || submenu === void 0 ? void 0 : submenu.calculateHeight();\n\n              case 7:\n                _context86.t1 = _a = _context86.sent;\n                _context86.t0 = _context86.t1 !== null;\n\n                if (!_context86.t0) {\n                  _context86.next = 11;\n                  break;\n                }\n\n                _context86.t0 = _a !== void 0;\n\n              case 11:\n                if (!_context86.t0) {\n                  _context86.next = 15;\n                  break;\n                }\n\n                _context86.t2 = _a;\n                _context86.next = 16;\n                break;\n\n              case 15:\n                _context86.t2 = 0;\n\n              case 16:\n                height = _context86.t2;\n                _context86.t3 = height;\n                _context86.next = 20;\n                return this.activeSubmenu.getControllerHeight();\n\n              case 20:\n                height = _context86.t3 += _context86.sent;\n                _context86.next = 25;\n                break;\n\n              case 23:\n                children = ((_b = this.container) === null || _b === void 0 ? void 0 : _b.firstChild).assignedElements({\n                  flatten: true\n                });\n                children === null || children === void 0 ? void 0 : children.forEach(function (child) {\n                  height += parseFloat(window.getComputedStyle(child).height);\n                });\n\n              case 25:\n                this.vmMenuHeightChange.emit(height);\n                return _context86.abrupt(\"return\", height);\n\n              case 27:\n              case \"end\":\n                return _context86.stop();\n            }\n          }\n        }, _callee86, this);\n      }));\n    }\n  }, {\n    key: \"onOpenSubmenu\",\n    value: function onOpenSubmenu(event) {\n      var _this66 = this;\n\n      event.stopPropagation();\n      if (!isUndefined(this.activeSubmenu)) this.activeSubmenu.active = false;\n      this.activeSubmenu = event.detail;\n      this.getChildren().forEach(function (child) {\n        if (child !== _this66.activeSubmenu) {\n          child.style.opacity = '0';\n          child.style.visibility = 'hidden';\n        }\n      });\n      writeTask(function () {\n        _this66.activeSubmenu.active = true;\n      });\n    }\n  }, {\n    key: \"onCloseSubmenu\",\n    value: function onCloseSubmenu(event) {\n      var _this67 = this;\n\n      event === null || event === void 0 ? void 0 : event.stopPropagation();\n      if (!isUndefined(this.activeSubmenu)) this.activeSubmenu.active = false;\n      this.getChildren().forEach(function (child) {\n        if (child !== _this67.activeSubmenu) {\n          child.style.opacity = '';\n          child.style.visibility = '';\n        }\n      });\n      writeTask(function () {\n        _this67.activeSubmenu = undefined;\n      });\n    }\n  }, {\n    key: \"onWindowClick\",\n    value: function onWindowClick() {\n      this.onCloseSubmenu();\n      this.onClose();\n    }\n  }, {\n    key: \"onWindowKeyDown\",\n    value: function onWindowKeyDown(event) {\n      if (this.active && event.key === 'Escape') {\n        this.onCloseSubmenu();\n        this.onClose();\n        this.focusController();\n      }\n    }\n  }, {\n    key: \"getChildren\",\n    value: function getChildren() {\n      var _a;\n\n      var assignedElements = (_a = this.host.shadowRoot.querySelector('slot')) === null || _a === void 0 ? void 0 : _a.assignedElements({\n        flatten: true\n      });\n      return assignedElements !== null && assignedElements !== void 0 ? assignedElements : [];\n    }\n  }, {\n    key: \"getMenuItems\",\n    value: function getMenuItems() {\n      var _a;\n\n      var assignedElements = (_a = this.host.shadowRoot.querySelector('slot')) === null || _a === void 0 ? void 0 : _a.assignedElements({\n        flatten: true\n      });\n      return menuItemHunter(assignedElements);\n    }\n  }, {\n    key: \"focusController\",\n    value: function focusController() {\n      var _a, _b, _c, _d, _e;\n\n      if (!isUndefined((_a = this.controller) === null || _a === void 0 ? void 0 : _a.focusItem)) {\n        (_b = this.controller) === null || _b === void 0 ? void 0 : _b.focusItem();\n      } else if (!isUndefined((_c = this.controller) === null || _c === void 0 ? void 0 : _c.focusControl)) {\n        (_d = this.controller) === null || _d === void 0 ? void 0 : _d.focusControl();\n      } else {\n        (_e = this.controller) === null || _e === void 0 ? void 0 : _e.focus();\n      }\n    }\n  }, {\n    key: \"triggerMenuItem\",\n    value: function triggerMenuItem() {\n      var _a;\n\n      if (isUndefined(this.activeMenuItem)) return;\n      this.activeMenuItem.click(); // If it controls a menu then focus it essentially opening it.\n\n      (_a = this.activeMenuItem.menu) === null || _a === void 0 ? void 0 : _a.focusMenu();\n    }\n  }, {\n    key: \"onClose\",\n    value: function onClose() {\n      this.activeMenuItem = undefined;\n      this.active = false;\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick(event) {\n      // Stop the event from propagating while playing with menu so that when it is clicked outside\n      // the menu we can close it in the `onWindowClick` handler above.\n      event.stopPropagation();\n    }\n  }, {\n    key: \"onFocus\",\n    value: function onFocus() {\n      var _a;\n\n      this.active = true;\n\n      var _this$getMenuItems = this.getMenuItems();\n\n      var _this$getMenuItems2 = _slicedToArray(_this$getMenuItems, 1);\n\n      this.activeMenuItem = _this$getMenuItems2[0];\n      (_a = this.activeMenuItem) === null || _a === void 0 ? void 0 : _a.focusItem();\n      this.vmFocus.emit();\n    }\n  }, {\n    key: \"onBlur\",\n    value: function onBlur() {\n      this.vmBlur.emit();\n    }\n  }, {\n    key: \"foucsMenuItem\",\n    value: function foucsMenuItem(items, index) {\n      if (index < 0) index = items.length - 1;\n      if (index > items.length - 1) index = 0;\n      this.activeMenuItem = items[index];\n      this.activeMenuItem.focusItem();\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(event) {\n      var _this68 = this;\n\n      if (!this.active) return;\n      event.preventDefault();\n      event.stopPropagation();\n      var items = this.getMenuItems();\n      var index = items.findIndex(function (item) {\n        return item === _this68.activeMenuItem;\n      });\n\n      switch (event.key) {\n        case 'Escape':\n          this.onClose();\n          this.focusController();\n          break;\n\n        case 'ArrowDown':\n        case 'Tab':\n          this.foucsMenuItem(items, index += 1);\n          break;\n\n        case 'ArrowUp':\n          this.foucsMenuItem(items, index -= 1);\n          break;\n\n        case 'ArrowLeft':\n          this.onClose();\n          this.focusController();\n          break;\n\n        case 'ArrowRight':\n        case 'Enter':\n        case ' ':\n          this.triggerMenuItem();\n          break;\n\n        case 'Home':\n        case 'PageUp':\n          this.foucsMenuItem(items, 0);\n          break;\n\n        case 'End':\n        case 'PageDown':\n          this.foucsMenuItem(items, items.length - 1);\n          break;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this69 = this;\n\n      var _a, _b, _c;\n\n      return h(\"div\", {\n        id: this.identifier,\n        class: {\n          menu: true,\n          slideIn: !isUndefined(this.slideInDirection),\n          slideInFromLeft: this.slideInDirection === 'left',\n          slideInFromRight: this.slideInDirection === 'right'\n        },\n        role: \"menu\",\n        tabindex: \"-1\",\n        \"aria-labelledby\": (_b = (_a = this.controller) === null || _a === void 0 ? void 0 : _a.identifier) !== null && _b !== void 0 ? _b : (_c = this.controller) === null || _c === void 0 ? void 0 : _c.id,\n        \"aria-hidden\": !this.active ? 'true' : 'false',\n        onFocus: this.onFocus.bind(this),\n        onBlur: this.onBlur.bind(this),\n        onClick: this.onClick.bind(this),\n        onKeyDown: this.onKeyDown.bind(this),\n        ref: function ref(el) {\n          _this69.menu = el;\n        }\n      }, h(\"div\", {\n        class: \"container\",\n        ref: function ref(el) {\n          _this69.container = el;\n        }\n      }, h(\"slot\", null)));\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"activeMenuItem\": [\"onActiveMenuitemChange\"],\n        \"activeSubmenu\": [\"onActiveSubmenuChange\"],\n        \"active\": [\"onActiveChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return menuCss;\n    }\n  }]);\n\n  return Menu;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar menuItemCss = \":host{display:block}.menuItem{display:flex;position:relative;align-items:center;flex-direction:row;cursor:pointer;color:var(--vm-menu-color);background:var(--vm-menu-bg);font-size:var(--vm-menu-font-size);font-weight:var(--vm-menu-font-weight);padding:var(--vm-menu-item-padding);touch-action:manipulation;box-sizing:border-box}.menuItem:focus{outline:0}.menuItem.hidden{display:none}.menuItem.tapHighlight{background:var(--vm-menu-item-tap-highlight)}.menuItem.showDivider{border-bottom:0.5px solid var(--vm-menu-item-divider-color)}.menuItem.notTouch:hover,.menuItem.notTouch:focus{outline:0;color:var(--vm-menu-item-focus-color);background-color:var(--vm-menu-item-focus-bg)}.menuItem[aria-expanded='true']{position:absolute;z-index:2;top:0;width:100%}.menuItem[aria-hidden='true']{display:none}.menuItem[aria-checked='true'] vm-icon{opacity:1;visibility:visible}vm-icon{display:inline-block}vm-icon{fill:currentColor;pointer-events:none;font-size:var(--vm-menu-item-check-icon-size);margin-right:10px;opacity:0;visibility:hidden;transition:var(--vm-fade-transition)}.hint{display:inline-block;margin-left:auto;overflow:hidden;pointer-events:none;margin-right:6px;font-size:var(--vm-menu-item-hint-font-size);opacity:var(--vm-menu-item-hint-opacity);color:var(--vm-menu-item-hint-color)}.badge{display:inline-block;line-height:1;overflow:hidden;pointer-events:none;margin-left:6px;color:var(--vm-menu-item-badge-color);background:var(--vm-menu-item-badge-bg);font-size:var(--vm-menu-item-badge-font-size)}.spacer{flex:1}.arrow{color:var(--vm-menu-item-arrow-color);border:2px solid;padding:2px;display:inline-block;border-width:0 2px 2px 0}.arrow.left{margin-right:6px;transform:rotate(135deg)}.arrow.right{transform:rotate(-45deg);opacity:0.38}\";\n\nvar __awaiter$b = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar MenuItem = /*#__PURE__*/function (_HTMLElement26) {\n  _inherits(MenuItem, _HTMLElement26);\n\n  var _super27 = _createSuper(MenuItem);\n\n  function MenuItem() {\n    var _this70;\n\n    _classCallCheck(this, MenuItem);\n\n    _this70 = _super27.call(this);\n\n    _this70.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this70));\n    _this70.vmFocus = createEvent(_assertThisInitialized(_this70), \"vmFocus\", 7);\n    _this70.vmBlur = createEvent(_assertThisInitialized(_this70), \"vmBlur\", 7);\n    _this70.showTapHighlight = false;\n    /**\n     * Whether the item is displayed or not.\n     */\n\n    _this70.hidden = false;\n    /**\n     * The name of the checkmark icon to resolve from the icon library.\n     */\n\n    _this70.checkIcon = 'check';\n    /** @internal */\n\n    _this70.isTouch = false;\n    withComponentRegistry(_assertThisInitialized(_this70));\n    withPlayerContext(_assertThisInitialized(_this70), ['isTouch']);\n    return _this70;\n  }\n  /**\n   * Focuses the menu item.\n   */\n\n\n  _createClass(MenuItem, [{\n    key: \"focusItem\",\n    value: function focusItem() {\n      var _a;\n\n      return __awaiter$b(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee87() {\n        return _regeneratorRuntime().wrap(function _callee87$(_context87) {\n          while (1) {\n            switch (_context87.prev = _context87.next) {\n              case 0:\n                (_a = this.menuItem) === null || _a === void 0 ? void 0 : _a.focus();\n\n              case 1:\n              case \"end\":\n                return _context87.stop();\n            }\n          }\n        }, _callee87, this);\n      }));\n    }\n    /**\n     * Removes focus from the menu item.\n     */\n\n  }, {\n    key: \"blurItem\",\n    value: function blurItem() {\n      var _a;\n\n      return __awaiter$b(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee88() {\n        return _regeneratorRuntime().wrap(function _callee88$(_context88) {\n          while (1) {\n            switch (_context88.prev = _context88.next) {\n              case 0:\n                (_a = this.menuItem) === null || _a === void 0 ? void 0 : _a.blur();\n\n              case 1:\n              case \"end\":\n                return _context88.stop();\n            }\n          }\n        }, _callee88, this);\n      }));\n    }\n    /**\n     * Returns the height of the menu item.\n     */\n\n  }, {\n    key: \"getHeight\",\n    value: function getHeight() {\n      return __awaiter$b(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee89() {\n        return _regeneratorRuntime().wrap(function _callee89$(_context89) {\n          while (1) {\n            switch (_context89.prev = _context89.next) {\n              case 0:\n                return _context89.abrupt(\"return\", parseFloat(this.menuItem ? window.getComputedStyle(this.menuItem).height : '0'));\n\n              case 1:\n              case \"end\":\n                return _context89.stop();\n            }\n          }\n        }, _callee89, this);\n      }));\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick() {\n      if (!isNil(this.menu)) this.menu.active = !this.expanded;\n    }\n  }, {\n    key: \"onFocus\",\n    value: function onFocus() {\n      this.vmFocus.emit();\n    }\n  }, {\n    key: \"onBlur\",\n    value: function onBlur() {\n      this.vmBlur.emit();\n    }\n  }, {\n    key: \"onTouchStart\",\n    value: function onTouchStart() {\n      this.showTapHighlight = true;\n    }\n  }, {\n    key: \"onTouchEnd\",\n    value: function onTouchEnd() {\n      var _this71 = this;\n\n      setTimeout(function () {\n        _this71.showTapHighlight = false;\n      }, 100);\n    }\n  }, {\n    key: \"onMouseLeave\",\n    value: function onMouseLeave() {\n      var _a;\n\n      (_a = this.menuItem) === null || _a === void 0 ? void 0 : _a.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this72 = this;\n\n      var _a, _b, _c, _d;\n\n      var isCheckedDefined = !isUndefined(this.checked);\n      var isMenuDefined = !isUndefined(this.menu);\n      var hasExpanded = this.expanded ? 'true' : 'false';\n      var isChecked = this.checked ? 'true' : 'false';\n      var showCheckedIcon = isCheckedDefined && !isUndefined(this.checkIcon);\n      var showLeftNavArrow = isMenuDefined && this.expanded;\n      var showRightNavArrow = isMenuDefined && !this.expanded;\n      var showHint = !isUndefined(this.hint) && !isCheckedDefined && (!isMenuDefined || !this.expanded);\n      var showBadge = !isUndefined(this.badge) && !showHint && !showRightNavArrow;\n      var hasSpacer = showHint || showRightNavArrow;\n      return h(\"div\", {\n        class: {\n          menuItem: true,\n          notTouch: !this.isTouch,\n          tapHighlight: this.showTapHighlight,\n          showDivider: isMenuDefined && ((_a = this.expanded) !== null && _a !== void 0 ? _a : false)\n        },\n        id: this.identifier,\n        role: isCheckedDefined ? 'menuitemradio' : 'menuitem',\n        tabindex: \"0\",\n        \"aria-label\": this.label,\n        \"aria-hidden\": this.hidden ? 'true' : 'false',\n        \"aria-haspopup\": isMenuDefined ? 'true' : undefined,\n        \"aria-controls\": (_c = (_b = this.menu) === null || _b === void 0 ? void 0 : _b.identifier) !== null && _c !== void 0 ? _c : (_d = this.menu) === null || _d === void 0 ? void 0 : _d.id,\n        \"aria-expanded\": isMenuDefined ? hasExpanded : undefined,\n        \"aria-checked\": isCheckedDefined ? isChecked : undefined,\n        onClick: this.onClick.bind(this),\n        onFocus: this.onFocus.bind(this),\n        onBlur: this.onBlur.bind(this),\n        onTouchStart: this.onTouchStart.bind(this),\n        onTouchEnd: this.onTouchEnd.bind(this),\n        onMouseLeave: this.onMouseLeave.bind(this),\n        ref: function ref(el) {\n          _this72.menuItem = el;\n        }\n      }, showCheckedIcon && h(\"vm-icon\", {\n        name: this.checkIcon,\n        library: this.icons\n      }), showLeftNavArrow && h(\"span\", {\n        class: \"arrow left\"\n      }), this.label, hasSpacer && h(\"span\", {\n        class: \"spacer\"\n      }), showHint && h(\"span\", {\n        class: \"hint\"\n      }, this.hint), showBadge && h(\"span\", {\n        class: \"badge\"\n      }, this.badge), showRightNavArrow && h(\"span\", {\n        class: \"arrow right\"\n      }));\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return menuItemCss;\n    }\n  }]);\n\n  return MenuItem;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar MenuRadio = /*#__PURE__*/function (_HTMLElement27) {\n  _inherits(MenuRadio, _HTMLElement27);\n\n  var _super28 = _createSuper(MenuRadio);\n\n  function MenuRadio() {\n    var _this73;\n\n    _classCallCheck(this, MenuRadio);\n\n    _this73 = _super28.call(this);\n\n    _this73.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this73));\n    _this73.vmCheck = createEvent(_assertThisInitialized(_this73), \"vmCheck\", 7);\n    /**\n     * Whether the radio item is selected or not.\n     */\n\n    _this73.checked = false;\n    /**\n     * The URL to an SVG element or fragment to load.\n     */\n\n    _this73.checkIcon = 'check';\n    withComponentRegistry(_assertThisInitialized(_this73));\n    return _this73;\n  }\n\n  _createClass(MenuRadio, [{\n    key: \"onClick\",\n    value: function onClick() {\n      this.checked = true;\n      this.vmCheck.emit();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(\"vm-menu-item\", {\n        label: this.label,\n        checked: this.checked,\n        badge: this.badge,\n        checkIcon: this.checkIcon,\n        icons: this.icons,\n        onClick: this.onClick.bind(this)\n      });\n    }\n  }]);\n\n  return MenuRadio;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar MenuRadioGroup = /*#__PURE__*/function (_HTMLElement28) {\n  _inherits(MenuRadioGroup, _HTMLElement28);\n\n  var _super29 = _createSuper(MenuRadioGroup);\n\n  function MenuRadioGroup() {\n    var _this74;\n\n    _classCallCheck(this, MenuRadioGroup);\n\n    _this74 = _super29.call(this);\n\n    _this74.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this74));\n    _this74.vmCheck = createEvent(_assertThisInitialized(_this74), \"vmCheck\", 7);\n    withComponentRegistry(_assertThisInitialized(_this74));\n    return _this74;\n  }\n\n  _createClass(MenuRadioGroup, [{\n    key: \"onValueChange\",\n    value: function onValueChange() {\n      var _this75 = this;\n\n      var _a;\n\n      (_a = this.findRadios()) === null || _a === void 0 ? void 0 : _a.forEach(function (radio) {\n        radio.checked = radio.value === _this75.value;\n      });\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.onValueChange();\n    }\n  }, {\n    key: \"componentDidLoad\",\n    value: function componentDidLoad() {\n      this.onValueChange();\n    }\n  }, {\n    key: \"onSelectionChange\",\n    value: function onSelectionChange(event) {\n      var radio = event.target;\n      this.value = radio.value;\n    }\n  }, {\n    key: \"findRadios\",\n    value: function findRadios() {\n      var _a;\n\n      return (_a = this.host.shadowRoot.querySelector('slot')) === null || _a === void 0 ? void 0 : _a.assignedElements();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(\"slot\", null);\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"value\": [\"onValueChange\"]\n      };\n    }\n  }]);\n\n  return MenuRadioGroup;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar MuteControl = /*#__PURE__*/function (_HTMLElement29) {\n  _inherits(MuteControl, _HTMLElement29);\n\n  var _super30 = _createSuper(MuteControl);\n\n  function MuteControl() {\n    var _this76;\n\n    _classCallCheck(this, MuteControl);\n\n    _this76 = _super30.call(this);\n\n    _this76.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this76));\n    _this76.vmFocus = createEvent(_assertThisInitialized(_this76), \"vmFocus\", 7);\n    _this76.vmBlur = createEvent(_assertThisInitialized(_this76), \"vmBlur\", 7);\n    /**\n     * The name of the low volume icon to resolve from the icon library.\n     */\n\n    _this76.lowVolumeIcon = 'volume-low';\n    /**\n     * The name of the high volume icon to resolve from the icon library.\n     */\n\n    _this76.highVolumeIcon = 'volume-high';\n    /**\n     * The name of the muted volume icon to resolve from the icon library.\n     */\n\n    _this76.mutedIcon = 'volume-mute';\n    /**\n     * Whether the tooltip is positioned above/below the control.\n     */\n\n    _this76.tooltipPosition = 'top';\n    /**\n     * Whether the tooltip should not be displayed.\n     */\n\n    _this76.hideTooltip = false;\n    /** @inheritdoc */\n\n    _this76.keys = 'm';\n    /** @internal */\n\n    _this76.volume = 50;\n    /** @internal */\n\n    _this76.muted = false;\n    /** @internal */\n\n    _this76.i18n = {};\n    withComponentRegistry(_assertThisInitialized(_this76));\n    withPlayerContext(_assertThisInitialized(_this76), ['muted', 'volume', 'i18n']);\n    return _this76;\n  }\n\n  _createClass(MuteControl, [{\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.dispatch = createDispatcher(this);\n    }\n  }, {\n    key: \"getIcon\",\n    value: function getIcon() {\n      var volumeIcon = this.volume < 50 ? this.lowVolumeIcon : this.highVolumeIcon;\n      return this.muted || this.volume === 0 ? this.mutedIcon : volumeIcon;\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick() {\n      this.dispatch('muted', !this.muted);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var tooltip = this.muted ? this.i18n.unmute : this.i18n.mute;\n      var tooltipWithHint = !isUndefined(this.keys) ? \"\".concat(tooltip, \" (\").concat(this.keys, \")\") : tooltip;\n      return h(\"vm-control\", {\n        label: this.i18n.mute,\n        pressed: this.muted,\n        keys: this.keys,\n        onClick: this.onClick.bind(this)\n      }, h(\"vm-icon\", {\n        name: this.getIcon(),\n        library: this.icons\n      }), h(\"vm-tooltip\", {\n        hidden: this.hideTooltip,\n        position: this.tooltipPosition,\n        direction: this.tooltipDirection\n      }, tooltipWithHint));\n    }\n  }]);\n\n  return MuteControl;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar pipControlCss = \":host([hidden]){display:none}\";\n\nvar __awaiter$a = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar PiPControl = /*#__PURE__*/function (_HTMLElement30) {\n  _inherits(PiPControl, _HTMLElement30);\n\n  var _super31 = _createSuper(PiPControl);\n\n  function PiPControl() {\n    var _this77;\n\n    _classCallCheck(this, PiPControl);\n\n    _this77 = _super31.call(this);\n\n    _this77.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this77));\n    _this77.canSetPiP = false;\n    /**\n     * The name of the enter pip icon to resolve from the icon library.\n     */\n\n    _this77.enterIcon = 'pip-enter';\n    /**\n     * The name of the exit pip icon to resolve from the icon library.\n     */\n\n    _this77.exitIcon = 'pip-exit';\n    /**\n     * Whether the tooltip is positioned above/below the control.\n     */\n\n    _this77.tooltipPosition = 'top';\n    /**\n     * Whether the tooltip should not be displayed.\n     */\n\n    _this77.hideTooltip = false;\n    /** @inheritdoc */\n\n    _this77.keys = 'p';\n    /** @internal */\n\n    _this77.isPiPActive = false;\n    /** @internal */\n\n    _this77.i18n = {};\n    /** @internal */\n\n    _this77.playbackReady = false;\n    withComponentRegistry(_assertThisInitialized(_this77));\n    withPlayerContext(_assertThisInitialized(_this77), ['isPiPActive', 'playbackReady', 'i18n']);\n    return _this77;\n  }\n\n  _createClass(PiPControl, [{\n    key: \"onPlaybackReadyChange\",\n    value: function onPlaybackReadyChange() {\n      var _a;\n\n      return __awaiter$a(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee90() {\n        var player;\n        return _regeneratorRuntime().wrap(function _callee90$(_context90) {\n          while (1) {\n            switch (_context90.prev = _context90.next) {\n              case 0:\n                player = getPlayerFromRegistry(this);\n                _context90.next = 3;\n                return player === null || player === void 0 ? void 0 : player.canSetPiP();\n\n              case 3:\n                _context90.t1 = _a = _context90.sent;\n                _context90.t0 = _context90.t1 !== null;\n\n                if (!_context90.t0) {\n                  _context90.next = 7;\n                  break;\n                }\n\n                _context90.t0 = _a !== void 0;\n\n              case 7:\n                if (!_context90.t0) {\n                  _context90.next = 11;\n                  break;\n                }\n\n                _context90.t2 = _a;\n                _context90.next = 12;\n                break;\n\n              case 11:\n                _context90.t2 = false;\n\n              case 12:\n                this.canSetPiP = _context90.t2;\n\n              case 13:\n              case \"end\":\n                return _context90.stop();\n            }\n          }\n        }, _callee90, this);\n      }));\n    }\n  }, {\n    key: \"componentDidLoad\",\n    value: function componentDidLoad() {\n      this.onPlaybackReadyChange();\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick() {\n      var player = getPlayerFromRegistry(this);\n      !this.isPiPActive ? player === null || player === void 0 ? void 0 : player.enterPiP() : player === null || player === void 0 ? void 0 : player.exitPiP();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var tooltip = this.isPiPActive ? this.i18n.exitPiP : this.i18n.enterPiP;\n      var tooltipWithHint = !isUndefined(this.keys) ? \"\".concat(tooltip, \" (\").concat(this.keys, \")\") : tooltip;\n      return h(Host, {\n        hidden: !this.canSetPiP\n      }, h(\"vm-control\", {\n        label: this.i18n.pip,\n        keys: this.keys,\n        pressed: this.isPiPActive,\n        hidden: !this.canSetPiP,\n        onClick: this.onClick.bind(this)\n      }, h(\"vm-icon\", {\n        name: this.isPiPActive ? this.exitIcon : this.enterIcon,\n        library: this.icons\n      }), h(\"vm-tooltip\", {\n        hidden: this.hideTooltip,\n        position: this.tooltipPosition,\n        direction: this.tooltipDirection\n      }, tooltipWithHint)));\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"playbackReady\": [\"onPlaybackReadyChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return pipControlCss;\n    }\n  }]);\n\n  return PiPControl;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar PlaybackControl = /*#__PURE__*/function (_HTMLElement31) {\n  _inherits(PlaybackControl, _HTMLElement31);\n\n  var _super32 = _createSuper(PlaybackControl);\n\n  function PlaybackControl() {\n    var _this78;\n\n    _classCallCheck(this, PlaybackControl);\n\n    _this78 = _super32.call(this);\n\n    _this78.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this78));\n    /**\n     * The name of the play icon to resolve from the icon library.\n     */\n\n    _this78.playIcon = 'play';\n    /**\n     * The name of the pause icon to resolve from the icon library.\n     */\n\n    _this78.pauseIcon = 'pause';\n    /**\n     * Whether the tooltip is positioned above/below the control.\n     */\n\n    _this78.tooltipPosition = 'top';\n    /**\n     * Whether the tooltip should not be displayed.\n     */\n\n    _this78.hideTooltip = false;\n    /** @inheritdoc */\n\n    _this78.keys = 'k';\n    /** @internal */\n\n    _this78.paused = true;\n    /** @internal */\n\n    _this78.i18n = {};\n    withComponentRegistry(_assertThisInitialized(_this78));\n    withPlayerContext(_assertThisInitialized(_this78), ['paused', 'i18n']);\n    return _this78;\n  }\n\n  _createClass(PlaybackControl, [{\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.dispatch = createDispatcher(this);\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick() {\n      this.dispatch('paused', !this.paused);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var tooltip = this.paused ? this.i18n.play : this.i18n.pause;\n      var tooltipWithHint = !isUndefined(this.keys) ? \"\".concat(tooltip, \" (\").concat(this.keys, \")\") : tooltip;\n      return h(\"vm-control\", {\n        label: this.i18n.playback,\n        keys: this.keys,\n        pressed: !this.paused,\n        onClick: this.onClick.bind(this)\n      }, h(\"vm-icon\", {\n        name: this.paused ? this.playIcon : this.pauseIcon,\n        library: this.icons\n      }), h(\"vm-tooltip\", {\n        hidden: this.hideTooltip,\n        position: this.tooltipPosition,\n        direction: this.tooltipDirection\n      }, tooltipWithHint));\n    }\n  }]);\n\n  return PlaybackControl;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar Logger = /*#__PURE__*/function () {\n  function Logger() {\n    _classCallCheck(this, Logger);\n\n    this.silent = false;\n  }\n\n  _createClass(Logger, [{\n    key: \"log\",\n    value: function log() {\n      var _console;\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      if (!this.silent && !isUndefined(console)) (_console = console).log.apply(_console, ['[Vime tip]:'].concat(args));\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      var _console2;\n\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      if (!this.silent && !isUndefined(console)) (_console2 = console).error.apply(_console2, ['[Vime warn]:'].concat(args));\n    }\n  }]);\n\n  return Logger;\n}();\n\nvar players = new Set();\n\nfunction withAutopause(player) {\n  var el = getElement(player);\n  createStencilHook(player, function () {\n    players.add(el);\n  }, function () {\n    players.delete(el);\n  });\n}\n\nfunction autopause(player) {\n  var el = getElement(player);\n  players.forEach(function (p) {\n    if (p !== el && p.autopause) p.paused = true;\n  });\n}\n/* eslint-disable func-names */\n\n\nfunction withPlayerEvents(player) {\n  var el = getElement(player);\n  var cache = new Map();\n\n  function initCache() {\n    Object.keys(initialState).forEach(function (prop) {\n      cache.set(prop, player[prop]);\n    });\n  }\n\n  createStencilHook(player, function () {\n    initCache();\n  }, function () {\n    cache.clear();\n  });\n  var componentDidRender = player.componentDidRender;\n\n  player.componentDidRender = function () {\n    componentDidRender === null || componentDidRender === void 0 ? void 0 : componentDidRender();\n    var props = Array.from(cache.keys());\n\n    for (var i = 0; i < props.length; i += 1) {\n      var prop = props[i];\n      var oldValue = cache.get(prop);\n      var newValue = player[prop];\n\n      if (oldValue !== newValue) {\n        firePlayerEvent(el, prop, newValue, oldValue);\n        cache.set(prop, newValue);\n      }\n    }\n  };\n}\n\nvar __awaiter$9 = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}; // These changes need to be called immediately to avoid the browser blocking the request.\n\n\nvar immediateAdapterCall = new Set(['currentTime', 'paused']);\n\nfunction withPlayerScheduler(player) {\n  var _this79 = this;\n\n  var el = getElement(player);\n  var disposal = new Disposal();\n  var cache = new Map();\n\n  function initCache() {\n    Object.keys(initialState).forEach(function (prop) {\n      cache.set(prop, player[prop]);\n    });\n  } // Queue of adapter calls to be run when the media is ready for playback.\n\n\n  var adapterCalls = [];\n\n  function flushAdapterCalls() {\n    return __awaiter$9(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee91() {\n      var adapter, i;\n      return _regeneratorRuntime().wrap(function _callee91$(_context91) {\n        while (1) {\n          switch (_context91.prev = _context91.next) {\n            case 0:\n              _context91.next = 2;\n              return player.adapter;\n\n            case 2:\n              adapter = _context91.sent;\n\n              if (!isUndefined(adapter)) {\n                _context91.next = 5;\n                break;\n              }\n\n              return _context91.abrupt(\"return\");\n\n            case 5:\n              i = 0;\n\n            case 6:\n              if (!(i < adapterCalls.length)) {\n                _context91.next = 12;\n                break;\n              }\n\n              _context91.next = 9;\n              return adapterCalls[i](adapter);\n\n            case 9:\n              i += 1;\n              _context91.next = 6;\n              break;\n\n            case 12:\n              adapterCalls = [];\n\n            case 13:\n            case \"end\":\n              return _context91.stop();\n          }\n        }\n      }, _callee91);\n    }));\n  }\n\n  var hasMediaChanged = false;\n\n  function onMediaChange(e) {\n    e === null || e === void 0 ? void 0 : e.stopImmediatePropagation(); // Don't reset first time otherwise props intialized by the user will be reset.\n\n    if (!hasMediaChanged) {\n      hasMediaChanged = true;\n      return;\n    }\n\n    adapterCalls = [];\n    writeTask(function () {\n      Object.keys(initialState).filter(shouldPropResetOnMediaChange).forEach(function (prop) {\n        player[prop] = initialState[prop];\n      });\n    });\n  }\n\n  function onStateChange(event) {\n    var _a;\n\n    return __awaiter$9(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee92() {\n      var _event$detail2, by, prop, value, adapter;\n\n      return _regeneratorRuntime().wrap(function _callee92$(_context92) {\n        while (1) {\n          switch (_context92.prev = _context92.next) {\n            case 0:\n              event.stopImmediatePropagation();\n              _event$detail2 = event.detail, by = _event$detail2.by, prop = _event$detail2.prop, value = _event$detail2.value;\n\n              if (isWritableProp(prop)) {\n                _context92.next = 5;\n                break;\n              }\n\n              (_a = player.logger) === null || _a === void 0 ? void 0 : _a.warn(\"\".concat(by.nodeName, \" tried to change `\").concat(prop, \"` but it is readonly.\"));\n              return _context92.abrupt(\"return\");\n\n            case 5:\n              if (!(!player.playbackStarted && immediateAdapterCall.has(prop))) {\n                _context92.next = 11;\n                break;\n              }\n\n              _context92.next = 8;\n              return player.adapter;\n\n            case 8:\n              adapter = _context92.sent;\n\n              if (prop === 'paused' && !value) {\n                adapter === null || adapter === void 0 ? void 0 : adapter.play();\n              }\n\n              if (prop === 'currentTime') {\n                adapter === null || adapter === void 0 ? void 0 : adapter.play();\n                adapter === null || adapter === void 0 ? void 0 : adapter.setCurrentTime(value);\n              }\n\n            case 11:\n              writeTask(function () {\n                player[prop] = value;\n              });\n\n            case 12:\n            case \"end\":\n              return _context92.stop();\n          }\n        }\n      }, _callee92);\n    }));\n  } // Called by ProviderConnect.\n\n\n  var onProviderDisconnect = player.onProviderDisconnect;\n\n  player.onProviderDisconnect = function () {\n    onMediaChange();\n    if (onProviderDisconnect) onProviderDisconnect.call(player);\n  };\n\n  createStencilHook(player, function () {\n    initCache();\n    disposal.add(listen(el, LOAD_START_EVENT, onMediaChange));\n    disposal.add(listen(el, STATE_CHANGE_EVENT, onStateChange));\n  }, function () {\n    cache.clear();\n    disposal.empty();\n  });\n  wrapStencilHook(player, 'componentWillRender', function () {\n    return __awaiter$9(_this79, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee93() {\n      return _regeneratorRuntime().wrap(function _callee93$(_context93) {\n        while (1) {\n          switch (_context93.prev = _context93.next) {\n            case 0:\n              if (!(player.playbackReady && adapterCalls.length > 0)) {\n                _context93.next = 3;\n                break;\n              }\n\n              _context93.next = 3;\n              return flushAdapterCalls();\n\n            case 3:\n            case \"end\":\n              return _context93.stop();\n          }\n        }\n      }, _callee93);\n    }));\n  });\n\n  function isAdapterCallRequired(prop, value) {\n    var _a;\n\n    return value !== ((_a = player[PROVIDER_CACHE_KEY]) === null || _a === void 0 ? void 0 : _a.get(prop));\n  }\n\n  return function safeAdapterCall(prop, method) {\n    return __awaiter$9(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee95() {\n      var _this80 = this;\n\n      var value, safeCall;\n      return _regeneratorRuntime().wrap(function _callee95$(_context95) {\n        while (1) {\n          switch (_context95.prev = _context95.next) {\n            case 0:\n              if (isAdapterCallRequired(prop, player[prop])) {\n                _context95.next = 2;\n                break;\n              }\n\n              return _context95.abrupt(\"return\");\n\n            case 2:\n              value = player[prop];\n\n              safeCall = function safeCall(adapter) {\n                return __awaiter$9(_this80, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee94() {\n                  var _a;\n\n                  return _regeneratorRuntime().wrap(function _callee94$(_context94) {\n                    while (1) {\n                      switch (_context94.prev = _context94.next) {\n                        case 0:\n                          _context94.prev = 0;\n                          _context94.next = 3;\n                          return (_a = adapter === null || adapter === void 0 ? void 0 : adapter[method]) === null || _a === void 0 ? void 0 : _a.call(adapter, value);\n\n                        case 3:\n                          _context94.next = 8;\n                          break;\n\n                        case 5:\n                          _context94.prev = 5;\n                          _context94.t0 = _context94[\"catch\"](0);\n                          el.dispatchEvent(new CustomEvent('vmError', {\n                            detail: _context94.t0\n                          }));\n\n                        case 8:\n                        case \"end\":\n                          return _context94.stop();\n                      }\n                    }\n                  }, _callee94, null, [[0, 5]]);\n                }));\n              };\n\n              if (!player.playbackReady) {\n                _context95.next = 13;\n                break;\n              }\n\n              _context95.t0 = safeCall;\n              _context95.next = 8;\n              return player.adapter;\n\n            case 8:\n              _context95.t1 = _context95.sent;\n              _context95.next = 11;\n              return (0, _context95.t0)(_context95.t1);\n\n            case 11:\n              _context95.next = 14;\n              break;\n\n            case 13:\n              adapterCalls.push(safeCall);\n\n            case 14:\n            case \"end\":\n              return _context95.stop();\n          }\n        }\n      }, _callee95);\n    }));\n  };\n}\n\nvar playerCss = \".player{box-sizing:border-box;direction:ltr;font-family:var(--vm-player-font-family);-moz-osx-font-smoothing:auto;-webkit-font-smoothing:subpixel-antialiased;-webkit-tap-highlight-color:transparent;font-variant-numeric:tabular-nums;font-weight:500;line-height:1.7;width:100%;display:block;max-width:100%;min-width:275px;min-height:40px;position:relative;text-shadow:none;outline:0;transition:box-shadow 0.3s ease;box-shadow:var(--vm-player-box-shadow);border-radius:var(--vm-player-border-radius)}.player.idle{cursor:none}.player.audio{background-color:transparent !important}.player.video{height:0;overflow:hidden;background-color:var(--vm-player-bg, #000)}.player.fullscreen{margin:0;border-radius:0;width:100%;height:100%;padding-bottom:0 !important}.blocker{position:absolute;top:0;left:0;width:100%;height:100%;display:inline-block;z-index:var(--vm-blocker-z-index)}\";\n\nvar __awaiter$8 = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar idCount$3 = 0;\n\nvar Player = /*#__PURE__*/function (_HTMLElement32) {\n  _inherits(Player, _HTMLElement32);\n\n  var _super33 = _createSuper(Player);\n\n  function Player() {\n    var _this81;\n\n    _classCallCheck(this, Player);\n\n    _this81 = _super33.call(this);\n\n    _this81.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this81));\n    _this81.vmThemeChange = createEvent(_assertThisInitialized(_this81), \"vmThemeChange\", 7);\n    _this81.vmPausedChange = createEvent(_assertThisInitialized(_this81), \"vmPausedChange\", 7);\n    _this81.vmPlay = createEvent(_assertThisInitialized(_this81), \"vmPlay\", 7);\n    _this81.vmPlayingChange = createEvent(_assertThisInitialized(_this81), \"vmPlayingChange\", 7);\n    _this81.vmSeekingChange = createEvent(_assertThisInitialized(_this81), \"vmSeekingChange\", 7);\n    _this81.vmSeeked = createEvent(_assertThisInitialized(_this81), \"vmSeeked\", 7);\n    _this81.vmBufferingChange = createEvent(_assertThisInitialized(_this81), \"vmBufferingChange\", 7);\n    _this81.vmDurationChange = createEvent(_assertThisInitialized(_this81), \"vmDurationChange\", 7);\n    _this81.vmCurrentTimeChange = createEvent(_assertThisInitialized(_this81), \"vmCurrentTimeChange\", 7);\n    _this81.vmReady = createEvent(_assertThisInitialized(_this81), \"vmReady\", 7);\n    _this81.vmPlaybackReady = createEvent(_assertThisInitialized(_this81), \"vmPlaybackReady\", 7);\n    _this81.vmPlaybackStarted = createEvent(_assertThisInitialized(_this81), \"vmPlaybackStarted\", 7);\n    _this81.vmPlaybackEnded = createEvent(_assertThisInitialized(_this81), \"vmPlaybackEnded\", 7);\n    _this81.vmBufferedChange = createEvent(_assertThisInitialized(_this81), \"vmBufferedChange\", 7);\n    _this81.vmError = createEvent(_assertThisInitialized(_this81), \"vmError\", 7);\n    _this81.vmLoadStart = createEvent(_assertThisInitialized(_this81), \"vmLoadStart\", 7);\n    _this81.vmCurrentProviderChange = createEvent(_assertThisInitialized(_this81), \"vmCurrentProviderChange\", 7);\n    _this81.vmCurrentSrcChange = createEvent(_assertThisInitialized(_this81), \"vmCurrentSrcChange\", 7);\n    _this81.vmCurrentPosterChange = createEvent(_assertThisInitialized(_this81), \"vmCurrentPosterChange\", 7);\n    _this81.vmMediaTitleChange = createEvent(_assertThisInitialized(_this81), \"vmMediaTitleChange\", 7);\n    _this81.vmControlsChange = createEvent(_assertThisInitialized(_this81), \"vmControlsChange\", 7);\n    _this81.vmPlaybackRateChange = createEvent(_assertThisInitialized(_this81), \"vmPlaybackRateChange\", 7);\n    _this81.vmPlaybackRatesChange = createEvent(_assertThisInitialized(_this81), \"vmPlaybackRatesChange\", 7);\n    _this81.vmPlaybackQualityChange = createEvent(_assertThisInitialized(_this81), \"vmPlaybackQualityChange\", 7);\n    _this81.vmPlaybackQualitiesChange = createEvent(_assertThisInitialized(_this81), \"vmPlaybackQualitiesChange\", 7);\n    _this81.vmMutedChange = createEvent(_assertThisInitialized(_this81), \"vmMutedChange\", 7);\n    _this81.vmVolumeChange = createEvent(_assertThisInitialized(_this81), \"vmVolumeChange\", 7);\n    _this81.vmViewTypeChange = createEvent(_assertThisInitialized(_this81), \"vmViewTypeChange\", 7);\n    _this81.vmMediaTypeChange = createEvent(_assertThisInitialized(_this81), \"vmMediaTypeChange\", 7);\n    _this81.vmLiveChange = createEvent(_assertThisInitialized(_this81), \"vmLiveChange\", 7);\n    _this81.vmTouchChange = createEvent(_assertThisInitialized(_this81), \"vmTouchChange\", 7);\n    _this81.vmLanguageChange = createEvent(_assertThisInitialized(_this81), \"vmLanguageChange\", 7);\n    _this81.vmI18nChange = createEvent(_assertThisInitialized(_this81), \"vmI18nChange\", 7);\n    _this81.vmTranslationsChange = createEvent(_assertThisInitialized(_this81), \"vmTranslationsChange\", 7);\n    _this81.vmLanguagesChange = createEvent(_assertThisInitialized(_this81), \"vmLanguagesChange\", 7);\n    _this81.vmFullscreenChange = createEvent(_assertThisInitialized(_this81), \"vmFullscreenChange\", 7);\n    _this81.vmPiPChange = createEvent(_assertThisInitialized(_this81), \"vmPiPChange\", 7);\n    _this81.vmTextTracksChange = createEvent(_assertThisInitialized(_this81), \"vmTextTracksChange\", 7);\n    _this81.vmCurrentTextTrackChange = createEvent(_assertThisInitialized(_this81), \"vmCurrentTextTrackChange\", 7);\n    _this81.vmTextTrackVisibleChange = createEvent(_assertThisInitialized(_this81), \"vmTextTrackVisibleChange\", 7);\n    _this81.vmAudioTracksChange = createEvent(_assertThisInitialized(_this81), \"vmAudioTracksChange\", 7);\n    _this81.vmCurrentAudioTrackChange = createEvent(_assertThisInitialized(_this81), \"vmCurrentAudioTrackChange\", 7);\n    _this81.disposal = new Disposal();\n    /**\n     * ------------------------------------------------------\n     * Props\n     * ------------------------------------------------------\n     */\n\n    /** @internal @readonly */\n\n    _this81.logger = new Logger();\n    /** @inheritDoc */\n\n    _this81.icons = 'vime';\n    /** @inheritDoc */\n\n    _this81.paused = true;\n    /** @inheritDoc @readonly */\n\n    _this81.playing = false;\n    /** @inheritDoc @readonly */\n\n    _this81.duration = -1;\n    /** @inheritDoc */\n\n    _this81.currentTime = 0;\n    /** @inheritDoc */\n\n    _this81.autoplay = false;\n    /** @inheritDoc @readonly */\n\n    _this81.ready = false;\n    /** @inheritDoc @readonly */\n\n    _this81.playbackReady = false;\n    /** @inheritDoc */\n\n    _this81.loop = false;\n    /** @inheritDoc */\n\n    _this81.muted = false;\n    /** @inheritDoc @readonly */\n\n    _this81.buffered = 0;\n    /** @inheritDoc */\n\n    _this81.playbackRate = 1;\n    _this81.lastRateCheck = 1;\n    /** @inheritDoc @readonly */\n\n    _this81.playbackRates = [1];\n    /** @inheritDoc @readonly */\n\n    _this81.playbackQualities = [];\n    /** @inheritDoc @readonly */\n\n    _this81.seeking = false;\n    /** @inheritDoc */\n\n    _this81.debug = false;\n    /** @inheritDoc @readonly */\n\n    _this81.playbackStarted = false;\n    /** @inheritDoc @readonly */\n\n    _this81.playbackEnded = false;\n    /** @inheritDoc @readonly */\n\n    _this81.buffering = false;\n    /** @inheritDoc */\n\n    _this81.controls = false;\n    /** @inheritDoc */\n\n    _this81.isControlsActive = false;\n    /** @inheritDoc @readonly */\n\n    _this81.isSettingsActive = false;\n    /** @inheritDoc */\n\n    _this81.volume = 50;\n    /** @inheritDoc @readonly */\n\n    _this81.isFullscreenActive = false;\n    /** @inheritDoc */\n\n    _this81.aspectRatio = '16:9';\n    /** @inheritDoc @readonly */\n\n    _this81.isAudioView = false;\n    /** @inheritDoc @readonly */\n\n    _this81.isVideoView = false;\n    /** @inheritDoc @readonly */\n\n    _this81.isAudio = false;\n    /** @inheritDoc @readonly */\n\n    _this81.isVideo = false;\n    /** @inheritDoc @readonly */\n\n    _this81.isLive = false;\n    /** @inheritDoc @readonly */\n\n    _this81.isMobile = false;\n    /** @inheritDoc @readonly */\n\n    _this81.isTouch = false;\n    /** @inheritDoc @readonly */\n\n    _this81.isPiPActive = false;\n    /** @inheritDoc @readonly */\n\n    _this81.textTracks = [];\n    /** @inheritDoc @readonly */\n\n    _this81.currentTextTrack = -1;\n    /** @inheritDoc @readonly */\n\n    _this81.isTextTrackVisible = true;\n    /** @inheritDoc */\n\n    _this81.shouldRenderNativeTextTracks = true;\n    /** @inheritDoc @readonly */\n\n    _this81.audioTracks = [];\n    /** @inheritDoc @readonly */\n\n    _this81.currentAudioTrack = -1;\n    /** @inheritDoc */\n\n    _this81.autopause = true;\n    /** @inheritDoc */\n\n    _this81.playsinline = false;\n    /** @inheritDoc */\n\n    _this81.language = 'en';\n    /** @inheritDoc */\n\n    _this81.translations = {\n      en: en\n    };\n    /** @inheritDoc @readonly */\n\n    _this81.languages = ['en'];\n    /** @inheritDoc @readonly */\n\n    _this81.i18n = en;\n    withFindPlayer(_assertThisInitialized(_this81));\n    withComponentRegistrar(_assertThisInitialized(_this81));\n    withAutopause(_assertThisInitialized(_this81));\n    withProviderHost(_assertThisInitialized(_this81));\n    withPlayerEvents(_assertThisInitialized(_this81));\n    _this81.safeAdapterCall = withPlayerScheduler(_assertThisInitialized(_this81));\n    return _this81;\n  }\n\n  _createClass(Player, [{\n    key: \"adapter\",\n    get: function get() {\n      var _a;\n\n      return (_a = this.provider) === null || _a === void 0 ? void 0 : _a.getAdapter();\n    }\n  }, {\n    key: \"onContainerChange\",\n    value: function onContainerChange() {\n      var _this82 = this;\n\n      var _a;\n\n      (_a = this.fullscreenController) === null || _a === void 0 ? void 0 : _a.destroy();\n      if (isUndefined(this.container)) return;\n      this.fullscreenController = new FullscreenController(this.container);\n      this.fullscreenController.on('change', function (isActive) {\n        _this82.isFullscreenActive = isActive;\n        if (isActive) _this82.rotateDevice();\n      });\n      this.fullscreenController.on('error', function (error) {\n        _this82.vmError.emit(error);\n      });\n    }\n  }, {\n    key: \"onPausedChange\",\n    value: function onPausedChange() {\n      if (this.paused) {\n        this.playing = false;\n      } else {\n        autopause(this);\n      }\n\n      this.safeAdapterCall('paused', !this.paused ? 'play' : 'pause');\n    }\n  }, {\n    key: \"onDurationChange\",\n    value: function onDurationChange() {\n      this.isLive = this.duration === Infinity;\n    }\n  }, {\n    key: \"onCurrentTimeChange\",\n    value: function onCurrentTimeChange() {\n      var duration = this.playbackReady ? this.duration : Infinity;\n      this.currentTime = Math.max(0, Math.min(this.currentTime, duration));\n      this.safeAdapterCall('currentTime', 'setCurrentTime');\n    }\n  }, {\n    key: \"onPlaybackReadyChange\",\n    value: function onPlaybackReadyChange() {\n      if (!this.ready) this.ready = true;\n    }\n  }, {\n    key: \"onMutedChange\",\n    value: function onMutedChange() {\n      this.safeAdapterCall('muted', 'setMuted');\n    }\n  }, {\n    key: \"onPlaybackRateChange\",\n    value: function onPlaybackRateChange(newRate, prevRate) {\n      var _a, _b;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee96() {\n        return _regeneratorRuntime().wrap(function _callee96$(_context96) {\n          while (1) {\n            switch (_context96.prev = _context96.next) {\n              case 0:\n                if (!(newRate === this.lastRateCheck)) {\n                  _context96.next = 2;\n                  break;\n                }\n\n                return _context96.abrupt(\"return\");\n\n              case 2:\n                _context96.next = 4;\n                return this.adapter;\n\n              case 4:\n                _context96.t2 = _a = _context96.sent;\n                _context96.t1 = _context96.t2 === null;\n\n                if (_context96.t1) {\n                  _context96.next = 8;\n                  break;\n                }\n\n                _context96.t1 = _a === void 0;\n\n              case 8:\n                if (!_context96.t1) {\n                  _context96.next = 12;\n                  break;\n                }\n\n                _context96.t3 = void 0;\n                _context96.next = 13;\n                break;\n\n              case 12:\n                _context96.t3 = _a.canSetPlaybackRate;\n\n              case 13:\n                _context96.t4 = _b = _context96.t3;\n                _context96.t0 = _context96.t4 === null;\n\n                if (_context96.t0) {\n                  _context96.next = 17;\n                  break;\n                }\n\n                _context96.t0 = _b === void 0;\n\n              case 17:\n                if (!_context96.t0) {\n                  _context96.next = 21;\n                  break;\n                }\n\n                _context96.t5 = void 0;\n                _context96.next = 22;\n                break;\n\n              case 21:\n                _context96.t5 = _b.call(_a);\n\n              case 22:\n                _context96.next = 24;\n                return _context96.t5;\n\n              case 24:\n                if (_context96.sent) {\n                  _context96.next = 29;\n                  break;\n                }\n\n                this.logger.log('provider cannot change `playbackRate`.');\n                this.lastRateCheck = prevRate;\n                this.playbackRate = prevRate;\n                return _context96.abrupt(\"return\");\n\n              case 29:\n                if (this.playbackRates.includes(newRate)) {\n                  _context96.next = 34;\n                  break;\n                }\n\n                this.logger.log(\"invalid `playbackRate` of \".concat(newRate, \", \") + \"valid values are [\".concat(this.playbackRates.join(', '), \"]\"));\n                this.lastRateCheck = prevRate;\n                this.playbackRate = prevRate;\n                return _context96.abrupt(\"return\");\n\n              case 34:\n                this.lastRateCheck = newRate;\n                this.safeAdapterCall('playbackRate', 'setPlaybackRate');\n\n              case 36:\n              case \"end\":\n                return _context96.stop();\n            }\n          }\n        }, _callee96, this);\n      }));\n    }\n  }, {\n    key: \"onPlaybackQualityChange\",\n    value: function onPlaybackQualityChange(newQuality, prevQuality) {\n      var _a, _b;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee97() {\n        return _regeneratorRuntime().wrap(function _callee97$(_context97) {\n          while (1) {\n            switch (_context97.prev = _context97.next) {\n              case 0:\n                if (!(isUndefined(newQuality) || newQuality === this.lastQualityCheck)) {\n                  _context97.next = 2;\n                  break;\n                }\n\n                return _context97.abrupt(\"return\");\n\n              case 2:\n                _context97.next = 4;\n                return this.adapter;\n\n              case 4:\n                _context97.t2 = _a = _context97.sent;\n                _context97.t1 = _context97.t2 === null;\n\n                if (_context97.t1) {\n                  _context97.next = 8;\n                  break;\n                }\n\n                _context97.t1 = _a === void 0;\n\n              case 8:\n                if (!_context97.t1) {\n                  _context97.next = 12;\n                  break;\n                }\n\n                _context97.t3 = void 0;\n                _context97.next = 13;\n                break;\n\n              case 12:\n                _context97.t3 = _a.canSetPlaybackQuality;\n\n              case 13:\n                _context97.t4 = _b = _context97.t3;\n                _context97.t0 = _context97.t4 === null;\n\n                if (_context97.t0) {\n                  _context97.next = 17;\n                  break;\n                }\n\n                _context97.t0 = _b === void 0;\n\n              case 17:\n                if (!_context97.t0) {\n                  _context97.next = 21;\n                  break;\n                }\n\n                _context97.t5 = void 0;\n                _context97.next = 22;\n                break;\n\n              case 21:\n                _context97.t5 = _b.call(_a);\n\n              case 22:\n                _context97.next = 24;\n                return _context97.t5;\n\n              case 24:\n                if (_context97.sent) {\n                  _context97.next = 29;\n                  break;\n                }\n\n                this.logger.log('provider cannot change `playbackQuality`.');\n                this.lastQualityCheck = prevQuality;\n                this.playbackQuality = prevQuality;\n                return _context97.abrupt(\"return\");\n\n              case 29:\n                if (this.playbackQualities.includes(newQuality)) {\n                  _context97.next = 34;\n                  break;\n                }\n\n                this.logger.log(\"invalid `playbackQuality` of \".concat(newQuality, \", \") + \"valid values are [\".concat(this.playbackQualities.join(', '), \"]\"));\n                this.lastQualityCheck = prevQuality;\n                this.playbackQuality = prevQuality;\n                return _context97.abrupt(\"return\");\n\n              case 34:\n                this.lastQualityCheck = newQuality;\n                this.safeAdapterCall('playbackQuality', 'setPlaybackQuality');\n\n              case 36:\n              case \"end\":\n                return _context97.stop();\n            }\n          }\n        }, _callee97, this);\n      }));\n    }\n  }, {\n    key: \"onDebugChange\",\n    value: function onDebugChange() {\n      this.logger.silent = !this.debug;\n    }\n  }, {\n    key: \"onVolumeChange\",\n    value: function onVolumeChange() {\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee98() {\n        return _regeneratorRuntime().wrap(function _callee98$(_context98) {\n          while (1) {\n            switch (_context98.prev = _context98.next) {\n              case 0:\n                this.volume = Math.max(0, Math.min(this.volume, 100));\n                this.safeAdapterCall('volume', 'setVolume');\n\n              case 2:\n              case \"end\":\n                return _context98.stop();\n            }\n          }\n        }, _callee98, this);\n      }));\n    }\n  }, {\n    key: \"onViewTypeChange\",\n    value: function onViewTypeChange() {\n      this.isAudioView = this.viewType === ViewType.Audio;\n      this.isVideoView = this.viewType === ViewType.Video;\n    }\n  }, {\n    key: \"onMediaTypeChange\",\n    value: function onMediaTypeChange() {\n      this.isAudio = this.mediaType === MediaType.Audio;\n      this.isVideo = this.mediaType === MediaType.Video;\n    }\n  }, {\n    key: \"onLanguageChange\",\n    value: function onLanguageChange(_, prevLanguage) {\n      if (!this.languages.includes(this.language)) {\n        this.logger.log(\"invalid `language` of \".concat(this.language, \", \") + \"valid values are [\".concat(this.languages.join(', '), \"]\"));\n        this.language = prevLanguage;\n        return;\n      }\n\n      this.i18n = this.translations[this.language];\n    }\n  }, {\n    key: \"onTranslationsChange\",\n    value: function onTranslationsChange() {\n      Object.assign(this.translations, {\n        en: en\n      });\n      this.languages = Object.keys(this.translations);\n      this.i18n = this.translations[this.language];\n    }\n  }, {\n    key: \"onError\",\n    value: function onError(event) {\n      this.logger.warn(event.detail);\n    }\n    /**\n     * ------------------------------------------------------\n     * Methods\n     * ------------------------------------------------------\n     */\n\n    /** @inheritDoc */\n\n  }, {\n    key: \"getProvider\",\n    value: function getProvider() {\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee99() {\n        return _regeneratorRuntime().wrap(function _callee99$(_context99) {\n          while (1) {\n            switch (_context99.prev = _context99.next) {\n              case 0:\n                return _context99.abrupt(\"return\", this.provider);\n\n              case 1:\n              case \"end\":\n                return _context99.stop();\n            }\n          }\n        }, _callee99, this);\n      }));\n    }\n    /** @internal */\n\n  }, {\n    key: \"getAdapter\",\n    value: function getAdapter() {\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee100() {\n        return _regeneratorRuntime().wrap(function _callee100$(_context100) {\n          while (1) {\n            switch (_context100.prev = _context100.next) {\n              case 0:\n                return _context100.abrupt(\"return\", this.adapter);\n\n              case 1:\n              case \"end\":\n                return _context100.stop();\n            }\n          }\n        }, _callee100, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"play\",\n    value: function play() {\n      var _a;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee101() {\n        return _regeneratorRuntime().wrap(function _callee101$(_context101) {\n          while (1) {\n            switch (_context101.prev = _context101.next) {\n              case 0:\n                _context101.next = 2;\n                return this.adapter;\n\n              case 2:\n                _context101.t1 = _a = _context101.sent;\n                _context101.t0 = _context101.t1 === null;\n\n                if (_context101.t0) {\n                  _context101.next = 6;\n                  break;\n                }\n\n                _context101.t0 = _a === void 0;\n\n              case 6:\n                if (!_context101.t0) {\n                  _context101.next = 10;\n                  break;\n                }\n\n                _context101.t2 = void 0;\n                _context101.next = 11;\n                break;\n\n              case 10:\n                _context101.t2 = _a.play();\n\n              case 11:\n                return _context101.abrupt(\"return\", _context101.t2);\n\n              case 12:\n              case \"end\":\n                return _context101.stop();\n            }\n          }\n        }, _callee101, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var _a;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee102() {\n        return _regeneratorRuntime().wrap(function _callee102$(_context102) {\n          while (1) {\n            switch (_context102.prev = _context102.next) {\n              case 0:\n                _context102.next = 2;\n                return this.adapter;\n\n              case 2:\n                _context102.t1 = _a = _context102.sent;\n                _context102.t0 = _context102.t1 === null;\n\n                if (_context102.t0) {\n                  _context102.next = 6;\n                  break;\n                }\n\n                _context102.t0 = _a === void 0;\n\n              case 6:\n                if (!_context102.t0) {\n                  _context102.next = 10;\n                  break;\n                }\n\n                _context102.t2 = void 0;\n                _context102.next = 11;\n                break;\n\n              case 10:\n                _context102.t2 = _a.pause();\n\n              case 11:\n                return _context102.abrupt(\"return\", _context102.t2);\n\n              case 12:\n              case \"end\":\n                return _context102.stop();\n            }\n          }\n        }, _callee102, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"canPlay\",\n    value: function canPlay(type) {\n      var _a, _b;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee103() {\n        return _regeneratorRuntime().wrap(function _callee103$(_context103) {\n          while (1) {\n            switch (_context103.prev = _context103.next) {\n              case 0:\n                _context103.next = 2;\n                return this.adapter;\n\n              case 2:\n                _context103.t2 = _a = _context103.sent;\n                _context103.t1 = _context103.t2 === null;\n\n                if (_context103.t1) {\n                  _context103.next = 6;\n                  break;\n                }\n\n                _context103.t1 = _a === void 0;\n\n              case 6:\n                if (!_context103.t1) {\n                  _context103.next = 10;\n                  break;\n                }\n\n                _context103.t3 = void 0;\n                _context103.next = 11;\n                break;\n\n              case 10:\n                _context103.t3 = _a.canPlay(type);\n\n              case 11:\n                _context103.t4 = _b = _context103.t3;\n                _context103.t0 = _context103.t4 !== null;\n\n                if (!_context103.t0) {\n                  _context103.next = 15;\n                  break;\n                }\n\n                _context103.t0 = _b !== void 0;\n\n              case 15:\n                if (!_context103.t0) {\n                  _context103.next = 19;\n                  break;\n                }\n\n                _context103.t5 = _b;\n                _context103.next = 20;\n                break;\n\n              case 19:\n                _context103.t5 = false;\n\n              case 20:\n                return _context103.abrupt(\"return\", _context103.t5);\n\n              case 21:\n              case \"end\":\n                return _context103.stop();\n            }\n          }\n        }, _callee103, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"canAutoplay\",\n    value: function canAutoplay() {\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee104() {\n        return _regeneratorRuntime().wrap(function _callee104$(_context104) {\n          while (1) {\n            switch (_context104.prev = _context104.next) {\n              case 0:\n                return _context104.abrupt(\"return\", _canAutoplay());\n\n              case 1:\n              case \"end\":\n                return _context104.stop();\n            }\n          }\n        }, _callee104);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"canMutedAutoplay\",\n    value: function canMutedAutoplay() {\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee105() {\n        return _regeneratorRuntime().wrap(function _callee105$(_context105) {\n          while (1) {\n            switch (_context105.prev = _context105.next) {\n              case 0:\n                return _context105.abrupt(\"return\", _canAutoplay(true));\n\n              case 1:\n              case \"end\":\n                return _context105.stop();\n            }\n          }\n        }, _callee105);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"canSetPlaybackRate\",\n    value: function canSetPlaybackRate() {\n      var _a, _b, _c;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee106() {\n        return _regeneratorRuntime().wrap(function _callee106$(_context106) {\n          while (1) {\n            switch (_context106.prev = _context106.next) {\n              case 0:\n                _context106.next = 2;\n                return this.adapter;\n\n              case 2:\n                _context106.t3 = _a = _context106.sent;\n                _context106.t2 = _context106.t3 === null;\n\n                if (_context106.t2) {\n                  _context106.next = 6;\n                  break;\n                }\n\n                _context106.t2 = _a === void 0;\n\n              case 6:\n                if (!_context106.t2) {\n                  _context106.next = 10;\n                  break;\n                }\n\n                _context106.t4 = void 0;\n                _context106.next = 11;\n                break;\n\n              case 10:\n                _context106.t4 = _a.canSetPlaybackRate;\n\n              case 11:\n                _context106.t5 = _b = _context106.t4;\n                _context106.t1 = _context106.t5 === null;\n\n                if (_context106.t1) {\n                  _context106.next = 15;\n                  break;\n                }\n\n                _context106.t1 = _b === void 0;\n\n              case 15:\n                if (!_context106.t1) {\n                  _context106.next = 19;\n                  break;\n                }\n\n                _context106.t6 = void 0;\n                _context106.next = 20;\n                break;\n\n              case 19:\n                _context106.t6 = _b.call(_a);\n\n              case 20:\n                _context106.t7 = _c = _context106.t6;\n                _context106.t0 = _context106.t7 !== null;\n\n                if (!_context106.t0) {\n                  _context106.next = 24;\n                  break;\n                }\n\n                _context106.t0 = _c !== void 0;\n\n              case 24:\n                if (!_context106.t0) {\n                  _context106.next = 28;\n                  break;\n                }\n\n                _context106.t8 = _c;\n                _context106.next = 29;\n                break;\n\n              case 28:\n                _context106.t8 = false;\n\n              case 29:\n                return _context106.abrupt(\"return\", _context106.t8);\n\n              case 30:\n              case \"end\":\n                return _context106.stop();\n            }\n          }\n        }, _callee106, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"canSetPlaybackQuality\",\n    value: function canSetPlaybackQuality() {\n      var _a, _b, _c;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee107() {\n        return _regeneratorRuntime().wrap(function _callee107$(_context107) {\n          while (1) {\n            switch (_context107.prev = _context107.next) {\n              case 0:\n                _context107.next = 2;\n                return this.adapter;\n\n              case 2:\n                _context107.t3 = _a = _context107.sent;\n                _context107.t2 = _context107.t3 === null;\n\n                if (_context107.t2) {\n                  _context107.next = 6;\n                  break;\n                }\n\n                _context107.t2 = _a === void 0;\n\n              case 6:\n                if (!_context107.t2) {\n                  _context107.next = 10;\n                  break;\n                }\n\n                _context107.t4 = void 0;\n                _context107.next = 11;\n                break;\n\n              case 10:\n                _context107.t4 = _a.canSetPlaybackQuality;\n\n              case 11:\n                _context107.t5 = _b = _context107.t4;\n                _context107.t1 = _context107.t5 === null;\n\n                if (_context107.t1) {\n                  _context107.next = 15;\n                  break;\n                }\n\n                _context107.t1 = _b === void 0;\n\n              case 15:\n                if (!_context107.t1) {\n                  _context107.next = 19;\n                  break;\n                }\n\n                _context107.t6 = void 0;\n                _context107.next = 20;\n                break;\n\n              case 19:\n                _context107.t6 = _b.call(_a);\n\n              case 20:\n                _context107.t7 = _c = _context107.t6;\n                _context107.t0 = _context107.t7 !== null;\n\n                if (!_context107.t0) {\n                  _context107.next = 24;\n                  break;\n                }\n\n                _context107.t0 = _c !== void 0;\n\n              case 24:\n                if (!_context107.t0) {\n                  _context107.next = 28;\n                  break;\n                }\n\n                _context107.t8 = _c;\n                _context107.next = 29;\n                break;\n\n              case 28:\n                _context107.t8 = false;\n\n              case 29:\n                return _context107.abrupt(\"return\", _context107.t8);\n\n              case 30:\n              case \"end\":\n                return _context107.stop();\n            }\n          }\n        }, _callee107, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"canSetFullscreen\",\n    value: function canSetFullscreen() {\n      var _a, _b, _c;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee108() {\n        return _regeneratorRuntime().wrap(function _callee108$(_context108) {\n          while (1) {\n            switch (_context108.prev = _context108.next) {\n              case 0:\n                _context108.t0 = this.fullscreenController.isSupported;\n\n                if (_context108.t0) {\n                  _context108.next = 32;\n                  break;\n                }\n\n                _context108.next = 4;\n                return this.adapter;\n\n              case 4:\n                _context108.t4 = _a = _context108.sent;\n                _context108.t3 = _context108.t4 === null;\n\n                if (_context108.t3) {\n                  _context108.next = 8;\n                  break;\n                }\n\n                _context108.t3 = _a === void 0;\n\n              case 8:\n                if (!_context108.t3) {\n                  _context108.next = 12;\n                  break;\n                }\n\n                _context108.t5 = void 0;\n                _context108.next = 13;\n                break;\n\n              case 12:\n                _context108.t5 = _a.canSetFullscreen;\n\n              case 13:\n                _context108.t6 = _b = _context108.t5;\n                _context108.t2 = _context108.t6 === null;\n\n                if (_context108.t2) {\n                  _context108.next = 17;\n                  break;\n                }\n\n                _context108.t2 = _b === void 0;\n\n              case 17:\n                if (!_context108.t2) {\n                  _context108.next = 21;\n                  break;\n                }\n\n                _context108.t7 = void 0;\n                _context108.next = 22;\n                break;\n\n              case 21:\n                _context108.t7 = _b.call(_a);\n\n              case 22:\n                _context108.t8 = _c = _context108.t7;\n                _context108.t1 = _context108.t8 !== null;\n\n                if (!_context108.t1) {\n                  _context108.next = 26;\n                  break;\n                }\n\n                _context108.t1 = _c !== void 0;\n\n              case 26:\n                if (!_context108.t1) {\n                  _context108.next = 30;\n                  break;\n                }\n\n                _context108.t9 = _c;\n                _context108.next = 31;\n                break;\n\n              case 30:\n                _context108.t9 = false;\n\n              case 31:\n                _context108.t0 = _context108.t9;\n\n              case 32:\n                return _context108.abrupt(\"return\", _context108.t0);\n\n              case 33:\n              case \"end\":\n                return _context108.stop();\n            }\n          }\n        }, _callee108, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"enterFullscreen\",\n    value: function enterFullscreen(options) {\n      var _a, _b, _c;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee109() {\n        var adapter, canProviderSetFullscreen;\n        return _regeneratorRuntime().wrap(function _callee109$(_context109) {\n          while (1) {\n            switch (_context109.prev = _context109.next) {\n              case 0:\n                if (this.isVideoView) {\n                  _context109.next = 2;\n                  break;\n                }\n\n                throw Error('Cannot enter fullscreen on an audio player view.');\n\n              case 2:\n                if (!this.fullscreenController.isSupported) {\n                  _context109.next = 4;\n                  break;\n                }\n\n                return _context109.abrupt(\"return\", this.fullscreenController.requestFullscreen());\n\n              case 4:\n                _context109.next = 6;\n                return this.adapter;\n\n              case 6:\n                adapter = _context109.sent;\n                _context109.next = 9;\n                return (_a = adapter === null || adapter === void 0 ? void 0 : adapter.canSetFullscreen) === null || _a === void 0 ? void 0 : _a.call(adapter);\n\n              case 9:\n                _context109.t1 = _b = _context109.sent;\n                _context109.t0 = _context109.t1 !== null;\n\n                if (!_context109.t0) {\n                  _context109.next = 13;\n                  break;\n                }\n\n                _context109.t0 = _b !== void 0;\n\n              case 13:\n                if (!_context109.t0) {\n                  _context109.next = 17;\n                  break;\n                }\n\n                _context109.t2 = _b;\n                _context109.next = 18;\n                break;\n\n              case 17:\n                _context109.t2 = false;\n\n              case 18:\n                canProviderSetFullscreen = _context109.t2;\n\n                if (!canProviderSetFullscreen) {\n                  _context109.next = 21;\n                  break;\n                }\n\n                return _context109.abrupt(\"return\", (_c = adapter === null || adapter === void 0 ? void 0 : adapter.enterFullscreen) === null || _c === void 0 ? void 0 : _c.call(adapter, options));\n\n              case 21:\n                throw Error('Fullscreen API is not available.');\n\n              case 22:\n              case \"end\":\n                return _context109.stop();\n            }\n          }\n        }, _callee109, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"exitFullscreen\",\n    value: function exitFullscreen() {\n      var _a, _b;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee110() {\n        return _regeneratorRuntime().wrap(function _callee110$(_context110) {\n          while (1) {\n            switch (_context110.prev = _context110.next) {\n              case 0:\n                if (!this.fullscreenController.isSupported) {\n                  _context110.next = 2;\n                  break;\n                }\n\n                return _context110.abrupt(\"return\", this.fullscreenController.exitFullscreen());\n\n              case 2:\n                _context110.next = 4;\n                return this.adapter;\n\n              case 4:\n                _context110.t2 = _a = _context110.sent;\n                _context110.t1 = _context110.t2 === null;\n\n                if (_context110.t1) {\n                  _context110.next = 8;\n                  break;\n                }\n\n                _context110.t1 = _a === void 0;\n\n              case 8:\n                if (!_context110.t1) {\n                  _context110.next = 12;\n                  break;\n                }\n\n                _context110.t3 = void 0;\n                _context110.next = 13;\n                break;\n\n              case 12:\n                _context110.t3 = _a.exitFullscreen;\n\n              case 13:\n                _context110.t4 = _b = _context110.t3;\n                _context110.t0 = _context110.t4 === null;\n\n                if (_context110.t0) {\n                  _context110.next = 17;\n                  break;\n                }\n\n                _context110.t0 = _b === void 0;\n\n              case 17:\n                if (!_context110.t0) {\n                  _context110.next = 21;\n                  break;\n                }\n\n                _context110.t5 = void 0;\n                _context110.next = 22;\n                break;\n\n              case 21:\n                _context110.t5 = _b.call(_a);\n\n              case 22:\n                return _context110.abrupt(\"return\", _context110.t5);\n\n              case 23:\n              case \"end\":\n                return _context110.stop();\n            }\n          }\n        }, _callee110, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"canSetPiP\",\n    value: function canSetPiP() {\n      var _a, _b, _c;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee111() {\n        return _regeneratorRuntime().wrap(function _callee111$(_context111) {\n          while (1) {\n            switch (_context111.prev = _context111.next) {\n              case 0:\n                _context111.next = 2;\n                return this.adapter;\n\n              case 2:\n                _context111.t3 = _a = _context111.sent;\n                _context111.t2 = _context111.t3 === null;\n\n                if (_context111.t2) {\n                  _context111.next = 6;\n                  break;\n                }\n\n                _context111.t2 = _a === void 0;\n\n              case 6:\n                if (!_context111.t2) {\n                  _context111.next = 10;\n                  break;\n                }\n\n                _context111.t4 = void 0;\n                _context111.next = 11;\n                break;\n\n              case 10:\n                _context111.t4 = _a.canSetPiP;\n\n              case 11:\n                _context111.t5 = _b = _context111.t4;\n                _context111.t1 = _context111.t5 === null;\n\n                if (_context111.t1) {\n                  _context111.next = 15;\n                  break;\n                }\n\n                _context111.t1 = _b === void 0;\n\n              case 15:\n                if (!_context111.t1) {\n                  _context111.next = 19;\n                  break;\n                }\n\n                _context111.t6 = void 0;\n                _context111.next = 20;\n                break;\n\n              case 19:\n                _context111.t6 = _b.call(_a);\n\n              case 20:\n                _context111.t7 = _c = _context111.t6;\n                _context111.t0 = _context111.t7 !== null;\n\n                if (!_context111.t0) {\n                  _context111.next = 24;\n                  break;\n                }\n\n                _context111.t0 = _c !== void 0;\n\n              case 24:\n                if (!_context111.t0) {\n                  _context111.next = 28;\n                  break;\n                }\n\n                _context111.t8 = _c;\n                _context111.next = 29;\n                break;\n\n              case 28:\n                _context111.t8 = false;\n\n              case 29:\n                return _context111.abrupt(\"return\", _context111.t8);\n\n              case 30:\n              case \"end\":\n                return _context111.stop();\n            }\n          }\n        }, _callee111, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"enterPiP\",\n    value: function enterPiP() {\n      var _a, _b;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee112() {\n        return _regeneratorRuntime().wrap(function _callee112$(_context112) {\n          while (1) {\n            switch (_context112.prev = _context112.next) {\n              case 0:\n                if (this.isVideoView) {\n                  _context112.next = 2;\n                  break;\n                }\n\n                throw Error('Cannot enter PiP mode on an audio player view.');\n\n              case 2:\n                _context112.next = 4;\n                return this.canSetPiP();\n\n              case 4:\n                if (_context112.sent) {\n                  _context112.next = 6;\n                  break;\n                }\n\n                throw Error('Picture-in-Picture API is not available.');\n\n              case 6:\n                _context112.next = 8;\n                return this.adapter;\n\n              case 8:\n                _context112.t2 = _a = _context112.sent;\n                _context112.t1 = _context112.t2 === null;\n\n                if (_context112.t1) {\n                  _context112.next = 12;\n                  break;\n                }\n\n                _context112.t1 = _a === void 0;\n\n              case 12:\n                if (!_context112.t1) {\n                  _context112.next = 16;\n                  break;\n                }\n\n                _context112.t3 = void 0;\n                _context112.next = 17;\n                break;\n\n              case 16:\n                _context112.t3 = _a.enterPiP;\n\n              case 17:\n                _context112.t4 = _b = _context112.t3;\n                _context112.t0 = _context112.t4 === null;\n\n                if (_context112.t0) {\n                  _context112.next = 21;\n                  break;\n                }\n\n                _context112.t0 = _b === void 0;\n\n              case 21:\n                if (!_context112.t0) {\n                  _context112.next = 25;\n                  break;\n                }\n\n                _context112.t5 = void 0;\n                _context112.next = 26;\n                break;\n\n              case 25:\n                _context112.t5 = _b.call(_a);\n\n              case 26:\n                return _context112.abrupt(\"return\", _context112.t5);\n\n              case 27:\n              case \"end\":\n                return _context112.stop();\n            }\n          }\n        }, _callee112, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"exitPiP\",\n    value: function exitPiP() {\n      var _a, _b;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee113() {\n        return _regeneratorRuntime().wrap(function _callee113$(_context113) {\n          while (1) {\n            switch (_context113.prev = _context113.next) {\n              case 0:\n                _context113.next = 2;\n                return this.adapter;\n\n              case 2:\n                _context113.t2 = _a = _context113.sent;\n                _context113.t1 = _context113.t2 === null;\n\n                if (_context113.t1) {\n                  _context113.next = 6;\n                  break;\n                }\n\n                _context113.t1 = _a === void 0;\n\n              case 6:\n                if (!_context113.t1) {\n                  _context113.next = 10;\n                  break;\n                }\n\n                _context113.t3 = void 0;\n                _context113.next = 11;\n                break;\n\n              case 10:\n                _context113.t3 = _a.exitPiP;\n\n              case 11:\n                _context113.t4 = _b = _context113.t3;\n                _context113.t0 = _context113.t4 === null;\n\n                if (_context113.t0) {\n                  _context113.next = 15;\n                  break;\n                }\n\n                _context113.t0 = _b === void 0;\n\n              case 15:\n                if (!_context113.t0) {\n                  _context113.next = 19;\n                  break;\n                }\n\n                _context113.t5 = void 0;\n                _context113.next = 20;\n                break;\n\n              case 19:\n                _context113.t5 = _b.call(_a);\n\n              case 20:\n                return _context113.abrupt(\"return\", _context113.t5);\n\n              case 21:\n              case \"end\":\n                return _context113.stop();\n            }\n          }\n        }, _callee113, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"canSetAudioTrack\",\n    value: function canSetAudioTrack() {\n      var _a;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee114() {\n        return _regeneratorRuntime().wrap(function _callee114$(_context114) {\n          while (1) {\n            switch (_context114.prev = _context114.next) {\n              case 0:\n                _context114.t0 = isUndefined;\n                _context114.next = 3;\n                return this.adapter;\n\n              case 3:\n                _context114.t2 = _a = _context114.sent;\n                _context114.t1 = _context114.t2 === null;\n\n                if (_context114.t1) {\n                  _context114.next = 7;\n                  break;\n                }\n\n                _context114.t1 = _a === void 0;\n\n              case 7:\n                if (!_context114.t1) {\n                  _context114.next = 11;\n                  break;\n                }\n\n                _context114.t3 = void 0;\n                _context114.next = 12;\n                break;\n\n              case 11:\n                _context114.t3 = _a.setCurrentAudioTrack;\n\n              case 12:\n                _context114.t4 = _context114.t3;\n                return _context114.abrupt(\"return\", !(0, _context114.t0)(_context114.t4));\n\n              case 14:\n              case \"end\":\n                return _context114.stop();\n            }\n          }\n        }, _callee114, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"setCurrentAudioTrack\",\n    value: function setCurrentAudioTrack(trackId) {\n      var _a, _b;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee115() {\n        return _regeneratorRuntime().wrap(function _callee115$(_context115) {\n          while (1) {\n            switch (_context115.prev = _context115.next) {\n              case 0:\n                _context115.next = 2;\n                return this.adapter;\n\n              case 2:\n                _context115.t2 = _a = _context115.sent;\n                _context115.t1 = _context115.t2 === null;\n\n                if (_context115.t1) {\n                  _context115.next = 6;\n                  break;\n                }\n\n                _context115.t1 = _a === void 0;\n\n              case 6:\n                if (!_context115.t1) {\n                  _context115.next = 10;\n                  break;\n                }\n\n                _context115.t3 = void 0;\n                _context115.next = 11;\n                break;\n\n              case 10:\n                _context115.t3 = _a.setCurrentAudioTrack;\n\n              case 11:\n                _context115.t4 = _b = _context115.t3;\n                _context115.t0 = _context115.t4 === null;\n\n                if (_context115.t0) {\n                  _context115.next = 15;\n                  break;\n                }\n\n                _context115.t0 = _b === void 0;\n\n              case 15:\n                if (!_context115.t0) {\n                  _context115.next = 19;\n                  break;\n                }\n\n                void 0;\n                _context115.next = 20;\n                break;\n\n              case 19:\n                _b.call(_a, trackId);\n\n              case 20:\n              case \"end\":\n                return _context115.stop();\n            }\n          }\n        }, _callee115, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"canSetTextTrack\",\n    value: function canSetTextTrack() {\n      var _a;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee116() {\n        return _regeneratorRuntime().wrap(function _callee116$(_context116) {\n          while (1) {\n            switch (_context116.prev = _context116.next) {\n              case 0:\n                _context116.t0 = isUndefined;\n                _context116.next = 3;\n                return this.adapter;\n\n              case 3:\n                _context116.t2 = _a = _context116.sent;\n                _context116.t1 = _context116.t2 === null;\n\n                if (_context116.t1) {\n                  _context116.next = 7;\n                  break;\n                }\n\n                _context116.t1 = _a === void 0;\n\n              case 7:\n                if (!_context116.t1) {\n                  _context116.next = 11;\n                  break;\n                }\n\n                _context116.t3 = void 0;\n                _context116.next = 12;\n                break;\n\n              case 11:\n                _context116.t3 = _a.setCurrentTextTrack;\n\n              case 12:\n                _context116.t4 = _context116.t3;\n                return _context116.abrupt(\"return\", !(0, _context116.t0)(_context116.t4));\n\n              case 14:\n              case \"end\":\n                return _context116.stop();\n            }\n          }\n        }, _callee116, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"setCurrentTextTrack\",\n    value: function setCurrentTextTrack(trackId) {\n      var _a, _b;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee117() {\n        return _regeneratorRuntime().wrap(function _callee117$(_context117) {\n          while (1) {\n            switch (_context117.prev = _context117.next) {\n              case 0:\n                _context117.next = 2;\n                return this.adapter;\n\n              case 2:\n                _context117.t2 = _a = _context117.sent;\n                _context117.t1 = _context117.t2 === null;\n\n                if (_context117.t1) {\n                  _context117.next = 6;\n                  break;\n                }\n\n                _context117.t1 = _a === void 0;\n\n              case 6:\n                if (!_context117.t1) {\n                  _context117.next = 10;\n                  break;\n                }\n\n                _context117.t3 = void 0;\n                _context117.next = 11;\n                break;\n\n              case 10:\n                _context117.t3 = _a.setCurrentTextTrack;\n\n              case 11:\n                _context117.t4 = _b = _context117.t3;\n                _context117.t0 = _context117.t4 === null;\n\n                if (_context117.t0) {\n                  _context117.next = 15;\n                  break;\n                }\n\n                _context117.t0 = _b === void 0;\n\n              case 15:\n                if (!_context117.t0) {\n                  _context117.next = 19;\n                  break;\n                }\n\n                void 0;\n                _context117.next = 20;\n                break;\n\n              case 19:\n                _b.call(_a, trackId);\n\n              case 20:\n              case \"end\":\n                return _context117.stop();\n            }\n          }\n        }, _callee117, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"canSetTextTrackVisibility\",\n    value: function canSetTextTrackVisibility() {\n      var _a;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee118() {\n        return _regeneratorRuntime().wrap(function _callee118$(_context118) {\n          while (1) {\n            switch (_context118.prev = _context118.next) {\n              case 0:\n                _context118.t0 = isUndefined;\n                _context118.next = 3;\n                return this.adapter;\n\n              case 3:\n                _context118.t2 = _a = _context118.sent;\n                _context118.t1 = _context118.t2 === null;\n\n                if (_context118.t1) {\n                  _context118.next = 7;\n                  break;\n                }\n\n                _context118.t1 = _a === void 0;\n\n              case 7:\n                if (!_context118.t1) {\n                  _context118.next = 11;\n                  break;\n                }\n\n                _context118.t3 = void 0;\n                _context118.next = 12;\n                break;\n\n              case 11:\n                _context118.t3 = _a.setTextTrackVisibility;\n\n              case 12:\n                _context118.t4 = _context118.t3;\n                return _context118.abrupt(\"return\", !(0, _context118.t0)(_context118.t4));\n\n              case 14:\n              case \"end\":\n                return _context118.stop();\n            }\n          }\n        }, _callee118, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"setTextTrackVisibility\",\n    value: function setTextTrackVisibility(isVisible) {\n      var _a, _b;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee119() {\n        return _regeneratorRuntime().wrap(function _callee119$(_context119) {\n          while (1) {\n            switch (_context119.prev = _context119.next) {\n              case 0:\n                _context119.next = 2;\n                return this.adapter;\n\n              case 2:\n                _context119.t2 = _a = _context119.sent;\n                _context119.t1 = _context119.t2 === null;\n\n                if (_context119.t1) {\n                  _context119.next = 6;\n                  break;\n                }\n\n                _context119.t1 = _a === void 0;\n\n              case 6:\n                if (!_context119.t1) {\n                  _context119.next = 10;\n                  break;\n                }\n\n                _context119.t3 = void 0;\n                _context119.next = 11;\n                break;\n\n              case 10:\n                _context119.t3 = _a.setTextTrackVisibility;\n\n              case 11:\n                _context119.t4 = _b = _context119.t3;\n                _context119.t0 = _context119.t4 === null;\n\n                if (_context119.t0) {\n                  _context119.next = 15;\n                  break;\n                }\n\n                _context119.t0 = _b === void 0;\n\n              case 15:\n                if (!_context119.t0) {\n                  _context119.next = 19;\n                  break;\n                }\n\n                void 0;\n                _context119.next = 20;\n                break;\n\n              case 19:\n                _b.call(_a, isVisible);\n\n              case 20:\n              case \"end\":\n                return _context119.stop();\n            }\n          }\n        }, _callee119, this);\n      }));\n    }\n    /** @inheritDoc */\n\n  }, {\n    key: \"extendLanguage\",\n    value: function extendLanguage(language, translation) {\n      var _a;\n\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee120() {\n        var translations;\n        return _regeneratorRuntime().wrap(function _callee120$(_context120) {\n          while (1) {\n            switch (_context120.prev = _context120.next) {\n              case 0:\n                translations = Object.assign(Object.assign({}, this.translations), _defineProperty({}, language, Object.assign(Object.assign({}, (_a = this.translations[language]) !== null && _a !== void 0 ? _a : {}), translation)));\n                this.translations = translations;\n\n              case 2:\n              case \"end\":\n                return _context120.stop();\n            }\n          }\n        }, _callee120, this);\n      }));\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      var _this83 = this;\n\n      this.onPausedChange();\n      this.onCurrentTimeChange();\n      this.onVolumeChange();\n      this.onMutedChange();\n      this.onDebugChange();\n      this.onContainerChange();\n      this.onTranslationsChange();\n      this.onLanguageChange(this.language, initialState.language);\n      this.disposal.add(onMobileChange(function (isMobile) {\n        _this83.isMobile = isMobile;\n      }));\n      this.disposal.add(onTouchInputChange(function (isTouch) {\n        _this83.isTouch = isTouch;\n      }));\n    }\n  }, {\n    key: \"componentWillLoad\",\n    value: function componentWillLoad() {\n      Universe.create(this, this.getPlayerState());\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      var _a;\n\n      (_a = this.fullscreenController) === null || _a === void 0 ? void 0 : _a.destroy();\n      this.disposal.empty();\n    }\n  }, {\n    key: \"rotateDevice\",\n    value: function rotateDevice() {\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee121() {\n        return _regeneratorRuntime().wrap(function _callee121$(_context121) {\n          while (1) {\n            switch (_context121.prev = _context121.next) {\n              case 0:\n                if (!(!this.isMobile || !canRotateScreen())) {\n                  _context121.next = 2;\n                  break;\n                }\n\n                return _context121.abrupt(\"return\");\n\n              case 2:\n                _context121.prev = 2;\n\n                if (!this.isFullscreenActive) {\n                  _context121.next = 8;\n                  break;\n                }\n\n                _context121.next = 6;\n                return window.screen.orientation.lock('landscape');\n\n              case 6:\n                _context121.next = 10;\n                break;\n\n              case 8:\n                _context121.next = 10;\n                return window.screen.orientation.unlock();\n\n              case 10:\n                _context121.next = 15;\n                break;\n\n              case 12:\n                _context121.prev = 12;\n                _context121.t0 = _context121[\"catch\"](2);\n                this.vmError.emit(_context121.t0);\n\n              case 15:\n              case \"end\":\n                return _context121.stop();\n            }\n          }\n        }, _callee121, this, [[2, 12]]);\n      }));\n    }\n  }, {\n    key: \"getPlayerState\",\n    value: function getPlayerState() {\n      var state = {};\n      var props = Object.keys(initialState);\n\n      for (var i = 0; i < props.length; i += 1) {\n        state[props[i]] = this[props[i]];\n      }\n\n      return state;\n    }\n  }, {\n    key: \"calcAspectRatio\",\n    value: function calcAspectRatio() {\n      var _ref4 = /\\d{1,2}:\\d{1,2}/.test(this.aspectRatio) ? this.aspectRatio.split(':') : [16, 9],\n          _ref5 = _slicedToArray(_ref4, 2),\n          width = _ref5[0],\n          height = _ref5[1];\n\n      return 100 / Number(width) * Number(height);\n    }\n    /**\n     * Returns the inner container.\n     */\n\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee122() {\n        return _regeneratorRuntime().wrap(function _callee122$(_context122) {\n          while (1) {\n            switch (_context122.prev = _context122.next) {\n              case 0:\n                return _context122.abrupt(\"return\", this.container);\n\n              case 1:\n              case \"end\":\n                return _context122.stop();\n            }\n          }\n        }, _callee122, this);\n      }));\n    }\n    /** @internal Exposed for E2E testing. */\n\n  }, {\n    key: \"callAdapter\",\n    value: function callAdapter(method, value) {\n      return __awaiter$8(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee123() {\n        return _regeneratorRuntime().wrap(function _callee123$(_context123) {\n          while (1) {\n            switch (_context123.prev = _context123.next) {\n              case 0:\n                _context123.next = 2;\n                return this.adapter;\n\n              case 2:\n                _context123.t0 = method;\n                return _context123.abrupt(\"return\", _context123.sent[_context123.t0](value));\n\n              case 4:\n              case \"end\":\n                return _context123.stop();\n            }\n          }\n        }, _callee123, this);\n      }));\n    }\n  }, {\n    key: \"hasCustomControls\",\n    value: function hasCustomControls() {\n      return isComponentRegistered(this, 'vm-controls');\n    }\n  }, {\n    key: \"genId\",\n    value: function genId() {\n      var _a;\n\n      var id = (_a = this.host) === null || _a === void 0 ? void 0 : _a.id;\n      if (isString(id) && id.length > 0) return id;\n      idCount$3 += 1;\n      return \"vm-player-\".concat(idCount$3);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this84 = this;\n\n      var label = \"\".concat(this.isAudioView ? 'Audio Player' : 'Video Player') + \"\".concat(!isUndefined(this.mediaTitle) ? \" - \".concat(this.mediaTitle) : '');\n      var canShowCustomUI = !IS_IOS || !this.isVideoView || this.playsinline && !this.isFullscreenActive;\n\n      if (!canShowCustomUI) {\n        this.controls = true;\n      }\n\n      var isIdle = canShowCustomUI && this.hasCustomControls() && this.isVideoView && !this.paused && !this.isControlsActive;\n      var isBlockerVisible = !this.controls && canShowCustomUI && this.isVideoView;\n      return h(Host, {\n        id: this.genId(),\n        idle: isIdle,\n        mobile: this.isMobile,\n        touch: this.isTouch,\n        live: this.isLive,\n        audio: this.isAudioView,\n        video: this.isVideoView,\n        pip: this.isPiPActive,\n        fullscreen: this.isFullscreenActive\n      }, h(\"div\", {\n        \"aria-label\": label,\n        \"aria-hidden\": !this.ready ? 'true' : 'false',\n        \"aria-busy\": !this.playbackReady ? 'true' : 'false',\n        class: {\n          player: true,\n          idle: isIdle,\n          audio: this.isAudioView,\n          video: this.isVideoView,\n          fullscreen: this.isFullscreenActive\n        },\n        style: {\n          paddingBottom: this.isVideoView ? \"\".concat(this.calcAspectRatio(), \"%\") : undefined\n        },\n        ref: function ref(el) {\n          writeTask(function () {\n            _this84.container = el;\n          });\n        }\n      }, isBlockerVisible && h(\"div\", {\n        class: \"blocker\"\n      }), h(Universe.Provider, {\n        state: this.getPlayerState()\n      }, h(\"slot\", null))));\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"container\": [\"onContainerChange\"],\n        \"paused\": [\"onPausedChange\"],\n        \"duration\": [\"onDurationChange\"],\n        \"currentTime\": [\"onCurrentTimeChange\"],\n        \"playbackReady\": [\"onPlaybackReadyChange\"],\n        \"muted\": [\"onMutedChange\"],\n        \"playbackRate\": [\"onPlaybackRateChange\"],\n        \"playbackQuality\": [\"onPlaybackQualityChange\"],\n        \"debug\": [\"onDebugChange\"],\n        \"volume\": [\"onVolumeChange\"],\n        \"viewType\": [\"onViewTypeChange\"],\n        \"isAudioView\": [\"onViewTypeChange\"],\n        \"isVideoView\": [\"onViewTypeChange\"],\n        \"mediaType\": [\"onMediaTypeChange\"],\n        \"language\": [\"onLanguageChange\"],\n        \"translations\": [\"onTranslationsChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return playerCss;\n    }\n  }]);\n\n  return Player;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar posterCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-poster-z-index)}.poster{width:100%;height:100%;background:#000;opacity:0;visibility:hidden;pointer-events:none;transition:var(--vm-fade-transition)}.poster.hidden{display:none}.poster.active{opacity:1;visibility:visible}img{width:100%;height:100%;pointer-events:none}\";\n\nvar Poster = /*#__PURE__*/function (_HTMLElement33) {\n  _inherits(Poster, _HTMLElement33);\n\n  var _super34 = _createSuper(Poster);\n\n  function Poster() {\n    var _this85;\n\n    _classCallCheck(this, Poster);\n\n    _this85 = _super34.call(this);\n\n    _this85.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this85));\n    _this85.vmLoaded = createEvent(_assertThisInitialized(_this85), \"vmLoaded\", 3);\n    _this85.vmWillShow = createEvent(_assertThisInitialized(_this85), \"vmWillShow\", 3);\n    _this85.vmWillHide = createEvent(_assertThisInitialized(_this85), \"vmWillHide\", 3);\n    _this85.isHidden = true;\n    _this85.isActive = false;\n    _this85.hasLoaded = false;\n    /**\n     * How the poster image should be resized to fit the container (sets the `object-fit` property).\n     */\n\n    _this85.fit = 'cover';\n    /** @internal */\n\n    _this85.isVideoView = false;\n    /** @internal */\n\n    _this85.playbackStarted = false;\n    /** @internal */\n\n    _this85.currentTime = 0;\n    withComponentRegistry(_assertThisInitialized(_this85));\n    withPlayerContext(_assertThisInitialized(_this85), ['mediaTitle', 'currentPoster', 'playbackStarted', 'currentTime', 'isVideoView']);\n    return _this85;\n  }\n\n  _createClass(Poster, [{\n    key: \"onCurrentPosterChange\",\n    value: function onCurrentPosterChange() {\n      var _a;\n\n      this.hasLoaded = false;\n      (_a = this.lazyLoader) === null || _a === void 0 ? void 0 : _a.onMutation();\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.lazyLoader = new LazyLoader(this.host, ['data-src', 'src'], function (el) {\n        var src = el.getAttribute('data-src');\n        el.removeAttribute('src');\n\n        if (!isNull(src)) {\n          el.setAttribute('src', src);\n        }\n      });\n      this.onEnabledChange();\n      this.onActiveChange();\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.lazyLoader.destroy();\n    }\n  }, {\n    key: \"onVisibilityChange\",\n    value: function onVisibilityChange() {\n      !this.isHidden && this.isActive ? this.vmWillShow.emit() : this.vmWillHide.emit();\n    }\n  }, {\n    key: \"onEnabledChange\",\n    value: function onEnabledChange() {\n      this.isHidden = !this.isVideoView;\n      this.onVisibilityChange();\n    }\n  }, {\n    key: \"onActiveChange\",\n    value: function onActiveChange() {\n      this.isActive = !this.playbackStarted || this.currentTime <= 0.1;\n      this.onVisibilityChange();\n    }\n  }, {\n    key: \"onPosterLoad\",\n    value: function onPosterLoad() {\n      this.vmLoaded.emit();\n      this.hasLoaded = true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        class: {\n          poster: true,\n          hidden: this.isHidden,\n          active: this.isActive && this.hasLoaded\n        }\n      }, h(\"img\", {\n        class: \"lazy\",\n        \"data-src\": this.currentPoster,\n        alt: !isUndefined(this.mediaTitle) ? \"\".concat(this.mediaTitle, \" Poster\") : 'Media Poster',\n        style: {\n          objectFit: this.fit\n        },\n        onLoad: this.onPosterLoad.bind(this)\n      }));\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"currentPoster\": [\"onCurrentPosterChange\"],\n        \"isVideoView\": [\"onEnabledChange\"],\n        \"currentTime\": [\"onActiveChange\"],\n        \"playbackStarted\": [\"onActiveChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return posterCss;\n    }\n  }]);\n\n  return Poster;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar scrimCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-scrim-z-index)}.scrim{position:absolute;width:100%;background:var(--vm-scrim-bg);display:inline-block;opacity:0;visibility:hidden;transition:var(--vm-fade-transition)}.scrim.gradient{height:258px;background:none;background-position:bottom;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAECCAYAAAA/9r2TAAABKklEQVQ4T2XI50cFABiF8dvee++67b33uM17b1MkkSSSSBJJJIkkkkQSSSKJ9Efmeb8cr86HH88JBP4thkfEkiKOFPGkSCCNRE8SKZJJkUIaqZ40UqSTIoMUmaSR5ckmRQ4pckkjz5NPigJSFJKiiDSKPSWkKCVFGWmUeypIUUmKKlJUk0aNJ0iKWlLUkUa9p4EUjaRoIkUzabR4WknRRop20ujwdJKiixTdpOghjV5PHyn6STFAGoOeIVIMk2KEFKOkMeYZJ8UEKUKkMemZIsU0KWZIMUsac54wKSKkiJLGvGeBFIukWCLFMrkCq7AG67ABm7AF27ADu7AH+3AAh3AEx3ACp3AG53ABl3AF13ADt3AH9/AAj/AEz/ACr/AG7/ABn/AF3/ADv39LujSyJPVJ0QAAAABJRU5ErkJggg==')}.scrim.gradientUp{top:unset;bottom:0}.scrim.gradientDown{transform:rotate(180deg)}.scrim.hidden{display:none}.scrim.active{opacity:1;visibility:visible}\";\n\nvar Scrim = /*#__PURE__*/function (_HTMLElement34) {\n  _inherits(Scrim, _HTMLElement34);\n\n  var _super35 = _createSuper(Scrim);\n\n  function Scrim() {\n    var _this86;\n\n    _classCallCheck(this, Scrim);\n\n    _this86 = _super35.call(this);\n\n    _this86.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this86));\n    /** @internal */\n\n    _this86.isVideoView = false;\n    /** @internal */\n\n    _this86.isControlsActive = false;\n    withComponentRegistry(_assertThisInitialized(_this86));\n    withPlayerContext(_assertThisInitialized(_this86), ['isVideoView', 'isControlsActive']);\n    return _this86;\n  }\n\n  _createClass(Scrim, [{\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        class: {\n          scrim: true,\n          gradient: !isUndefined(this.gradient),\n          gradientUp: this.gradient === 'up',\n          gradientDown: this.gradient === 'down',\n          hidden: !this.isVideoView,\n          active: this.isControlsActive\n        }\n      });\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return scrimCss;\n    }\n  }]);\n\n  return Scrim;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar getHours = function getHours(value) {\n  return Math.trunc(value / 60 / 60 % 60);\n};\n\nvar getMinutes = function getMinutes(value) {\n  return Math.trunc(value / 60 % 60);\n};\n\nvar getSeconds = function getSeconds(value) {\n  return Math.trunc(value % 60);\n};\n\nvar formatTime = function formatTime() {\n  var seconds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var alwaysShowHours = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  // Format time component to add leading zero.\n  var format = function format(value) {\n    return \"0\".concat(value).slice(-2);\n  };\n\n  var hours = getHours(seconds);\n  var mins = getMinutes(seconds);\n  var secs = getSeconds(seconds);\n  return \"\".concat(alwaysShowHours || hours > 0 ? \"\".concat(hours, \":\") : '').concat(format(mins), \":\").concat(format(secs));\n};\n\nvar scrubberControlCss = \":host{--vm-tooltip-spacing:var(--vm-scrubber-tooltip-spacing);flex:1;position:relative;cursor:pointer;pointer-events:auto;box-sizing:border-box;left:calc(var(--vm-slider-thumb-width) / 2);margin-right:var(--vm-slider-thumb-width);margin-bottom:var(--vm-slider-track-height)}@keyframes progress{to{background-position:var(--vm-scrubber-loading-stripe-size) 0}}.scrubber{position:relative;width:100%}vm-slider,progress{margin-left:calc(calc(var(--vm-slider-thumb-width) / 2) * -1);margin-right:calc(calc(var(--vm-slider-thumb-width) / 2) * -1);width:calc(100% + var(--vm-slider-thumb-width));height:var(--vm-slider-track-height)}vm-slider:hover,progress:hover{cursor:pointer}vm-slider{position:absolute;top:0;left:0;z-index:3}progress{-webkit-appearance:none;background:transparent;border:0;border-radius:100px;position:absolute;left:0;top:50%;padding:0;color:var(--vm-scrubber-buffered-bg);height:var(--vm-slider-track-height)}progress::-webkit-progress-bar{background:transparent}progress::-webkit-progress-value{background:currentColor;border-radius:100px;min-width:var(--vm-slider-track-height);transition:width 0.2s ease}progress::-moz-progress-bar{background:currentColor;border-radius:100px;min-width:var(--vm-slider-track-height);transition:width 0.2s ease}progress::-ms-fill{border-radius:100px;transition:width 0.2s ease}progress.loading{animation:progress 1s linear infinite;background-image:linear-gradient(\\n    -45deg,\\n    var(--vm-scrubber-loading-stripe-color) 25%,\\n    transparent 25%,\\n    transparent 50%,\\n    var(--vm-scrubber-loading-stripe-color) 50%,\\n    var(--vm-scrubber-loading-stripe-color) 75%,\\n    transparent 75%,\\n    transparent\\n  );background-repeat:repeat-x;background-size:var(--vm-scrubber-loading-stripe-size)\\n    var(--vm-scrubber-loading-stripe-size);color:transparent;background-color:transparent}\";\n\nvar __awaiter$7 = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar ScrubberControl = /*#__PURE__*/function (_HTMLElement35) {\n  _inherits(ScrubberControl, _HTMLElement35);\n\n  var _super36 = _createSuper(ScrubberControl);\n\n  function ScrubberControl() {\n    var _this87;\n\n    _classCallCheck(this, ScrubberControl);\n\n    _this87 = _super36.call(this);\n\n    _this87.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this87));\n    _this87.keyboardDisposal = new Disposal();\n    _this87.timestamp = '';\n    _this87.endTime = 0;\n    /**\n     * Whether the timestamp in the tooltip should show the hours unit, even if the time is less than\n     * 1 hour (eg: `20:35` -> `00:20:35`).\n     */\n\n    _this87.alwaysShowHours = false;\n    /**\n     * Whether the tooltip should not be displayed.\n     */\n\n    _this87.hideTooltip = false;\n    /** @internal */\n\n    _this87.currentTime = 0;\n    /** @internal */\n\n    _this87.duration = -1;\n    /**\n     * Prevents seeking forward/backward by using the Left/Right arrow keys.\n     */\n\n    _this87.noKeyboard = false;\n    /** @internal */\n\n    _this87.buffering = false;\n    /** @internal */\n\n    _this87.buffered = 0;\n    /** @internal */\n\n    _this87.i18n = {};\n    withComponentRegistry(_assertThisInitialized(_this87));\n    withPlayerContext(_assertThisInitialized(_this87), ['i18n', 'currentTime', 'duration', 'buffering', 'buffered']);\n    return _this87;\n  }\n\n  _createClass(ScrubberControl, [{\n    key: \"onNoKeyboardChange\",\n    value: function onNoKeyboardChange() {\n      return __awaiter$7(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee124() {\n        var _this88 = this;\n\n        var player, onKeyDown;\n        return _regeneratorRuntime().wrap(function _callee124$(_context124) {\n          while (1) {\n            switch (_context124.prev = _context124.next) {\n              case 0:\n                this.keyboardDisposal.empty();\n\n                if (!this.noKeyboard) {\n                  _context124.next = 3;\n                  break;\n                }\n\n                return _context124.abrupt(\"return\");\n\n              case 3:\n                _context124.next = 5;\n                return findPlayer(this);\n\n              case 5:\n                player = _context124.sent;\n\n                if (!isUndefined(player)) {\n                  _context124.next = 8;\n                  break;\n                }\n\n                return _context124.abrupt(\"return\");\n\n              case 8:\n                onKeyDown = function onKeyDown(event) {\n                  if (event.key !== 'ArrowLeft' && event.key !== 'ArrowRight') return;\n                  event.preventDefault();\n                  var isLeftArrow = event.key === 'ArrowLeft';\n                  var seekTo = isLeftArrow ? Math.max(0, _this88.currentTime - 5) : Math.min(_this88.duration, _this88.currentTime + 5);\n\n                  _this88.dispatch('currentTime', seekTo);\n                };\n\n                this.keyboardDisposal.add(listen(player, 'keydown', onKeyDown));\n\n              case 10:\n              case \"end\":\n                return _context124.stop();\n            }\n          }\n        }, _callee124, this);\n      }));\n    }\n  }, {\n    key: \"onDurationChange\",\n    value: function onDurationChange() {\n      // Avoid -1.\n      this.endTime = Math.max(0, this.duration);\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.dispatch = createDispatcher(this);\n      this.timestamp = formatTime(this.currentTime, this.alwaysShowHours);\n      this.onNoKeyboardChange();\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.keyboardDisposal.empty();\n    }\n  }, {\n    key: \"setTooltipPosition\",\n    value: function setTooltipPosition(value) {\n      var _a, _b;\n\n      var tooltipRect = (_b = (_a = this.tooltip.shadowRoot) === null || _a === void 0 ? void 0 : _a.querySelector('.tooltip')) === null || _b === void 0 ? void 0 : _b.getBoundingClientRect();\n      var bounds = this.slider.getBoundingClientRect();\n      var thumbWidth = parseFloat(window.getComputedStyle(this.slider).getPropertyValue('--vm-slider-thumb-width'));\n      var leftLimit = tooltipRect.width / 2 - thumbWidth / 2;\n      var rightLimit = bounds.width - tooltipRect.width / 2 - thumbWidth / 2;\n      var xPos = Math.max(leftLimit, Math.min(value, rightLimit));\n      this.tooltip.style = \"--vm-tooltip-left: \".concat(xPos, \"px\");\n    }\n  }, {\n    key: \"onSeek\",\n    value: function onSeek(event) {\n      this.dispatch('currentTime', event.detail);\n    }\n  }, {\n    key: \"onSeeking\",\n    value: function onSeeking(event) {\n      if (this.duration < 0 || this.tooltip.hidden) return;\n\n      if (event.type === 'mouseleave') {\n        this.getSliderInput().blur();\n        this.tooltip.active = false;\n        return;\n      }\n\n      var rect = this.host.getBoundingClientRect();\n      var percent = Math.max(0, Math.min(100, 100 / rect.width * (event.pageX - rect.left)));\n      this.timestamp = formatTime(this.duration / 100 * percent, this.alwaysShowHours);\n      this.setTooltipPosition(percent / 100 * rect.width);\n\n      if (!this.tooltip.active) {\n        this.getSliderInput().focus();\n        this.tooltip.active = true;\n      }\n    }\n  }, {\n    key: \"getSliderInput\",\n    value: function getSliderInput() {\n      var _a;\n\n      return (_a = this.slider.shadowRoot) === null || _a === void 0 ? void 0 : _a.querySelector('input');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this89 = this;\n\n      var sliderValueText = this.i18n.scrubberLabel.replace(/{currentTime}/, formatTime(this.currentTime)).replace(/{duration}/, formatTime(this.endTime));\n      return h(\"div\", {\n        class: \"scrubber\",\n        onMouseEnter: this.onSeeking.bind(this),\n        onMouseLeave: this.onSeeking.bind(this),\n        onMouseMove: this.onSeeking.bind(this),\n        onTouchMove: function onTouchMove() {\n          _this89.getSliderInput().focus();\n        },\n        onTouchEnd: function onTouchEnd() {\n          _this89.getSliderInput().blur();\n        }\n      }, h(\"vm-slider\", {\n        step: 0.01,\n        max: this.endTime,\n        value: this.currentTime,\n        label: this.i18n.scrubber,\n        valueText: sliderValueText,\n        onVmValueChange: this.onSeek.bind(this),\n        ref: function ref(el) {\n          _this89.slider = el;\n        }\n      }), h(\"progress\", {\n        class: {\n          loading: this.buffering\n        },\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        min: 0,\n        max: this.endTime,\n        value: this.buffered,\n        \"aria-label\": this.i18n.buffered,\n        \"aria-valuemin\": \"0\",\n        \"aria-valuemax\": this.endTime,\n        \"aria-valuenow\": this.buffered,\n        \"aria-valuetext\": \"\".concat((this.endTime > 0 ? this.buffered / this.endTime : 0).toFixed(0), \"%\")\n      }, \"% buffered\"), h(\"vm-tooltip\", {\n        hidden: this.hideTooltip,\n        ref: function ref(el) {\n          _this89.tooltip = el;\n        }\n      }, this.timestamp));\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"noKeyboard\": [\"onNoKeyboardChange\"],\n        \"duration\": [\"onDurationChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return scrubberControlCss;\n    }\n  }]);\n\n  return ScrubberControl;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar settingsCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-menu-z-index)}.settings{position:absolute;opacity:0;pointer-events:none;overflow-x:hidden;overflow-y:auto;background-color:var(--vm-menu-bg);max-height:var(--vm-settings-max-height);border-radius:var(--vm-settings-border-radius);padding:var(--vm-settings-padding);box-shadow:var(--vm-settings-shadow);box-sizing:border-box;scrollbar-width:thin;scroll-behavior:smooth;scrollbar-color:var(--vm-settings-scroll-thumb-color)\\n    var(--vm-settings-scroll-track-color);transform:translateY(8px);transition:var(--vm-settings-transition)}.container{display:block;width:var(--vm-settings-width);height:100%;position:relative;transition:width 0.25s ease-in, height 0.25s ease-in}.settings.hydrated{visibility:hidden !important}.settings::-webkit-scrollbar{width:var(--vm-settings-scroll-width)}.settings::-webkit-scrollbar-track{background:var(--vm-settings-scroll-track-color)}.settings::-webkit-scrollbar-thumb{border-radius:var(--vm-settings-scroll-width);background-color:var(--vm-settings-scroll-thumb-color);border:2px solid var(--vm-menu-bg)}.settings.active{transform:translateY(0);opacity:1;pointer-events:auto;visibility:visible !important}.settings.mobile{position:fixed;top:auto !important;left:0 !important;right:0 !important;bottom:0 !important;width:100%;min-height:56px;max-height:50%;border-radius:0;z-index:2147483647;transform:translateY(100%)}.settings.mobile.active{transform:translateY(0)}.settings.mobile>vm-menu{height:100% !important;overflow:auto !important}\";\n\nvar __awaiter$6 = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar idCount$2 = 0;\n\nvar Settings = /*#__PURE__*/function (_HTMLElement36) {\n  _inherits(Settings, _HTMLElement36);\n\n  var _super37 = _createSuper(Settings);\n\n  function Settings() {\n    var _this90;\n\n    _classCallCheck(this, Settings);\n\n    _this90 = _super37.call(this);\n\n    _this90.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this90));\n    _this90.disposal = new Disposal();\n    _this90.menuHeight = 0;\n    /**\n     * Pins the settings to the defined position inside the video player. This has no effect when\n     * the view is of type `audio` (always `bottomRight`) and on mobile devices (always bottom sheet).\n     */\n\n    _this90.pin = 'bottomRight';\n    /**\n     * Whether the settings menu is opened/closed.\n     */\n\n    _this90.active = false;\n    /** @internal */\n\n    _this90.isMobile = false;\n    /** @internal */\n\n    _this90.isAudioView = false;\n    withComponentRegistry(_assertThisInitialized(_this90));\n    withControlsCollisionDetection(_assertThisInitialized(_this90));\n    withPlayerContext(_assertThisInitialized(_this90), ['isMobile', 'isAudioView']);\n    return _this90;\n  }\n\n  _createClass(Settings, [{\n    key: \"onActiveChange\",\n    value: function onActiveChange() {\n      this.dispatch('isSettingsActive', this.active);\n      if (isUndefined(this.controller)) return;\n      this.controller.expanded = this.active;\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.dispatch = createDispatcher(this);\n      idCount$2 += 1;\n      this.id = \"vm-settings-\".concat(idCount$2);\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.disposal.empty();\n    }\n    /**\n     * Sets the controller responsible for opening/closing this settings menu.\n     */\n\n  }, {\n    key: \"setController\",\n    value: function setController(controller) {\n      return __awaiter$6(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee125() {\n        var _this91 = this;\n\n        return _regeneratorRuntime().wrap(function _callee125$(_context125) {\n          while (1) {\n            switch (_context125.prev = _context125.next) {\n              case 0:\n                this.controller = controller;\n                this.controller.menu = this.id;\n                this.disposal.empty();\n                this.disposal.add(listen(this.controller, 'click', function () {\n                  _this91.active = !_this91.active;\n                }));\n                this.disposal.add(listen(this.controller, 'keydown', function (event) {\n                  if (event.key !== 'Enter') return; // We're looking for !active because the `click` event above will toggle it to active.\n\n                  if (!_this91.active) _this91.menu.focusMenu();\n                }));\n\n              case 5:\n              case \"end\":\n                return _context125.stop();\n            }\n          }\n        }, _callee125, this);\n      }));\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition() {\n      var _ref6;\n\n      if (this.isAudioView) {\n        return {\n          right: '0',\n          bottom: 'calc(var(--vm-controls-height, 0) + 4px)'\n        };\n      } // topLeft => { top: 0, left: 0 }\n\n\n      var pos = this.pin.split(/(?=[L|R])/).map(function (s) {\n        return s.toLowerCase();\n      });\n      return _ref6 = {}, _defineProperty(_ref6, pos.includes('top') ? 'top' : 'bottom', 'var(--vm-controls-height, 0)'), _defineProperty(_ref6, pos.includes('left') ? 'left' : 'right', '8px'), _ref6;\n    }\n  }, {\n    key: \"onOpen\",\n    value: function onOpen(event) {\n      var _a;\n\n      if (((_a = event.detail) === null || _a === void 0 ? void 0 : _a.identifier) !== this.id) return;\n      this.active = true;\n    }\n  }, {\n    key: \"onClose\",\n    value: function onClose(event) {\n      var _a;\n\n      if (((_a = event.detail) === null || _a === void 0 ? void 0 : _a.identifier) !== this.id) return;\n      this.active = false;\n    }\n  }, {\n    key: \"onHeightChange\",\n    value: function onHeightChange(event) {\n      this.menuHeight = event.detail;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this92 = this;\n\n      return h(\"div\", {\n        style: Object.assign({}, this.getPosition()),\n        class: {\n          settings: true,\n          active: this.active,\n          mobile: this.isMobile\n        }\n      }, h(\"div\", {\n        class: \"container\",\n        style: {\n          height: \"\".concat(this.menuHeight, \"px\")\n        }\n      }, h(\"vm-menu\", {\n        identifier: this.id,\n        active: this.active,\n        controller: this.controller,\n        onVmOpen: this.onOpen.bind(this),\n        onVmClose: this.onClose.bind(this),\n        onVmMenuHeightChange: this.onHeightChange.bind(this),\n        ref: function ref(el) {\n          _this92.menu = el;\n        }\n      }, h(\"slot\", null))));\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"active\": [\"onActiveChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return settingsCss;\n    }\n  }]);\n\n  return Settings;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar settingsControlCss = \".settingsControl.hidden{display:none}.settingsControl{--vm-icon-transition:transform 0.3s ease}.settingsControl.active{--vm-icon-transform:rotate(90deg)}\";\n\nvar __awaiter$5 = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar idCount$1 = 0;\n\nvar SettingsControl = /*#__PURE__*/function (_HTMLElement37) {\n  _inherits(SettingsControl, _HTMLElement37);\n\n  var _super38 = _createSuper(SettingsControl);\n\n  function SettingsControl() {\n    var _this93;\n\n    _classCallCheck(this, SettingsControl);\n\n    _this93 = _super38.call(this);\n\n    _this93.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this93));\n    /**\n     * The name of the settings icon to resolve from the icon library.\n     */\n\n    _this93.icon = 'settings';\n    /**\n     * Whether the tooltip is positioned above/below the control.\n     */\n\n    _this93.tooltipPosition = 'top';\n    /**\n     * Whether the settings menu this control manages is open.\n     */\n\n    _this93.expanded = false;\n    /** @internal */\n\n    _this93.i18n = {};\n    withComponentRegistry(_assertThisInitialized(_this93));\n    withPlayerContext(_assertThisInitialized(_this93), ['i18n']);\n    return _this93;\n  }\n\n  _createClass(SettingsControl, [{\n    key: \"onComponentsChange\",\n    value: function onComponentsChange() {\n      if (!isUndefined(this.vmSettings)) {\n        this.vmSettings.setController(this.host);\n      }\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      var _this94 = this;\n\n      idCount$1 += 1;\n      this.id = \"vm-settings-control-\".concat(idCount$1);\n      watchComponentRegistry(this, 'vm-settings', function (regs) {\n        var _regs2 = _slicedToArray(regs, 1);\n\n        _this94.vmSettings = _regs2[0];\n      });\n    }\n    /**\n     * Focuses the control.\n     */\n\n  }, {\n    key: \"focusControl\",\n    value: function focusControl() {\n      var _a;\n\n      return __awaiter$5(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee126() {\n        return _regeneratorRuntime().wrap(function _callee126$(_context126) {\n          while (1) {\n            switch (_context126.prev = _context126.next) {\n              case 0:\n                (_a = this.control) === null || _a === void 0 ? void 0 : _a.focusControl();\n\n              case 1:\n              case \"end\":\n                return _context126.stop();\n            }\n          }\n        }, _callee126, this);\n      }));\n    }\n    /**\n     * Removes focus from the control.\n     */\n\n  }, {\n    key: \"blurControl\",\n    value: function blurControl() {\n      var _a;\n\n      return __awaiter$5(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee127() {\n        return _regeneratorRuntime().wrap(function _callee127$(_context127) {\n          while (1) {\n            switch (_context127.prev = _context127.next) {\n              case 0:\n                (_a = this.control) === null || _a === void 0 ? void 0 : _a.blurControl();\n\n              case 1:\n              case \"end\":\n                return _context127.stop();\n            }\n          }\n        }, _callee127, this);\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this95 = this;\n\n      var hasSettings = !isUndefined(this.menu);\n      return h(\"div\", {\n        class: {\n          settingsControl: true,\n          hidden: !hasSettings,\n          active: hasSettings && this.expanded\n        }\n      }, h(\"vm-control\", {\n        identifier: this.id,\n        menu: this.menu,\n        hidden: !hasSettings,\n        expanded: this.expanded,\n        label: this.i18n.settings,\n        ref: function ref(control) {\n          _this95.control = control;\n        }\n      }, h(\"vm-icon\", {\n        name: this.icon,\n        library: this.icons\n      }), h(\"vm-tooltip\", {\n        hidden: this.expanded,\n        position: this.tooltipPosition,\n        direction: this.tooltipDirection\n      }, this.i18n.settings)));\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"vmSettings\": [\"onComponentsChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return settingsControlCss;\n    }\n  }]);\n\n  return SettingsControl;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar skeletonCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-skeleton-z-index)}@keyframes sheen{0%{background-position:200% 0}to{background-position:-200% 0}}.skeleton{width:100%;height:100%;display:flex;min-height:1rem;pointer-events:auto}.sheen.hidden{opacity:0;visibility:hidden;transition:var(--vm-fade-transition);pointer-events:none}.indicator{flex:1 1 auto;background:var(--vm-skeleton-color)}.skeleton.sheen .indicator{background:linear-gradient(\\n    270deg,\\n    var(--vm-skeleton-sheen-color),\\n    var(--vm-skeleton-color),\\n    var(--vm-skeleton-color),\\n    var(--vm-skeleton-sheen-color)\\n  );background-size:400% 100%;background-size:400% 100%;animation:sheen 8s ease-in-out infinite}\";\n\nvar Skeleton = /*#__PURE__*/function (_HTMLElement38) {\n  _inherits(Skeleton, _HTMLElement38);\n\n  var _super39 = _createSuper(Skeleton);\n\n  function Skeleton() {\n    var _this96;\n\n    _classCallCheck(this, Skeleton);\n\n    _this96 = _super39.call(this);\n\n    _this96.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this96));\n    _this96.hidden = false;\n    /**\n     * Determines which animation effect the skeleton will use.\n     * */\n\n    _this96.effect = 'sheen';\n    /** @internal */\n\n    _this96.ready = false;\n    withComponentRegistry(_assertThisInitialized(_this96));\n    withPlayerContext(_assertThisInitialized(_this96), ['ready']);\n    return _this96;\n  }\n\n  _createClass(Skeleton, [{\n    key: \"onReadyChange\",\n    value: function onReadyChange() {\n      var _this97 = this;\n\n      if (!this.ready) {\n        this.hidden = false;\n      } else {\n        setTimeout(function () {\n          _this97.hidden = true;\n        }, 500);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        class: {\n          skeleton: true,\n          hidden: this.hidden,\n          sheen: this.effect === 'sheen'\n        }\n      }, h(\"div\", {\n        class: \"indicator\"\n      }));\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"ready\": [\"onReadyChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return skeletonCss;\n    }\n  }]);\n\n  return Skeleton;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar sliderCss = \":host{width:100%}.slider{width:100%}input{width:100%;-webkit-appearance:none;background:transparent;border:0;outline:0;cursor:pointer;box-sizing:border-box;border-radius:calc(var(--vm-slider-thumb-height) * 2);user-select:none;-webkit-user-select:none;touch-action:manipulation;color:var(--vm-slider-value-color);display:block;height:var(--vm-slider-track-height);margin:0;padding:0;transition:box-shadow 0.3s ease}input::-webkit-slider-runnable-track{background:transparent;border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none;background-image:linear-gradient(\\n    to right,\\n    currentColor var(--vm-value, 0%),\\n    transparent var(--vm-value, 0%)\\n  );background-color:var(--vm-slider-track-color)}input::-webkit-slider-thumb{opacity:0;background:var(--vm-slider-thumb-bg);border:0;border-radius:100%;position:relative;transition:all 0.2s ease;width:var(--vm-slider-thumb-width);height:var(--vm-slider-thumb-height);box-shadow:var(--vm-slider-thumb-shadow);-webkit-appearance:none;margin-top:calc(\\n    0px -\\n      calc(\\n        calc(var(--vm-slider-thumb-height) - var(--vm-slider-track-height)) / 2\\n      )\\n  )}input::-moz-range-track{background:transparent;border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none;background-color:var(--vm-slider-track-color)}input::-moz-range-thumb{opacity:0;background:var(--vm-slider-thumb-bg);border:0;border-radius:100%;position:relative;transition:all 0.2s ease;width:var(--vm-slider-thumb-width);height:var(--vm-slider-thumb-height);box-shadow:var(--vm-slider-thumb-shadow)}input::-moz-range-progress{background:currentColor;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height)}input::-ms-track{border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none;color:transparent;background-color:var(--vm-slider-track-color)}input::-ms-fill-upper{background:transparent;border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none}input::-ms-fill-lower{border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none;background:currentColor}input::-ms-thumb{opacity:0;background:var(--vm-slider-thumb-bg);border:0;border-radius:100%;position:relative;transition:all 0.2s ease;width:var(--vm-slider-thumb-width);height:var(--vm-slider-thumb-height);box-shadow:var(--vm-slider-thumb-shadow);margin-top:0}input::-ms-tooltip{display:none}input:hover::-webkit-slider-runnable-track{height:var(--vm-slider-track-focused-height)}input:hover::-moz-range-track{height:var(--vm-slider-track-focused-height)}input:hover::-ms-track{height:var(--vm-slider-track-focused-height)}input:hover::-ms-fill-upper{height:var(--vm-slider-track-focused-height)}input:hover::-ms-fill-lower{height:var(--vm-slider-track-focused-height)}input:hover::-webkit-slider-thumb{opacity:1}input:hover::-moz-range-thumb{opacity:1}input:hover::-ms-thumb{opacity:1}input:focus{outline:0}input:focus::-webkit-slider-runnable-track{outline:0;height:var(--vm-slider-track-focused-height)}input:focus::-moz-range-track{outline:0;height:var(--vm-slider-track-focused-height)}input:focus::-ms-track{outline:0;height:var(--vm-slider-track-focused-height)}input::-moz-focus-outer{border:0}\";\n\nvar Slider = /*#__PURE__*/function (_HTMLElement39) {\n  _inherits(Slider, _HTMLElement39);\n\n  var _super40 = _createSuper(Slider);\n\n  function Slider() {\n    var _this98;\n\n    _classCallCheck(this, Slider);\n\n    _this98 = _super40.call(this);\n\n    _this98.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this98));\n    _this98.vmValueChange = createEvent(_assertThisInitialized(_this98), \"vmValueChange\", 7);\n    _this98.vmFocus = createEvent(_assertThisInitialized(_this98), \"vmFocus\", 7);\n    _this98.vmBlur = createEvent(_assertThisInitialized(_this98), \"vmBlur\", 7);\n    /**\n     * A number that specifies the granularity that the value must adhere to.\n     */\n\n    _this98.step = 1;\n    /**\n     * The lowest value in the range of permitted values.\n     */\n\n    _this98.min = 0;\n    /**\n     * The greatest permitted value.\n     */\n\n    _this98.max = 10;\n    /**\n     * The current value.\n     */\n\n    _this98.value = 5;\n    withComponentRegistry(_assertThisInitialized(_this98));\n    return _this98;\n  }\n\n  _createClass(Slider, [{\n    key: \"getPercentage\",\n    value: function getPercentage() {\n      return \"\".concat(this.value / this.max * 100, \"%\");\n    }\n  }, {\n    key: \"onValueChange\",\n    value: function onValueChange(event) {\n      var _a;\n\n      var value = parseFloat((_a = event.target) === null || _a === void 0 ? void 0 : _a.value);\n      this.vmValueChange.emit(value);\n    }\n  }, {\n    key: \"calcTouchedValue\",\n    value: function calcTouchedValue(event) {\n      var input = event.target;\n      var touch = event.changedTouches[0];\n      var min = parseFloat(input.getAttribute('min'));\n      var max = parseFloat(input.getAttribute('max'));\n      var step = parseFloat(input.getAttribute('step'));\n      var delta = max - min; // Calculate percentage.\n\n      var percent;\n      var clientRect = input.getBoundingClientRect();\n      var sliderThumbWidth = parseFloat(window.getComputedStyle(this.host).getPropertyValue('--vm-slider-thumb-width'));\n      var thumbWidth = 100 / clientRect.width * (sliderThumbWidth / 2) / 100;\n      percent = 100 / clientRect.width * (touch.clientX - clientRect.left); // Don't allow outside bounds.\n\n      percent = Math.max(0, Math.min(percent, 100)); // Factor in the thumb offset.\n\n      if (percent < 50) {\n        percent -= (100 - percent * 2) * thumbWidth;\n      } else if (percent > 50) {\n        percent += (percent - 50) * 2 * thumbWidth;\n      }\n\n      var position = delta * (percent / 100);\n\n      if (step >= 1) {\n        return min + Math.round(position / step) * step;\n      }\n      /**\n       * This part differs from original implementation to save space. Only supports 2 decimal\n       * places (0.01) as the step.\n       */\n\n\n      return min + parseFloat(position.toFixed(2));\n    }\n    /**\n     * Basically input[range=\"type\"] on touch devices sucks (particularly iOS), so this helps make it\n     * better.\n     *\n     * @see https://github.com/sampotts/rangetouch\n     */\n\n  }, {\n    key: \"onTouch\",\n    value: function onTouch(event) {\n      var input = event.target;\n      if (input.disabled) return;\n      event.preventDefault();\n      this.value = this.calcTouchedValue(event);\n      this.vmValueChange.emit(this.value);\n      input.dispatchEvent(new window.Event(event.type === 'touchend' ? 'change' : 'input', {\n        bubbles: true\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this99 = this;\n\n      var _a;\n\n      return h(\"div\", {\n        class: \"slider\",\n        style: {\n          '--vm-value': this.getPercentage()\n        }\n      }, h(\"input\", {\n        type: \"range\",\n        step: this.step,\n        min: this.min,\n        max: this.max,\n        value: this.value,\n        autocomplete: \"off\",\n        \"aria-label\": this.label,\n        \"aria-valuemin\": this.min,\n        \"aria-valuemax\": this.max,\n        \"aria-valuenow\": this.value,\n        \"aria-valuetext\": (_a = this.valueText) !== null && _a !== void 0 ? _a : this.getPercentage(),\n        \"aria-orientation\": \"horizontal\",\n        onInput: this.onValueChange.bind(this),\n        onFocus: function onFocus() {\n          _this99.vmFocus.emit();\n        },\n        onBlur: function onBlur() {\n          _this99.vmBlur.emit();\n        },\n        onTouchStart: this.onTouch.bind(this),\n        onTouchMove: this.onTouch.bind(this),\n        onTouchEnd: this.onTouch.bind(this)\n      }));\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return sliderCss;\n    }\n  }]);\n\n  return Slider;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar spinnerCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-spinner-z-index)}.spinner{width:100%;height:100%;display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;pointer-events:none;transition:var(--vm-fade-transition)}.spinner.hidden{display:none}.spinner.active{opacity:1;visibility:visible}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.spin{background:transparent;margin:60px auto;font-size:10px;position:relative;text-indent:-9999em;pointer-events:none;border-top:var(--vm-spinner-thickness) solid var(--vm-spinner-fill-color);border-left:var(--vm-spinner-thickness) solid var(--vm-spinner-fill-color);border-right:var(--vm-spinner-thickness) solid var(--vm-spinner-track-color);border-bottom:var(--vm-spinner-thickness) solid var(--vm-spinner-track-color);transform:translateZ(0)}.spin.active{animation:spin var(--vm-spinner-spin-duration) infinite\\n    var(--vm-spinner-spin-timing-func)}.spin,.spin::after{border-radius:50%;width:var(--vm-spinner-width);height:var(--vm-spinner-height)}\";\n\nvar Spinner = /*#__PURE__*/function (_HTMLElement40) {\n  _inherits(Spinner, _HTMLElement40);\n\n  var _super41 = _createSuper(Spinner);\n\n  function Spinner() {\n    var _this100;\n\n    _classCallCheck(this, Spinner);\n\n    _this100 = _super41.call(this);\n\n    _this100.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this100));\n    _this100.vmWillShow = createEvent(_assertThisInitialized(_this100), \"vmWillShow\", 3);\n    _this100.vmWillHide = createEvent(_assertThisInitialized(_this100), \"vmWillHide\", 3);\n    _this100.blacklist = [Provider.YouTube];\n    _this100.isHidden = true;\n    _this100.isActive = false;\n    /** @internal */\n\n    _this100.isVideoView = false;\n    /**\n     * Whether the spinner should be active when the player is booting or media is loading.\n     */\n\n    _this100.showWhenMediaLoading = false;\n    /** @internal */\n\n    _this100.playbackReady = false;\n    /** @internal */\n\n    _this100.buffering = false;\n    withComponentRegistry(_assertThisInitialized(_this100));\n    withPlayerContext(_assertThisInitialized(_this100), ['isVideoView', 'buffering', 'playbackReady', 'currentProvider']);\n    return _this100;\n  }\n\n  _createClass(Spinner, [{\n    key: \"onVideoViewChange\",\n    value: function onVideoViewChange() {\n      this.isHidden = !this.isVideoView;\n      this.onVisiblityChange();\n    }\n  }, {\n    key: \"onActiveChange\",\n    value: function onActiveChange() {\n      this.isActive = this.buffering || this.showWhenMediaLoading && !this.playbackReady;\n      this.onVisiblityChange();\n    }\n  }, {\n    key: \"onVisiblityChange\",\n    value: function onVisiblityChange() {\n      !this.isHidden && this.isActive ? this.vmWillShow.emit() : this.vmWillHide.emit();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        class: {\n          spinner: true,\n          hidden: this.isHidden || this.blacklist.includes(this.currentProvider),\n          active: this.isActive\n        }\n      }, h(\"div\", {\n        class: {\n          spin: true,\n          active: this.isActive\n        }\n      }, \"Loading...\"));\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"isVideoView\": [\"onVideoViewChange\"],\n        \"buffering\": [\"onActiveChange\"],\n        \"playbackReady\": [\"onActiveChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return spinnerCss;\n    }\n  }]);\n\n  return Spinner;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar __awaiter$4 = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar idCount = 0;\n\nvar Submenu = /*#__PURE__*/function (_HTMLElement41) {\n  _inherits(Submenu, _HTMLElement41);\n\n  var _super42 = _createSuper(Submenu);\n\n  function Submenu() {\n    var _this101;\n\n    _classCallCheck(this, Submenu);\n\n    _this101 = _super42.call(this);\n\n    _this101.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this101));\n    _this101.vmOpenSubmenu = createEvent(_assertThisInitialized(_this101), \"vmOpenSubmenu\", 7);\n    _this101.vmCloseSubmenu = createEvent(_assertThisInitialized(_this101), \"vmCloseSubmenu\", 7);\n    /**\n     * The direction the submenu should slide in from.\n     */\n\n    _this101.slideInDirection = 'right';\n    /**\n     * Whether the submenu is open/closed.\n     */\n\n    _this101.active = false;\n    withComponentRegistry(_assertThisInitialized(_this101));\n    return _this101;\n  }\n\n  _createClass(Submenu, [{\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.genId();\n    }\n    /**\n     * Returns the controller (`vm-menu-item`) for this submenu.\n     */\n\n  }, {\n    key: \"getController\",\n    value: function getController() {\n      return __awaiter$4(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee128() {\n        return _regeneratorRuntime().wrap(function _callee128$(_context128) {\n          while (1) {\n            switch (_context128.prev = _context128.next) {\n              case 0:\n                return _context128.abrupt(\"return\", this.controller);\n\n              case 1:\n              case \"end\":\n                return _context128.stop();\n            }\n          }\n        }, _callee128, this);\n      }));\n    }\n    /**\n     * Returns the menu (`vm-menu`) for this submenu.\n     */\n\n  }, {\n    key: \"getMenu\",\n    value: function getMenu() {\n      return __awaiter$4(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee129() {\n        return _regeneratorRuntime().wrap(function _callee129$(_context129) {\n          while (1) {\n            switch (_context129.prev = _context129.next) {\n              case 0:\n                return _context129.abrupt(\"return\", this.menu);\n\n              case 1:\n              case \"end\":\n                return _context129.stop();\n            }\n          }\n        }, _callee129, this);\n      }));\n    }\n    /**\n     * Returns the height of the submenu controller.\n     */\n\n  }, {\n    key: \"getControllerHeight\",\n    value: function getControllerHeight() {\n      var _a, _b;\n\n      return __awaiter$4(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee130() {\n        return _regeneratorRuntime().wrap(function _callee130$(_context130) {\n          while (1) {\n            switch (_context130.prev = _context130.next) {\n              case 0:\n                return _context130.abrupt(\"return\", (_b = (_a = this.controller) === null || _a === void 0 ? void 0 : _a.getHeight()) !== null && _b !== void 0 ? _b : 0);\n\n              case 1:\n              case \"end\":\n                return _context130.stop();\n            }\n          }\n        }, _callee130, this);\n      }));\n    }\n  }, {\n    key: \"getControllerHeightSync\",\n    value: function getControllerHeightSync() {\n      var _a;\n\n      var el = (_a = this.controller) === null || _a === void 0 ? void 0 : _a.shadowRoot.querySelector(\"[role='menuitem']\");\n      return el ? parseFloat(window.getComputedStyle(el).height) : 0;\n    }\n  }, {\n    key: \"onMenuOpen\",\n    value: function onMenuOpen() {\n      this.active = true;\n      this.vmOpenSubmenu.emit(this.host);\n    }\n  }, {\n    key: \"onMenuClose\",\n    value: function onMenuClose() {\n      this.active = false;\n      this.vmCloseSubmenu.emit(this.host);\n    }\n  }, {\n    key: \"genId\",\n    value: function genId() {\n      idCount += 1;\n      this.id = \"vm-submenu-\".concat(idCount);\n    }\n  }, {\n    key: \"getControllerId\",\n    value: function getControllerId() {\n      return \"\".concat(this.id, \"-controller\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this102 = this;\n\n      return h(\"div\", null, h(\"vm-menu-item\", {\n        identifier: this.getControllerId(),\n        menu: this.menu,\n        label: this.label,\n        hint: this.hint,\n        expanded: this.active,\n        ref: function ref(el) {\n          writeTask(function () {\n            _this102.controller = el;\n          });\n        }\n      }), h(\"vm-menu\", {\n        identifier: this.id,\n        controller: this.controller,\n        active: this.active,\n        slideInDirection: this.slideInDirection,\n        onVmOpen: this.onMenuOpen.bind(this),\n        onVmClose: this.onMenuClose.bind(this),\n        ref: function ref(el) {\n          writeTask(function () {\n            _this102.menu = el;\n          });\n        },\n        style: {\n          top: \"\".concat(this.getControllerHeightSync() + 1, \"px\")\n        }\n      }, h(\"slot\", null)));\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }]);\n\n  return Submenu;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar timeCss = \".time{display:flex;align-items:center;color:var(--vm-time-color);font-size:var(--vm-time-font-size);font-weight:var(--vm-time-font-weight)}\";\n\nvar Time = /*#__PURE__*/function (_HTMLElement42) {\n  _inherits(Time, _HTMLElement42);\n\n  var _super43 = _createSuper(Time);\n\n  function Time() {\n    var _this103;\n\n    _classCallCheck(this, Time);\n\n    _this103 = _super43.call(this);\n\n    _this103.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this103));\n    /**\n     * The length of time in seconds.\n     */\n\n    _this103.seconds = 0;\n    /**\n     * Whether the time should always show the hours unit, even if the time is less than\n     * 1 hour (eg: `20:35` -> `00:20:35`).\n     */\n\n    _this103.alwaysShowHours = false;\n    withComponentRegistry(_assertThisInitialized(_this103));\n    return _this103;\n  }\n\n  _createClass(Time, [{\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        class: \"time\",\n        \"aria-label\": this.label\n      }, formatTime(Math.max(0, this.seconds), this.alwaysShowHours));\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return timeCss;\n    }\n  }]);\n\n  return Time;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar timeProgressCss = \".timeProgress{display:flex;width:100%;height:100%;align-items:center;color:var(--vm-time-color)}.separator{margin:0 4px}\";\n\nvar TimeProgress = /*#__PURE__*/function (_HTMLElement43) {\n  _inherits(TimeProgress, _HTMLElement43);\n\n  var _super44 = _createSuper(TimeProgress);\n\n  function TimeProgress() {\n    var _this104;\n\n    _classCallCheck(this, TimeProgress);\n\n    _this104 = _super44.call(this);\n\n    _this104.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this104));\n    /**\n     * The string used to separate the current time and end time.\n     */\n\n    _this104.separator = '/';\n    /**\n     * Whether the times should always show the hours unit, even if the time is less than\n     * 1 hour (eg: `20:35` -> `00:20:35`).\n     */\n\n    _this104.alwaysShowHours = false;\n    withComponentRegistry(_assertThisInitialized(_this104));\n    return _this104;\n  }\n\n  _createClass(TimeProgress, [{\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        class: \"timeProgress\"\n      }, h(\"vm-current-time\", {\n        alwaysShowHours: this.alwaysShowHours\n      }), h(\"span\", {\n        class: \"separator\"\n      }, this.separator), h(\"vm-end-time\", {\n        alwaysShowHours: this.alwaysShowHours\n      }));\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return timeProgressCss;\n    }\n  }]);\n\n  return TimeProgress;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar tooltipCss = \":host{display:contents;z-index:var(--vm-tooltip-z-index)}.tooltip{left:var(--vm-tooltip-left, 50%);transform:translateX(-50%);line-height:1.3;pointer-events:none;position:absolute;opacity:0;white-space:nowrap;visibility:hidden;background:var(--vm-tooltip-bg);border-radius:var(--vm-tooltip-border-radius);box-sizing:border-box;box-shadow:var(--vm-tooltip-box-shadow);color:var(--vm-tooltip-color);font-size:var(--vm-tooltip-font-size);padding:var(--vm-tooltip-padding);transition:opacity var(--vm-tooltip-fade-duration)\\n    var(--vm-tooltip-fade-timing-func)}.tooltip[aria-hidden='false']{opacity:1;visibility:visible}.tooltip.hidden{display:none}.tooltip.onTop{bottom:100%;margin-bottom:var(--vm-tooltip-spacing)}.tooltip.onBottom{top:100%;margin-top:var(--vm-tooltip-spacing)}.tooltip.growLeft{left:auto;right:0;transform:none}.tooltip.growRight{left:0;transform:none}\";\nvar tooltipIdCount = 0;\n\nvar Tooltip = /*#__PURE__*/function (_HTMLElement44) {\n  _inherits(Tooltip, _HTMLElement44);\n\n  var _super45 = _createSuper(Tooltip);\n\n  function Tooltip() {\n    var _this105;\n\n    _classCallCheck(this, Tooltip);\n\n    _this105 = _super45.call(this);\n\n    _this105.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this105)); // Avoid tooltips flashing when player initializing.\n\n    _this105.hasLoaded = false;\n    /**\n     * Whether the tooltip is displayed or not.\n     */\n\n    _this105.hidden = false;\n    /**\n     * Whether the tooltip is visible or not.\n     */\n\n    _this105.active = false;\n    /**\n     * Determines if the tooltip appears on top/bottom of it's parent.\n     */\n\n    _this105.position = 'top';\n    /** @internal */\n\n    _this105.isTouch = false;\n    /** @internal */\n\n    _this105.isMobile = false;\n    withComponentRegistry(_assertThisInitialized(_this105));\n    withPlayerContext(_assertThisInitialized(_this105), ['isTouch', 'isMobile']);\n    return _this105;\n  }\n\n  _createClass(Tooltip, [{\n    key: \"componentDidLoad\",\n    value: function componentDidLoad() {\n      this.hasLoaded = true;\n    }\n  }, {\n    key: \"getId\",\n    value: function getId() {\n      // eslint-disable-next-line prefer-destructuring\n      var id = this.host.id;\n      if (isString(id) && id.length > 0) return id;\n      tooltipIdCount += 1;\n      return \"vm-tooltip-\".concat(tooltipIdCount);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        id: this.getId(),\n        role: \"tooltip\",\n        \"aria-hidden\": !this.active || this.isTouch || this.isMobile ? 'true' : 'false',\n        class: {\n          tooltip: true,\n          hidden: !this.hasLoaded || this.hidden,\n          onTop: this.position === 'top',\n          onBottom: this.position === 'bottom',\n          growLeft: this.direction === 'left',\n          growRight: this.direction === 'right'\n        }\n      }, h(\"slot\", null));\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      return this;\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return tooltipCss;\n    }\n  }]);\n\n  return Tooltip;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar uiCss = \":host{z-index:var(--vm-ui-z-index)}.ui{width:100%;pointer-events:none}.ui.hidden{display:none}.ui.video{position:absolute;top:0;left:0;height:100%}\";\n\nvar UI = /*#__PURE__*/function (_HTMLElement45) {\n  _inherits(UI, _HTMLElement45);\n\n  var _super46 = _createSuper(UI);\n\n  function UI() {\n    var _this106;\n\n    _classCallCheck(this, UI);\n\n    _this106 = _super46.call(this);\n\n    _this106.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this106));\n    /** @internal */\n\n    _this106.isVideoView = false;\n    /** @internal */\n\n    _this106.playsinline = false;\n    /** @internal */\n\n    _this106.isFullscreenActive = false;\n    withComponentRegistry(_assertThisInitialized(_this106));\n    withPlayerContext(_assertThisInitialized(_this106), ['isVideoView', 'playsinline', 'isFullscreenActive']);\n    return _this106;\n  }\n\n  _createClass(UI, [{\n    key: \"render\",\n    value: function render() {\n      var canShowCustomUI = !IS_IOS || !this.isVideoView || this.playsinline && !this.isFullscreenActive;\n      return h(\"div\", {\n        class: {\n          ui: true,\n          hidden: !canShowCustomUI,\n          video: this.isVideoView\n        }\n      }, canShowCustomUI && h(\"slot\", null));\n    }\n  }], [{\n    key: \"style\",\n    get: function get() {\n      return uiCss;\n    }\n  }]);\n\n  return UI;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar __awaiter$3 = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar Video = /*#__PURE__*/function (_HTMLElement46) {\n  _inherits(Video, _HTMLElement46);\n\n  var _super47 = _createSuper(Video);\n\n  function Video() {\n    var _this107;\n\n    _classCallCheck(this, Video);\n\n    _this107 = _super47.call(this);\n\n    _this107.__registerHost();\n    /**\n     * @internal Whether an external SDK will attach itself to the media player and control it.\n     */\n\n\n    _this107.willAttach = false;\n    /**\n     * @internal Whether an external SDK will manage the text tracks.\n     */\n\n    _this107.hasCustomTextManager = false;\n    /** @inheritdoc */\n\n    _this107.preload = 'metadata';\n    withComponentRegistry(_assertThisInitialized(_this107));\n    withProviderConnect(_assertThisInitialized(_this107));\n    return _this107;\n  }\n\n  _createClass(Video, [{\n    key: \"onProviderConnect\",\n    value: function onProviderConnect(event) {\n      if (this.willAttach) event.stopImmediatePropagation();\n    }\n  }, {\n    key: \"onProviderDisconnect\",\n    value: function onProviderDisconnect(event) {\n      if (this.willAttach) event.stopImmediatePropagation();\n    }\n    /** @internal */\n\n  }, {\n    key: \"getAdapter\",\n    value: function getAdapter() {\n      var _a;\n\n      return __awaiter$3(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee131() {\n        return _regeneratorRuntime().wrap(function _callee131$(_context131) {\n          while (1) {\n            switch (_context131.prev = _context131.next) {\n              case 0:\n                return _context131.abrupt(\"return\", (_a = this.fileProvider) === null || _a === void 0 ? void 0 : _a.getAdapter());\n\n              case 1:\n              case \"end\":\n                return _context131.stop();\n            }\n          }\n        }, _callee131, this);\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this108 = this;\n\n      return h(\"vm-file\", {\n        noConnect: true,\n        willAttach: this.willAttach,\n        crossOrigin: this.crossOrigin,\n        poster: this.poster,\n        preload: this.preload,\n        controlsList: this.controlsList,\n        autoPiP: this.autoPiP,\n        disablePiP: this.disablePiP,\n        disableRemotePlayback: this.disableRemotePlayback,\n        hasCustomTextManager: this.hasCustomTextManager,\n        mediaTitle: this.mediaTitle,\n        viewType: ViewType.Video,\n        ref: function ref(el) {\n          _this108.fileProvider = el;\n        }\n      }, h(\"slot\", null));\n    }\n  }]);\n\n  return Video;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n/**\n * @see https://developer.vimeo.com/player/sdk/reference#events-for-playback-controls\n */\n\n\nvar VimeoEvent;\n\n(function (VimeoEvent) {\n  VimeoEvent[\"Play\"] = \"play\";\n  VimeoEvent[\"Pause\"] = \"pause\";\n  VimeoEvent[\"Seeking\"] = \"seeking\";\n  VimeoEvent[\"Seeked\"] = \"seeked\";\n  VimeoEvent[\"TimeUpdate\"] = \"timeupdate\";\n  VimeoEvent[\"VolumeChange\"] = \"volumechange\";\n  VimeoEvent[\"DurationChange\"] = \"durationchange\";\n  VimeoEvent[\"FullscreenChange\"] = \"fullscreenchange\";\n  VimeoEvent[\"CueChange\"] = \"cuechange\";\n  VimeoEvent[\"Progress\"] = \"progress\";\n  VimeoEvent[\"Error\"] = \"error\";\n  VimeoEvent[\"PlaybackRateChange\"] = \"playbackratechange\";\n  VimeoEvent[\"Loaded\"] = \"loaded\";\n  VimeoEvent[\"BufferStart\"] = \"bufferstart\";\n  VimeoEvent[\"BufferEnd\"] = \"bufferend\";\n  VimeoEvent[\"TextTrackChange\"] = \"texttrackchange\";\n  VimeoEvent[\"Waiting\"] = \"waiting\";\n  VimeoEvent[\"Ended\"] = \"ended\";\n})(VimeoEvent || (VimeoEvent = {}));\n\nvar vimeoCss = \":host{z-index:var(--vm-media-z-index)}vm-embed{position:absolute;top:0;left:0;width:100%;height:100%}vm-embed.hideControls{display:block;width:100%;height:auto;position:relative}\";\n\nvar __awaiter$2 = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar videoInfoCache = new Map();\n\nvar Vimeo = /*#__PURE__*/function (_HTMLElement47) {\n  _inherits(Vimeo, _HTMLElement47);\n\n  var _super48 = _createSuper(Vimeo);\n\n  function Vimeo() {\n    var _this109;\n\n    _classCallCheck(this, Vimeo);\n\n    _this109 = _super48.call(this);\n\n    _this109.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this109));\n    _this109.vmLoadStart = createEvent(_assertThisInitialized(_this109), \"vmLoadStart\", 7);\n    _this109.vmError = createEvent(_assertThisInitialized(_this109), \"vmError\", 7);\n    _this109.defaultInternalState = {};\n    _this109.volume = 50;\n    _this109.hasLoaded = false;\n    _this109.internalState = {\n      paused: true,\n      playing: false,\n      seeking: false,\n      currentTime: 0,\n      buffered: 0,\n      playbackStarted: false,\n      playRequest: false\n    };\n    _this109.embedSrc = '';\n    _this109.mediaTitle = '';\n    /**\n     * Whether to display the video owner's name.\n     */\n\n    _this109.byline = true;\n    /**\n     * Whether to display the video owner's portrait.\n     */\n\n    _this109.portrait = true;\n    /**\n     * Turns off automatically determining the aspect ratio of the current video.\n     */\n\n    _this109.noAutoAspectRatio = false;\n    /**\n     * Whether cookies should be enabled on the embed.\n     */\n\n    _this109.cookies = true;\n    /** @internal */\n\n    _this109.language = 'en';\n    /** @internal */\n\n    _this109.aspectRatio = '16:9';\n    /** @internal */\n\n    _this109.autoplay = false;\n    /** @internal */\n\n    _this109.controls = false;\n    /** @internal */\n\n    _this109.loop = false;\n    /** @internal */\n\n    _this109.muted = false;\n    /** @internal */\n\n    _this109.playsinline = false;\n    withComponentRegistry(_assertThisInitialized(_this109));\n    withProviderConnect(_assertThisInitialized(_this109));\n    withProviderContext(_assertThisInitialized(_this109));\n    return _this109;\n  }\n\n  _createClass(Vimeo, [{\n    key: \"onVideoIdChange\",\n    value: function onVideoIdChange() {\n      this.cancelTimeUpdates();\n\n      if (!this.videoId) {\n        this.embedSrc = '';\n        return;\n      }\n\n      this.embedSrc = \"\".concat(this.getOrigin(), \"/video/\").concat(this.videoId);\n      this.pendingDurationCall = deferredPromise();\n      this.pendingMediaTitleCall = deferredPromise();\n      this.fetchVideoInfo = this.getVideoInfo();\n    }\n  }, {\n    key: \"onCustomPosterChange\",\n    value: function onCustomPosterChange() {\n      this.dispatch('currentPoster', this.poster);\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.dispatch = createProviderDispatcher(this);\n      this.dispatch('viewType', ViewType.Video);\n      this.onVideoIdChange();\n      this.defaultInternalState = Object.assign({}, this.internalState);\n    }\n  }, {\n    key: \"componentDidLoad\",\n    value: function componentDidLoad() {\n      this.initialMuted = this.muted;\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.cancelTimeUpdates();\n      this.pendingPlayRequest = undefined;\n    }\n  }, {\n    key: \"getOrigin\",\n    value: function getOrigin() {\n      return 'https://player.vimeo.com';\n    }\n  }, {\n    key: \"getPreconnections\",\n    value: function getPreconnections() {\n      return [this.getOrigin(), 'https://i.vimeocdn.com', 'https://f.vimeocdn.com', 'https://fresnel.vimeocdn.com'];\n    }\n  }, {\n    key: \"remoteControl\",\n    value: function remoteControl(command, arg) {\n      return this.embed.postMessage({\n        method: command,\n        value: arg\n      });\n    }\n  }, {\n    key: \"buildParams\",\n    value: function buildParams() {\n      return {\n        byline: this.byline,\n        color: this.color,\n        portrait: this.portrait,\n        autopause: false,\n        transparent: false,\n        autoplay: this.autoplay,\n        muted: this.initialMuted,\n        playsinline: this.playsinline,\n        dnt: !this.cookies\n      };\n    }\n  }, {\n    key: \"getVideoInfo\",\n    value: function getVideoInfo() {\n      return __awaiter$2(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee132() {\n        var _this110 = this;\n\n        return _regeneratorRuntime().wrap(function _callee132$(_context132) {\n          while (1) {\n            switch (_context132.prev = _context132.next) {\n              case 0:\n                if (!videoInfoCache.has(this.videoId)) {\n                  _context132.next = 2;\n                  break;\n                }\n\n                return _context132.abrupt(\"return\", videoInfoCache.get(this.videoId));\n\n              case 2:\n                return _context132.abrupt(\"return\", window.fetch(\"https://vimeo.com/api/oembed.json?url=\".concat(this.embedSrc)).then(function (response) {\n                  return response.json();\n                }).then(function (data) {\n                  var _a;\n\n                  var thumnailRegex = /vimeocdn.com\\/video\\/(.*)?_/;\n                  var thumbnailId = (_a = data === null || data === void 0 ? void 0 : data.thumbnail_url) === null || _a === void 0 ? void 0 : _a.match(thumnailRegex)[1];\n                  var poster = \"https://i.vimeocdn.com/video/\".concat(thumbnailId, \"_1920x1080.jpg\");\n                  var info = {\n                    poster: poster,\n                    width: data === null || data === void 0 ? void 0 : data.width,\n                    height: data === null || data === void 0 ? void 0 : data.height\n                  };\n                  videoInfoCache.set(_this110.videoId, info);\n                  return info;\n                }));\n\n              case 3:\n              case \"end\":\n                return _context132.stop();\n            }\n          }\n        }, _callee132, this);\n      }));\n    }\n  }, {\n    key: \"onTimeChange\",\n    value: function onTimeChange(time) {\n      if (this.internalState.currentTime === time) return;\n      this.dispatch('currentTime', time); // This is how we detect `seeking` early.\n\n      if (Math.abs(this.internalState.currentTime - time) > 1.5) {\n        this.internalState.seeking = true;\n        this.dispatch('seeking', true);\n\n        if (this.internalState.playing && this.internalState.buffered < time) {\n          this.dispatch('buffering', true);\n        } // Player doesn't resume playback once seeked.\n\n\n        window.clearTimeout(this.pendingPlayRequest);\n\n        if (!this.internalState.paused) {\n          this.internalState.playRequest = true;\n        }\n\n        this.remoteControl(this.internalState.playbackStarted ? \"pause\"\n        /* Pause */\n        : \"play\"\n        /* Play */\n        );\n      }\n\n      this.internalState.currentTime = time;\n    }\n  }, {\n    key: \"cancelTimeUpdates\",\n    value: function cancelTimeUpdates() {\n      if (isNumber(this.timeRAF)) window.cancelAnimationFrame(this.timeRAF);\n    }\n  }, {\n    key: \"requestTimeUpdates\",\n    value: function requestTimeUpdates() {\n      var _this111 = this;\n\n      this.remoteControl(\"getCurrentTime\"\n      /* GetCurrentTime */\n      );\n      this.timeRAF = window.requestAnimationFrame(function () {\n        _this111.requestTimeUpdates();\n      });\n    }\n  }, {\n    key: \"onSeeked\",\n    value: function onSeeked() {\n      var _this112 = this;\n\n      if (!this.internalState.seeking) return;\n      this.dispatch('seeking', false);\n      this.internalState.seeking = false;\n\n      if (this.internalState.playRequest) {\n        window.setTimeout(function () {\n          _this112.remoteControl(\"play\"\n          /* Play */\n          );\n        }, 150);\n      }\n    }\n  }, {\n    key: \"onVimeoMethod\",\n    value: function onVimeoMethod(method, arg) {\n      var _a, _b;\n\n      switch (method) {\n        case \"getCurrentTime\"\n        /* GetCurrentTime */\n        :\n          if (!this.internalState.seeking) this.onTimeChange(arg);\n          break;\n\n        case \"getDuration\"\n        /* GetDuration */\n        :\n          (_a = this.pendingDurationCall) === null || _a === void 0 ? void 0 : _a.resolve(arg);\n          break;\n\n        case \"getVideoTitle\"\n        /* GetVideoTitle */\n        :\n          (_b = this.pendingMediaTitleCall) === null || _b === void 0 ? void 0 : _b.resolve(arg);\n          break;\n      }\n    }\n  }, {\n    key: \"onLoaded\",\n    value: function onLoaded() {\n      var _this113 = this;\n\n      var _a, _b;\n\n      if (this.hasLoaded) return;\n      this.pendingPlayRequest = undefined;\n      this.internalState = Object.assign({}, this.defaultInternalState);\n      this.dispatch('currentSrc', this.embedSrc);\n      this.dispatch('mediaType', MediaType.Video);\n      this.remoteControl(\"getDuration\"\n      /* GetDuration */\n      );\n      this.remoteControl(\"getVideoTitle\"\n      /* GetVideoTitle */\n      );\n      Promise.all([this.fetchVideoInfo, (_a = this.pendingDurationCall) === null || _a === void 0 ? void 0 : _a.promise, (_b = this.pendingMediaTitleCall) === null || _b === void 0 ? void 0 : _b.promise]).then(function (_ref7) {\n        var _ref8 = _slicedToArray(_ref7, 3),\n            info = _ref8[0],\n            duration = _ref8[1],\n            mediaTitle = _ref8[2];\n\n        var _a, _b, _c;\n\n        _this113.requestTimeUpdates();\n\n        _this113.dispatch('aspectRatio', \"\".concat((_a = info === null || info === void 0 ? void 0 : info.width) !== null && _a !== void 0 ? _a : 16, \":\").concat((_b = info === null || info === void 0 ? void 0 : info.height) !== null && _b !== void 0 ? _b : 9));\n\n        _this113.dispatch('currentPoster', (_c = _this113.poster) !== null && _c !== void 0 ? _c : info === null || info === void 0 ? void 0 : info.poster);\n\n        _this113.dispatch('duration', duration !== null && duration !== void 0 ? duration : -1);\n\n        _this113.dispatch('mediaTitle', mediaTitle);\n\n        _this113.dispatch('playbackReady', true);\n      });\n      this.hasLoaded = true;\n    }\n  }, {\n    key: \"onVimeoEvent\",\n    value: function onVimeoEvent(event, payload) {\n      var _this114 = this;\n\n      switch (event) {\n        case \"ready\"\n        /* Ready */\n        :\n          Object.values(VimeoEvent).forEach(function (e) {\n            _this114.remoteControl(\"addEventListener\"\n            /* AddEventListener */\n            , e);\n          });\n          break;\n\n        case \"loaded\"\n        /* Loaded */\n        :\n          this.onLoaded();\n          break;\n\n        case \"play\"\n        /* Play */\n        :\n          // Incase of autoplay which might skip `Loaded` event.\n          this.onLoaded();\n          this.internalState.paused = false;\n          this.dispatch('paused', false);\n          break;\n\n        case \"playProgress\"\n        /* PlayProgress */\n        :\n          if (!this.internalState.playing) {\n            this.dispatch('playing', true);\n            this.internalState.playing = true;\n            this.internalState.playbackStarted = true;\n            this.pendingPlayRequest = window.setTimeout(function () {\n              _this114.internalState.playRequest = false;\n              _this114.pendingPlayRequest = undefined;\n            }, 1000);\n          }\n\n          this.dispatch('buffering', false);\n          this.onSeeked();\n          break;\n\n        case \"pause\"\n        /* Pause */\n        :\n          this.internalState.paused = true;\n          this.internalState.playing = false;\n          this.dispatch('paused', true);\n          this.dispatch('buffering', false);\n          break;\n\n        case \"loadProgress\"\n        /* LoadProgress */\n        :\n          this.internalState.buffered = payload.seconds;\n          this.dispatch('buffered', payload.seconds);\n          break;\n\n        case \"bufferstart\"\n        /* BufferStart */\n        :\n          this.dispatch('buffering', true); // Attempt to detect `play` events early.\n\n          if (this.internalState.paused) {\n            this.internalState.paused = false;\n            this.dispatch('paused', false);\n            this.dispatch('playbackStarted', true);\n          }\n\n          break;\n\n        case \"bufferend\"\n        /* BufferEnd */\n        :\n          this.dispatch('buffering', false);\n          if (this.internalState.paused) this.onSeeked();\n          break;\n\n        case \"volumechange\"\n        /* VolumeChange */\n        :\n          if (payload.volume > 0) {\n            var newVolume = Math.floor(payload.volume * 100);\n            this.dispatch('muted', false);\n\n            if (this.volume !== newVolume) {\n              this.volume = newVolume;\n              this.dispatch('volume', this.volume);\n            }\n          } else {\n            this.dispatch('muted', true);\n          }\n\n          break;\n\n        case \"durationchange\"\n        /* DurationChange */\n        :\n          this.dispatch('duration', payload.duration);\n          break;\n\n        case \"playbackratechange\"\n        /* PlaybackRateChange */\n        :\n          this.dispatch('playbackRate', payload.playbackRate);\n          break;\n\n        case \"fullscreenchange\"\n        /* FullscreenChange */\n        :\n          this.dispatch('isFullscreenActive', payload.fullscreen);\n          break;\n\n        case \"finish\"\n        /* Finish */\n        :\n          if (this.loop) {\n            this.remoteControl(\"setCurrentTime\"\n            /* SetCurrentTime */\n            , 0);\n            setTimeout(function () {\n              _this114.remoteControl(\"play\"\n              /* Play */\n              );\n            }, 200);\n          } else {\n            this.dispatch('playbackEnded', true);\n          }\n\n          break;\n\n        case \"error\"\n        /* Error */\n        :\n          this.vmError.emit(payload);\n          break;\n      }\n    }\n  }, {\n    key: \"onEmbedSrcChange\",\n    value: function onEmbedSrcChange() {\n      this.hasLoaded = false;\n      this.vmLoadStart.emit();\n      this.dispatch('viewType', ViewType.Video);\n    }\n  }, {\n    key: \"onEmbedMessage\",\n    value: function onEmbedMessage(event) {\n      var message = event.detail;\n      if (!isUndefined(message.event)) this.onVimeoEvent(message.event, message.data);\n      if (!isUndefined(message.method)) this.onVimeoMethod(message.method, message.value);\n    }\n  }, {\n    key: \"adjustPosition\",\n    value: function adjustPosition() {\n      if (this.controls) {\n        return {};\n      }\n\n      var _this$aspectRatio$spl = this.aspectRatio.split(':').map(function (r) {\n        return parseInt(r, 10);\n      }),\n          _this$aspectRatio$spl2 = _slicedToArray(_this$aspectRatio$spl, 2),\n          aw = _this$aspectRatio$spl2[0],\n          ah = _this$aspectRatio$spl2[1];\n\n      var height = 240;\n      var padding = 100 / aw * ah;\n      var offset = (height - padding) / (height / 50);\n      return {\n        paddingBottom: \"\".concat(height, \"%\"),\n        transform: \"translateY(-\".concat(offset + 0.02, \"%)\")\n      };\n    }\n    /** @internal */\n\n  }, {\n    key: \"getAdapter\",\n    value: function getAdapter() {\n      return __awaiter$2(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee142() {\n        var _this115 = this;\n\n        var canPlayRegex, fileRegex;\n        return _regeneratorRuntime().wrap(function _callee142$(_context142) {\n          while (1) {\n            switch (_context142.prev = _context142.next) {\n              case 0:\n                canPlayRegex = /vimeo(?:\\.com|)\\/([0-9]{9,})/;\n                fileRegex = /vimeo\\.com\\/external\\/[0-9]+\\..+/;\n                return _context142.abrupt(\"return\", {\n                  getInternalPlayer: function getInternalPlayer() {\n                    return __awaiter$2(_this115, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee133() {\n                      return _regeneratorRuntime().wrap(function _callee133$(_context133) {\n                        while (1) {\n                          switch (_context133.prev = _context133.next) {\n                            case 0:\n                              return _context133.abrupt(\"return\", this.embed);\n\n                            case 1:\n                            case \"end\":\n                              return _context133.stop();\n                          }\n                        }\n                      }, _callee133, this);\n                    }));\n                  },\n                  play: function play() {\n                    return __awaiter$2(_this115, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee134() {\n                      return _regeneratorRuntime().wrap(function _callee134$(_context134) {\n                        while (1) {\n                          switch (_context134.prev = _context134.next) {\n                            case 0:\n                              this.remoteControl(\"play\"\n                              /* Play */\n                              );\n\n                            case 1:\n                            case \"end\":\n                              return _context134.stop();\n                          }\n                        }\n                      }, _callee134, this);\n                    }));\n                  },\n                  pause: function pause() {\n                    return __awaiter$2(_this115, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee135() {\n                      return _regeneratorRuntime().wrap(function _callee135$(_context135) {\n                        while (1) {\n                          switch (_context135.prev = _context135.next) {\n                            case 0:\n                              this.remoteControl(\"pause\"\n                              /* Pause */\n                              );\n\n                            case 1:\n                            case \"end\":\n                              return _context135.stop();\n                          }\n                        }\n                      }, _callee135, this);\n                    }));\n                  },\n                  canPlay: function canPlay(type) {\n                    return __awaiter$2(_this115, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee136() {\n                      return _regeneratorRuntime().wrap(function _callee136$(_context136) {\n                        while (1) {\n                          switch (_context136.prev = _context136.next) {\n                            case 0:\n                              return _context136.abrupt(\"return\", isString(type) && !fileRegex.test(type) && canPlayRegex.test(type));\n\n                            case 1:\n                            case \"end\":\n                              return _context136.stop();\n                          }\n                        }\n                      }, _callee136);\n                    }));\n                  },\n                  setCurrentTime: function setCurrentTime(time) {\n                    return __awaiter$2(_this115, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee137() {\n                      return _regeneratorRuntime().wrap(function _callee137$(_context137) {\n                        while (1) {\n                          switch (_context137.prev = _context137.next) {\n                            case 0:\n                              if (time !== this.internalState.currentTime) {\n                                this.remoteControl(\"setCurrentTime\"\n                                /* SetCurrentTime */\n                                , time);\n                              }\n\n                            case 1:\n                            case \"end\":\n                              return _context137.stop();\n                          }\n                        }\n                      }, _callee137, this);\n                    }));\n                  },\n                  setMuted: function setMuted(muted) {\n                    return __awaiter$2(_this115, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee138() {\n                      return _regeneratorRuntime().wrap(function _callee138$(_context138) {\n                        while (1) {\n                          switch (_context138.prev = _context138.next) {\n                            case 0:\n                              if (!muted) this.volume = this.volume > 0 ? this.volume : 30;\n                              this.remoteControl(\"setVolume\"\n                              /* SetVolume */\n                              , muted ? 0 : this.volume / 100);\n\n                            case 2:\n                            case \"end\":\n                              return _context138.stop();\n                          }\n                        }\n                      }, _callee138, this);\n                    }));\n                  },\n                  setVolume: function setVolume(volume) {\n                    return __awaiter$2(_this115, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee139() {\n                      return _regeneratorRuntime().wrap(function _callee139$(_context139) {\n                        while (1) {\n                          switch (_context139.prev = _context139.next) {\n                            case 0:\n                              if (!this.muted) {\n                                this.remoteControl(\"setVolume\"\n                                /* SetVolume */\n                                , volume / 100);\n                              } else {\n                                // Confirm volume was set.\n                                this.dispatch('volume', volume);\n                              }\n\n                            case 1:\n                            case \"end\":\n                              return _context139.stop();\n                          }\n                        }\n                      }, _callee139, this);\n                    }));\n                  },\n                  // @TODO how to check if Vimeo pro?\n                  canSetPlaybackRate: function canSetPlaybackRate() {\n                    return __awaiter$2(_this115, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee140() {\n                      return _regeneratorRuntime().wrap(function _callee140$(_context140) {\n                        while (1) {\n                          switch (_context140.prev = _context140.next) {\n                            case 0:\n                              return _context140.abrupt(\"return\", false);\n\n                            case 1:\n                            case \"end\":\n                              return _context140.stop();\n                          }\n                        }\n                      }, _callee140);\n                    }));\n                  },\n                  setPlaybackRate: function setPlaybackRate(rate) {\n                    return __awaiter$2(_this115, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee141() {\n                      return _regeneratorRuntime().wrap(function _callee141$(_context141) {\n                        while (1) {\n                          switch (_context141.prev = _context141.next) {\n                            case 0:\n                              this.remoteControl(\"setPlaybackRate\"\n                              /* SetPlaybackRate */\n                              , rate);\n\n                            case 1:\n                            case \"end\":\n                              return _context141.stop();\n                          }\n                        }\n                      }, _callee141, this);\n                    }));\n                  }\n                });\n\n              case 3:\n              case \"end\":\n                return _context142.stop();\n            }\n          }\n        }, _callee142);\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this116 = this;\n\n      return h(\"vm-embed\", {\n        class: {\n          hideControls: !this.controls\n        },\n        style: this.adjustPosition(),\n        embedSrc: this.embedSrc,\n        mediaTitle: this.mediaTitle,\n        origin: this.getOrigin(),\n        params: this.buildParams(),\n        decoder: decodeJSON,\n        preconnections: this.getPreconnections(),\n        onVmEmbedMessage: this.onEmbedMessage.bind(this),\n        onVmEmbedSrcChange: this.onEmbedSrcChange.bind(this),\n        ref: function ref(el) {\n          _this116.embed = el;\n        }\n      });\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"videoId\": [\"onVideoIdChange\"],\n        \"poster\": [\"onCustomPosterChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return vimeoCss;\n    }\n  }]);\n\n  return Vimeo;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar volumeControlCss = \".volumeControl{align-items:center;display:flex;position:relative;pointer-events:auto;box-sizing:border-box}vm-slider{width:75px;height:100%;margin:0;max-width:0;position:relative;z-index:3;transition:margin 0.2s cubic-bezier(0.4, 0, 1, 1),\\n    max-width 0.2s cubic-bezier(0.4, 0, 1, 1);margin-left:calc(var(--vm-control-spacing) / 2) !important;visibility:hidden}vm-slider:hover{cursor:pointer}vm-slider.hidden{display:none}vm-slider.active{max-width:75px;visibility:visible;margin:0 calc(var(--vm-control-spacing) / 2)}\";\n\nvar __awaiter$1 = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar VolumeControl = /*#__PURE__*/function (_HTMLElement48) {\n  _inherits(VolumeControl, _HTMLElement48);\n\n  var _super49 = _createSuper(VolumeControl);\n\n  function VolumeControl() {\n    var _this117;\n\n    _classCallCheck(this, VolumeControl);\n\n    _this117 = _super49.call(this);\n\n    _this117.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this117));\n    _this117.keyboardDisposal = new Disposal();\n    _this117.prevMuted = false;\n    _this117.currentVolume = 50;\n    _this117.isSliderActive = false;\n    /**\n     * The name of the low volume icon to resolve from the icon library.\n     */\n\n    _this117.lowVolumeIcon = 'volume-low';\n    /**\n     * The name of the high volume icon to resolve from the icon library.\n     */\n\n    _this117.highVolumeIcon = 'volume-high';\n    /**\n     * The name of the muted volume icon to resolve from the icon library.\n     */\n\n    _this117.mutedIcon = 'volume-mute';\n    /**\n     * Whether the tooltip is positioned above/below the control.\n     */\n\n    _this117.tooltipPosition = 'top';\n    /**\n     * Whether the tooltip should be hidden.\n     */\n\n    _this117.hideTooltip = false;\n    /**\n     * A pipe (`/`) separated string of JS keyboard keys, that when caught in a `keydown` event, will\n     * toggle the muted state of the player.\n     */\n\n    _this117.muteKeys = 'm';\n    /**\n     * Prevents the volume being changed using the Up/Down arrow keys.\n     */\n\n    _this117.noKeyboard = false;\n    /** @internal */\n\n    _this117.muted = false;\n    /** @internal */\n\n    _this117.volume = 50;\n    /** @internal */\n\n    _this117.isMobile = false;\n    /** @internal */\n\n    _this117.i18n = {};\n    withComponentRegistry(_assertThisInitialized(_this117));\n    withPlayerContext(_assertThisInitialized(_this117), ['volume', 'muted', 'isMobile', 'i18n']);\n    return _this117;\n  }\n\n  _createClass(VolumeControl, [{\n    key: \"onNoKeyboardChange\",\n    value: function onNoKeyboardChange() {\n      return __awaiter$1(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee143() {\n        var _this118 = this;\n\n        var player;\n        return _regeneratorRuntime().wrap(function _callee143$(_context143) {\n          while (1) {\n            switch (_context143.prev = _context143.next) {\n              case 0:\n                this.keyboardDisposal.empty();\n\n                if (!this.noKeyboard) {\n                  _context143.next = 3;\n                  break;\n                }\n\n                return _context143.abrupt(\"return\");\n\n              case 3:\n                _context143.next = 5;\n                return findPlayer(this);\n\n              case 5:\n                player = _context143.sent;\n\n                if (!isUndefined(player)) {\n                  _context143.next = 8;\n                  break;\n                }\n\n                return _context143.abrupt(\"return\");\n\n              case 8:\n                this.keyboardDisposal.add(listen(player, 'keydown', function (event) {\n                  if (event.key !== 'ArrowUp' && event.key !== 'ArrowDown') return;\n                  var isUpArrow = event.key === 'ArrowUp';\n                  var newVolume = isUpArrow ? Math.min(100, _this118.volume + 5) : Math.max(0, _this118.volume - 5);\n\n                  _this118.dispatch('volume', parseInt(\"\".concat(newVolume), 10));\n                }));\n\n              case 9:\n              case \"end\":\n                return _context143.stop();\n            }\n          }\n        }, _callee143, this);\n      }));\n    }\n  }, {\n    key: \"onPlayerVolumeChange\",\n    value: function onPlayerVolumeChange() {\n      this.currentVolume = this.muted ? 0 : this.volume;\n\n      if (!this.muted && this.prevMuted && this.volume === 0) {\n        this.dispatch('volume', 30);\n      }\n\n      this.prevMuted = this.muted;\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.prevMuted = this.muted;\n      this.dispatch = createDispatcher(this);\n      this.onNoKeyboardChange();\n    }\n  }, {\n    key: \"disconnectedCallback\",\n    value: function disconnectedCallback() {\n      this.keyboardDisposal.empty();\n    }\n  }, {\n    key: \"onShowSlider\",\n    value: function onShowSlider() {\n      clearTimeout(this.hideSliderTimeout);\n      this.isSliderActive = true;\n    }\n  }, {\n    key: \"onHideSlider\",\n    value: function onHideSlider() {\n      var _this119 = this;\n\n      this.hideSliderTimeout = setTimeout(function () {\n        _this119.isSliderActive = false;\n      }, 100);\n    }\n  }, {\n    key: \"onVolumeChange\",\n    value: function onVolumeChange(event) {\n      var newVolume = event.detail;\n      this.currentVolume = newVolume;\n      this.dispatch('volume', newVolume);\n      this.dispatch('muted', newVolume === 0);\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(event) {\n      if (event.key !== 'ArrowLeft' && event.key !== 'ArrowRight') return;\n      event.stopPropagation();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        class: \"volumeControl\",\n        onMouseEnter: this.onShowSlider.bind(this),\n        onMouseLeave: this.onHideSlider.bind(this)\n      }, h(\"vm-mute-control\", {\n        keys: this.muteKeys,\n        lowVolumeIcon: this.lowVolumeIcon,\n        highVolumeIcon: this.highVolumeIcon,\n        mutedIcon: this.mutedIcon,\n        icons: this.icons,\n        tooltipPosition: this.tooltipPosition,\n        tooltipDirection: this.tooltipDirection,\n        hideTooltip: this.hideTooltip,\n        onVmFocus: this.onShowSlider.bind(this),\n        onVmBlur: this.onHideSlider.bind(this)\n      }), h(\"vm-slider\", {\n        class: {\n          hidden: this.isMobile,\n          active: this.isSliderActive\n        },\n        step: 5,\n        max: 100,\n        value: this.currentVolume,\n        label: this.i18n.volume,\n        onKeyDown: this.onKeyDown.bind(this),\n        onVmFocus: this.onShowSlider.bind(this),\n        onVmBlur: this.onHideSlider.bind(this),\n        onVmValueChange: this.onVolumeChange.bind(this)\n      }));\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"noKeyboard\": [\"onNoKeyboardChange\"],\n        \"muted\": [\"onPlayerVolumeChange\"],\n        \"volume\": [\"onPlayerVolumeChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return volumeControlCss;\n    }\n  }]);\n\n  return VolumeControl;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar mapYouTubePlaybackQuality = function mapYouTubePlaybackQuality(quality) {\n  switch (quality) {\n    case \"unknown\"\n    /* Unknown */\n    :\n      return undefined;\n\n    case \"tiny\"\n    /* Tiny */\n    :\n      return '144p';\n\n    case \"small\"\n    /* Small */\n    :\n      return '240p';\n\n    case \"medium\"\n    /* Medium */\n    :\n      return '360p';\n\n    case \"large\"\n    /* Large */\n    :\n      return '480p';\n\n    case \"hd720\"\n    /* Hd720 */\n    :\n      return '720p';\n\n    case \"hd1080\"\n    /* Hd1080 */\n    :\n      return '1080p';\n\n    case \"highres\"\n    /* Highres */\n    :\n      return '1440p';\n\n    case \"max\"\n    /* Max */\n    :\n      return '2160p';\n\n    default:\n      return undefined;\n  }\n};\n\nvar youtubeCss = \":host{z-index:var(--vm-media-z-index)}\";\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar posterCache = new Map();\n\nvar YouTube = /*#__PURE__*/function (_HTMLElement49) {\n  _inherits(YouTube, _HTMLElement49);\n\n  var _super50 = _createSuper(YouTube);\n\n  function YouTube() {\n    var _this120;\n\n    _classCallCheck(this, YouTube);\n\n    _this120 = _super50.call(this);\n\n    _this120.__registerHost();\n\n    attachShadow(_assertThisInitialized(_this120));\n    _this120.vmLoadStart = createEvent(_assertThisInitialized(_this120), \"vmLoadStart\", 7);\n    _this120.defaultInternalState = {};\n    _this120.internalState = {\n      paused: true,\n      duration: 0,\n      seeking: false,\n      playbackReady: false,\n      playbackStarted: false,\n      currentTime: 0,\n      lastTimeUpdate: 0,\n      playbackRate: 1,\n      state: -1\n    };\n    _this120.embedSrc = '';\n    _this120.mediaTitle = '';\n    /**\n     * Whether cookies should be enabled on the embed.\n     */\n\n    _this120.cookies = false;\n    /**\n     * Whether the fullscreen control should be shown.\n     */\n\n    _this120.showFullscreenControl = true;\n    /** @internal */\n\n    _this120.language = 'en';\n    /** @internal */\n\n    _this120.autoplay = false;\n    /** @internal */\n\n    _this120.controls = false;\n    /** @internal */\n\n    _this120.loop = false;\n    /** @internal */\n\n    _this120.muted = false;\n    /** @internal */\n\n    _this120.playsinline = false;\n    withComponentRegistry(_assertThisInitialized(_this120));\n    withProviderConnect(_assertThisInitialized(_this120));\n    withProviderContext(_assertThisInitialized(_this120));\n    return _this120;\n  }\n\n  _createClass(YouTube, [{\n    key: \"onVideoIdChange\",\n    value: function onVideoIdChange() {\n      if (!this.videoId) {\n        this.embedSrc = '';\n        return;\n      }\n\n      this.embedSrc = \"\".concat(this.getOrigin(), \"/embed/\").concat(this.videoId);\n      this.fetchPosterURL = this.findPosterURL();\n    }\n  }, {\n    key: \"onCustomPosterChange\",\n    value: function onCustomPosterChange() {\n      this.dispatch('currentPoster', this.poster);\n    }\n  }, {\n    key: \"connectedCallback\",\n    value: function connectedCallback() {\n      this.dispatch = createProviderDispatcher(this);\n      this.dispatch('viewType', ViewType.Video);\n      this.onVideoIdChange();\n      this.defaultInternalState = Object.assign({}, this.internalState);\n    }\n  }, {\n    key: \"componentDidLoad\",\n    value: function componentDidLoad() {\n      this.initialMuted = this.muted;\n    }\n    /** @internal */\n\n  }, {\n    key: \"getAdapter\",\n    value: function getAdapter() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee153() {\n        var _this121 = this;\n\n        var canPlayRegex;\n        return _regeneratorRuntime().wrap(function _callee153$(_context153) {\n          while (1) {\n            switch (_context153.prev = _context153.next) {\n              case 0:\n                canPlayRegex = /(?:youtu\\.be|youtube|youtube\\.com|youtube-nocookie\\.com)\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=|)((?:\\w|-){11})/;\n                return _context153.abrupt(\"return\", {\n                  getInternalPlayer: function getInternalPlayer() {\n                    return __awaiter(_this121, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee144() {\n                      return _regeneratorRuntime().wrap(function _callee144$(_context144) {\n                        while (1) {\n                          switch (_context144.prev = _context144.next) {\n                            case 0:\n                              return _context144.abrupt(\"return\", this.embed);\n\n                            case 1:\n                            case \"end\":\n                              return _context144.stop();\n                          }\n                        }\n                      }, _callee144, this);\n                    }));\n                  },\n                  play: function play() {\n                    return __awaiter(_this121, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee145() {\n                      return _regeneratorRuntime().wrap(function _callee145$(_context145) {\n                        while (1) {\n                          switch (_context145.prev = _context145.next) {\n                            case 0:\n                              this.remoteControl(\"playVideo\"\n                              /* Play */\n                              );\n\n                            case 1:\n                            case \"end\":\n                              return _context145.stop();\n                          }\n                        }\n                      }, _callee145, this);\n                    }));\n                  },\n                  pause: function pause() {\n                    return __awaiter(_this121, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee146() {\n                      return _regeneratorRuntime().wrap(function _callee146$(_context146) {\n                        while (1) {\n                          switch (_context146.prev = _context146.next) {\n                            case 0:\n                              this.remoteControl(\"pauseVideo\"\n                              /* Pause */\n                              );\n\n                            case 1:\n                            case \"end\":\n                              return _context146.stop();\n                          }\n                        }\n                      }, _callee146, this);\n                    }));\n                  },\n                  canPlay: function canPlay(type) {\n                    return __awaiter(_this121, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee147() {\n                      return _regeneratorRuntime().wrap(function _callee147$(_context147) {\n                        while (1) {\n                          switch (_context147.prev = _context147.next) {\n                            case 0:\n                              return _context147.abrupt(\"return\", isString(type) && canPlayRegex.test(type));\n\n                            case 1:\n                            case \"end\":\n                              return _context147.stop();\n                          }\n                        }\n                      }, _callee147);\n                    }));\n                  },\n                  setCurrentTime: function setCurrentTime(time) {\n                    return __awaiter(_this121, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee148() {\n                      return _regeneratorRuntime().wrap(function _callee148$(_context148) {\n                        while (1) {\n                          switch (_context148.prev = _context148.next) {\n                            case 0:\n                              if (time !== this.internalState.currentTime) {\n                                this.remoteControl(\"seekTo\"\n                                /* Seek */\n                                , time);\n                              }\n\n                            case 1:\n                            case \"end\":\n                              return _context148.stop();\n                          }\n                        }\n                      }, _callee148, this);\n                    }));\n                  },\n                  setMuted: function setMuted(muted) {\n                    return __awaiter(_this121, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee149() {\n                      return _regeneratorRuntime().wrap(function _callee149$(_context149) {\n                        while (1) {\n                          switch (_context149.prev = _context149.next) {\n                            case 0:\n                              muted ? this.remoteControl(\"mute\"\n                              /* Mute */\n                              ) : this.remoteControl(\"unMute\"\n                              /* Unmute */\n                              );\n\n                            case 1:\n                            case \"end\":\n                              return _context149.stop();\n                          }\n                        }\n                      }, _callee149, this);\n                    }));\n                  },\n                  setVolume: function setVolume(volume) {\n                    return __awaiter(_this121, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee150() {\n                      return _regeneratorRuntime().wrap(function _callee150$(_context150) {\n                        while (1) {\n                          switch (_context150.prev = _context150.next) {\n                            case 0:\n                              this.remoteControl(\"setVolume\"\n                              /* SetVolume */\n                              , volume);\n\n                            case 1:\n                            case \"end\":\n                              return _context150.stop();\n                          }\n                        }\n                      }, _callee150, this);\n                    }));\n                  },\n                  canSetPlaybackRate: function canSetPlaybackRate() {\n                    return __awaiter(_this121, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee151() {\n                      return _regeneratorRuntime().wrap(function _callee151$(_context151) {\n                        while (1) {\n                          switch (_context151.prev = _context151.next) {\n                            case 0:\n                              return _context151.abrupt(\"return\", true);\n\n                            case 1:\n                            case \"end\":\n                              return _context151.stop();\n                          }\n                        }\n                      }, _callee151);\n                    }));\n                  },\n                  setPlaybackRate: function setPlaybackRate(rate) {\n                    return __awaiter(_this121, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee152() {\n                      return _regeneratorRuntime().wrap(function _callee152$(_context152) {\n                        while (1) {\n                          switch (_context152.prev = _context152.next) {\n                            case 0:\n                              this.remoteControl(\"setPlaybackRate\"\n                              /* SetPlaybackRate */\n                              , rate);\n\n                            case 1:\n                            case \"end\":\n                              return _context152.stop();\n                          }\n                        }\n                      }, _callee152, this);\n                    }));\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context153.stop();\n            }\n          }\n        }, _callee153);\n      }));\n    }\n  }, {\n    key: \"getOrigin\",\n    value: function getOrigin() {\n      return !this.cookies ? 'https://www.youtube-nocookie.com' : 'https://www.youtube.com';\n    }\n  }, {\n    key: \"getPreconnections\",\n    value: function getPreconnections() {\n      return [this.getOrigin(), 'https://www.google.com', 'https://googleads.g.doubleclick.net', 'https://static.doubleclick.net', 'https://s.ytimg.com', 'https://i.ytimg.com'];\n    }\n  }, {\n    key: \"remoteControl\",\n    value: function remoteControl(command, arg) {\n      return this.embed.postMessage({\n        event: 'command',\n        func: command,\n        args: arg ? [arg] : undefined\n      });\n    }\n  }, {\n    key: \"buildParams\",\n    value: function buildParams() {\n      return {\n        enablejsapi: 1,\n        cc_lang_pref: this.language,\n        hl: this.language,\n        fs: this.showFullscreenControl ? 1 : 0,\n        controls: this.controls ? 1 : 0,\n        disablekb: !this.controls ? 1 : 0,\n        iv_load_policy: this.controls ? 1 : 3,\n        mute: this.initialMuted ? 1 : 0,\n        playsinline: this.playsinline ? 1 : 0,\n        autoplay: this.autoplay ? 1 : 0\n      };\n    }\n  }, {\n    key: \"onEmbedSrcChange\",\n    value: function onEmbedSrcChange() {\n      this.vmLoadStart.emit();\n      this.dispatch('viewType', ViewType.Video);\n    }\n  }, {\n    key: \"onEmbedLoaded\",\n    value: function onEmbedLoaded() {\n      var _this122 = this;\n\n      // Seems like we have to wait a random small delay or else YT player isn't ready.\n      window.setTimeout(function () {\n        return _this122.embed.postMessage({\n          event: 'listening'\n        });\n      }, 100);\n    }\n  }, {\n    key: \"findPosterURL\",\n    value: function findPosterURL() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee154() {\n        var _this123 = this;\n\n        var posterURL;\n        return _regeneratorRuntime().wrap(function _callee154$(_context154) {\n          while (1) {\n            switch (_context154.prev = _context154.next) {\n              case 0:\n                if (!posterCache.has(this.videoId)) {\n                  _context154.next = 2;\n                  break;\n                }\n\n                return _context154.abrupt(\"return\", posterCache.get(this.videoId));\n\n              case 2:\n                posterURL = function posterURL(quality) {\n                  return \"https://i.ytimg.com/vi/\".concat(_this123.videoId, \"/\").concat(quality, \".jpg\");\n                };\n                /**\n                 * We are testing a that the image has a min-width of 121px because if the thumbnail does not\n                 * exist YouTube returns a blank/error image that is 120px wide.\n                 */\n\n\n                return _context154.abrupt(\"return\", loadImage(posterURL('maxresdefault'), 121) // 1080p (no padding)\n                .catch(function () {\n                  return loadImage(posterURL('sddefault'), 121);\n                }) // 640p (padded 4:3)\n                .catch(function () {\n                  return loadImage(posterURL('hqdefault'), 121);\n                }) // 480p (padded 4:3)\n                .then(function (img) {\n                  var poster = img.src;\n                  posterCache.set(_this123.videoId, poster);\n                  return poster;\n                }));\n\n              case 4:\n              case \"end\":\n                return _context154.stop();\n            }\n          }\n        }, _callee154, this);\n      }));\n    }\n  }, {\n    key: \"onCued\",\n    value: function onCued() {\n      var _this124 = this;\n\n      if (this.internalState.playbackReady) return;\n      this.internalState = Object.assign({}, this.defaultInternalState);\n      this.dispatch('currentSrc', this.embedSrc);\n      this.dispatch('mediaType', MediaType.Video);\n      this.fetchPosterURL.then(function (poster) {\n        var _a;\n\n        _this124.dispatch('currentPoster', (_a = _this124.poster) !== null && _a !== void 0 ? _a : poster);\n\n        _this124.dispatch('playbackReady', true);\n      });\n      this.internalState.playbackReady = true;\n    }\n  }, {\n    key: \"onPlayerStateChange\",\n    value: function onPlayerStateChange(state) {\n      var _this125 = this;\n\n      // Sometimes the embed falls back to an unstarted state for some unknown reason, this will\n      // make sure the player is configured to the right starting state.\n      if (this.internalState.playbackReady && state === -1\n      /* Unstarted */\n      ) {\n        this.internalState.paused = true;\n        this.internalState.playbackStarted = false;\n        this.dispatch('buffering', false);\n        this.dispatch('paused', true);\n        this.dispatch('playbackStarted', false);\n        return;\n      }\n\n      var isPlaying = state === 1\n      /* Playing */\n      ;\n      var isBuffering = state === 3\n      /* Buffering */\n      ;\n      this.dispatch('buffering', isBuffering); // Attempt to detect `play` events early.\n\n      if (this.internalState.paused && (isBuffering || isPlaying)) {\n        this.internalState.paused = false;\n        this.dispatch('paused', false);\n\n        if (!this.internalState.playbackStarted) {\n          this.dispatch('playbackStarted', true);\n          this.internalState.playbackStarted = true;\n        }\n      }\n\n      switch (state) {\n        case 5\n        /* Cued */\n        :\n          this.onCued();\n          break;\n\n        case 1\n        /* Playing */\n        :\n          // Incase of autoplay which might skip `Cued` event.\n          this.onCued();\n          this.dispatch('playing', true);\n          break;\n\n        case 2\n        /* Paused */\n        :\n          this.internalState.paused = true;\n          this.dispatch('paused', true);\n          break;\n\n        case 0\n        /* Ended */\n        :\n          if (this.loop) {\n            window.setTimeout(function () {\n              _this125.remoteControl(\"playVideo\"\n              /* Play */\n              );\n            }, 150);\n          } else {\n            this.dispatch('playbackEnded', true);\n            this.internalState.paused = true;\n            this.dispatch('paused', true);\n          }\n\n          break;\n      }\n\n      this.internalState.state = state;\n    }\n  }, {\n    key: \"calcCurrentTime\",\n    value: function calcCurrentTime(time) {\n      var currentTime = time;\n\n      if (this.internalState.state === 0\n      /* Ended */\n      ) {\n        return this.internalState.duration;\n      }\n\n      if (this.internalState.state === 1\n      /* Playing */\n      ) {\n        var elapsedTime = (Date.now() / 1e3 - this.defaultInternalState.lastTimeUpdate) * this.internalState.playbackRate;\n        if (elapsedTime > 0) currentTime += Math.min(elapsedTime, 1);\n      }\n\n      return currentTime;\n    }\n  }, {\n    key: \"onTimeChange\",\n    value: function onTimeChange(time) {\n      var currentTime = this.calcCurrentTime(time);\n      this.dispatch('currentTime', currentTime); // This is the only way to detect `seeking`.\n\n      if (Math.abs(this.internalState.currentTime - currentTime) > 1.5) {\n        this.internalState.seeking = true;\n        this.dispatch('seeking', true);\n      }\n\n      this.internalState.currentTime = currentTime;\n    }\n  }, {\n    key: \"onBufferedChange\",\n    value: function onBufferedChange(buffered) {\n      var _this126 = this;\n\n      this.dispatch('buffered', buffered);\n      /**\n       * This is the only way to detect `seeked`. Unfortunately while the player is `paused` `seeking`\n       * and `seeked` will fire at the same time, there are no updates inbetween -_-. We need an\n       * artifical delay between the two events.\n       */\n\n      if (this.internalState.seeking && buffered > this.internalState.currentTime) {\n        window.setTimeout(function () {\n          _this126.internalState.seeking = false;\n\n          _this126.dispatch('seeking', false);\n        }, this.internalState.paused ? 100 : 0);\n      }\n    }\n  }, {\n    key: \"onEmbedMessage\",\n    value: function onEmbedMessage(event) {\n      var message = event.detail;\n      var info = message.info;\n      if (!info) return;\n      if (isObject(info.videoData)) this.dispatch('mediaTitle', info.videoData.title);\n\n      if (isNumber(info.duration)) {\n        this.internalState.duration = info.duration;\n        this.dispatch('duration', info.duration);\n      }\n\n      if (isArray(info.availablePlaybackRates)) {\n        this.dispatch('playbackRates', info.availablePlaybackRates);\n      }\n\n      if (isNumber(info.playbackRate)) {\n        this.internalState.playbackRate = info.playbackRate;\n        this.dispatch('playbackRate', info.playbackRate);\n      }\n\n      if (isNumber(info.currentTime)) this.onTimeChange(info.currentTime);\n\n      if (isNumber(info.currentTimeLastUpdated)) {\n        this.internalState.lastTimeUpdate = info.currentTimeLastUpdated;\n      }\n\n      if (isNumber(info.videoLoadedFraction)) {\n        this.onBufferedChange(info.videoLoadedFraction * this.internalState.duration);\n      }\n\n      if (isNumber(info.volume)) this.dispatch('volume', info.volume);\n      if (isBoolean(info.muted)) this.dispatch('muted', info.muted);\n\n      if (isArray(info.availableQualityLevels)) {\n        this.dispatch('playbackQualities', info.availableQualityLevels.map(function (q) {\n          return mapYouTubePlaybackQuality(q);\n        }));\n      }\n\n      if (isString(info.playbackQuality)) {\n        this.dispatch('playbackQuality', mapYouTubePlaybackQuality(info.playbackQuality));\n      }\n\n      if (isNumber(info.playerState)) this.onPlayerStateChange(info.playerState);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this127 = this;\n\n      return h(\"vm-embed\", {\n        embedSrc: this.embedSrc,\n        mediaTitle: this.mediaTitle,\n        origin: this.getOrigin(),\n        params: this.buildParams(),\n        decoder: decodeJSON,\n        preconnections: this.getPreconnections(),\n        onVmEmbedLoaded: this.onEmbedLoaded.bind(this),\n        onVmEmbedMessage: this.onEmbedMessage.bind(this),\n        onVmEmbedSrcChange: this.onEmbedSrcChange.bind(this),\n        ref: function ref(el) {\n          _this127.embed = el;\n        }\n      });\n    }\n  }], [{\n    key: \"watchers\",\n    get: function get() {\n      return {\n        \"cookies\": [\"onVideoIdChange\"],\n        \"videoId\": [\"onVideoIdChange\"],\n        \"poster\": [\"onCustomPosterChange\"]\n      };\n    }\n  }, {\n    key: \"style\",\n    get: function get() {\n      return youtubeCss;\n    }\n  }]);\n\n  return YouTube;\n}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\nvar VmAudio = /*@__PURE__*/proxyCustomElement(Audio, [4, \"vm-audio\", {\n  \"willAttach\": [4, \"will-attach\"],\n  \"crossOrigin\": [1, \"cross-origin\"],\n  \"preload\": [1],\n  \"disableRemotePlayback\": [4, \"disable-remote-playback\"],\n  \"mediaTitle\": [1, \"media-title\"]\n}]);\nvar VmCaptionControl = /*@__PURE__*/proxyCustomElement(CaptionControl, [1, \"vm-caption-control\", {\n  \"showIcon\": [1, \"show-icon\"],\n  \"hideIcon\": [1, \"hide-icon\"],\n  \"tooltipPosition\": [1, \"tooltip-position\"],\n  \"tooltipDirection\": [1, \"tooltip-direction\"],\n  \"hideTooltip\": [4, \"hide-tooltip\"],\n  \"icons\": [1],\n  \"keys\": [1],\n  \"i18n\": [16],\n  \"playbackReady\": [4, \"playback-ready\"],\n  \"textTracks\": [16],\n  \"isTextTrackVisible\": [4, \"is-text-track-visible\"],\n  \"canToggleCaptionVisibility\": [32]\n}]);\nvar VmCaptions = /*@__PURE__*/proxyCustomElement(Captions, [1, \"vm-captions\", {\n  \"hidden\": [4],\n  \"isControlsActive\": [4, \"is-controls-active\"],\n  \"isVideoView\": [4, \"is-video-view\"],\n  \"playbackStarted\": [4, \"playback-started\"],\n  \"textTracks\": [16],\n  \"currentTextTrack\": [2, \"current-text-track\"],\n  \"isTextTrackVisible\": [4, \"is-text-track-visible\"],\n  \"isEnabled\": [32],\n  \"cue\": [32],\n  \"fontSize\": [32]\n}]);\nvar VmClickToPlay = /*@__PURE__*/proxyCustomElement(ClickToPlay, [1, \"vm-click-to-play\", {\n  \"useOnMobile\": [4, \"use-on-mobile\"],\n  \"paused\": [4],\n  \"isVideoView\": [4, \"is-video-view\"],\n  \"isMobile\": [4, \"is-mobile\"]\n}]);\nvar VmControl = /*@__PURE__*/proxyCustomElement(Control, [1, \"vm-control\", {\n  \"keys\": [1],\n  \"identifier\": [1],\n  \"hidden\": [4],\n  \"label\": [1],\n  \"menu\": [1],\n  \"expanded\": [4],\n  \"pressed\": [4],\n  \"isTouch\": [4, \"is-touch\"],\n  \"describedBy\": [32],\n  \"showTapHighlight\": [32]\n}]);\nvar VmControlGroup = /*@__PURE__*/proxyCustomElement(ControlNewLine, [1, \"vm-control-group\", {\n  \"space\": [1]\n}]);\nvar VmControlSpacer = /*@__PURE__*/proxyCustomElement(ControlSpacer, [1, \"vm-control-spacer\"]);\nvar VmControls = /*@__PURE__*/proxyCustomElement(Controls, [1, \"vm-controls\", {\n  \"hidden\": [4],\n  \"fullWidth\": [4, \"full-width\"],\n  \"fullHeight\": [4, \"full-height\"],\n  \"direction\": [1],\n  \"align\": [1],\n  \"justify\": [1],\n  \"pin\": [513],\n  \"activeDuration\": [2, \"active-duration\"],\n  \"waitForPlaybackStart\": [4, \"wait-for-playback-start\"],\n  \"hideWhenPaused\": [4, \"hide-when-paused\"],\n  \"hideOnMouseLeave\": [4, \"hide-on-mouse-leave\"],\n  \"isAudioView\": [4, \"is-audio-view\"],\n  \"isSettingsActive\": [4, \"is-settings-active\"],\n  \"playbackReady\": [4, \"playback-ready\"],\n  \"isControlsActive\": [4, \"is-controls-active\"],\n  \"paused\": [4],\n  \"playbackStarted\": [4, \"playback-started\"],\n  \"isInteracting\": [32]\n}]);\nvar VmCurrentTime = /*@__PURE__*/proxyCustomElement(CurrentTime, [1, \"vm-current-time\", {\n  \"currentTime\": [2, \"current-time\"],\n  \"i18n\": [16],\n  \"alwaysShowHours\": [4, \"always-show-hours\"]\n}]);\nvar VmDailymotion = /*@__PURE__*/proxyCustomElement(Dailymotion, [1, \"vm-dailymotion\", {\n  \"videoId\": [1, \"video-id\"],\n  \"shouldAutoplayQueue\": [4, \"should-autoplay-queue\"],\n  \"showUpNextQueue\": [4, \"show-up-next-queue\"],\n  \"showShareButtons\": [4, \"show-share-buttons\"],\n  \"color\": [1],\n  \"syndication\": [1],\n  \"showDailymotionLogo\": [4, \"show-dailymotion-logo\"],\n  \"showVideoInfo\": [4, \"show-video-info\"],\n  \"language\": [1],\n  \"autoplay\": [4],\n  \"controls\": [4],\n  \"poster\": [1],\n  \"logger\": [16],\n  \"loop\": [4],\n  \"muted\": [4],\n  \"playsinline\": [4],\n  \"embedSrc\": [32],\n  \"mediaTitle\": [32]\n}]);\nvar VmDash = /*@__PURE__*/proxyCustomElement(Dash, [1, \"vm-dash\", {\n  \"src\": [1],\n  \"version\": [1],\n  \"libSrc\": [1, \"lib-src\"],\n  \"config\": [16],\n  \"autoplay\": [4],\n  \"crossOrigin\": [1, \"cross-origin\"],\n  \"preload\": [1],\n  \"poster\": [1],\n  \"controlsList\": [1, \"controls-list\"],\n  \"autoPiP\": [4, \"auto-pip\"],\n  \"disablePiP\": [4, \"disable-pip\"],\n  \"disableRemotePlayback\": [4, \"disable-remote-playback\"],\n  \"mediaTitle\": [1, \"media-title\"],\n  \"enableTextTracksByDefault\": [4, \"enable-text-tracks-by-default\"],\n  \"shouldRenderNativeTextTracks\": [4, \"should-render-native-text-tracks\"],\n  \"isTextTrackVisible\": [4, \"is-text-track-visible\"],\n  \"currentTextTrack\": [2, \"current-text-track\"],\n  \"hasAttached\": [32]\n}, [[0, \"vmMediaElChange\", \"onMediaElChange\"]]]);\nvar VmDblClickFullscreen = /*@__PURE__*/proxyCustomElement(DblClickFullscreen, [1, \"vm-dbl-click-fullscreen\", {\n  \"useOnMobile\": [4, \"use-on-mobile\"],\n  \"isFullscreenActive\": [4, \"is-fullscreen-active\"],\n  \"isVideoView\": [4, \"is-video-view\"],\n  \"playbackReady\": [4, \"playback-ready\"],\n  \"isMobile\": [4, \"is-mobile\"],\n  \"canSetFullscreen\": [32]\n}]);\nvar VmDefaultControls = /*@__PURE__*/proxyCustomElement(DefaultControls, [1, \"vm-default-controls\", {\n  \"activeDuration\": [2, \"active-duration\"],\n  \"waitForPlaybackStart\": [4, \"wait-for-playback-start\"],\n  \"hideWhenPaused\": [4, \"hide-when-paused\"],\n  \"hideOnMouseLeave\": [4, \"hide-on-mouse-leave\"],\n  \"theme\": [1],\n  \"isMobile\": [4, \"is-mobile\"],\n  \"isLive\": [4, \"is-live\"],\n  \"isAudioView\": [4, \"is-audio-view\"],\n  \"isVideoView\": [4, \"is-video-view\"]\n}]);\nvar VmDefaultSettings = /*@__PURE__*/proxyCustomElement(DefaultSettings, [1, \"vm-default-settings\", {\n  \"pin\": [513],\n  \"i18n\": [16],\n  \"playbackReady\": [4, \"playback-ready\"],\n  \"playbackRate\": [2, \"playback-rate\"],\n  \"playbackRates\": [16],\n  \"isVideoView\": [4, \"is-video-view\"],\n  \"playbackQuality\": [1, \"playback-quality\"],\n  \"playbackQualities\": [16],\n  \"textTracks\": [16],\n  \"currentTextTrack\": [2, \"current-text-track\"],\n  \"audioTracks\": [16],\n  \"currentAudioTrack\": [2, \"current-audio-track\"],\n  \"isTextTrackVisible\": [4, \"is-text-track-visible\"],\n  \"canSetPlaybackRate\": [32],\n  \"canSetPlaybackQuality\": [32],\n  \"canSetTextTrack\": [32],\n  \"canSetAudioTrack\": [32]\n}]);\nvar VmDefaultUi = /*@__PURE__*/proxyCustomElement(DefaultUI, [1, \"vm-default-ui\", {\n  \"noClickToPlay\": [4, \"no-click-to-play\"],\n  \"noDblClickFullscreen\": [4, \"no-dbl-click-fullscreen\"],\n  \"noCaptions\": [4, \"no-captions\"],\n  \"noPoster\": [4, \"no-poster\"],\n  \"noSpinner\": [4, \"no-spinner\"],\n  \"noControls\": [4, \"no-controls\"],\n  \"noSettings\": [4, \"no-settings\"],\n  \"noLoadingScreen\": [4, \"no-loading-screen\"]\n}]);\nvar VmEmbed = /*@__PURE__*/proxyCustomElement(Embed, [1, \"vm-embed\", {\n  \"embedSrc\": [1, \"embed-src\"],\n  \"mediaTitle\": [1, \"media-title\"],\n  \"params\": [1],\n  \"origin\": [1],\n  \"preconnections\": [16],\n  \"decoder\": [16],\n  \"srcWithParams\": [32],\n  \"hasEnteredViewport\": [32]\n}, [[8, \"message\", \"onWindowMessage\"]]]);\nvar VmEndTime = /*@__PURE__*/proxyCustomElement(EndTime, [1, \"vm-end-time\", {\n  \"duration\": [2],\n  \"i18n\": [16],\n  \"alwaysShowHours\": [4, \"always-show-hours\"]\n}]);\nvar VmFile = /*@__PURE__*/proxyCustomElement(File, [6, \"vm-file\", {\n  \"willAttach\": [4, \"will-attach\"],\n  \"crossOrigin\": [1, \"cross-origin\"],\n  \"preload\": [1],\n  \"poster\": [1],\n  \"mediaTitle\": [1, \"media-title\"],\n  \"controlsList\": [1, \"controls-list\"],\n  \"autoPiP\": [4, \"auto-pip\"],\n  \"disablePiP\": [4, \"disable-pip\"],\n  \"disableRemotePlayback\": [4, \"disable-remote-playback\"],\n  \"viewType\": [1, \"view-type\"],\n  \"playbackRates\": [16],\n  \"language\": [1],\n  \"autoplay\": [4],\n  \"controls\": [4],\n  \"logger\": [16],\n  \"loop\": [4],\n  \"muted\": [4],\n  \"playsinline\": [4],\n  \"noConnect\": [4, \"no-connect\"],\n  \"paused\": [4],\n  \"currentTime\": [2, \"current-time\"],\n  \"volume\": [2],\n  \"playbackReady\": [4, \"playback-ready\"],\n  \"playbackStarted\": [4, \"playback-started\"],\n  \"currentTextTrack\": [2, \"current-text-track\"],\n  \"hasCustomTextManager\": [4, \"has-custom-text-manager\"],\n  \"isTextTrackVisible\": [4, \"is-text-track-visible\"],\n  \"shouldRenderNativeTextTracks\": [4, \"should-render-native-text-tracks\"],\n  \"vmPoster\": [32]\n}, [[0, \"vmMediaProviderConnect\", \"onProviderConnect\"], [0, \"vmMediaProviderDisconnect\", \"onProviderDisconnect\"]]]);\nvar VmFullscreenControl = /*@__PURE__*/proxyCustomElement(FullscreenControl, [1, \"vm-fullscreen-control\", {\n  \"enterIcon\": [1, \"enter-icon\"],\n  \"exitIcon\": [1, \"exit-icon\"],\n  \"icons\": [1],\n  \"tooltipPosition\": [1, \"tooltip-position\"],\n  \"tooltipDirection\": [1, \"tooltip-direction\"],\n  \"hideTooltip\": [4, \"hide-tooltip\"],\n  \"keys\": [1],\n  \"isFullscreenActive\": [4, \"is-fullscreen-active\"],\n  \"i18n\": [16],\n  \"playbackReady\": [4, \"playback-ready\"],\n  \"canSetFullscreen\": [32]\n}]);\nvar VmHls = /*@__PURE__*/proxyCustomElement(HLS, [4, \"vm-hls\", {\n  \"version\": [1],\n  \"libSrc\": [1, \"lib-src\"],\n  \"config\": [8],\n  \"crossOrigin\": [1, \"cross-origin\"],\n  \"preload\": [1],\n  \"poster\": [1],\n  \"controlsList\": [1, \"controls-list\"],\n  \"autoPiP\": [4, \"auto-pip\"],\n  \"disablePiP\": [4, \"disable-pip\"],\n  \"disableRemotePlayback\": [4, \"disable-remote-playback\"],\n  \"playbackReady\": [4, \"playback-ready\"],\n  \"mediaTitle\": [1, \"media-title\"],\n  \"hasAttached\": [32]\n}, [[0, \"vmMediaElChange\", \"onMediaElChange\"], [0, \"vmSrcSetChange\", \"onSrcChange\"]]]);\nvar VmIcon = /*@__PURE__*/proxyCustomElement(Icon, [1, \"vm-icon\", {\n  \"name\": [1],\n  \"src\": [1],\n  \"label\": [1],\n  \"library\": [1],\n  \"icons\": [1],\n  \"svg\": [32]\n}]);\nvar VmIconLibrary = /*@__PURE__*/proxyCustomElement(IconLibrary, [1, \"vm-icon-library\", {\n  \"name\": [1],\n  \"resolver\": [16],\n  \"icons\": [1]\n}]);\nvar VmLiveIndicator = /*@__PURE__*/proxyCustomElement(LiveIndicator, [1, \"vm-live-indicator\", {\n  \"isLive\": [4, \"is-live\"],\n  \"i18n\": [16]\n}]);\nvar VmLoadingScreen = /*@__PURE__*/proxyCustomElement(LoadingScreen, [1, \"vm-loading-screen\", {\n  \"playbackReady\": [4, \"playback-ready\"],\n  \"hideDots\": [4, \"hide-dots\"]\n}]);\nvar VmMenu = /*@__PURE__*/proxyCustomElement(Menu, [1, \"vm-menu\", {\n  \"active\": [1540],\n  \"identifier\": [1],\n  \"controller\": [16],\n  \"slideInDirection\": [1, \"slide-in-direction\"],\n  \"activeMenuItem\": [32],\n  \"activeSubmenu\": [32]\n}, [[0, \"vmOpenSubmenu\", \"onOpenSubmenu\"], [0, \"vmCloseSubmenu\", \"onCloseSubmenu\"], [8, \"click\", \"onWindowClick\"], [8, \"keydown\", \"onWindowKeyDown\"]]]);\nvar VmMenuItem = /*@__PURE__*/proxyCustomElement(MenuItem, [1, \"vm-menu-item\", {\n  \"identifier\": [1],\n  \"hidden\": [4],\n  \"label\": [1],\n  \"menu\": [16],\n  \"expanded\": [4],\n  \"checked\": [4],\n  \"hint\": [1],\n  \"badge\": [1],\n  \"checkIcon\": [1, \"check-icon\"],\n  \"icons\": [1],\n  \"isTouch\": [4, \"is-touch\"],\n  \"showTapHighlight\": [32]\n}]);\nvar VmMenuRadio = /*@__PURE__*/proxyCustomElement(MenuRadio, [1, \"vm-menu-radio\", {\n  \"label\": [1],\n  \"value\": [1],\n  \"checked\": [1028],\n  \"badge\": [1],\n  \"checkIcon\": [1, \"check-icon\"],\n  \"icons\": [1]\n}]);\nvar VmMenuRadioGroup = /*@__PURE__*/proxyCustomElement(MenuRadioGroup, [1, \"vm-menu-radio-group\", {\n  \"value\": [1025]\n}, [[0, \"vmCheck\", \"onSelectionChange\"]]]);\nvar VmMuteControl = /*@__PURE__*/proxyCustomElement(MuteControl, [1, \"vm-mute-control\", {\n  \"lowVolumeIcon\": [1, \"low-volume-icon\"],\n  \"highVolumeIcon\": [1, \"high-volume-icon\"],\n  \"mutedIcon\": [1, \"muted-icon\"],\n  \"icons\": [1],\n  \"tooltipPosition\": [1, \"tooltip-position\"],\n  \"tooltipDirection\": [1, \"tooltip-direction\"],\n  \"hideTooltip\": [4, \"hide-tooltip\"],\n  \"keys\": [1],\n  \"volume\": [2],\n  \"muted\": [4],\n  \"i18n\": [16]\n}]);\nvar VmPipControl = /*@__PURE__*/proxyCustomElement(PiPControl, [1, \"vm-pip-control\", {\n  \"enterIcon\": [1, \"enter-icon\"],\n  \"exitIcon\": [1, \"exit-icon\"],\n  \"icons\": [1],\n  \"tooltipPosition\": [1, \"tooltip-position\"],\n  \"tooltipDirection\": [1, \"tooltip-direction\"],\n  \"hideTooltip\": [4, \"hide-tooltip\"],\n  \"keys\": [1],\n  \"isPiPActive\": [4, \"is-pi-p-active\"],\n  \"i18n\": [16],\n  \"playbackReady\": [4, \"playback-ready\"],\n  \"canSetPiP\": [32]\n}]);\nvar VmPlaybackControl = /*@__PURE__*/proxyCustomElement(PlaybackControl, [1, \"vm-playback-control\", {\n  \"playIcon\": [1, \"play-icon\"],\n  \"pauseIcon\": [1, \"pause-icon\"],\n  \"icons\": [1],\n  \"tooltipPosition\": [1, \"tooltip-position\"],\n  \"tooltipDirection\": [1, \"tooltip-direction\"],\n  \"hideTooltip\": [4, \"hide-tooltip\"],\n  \"keys\": [1],\n  \"paused\": [4],\n  \"i18n\": [16]\n}]);\nvar VmPlayer = /*@__PURE__*/proxyCustomElement(Player, [1, \"vm-player\", {\n  \"logger\": [16],\n  \"theme\": [513],\n  \"icons\": [513],\n  \"paused\": [1028],\n  \"playing\": [1028],\n  \"duration\": [1026],\n  \"mediaTitle\": [1025, \"media-title\"],\n  \"currentProvider\": [1025, \"current-provider\"],\n  \"currentSrc\": [1025, \"current-src\"],\n  \"currentPoster\": [1025, \"current-poster\"],\n  \"currentTime\": [1026, \"current-time\"],\n  \"autoplay\": [4],\n  \"ready\": [1540],\n  \"playbackReady\": [1028, \"playback-ready\"],\n  \"loop\": [4],\n  \"muted\": [1028],\n  \"buffered\": [1026],\n  \"playbackRate\": [1026, \"playback-rate\"],\n  \"playbackRates\": [1040],\n  \"playbackQuality\": [1025, \"playback-quality\"],\n  \"playbackQualities\": [1040],\n  \"seeking\": [1028],\n  \"debug\": [4],\n  \"playbackStarted\": [1028, \"playback-started\"],\n  \"playbackEnded\": [1028, \"playback-ended\"],\n  \"buffering\": [1028],\n  \"controls\": [4],\n  \"isControlsActive\": [4, \"is-controls-active\"],\n  \"isSettingsActive\": [1028, \"is-settings-active\"],\n  \"volume\": [1026],\n  \"isFullscreenActive\": [1028, \"is-fullscreen-active\"],\n  \"aspectRatio\": [1025, \"aspect-ratio\"],\n  \"viewType\": [1025, \"view-type\"],\n  \"isAudioView\": [1028, \"is-audio-view\"],\n  \"isVideoView\": [1028, \"is-video-view\"],\n  \"mediaType\": [1025, \"media-type\"],\n  \"isAudio\": [1028, \"is-audio\"],\n  \"isVideo\": [1028, \"is-video\"],\n  \"isLive\": [1028, \"is-live\"],\n  \"isMobile\": [1028, \"is-mobile\"],\n  \"isTouch\": [1028, \"is-touch\"],\n  \"isPiPActive\": [1028, \"is-pi-p-active\"],\n  \"textTracks\": [16],\n  \"currentTextTrack\": [2, \"current-text-track\"],\n  \"isTextTrackVisible\": [4, \"is-text-track-visible\"],\n  \"shouldRenderNativeTextTracks\": [4, \"should-render-native-text-tracks\"],\n  \"audioTracks\": [16],\n  \"currentAudioTrack\": [2, \"current-audio-track\"],\n  \"autopause\": [4],\n  \"playsinline\": [4],\n  \"language\": [1025],\n  \"translations\": [1040],\n  \"languages\": [1040],\n  \"i18n\": [1040],\n  \"container\": [32]\n}, [[0, \"vmError\", \"onError\"]]]);\nvar VmPoster = /*@__PURE__*/proxyCustomElement(Poster, [1, \"vm-poster\", {\n  \"fit\": [1],\n  \"isVideoView\": [4, \"is-video-view\"],\n  \"currentPoster\": [1, \"current-poster\"],\n  \"mediaTitle\": [1, \"media-title\"],\n  \"playbackStarted\": [4, \"playback-started\"],\n  \"currentTime\": [2, \"current-time\"],\n  \"isHidden\": [32],\n  \"isActive\": [32],\n  \"hasLoaded\": [32]\n}]);\nvar VmScrim = /*@__PURE__*/proxyCustomElement(Scrim, [1, \"vm-scrim\", {\n  \"gradient\": [1],\n  \"isVideoView\": [4, \"is-video-view\"],\n  \"isControlsActive\": [4, \"is-controls-active\"]\n}]);\nvar VmScrubberControl = /*@__PURE__*/proxyCustomElement(ScrubberControl, [1, \"vm-scrubber-control\", {\n  \"alwaysShowHours\": [4, \"always-show-hours\"],\n  \"hideTooltip\": [4, \"hide-tooltip\"],\n  \"currentTime\": [2, \"current-time\"],\n  \"duration\": [2],\n  \"noKeyboard\": [4, \"no-keyboard\"],\n  \"buffering\": [4],\n  \"buffered\": [2],\n  \"i18n\": [16],\n  \"timestamp\": [32],\n  \"endTime\": [32]\n}]);\nvar VmSettings = /*@__PURE__*/proxyCustomElement(Settings, [1, \"vm-settings\", {\n  \"pin\": [513],\n  \"active\": [1540],\n  \"isMobile\": [4, \"is-mobile\"],\n  \"isAudioView\": [4, \"is-audio-view\"],\n  \"menuHeight\": [32]\n}]);\nvar VmSettingsControl = /*@__PURE__*/proxyCustomElement(SettingsControl, [1, \"vm-settings-control\", {\n  \"icon\": [1],\n  \"icons\": [1],\n  \"tooltipPosition\": [1, \"tooltip-position\"],\n  \"tooltipDirection\": [1, \"tooltip-direction\"],\n  \"menu\": [1],\n  \"expanded\": [4],\n  \"i18n\": [16],\n  \"vmSettings\": [32]\n}]);\nvar VmSkeleton = /*@__PURE__*/proxyCustomElement(Skeleton, [1, \"vm-skeleton\", {\n  \"effect\": [1],\n  \"ready\": [4],\n  \"hidden\": [32]\n}]);\nvar VmSlider = /*@__PURE__*/proxyCustomElement(Slider, [1, \"vm-slider\", {\n  \"step\": [2],\n  \"min\": [2],\n  \"max\": [2],\n  \"value\": [2],\n  \"valueText\": [1, \"value-text\"],\n  \"label\": [1]\n}]);\nvar VmSpinner = /*@__PURE__*/proxyCustomElement(Spinner, [1, \"vm-spinner\", {\n  \"isVideoView\": [4, \"is-video-view\"],\n  \"currentProvider\": [1, \"current-provider\"],\n  \"showWhenMediaLoading\": [4, \"show-when-media-loading\"],\n  \"playbackReady\": [4, \"playback-ready\"],\n  \"buffering\": [4],\n  \"isHidden\": [32],\n  \"isActive\": [32]\n}]);\nvar VmSubmenu = /*@__PURE__*/proxyCustomElement(Submenu, [1, \"vm-submenu\", {\n  \"label\": [1],\n  \"hint\": [1],\n  \"slideInDirection\": [1, \"slide-in-direction\"],\n  \"active\": [1540],\n  \"menu\": [32],\n  \"controller\": [32]\n}]);\nvar VmTime = /*@__PURE__*/proxyCustomElement(Time, [1, \"vm-time\", {\n  \"label\": [1],\n  \"seconds\": [2],\n  \"alwaysShowHours\": [4, \"always-show-hours\"]\n}]);\nvar VmTimeProgress = /*@__PURE__*/proxyCustomElement(TimeProgress, [1, \"vm-time-progress\", {\n  \"separator\": [1],\n  \"alwaysShowHours\": [4, \"always-show-hours\"]\n}]);\nvar VmTooltip = /*@__PURE__*/proxyCustomElement(Tooltip, [1, \"vm-tooltip\", {\n  \"hidden\": [4],\n  \"active\": [4],\n  \"position\": [1],\n  \"direction\": [1],\n  \"isTouch\": [4, \"is-touch\"],\n  \"isMobile\": [4, \"is-mobile\"]\n}]);\nvar VmUi = /*@__PURE__*/proxyCustomElement(UI, [1, \"vm-ui\", {\n  \"isVideoView\": [4, \"is-video-view\"],\n  \"playsinline\": [4],\n  \"isFullscreenActive\": [4, \"is-fullscreen-active\"]\n}]);\nvar VmVideo = /*@__PURE__*/proxyCustomElement(Video, [4, \"vm-video\", {\n  \"willAttach\": [4, \"will-attach\"],\n  \"hasCustomTextManager\": [4, \"has-custom-text-manager\"],\n  \"crossOrigin\": [1, \"cross-origin\"],\n  \"preload\": [1],\n  \"poster\": [1],\n  \"controlsList\": [1, \"controls-list\"],\n  \"autoPiP\": [4, \"auto-pip\"],\n  \"disablePiP\": [4, \"disable-pip\"],\n  \"disableRemotePlayback\": [4, \"disable-remote-playback\"],\n  \"mediaTitle\": [1, \"media-title\"]\n}, [[0, \"vmMediaProviderConnect\", \"onProviderConnect\"], [0, \"vmMediaProviderDisconnect\", \"onProviderDisconnect\"]]]);\nvar VmVimeo = /*@__PURE__*/proxyCustomElement(Vimeo, [1, \"vm-vimeo\", {\n  \"videoId\": [1, \"video-id\"],\n  \"byline\": [4],\n  \"color\": [1],\n  \"portrait\": [4],\n  \"noAutoAspectRatio\": [4, \"no-auto-aspect-ratio\"],\n  \"poster\": [1],\n  \"cookies\": [4],\n  \"language\": [1],\n  \"aspectRatio\": [1, \"aspect-ratio\"],\n  \"autoplay\": [4],\n  \"controls\": [4],\n  \"logger\": [16],\n  \"loop\": [4],\n  \"muted\": [4],\n  \"playsinline\": [4],\n  \"embedSrc\": [32],\n  \"mediaTitle\": [32]\n}]);\nvar VmVolumeControl = /*@__PURE__*/proxyCustomElement(VolumeControl, [1, \"vm-volume-control\", {\n  \"lowVolumeIcon\": [1, \"low-volume-icon\"],\n  \"highVolumeIcon\": [1, \"high-volume-icon\"],\n  \"mutedIcon\": [1, \"muted-icon\"],\n  \"icons\": [1],\n  \"tooltipPosition\": [1, \"tooltip-position\"],\n  \"tooltipDirection\": [1, \"tooltip-direction\"],\n  \"hideTooltip\": [4, \"hide-tooltip\"],\n  \"muteKeys\": [1, \"mute-keys\"],\n  \"noKeyboard\": [4, \"no-keyboard\"],\n  \"muted\": [4],\n  \"volume\": [2],\n  \"isMobile\": [4, \"is-mobile\"],\n  \"i18n\": [16],\n  \"currentVolume\": [32],\n  \"isSliderActive\": [32]\n}]);\nvar VmYoutube = /*@__PURE__*/proxyCustomElement(YouTube, [1, \"vm-youtube\", {\n  \"cookies\": [4],\n  \"videoId\": [1, \"video-id\"],\n  \"showFullscreenControl\": [4, \"show-fullscreen-control\"],\n  \"poster\": [1],\n  \"language\": [1],\n  \"autoplay\": [4],\n  \"controls\": [4],\n  \"logger\": [16],\n  \"loop\": [4],\n  \"muted\": [4],\n  \"playsinline\": [4],\n  \"embedSrc\": [32],\n  \"mediaTitle\": [32]\n}]);\n\nvar defineCustomElements = function defineCustomElements(opts) {\n  if (typeof customElements !== 'undefined') {\n    [VmAudio, VmCaptionControl, VmCaptions, VmClickToPlay, VmControl, VmControlGroup, VmControlSpacer, VmControls, VmCurrentTime, VmDailymotion, VmDash, VmDblClickFullscreen, VmDefaultControls, VmDefaultSettings, VmDefaultUi, VmEmbed, VmEndTime, VmFile, VmFullscreenControl, VmHls, VmIcon, VmIconLibrary, VmLiveIndicator, VmLoadingScreen, VmMenu, VmMenuItem, VmMenuRadio, VmMenuRadioGroup, VmMuteControl, VmPipControl, VmPlaybackControl, VmPlayer, VmPoster, VmScrim, VmScrubberControl, VmSettings, VmSettingsControl, VmSkeleton, VmSlider, VmSpinner, VmSubmenu, VmTime, VmTimeProgress, VmTooltip, VmUi, VmVideo, VmVimeo, VmVolumeControl, VmYoutube].forEach(function (cmp) {\n      if (!customElements.get(cmp.is)) {\n        customElements.define(cmp.is, cmp, opts);\n      }\n    });\n  }\n};\n\nexport { COMPONENT_NAME_KEY, MediaType, PLAYER_KEY, Provider, REGISTRATION_KEY, REGISTRY_KEY, ViewType, VmAudio, VmCaptionControl, VmCaptions, VmClickToPlay, VmControl, VmControlGroup, VmControlSpacer, VmControls, VmCurrentTime, VmDailymotion, VmDash, VmDblClickFullscreen, VmDefaultControls, VmDefaultSettings, VmDefaultUi, VmEmbed, VmEndTime, VmFile, VmFullscreenControl, VmHls, VmIcon, VmIconLibrary, VmLiveIndicator, VmLoadingScreen, VmMenu, VmMenuItem, VmMenuRadio, VmMenuRadioGroup, VmMuteControl, VmPipControl, VmPlaybackControl, VmPlayer, VmPoster, VmScrim, VmScrubberControl, VmSettings, VmSettingsControl, VmSkeleton, VmSlider, VmSpinner, VmSubmenu, VmTime, VmTimeProgress, VmTooltip, VmUi, VmVideo, VmVimeo, VmVolumeControl, VmYoutube, createDispatcher, defineCustomElements, findPlayer, getComponentFromRegistry, getPlayerFromRegistry, initialState, isComponentRegistered, isWritableProp, usePlayerContext, watchComponentRegistry, withComponentRegistry, withPlayerContext };","map":{"version":3,"names":["getElement","getRenderingRef","writeTask","h","attachShadow","Host","createEvent","Fragment","proxyCustomElement","setAssetPath","setPlatformOptions","listen","node","event","handler","options","addEventListener","removeEventListener","fireEventAndRetry","el","onFail","interval","maxRetries","timeout","attempt","found","retry","setTimeout","dispatchEvent","window","clearTimeout","isColliding","a","b","translateAx","translateAy","translateBx","translateBy","aRect","getBoundingClientRect","bRect","left","right","top","bottom","noop","isNull","value","isUndefined","isNil","getConstructor","constructor","undefined","isObject","Object","isNumber","Number","isNaN","isString","String","isBoolean","Boolean","isFunction","Function","isArray","Array","isInstanceOf","deferredPromise","resolve","reject","promise","Promise","res","rej","wrapStencilHook","component","lifecycle","hook","prevHook","call","createStencilHook","onConnect","onDisconnect","hasLoaded","FIND_PLAYER_EVENT","withFindPlayer","player","off","stopPropagation","detail","findPlayer","ref","HTMLElement","search","stopFiring","CustomEvent","bubbles","composed","nodeName","MediaType","STATE_CHANGE_EVENT","createDispatcher","prop","by","en","play","pause","playback","scrubber","scrubberLabel","played","duration","buffered","close","currentTime","live","volume","mute","unmute","audio","default","captions","subtitlesOrCc","enableCaptions","disableCaptions","auto","fullscreen","enterFullscreen","exitFullscreen","settings","seekForward","seekBackward","seekTotal","normal","none","playbackRate","playbackQuality","loop","disabled","enabled","pip","enterPiP","exitPiP","initialState","theme","paused","playing","currentProvider","mediaTitle","currentSrc","currentPoster","textTracks","currentTextTrack","audioTracks","currentAudioTrack","isTextTrackVisible","shouldRenderNativeTextTracks","icons","autoplay","ready","playbackReady","muted","playbackRates","playbackQualities","seeking","debug","playbackStarted","playbackEnded","buffering","controls","isControlsActive","isFullscreenActive","aspectRatio","viewType","isAudioView","isVideoView","mediaType","isAudio","isVideo","isMobile","isTouch","isSettingsActive","isLive","isPiPActive","autopause","playsinline","language","languages","translations","i18n","writableProps","Set","isWritableProp","has","resetableProps","shouldPropResetOnMediaChange","ViewType","Disposal","dispose","callback","push","forEach","fn","__awaiter$y","__awaiter","thisArg","_arguments","P","generator","adopt","fulfilled","step","next","e","rejected","result","done","then","apply","PLAYER_KEY","Symbol","COMPONENT_NAME_KEY","REGISTRY_KEY","REGISTRATION_KEY","REGISTER_COMPONENT_EVENT","COMPONENT_REGISTERED_EVENT","COMPONENT_DEREGISTERED_EVENT","getRegistrant","withComponentRegistry","name","registryId","registrant","toLowerCase","buildEvent","eventName","registerEvent","withComponentRegistrar","registry","Map","disposal","onDeregister","delete","onRegister","set","add","clear","empty","isComponentRegistered","_a","from","values","some","r","getPlayerFromRegistry","getComponentFromRegistry","_b","filter","watchComponentRegistry","onChange","listener","reg","createDeferredPromise","openWormhole","Component","props","isBlocking","isConstructor","Proto","prototype","componentWillLoad","_this","onOpen","consumer","fields","updater","target","willLoad","multiverse","updateConsumer","state","field","Universe","create","creator","wormholes","universe","connectedCallback","disconnectedCallback","connectedCallback_1","disconnectedCallback_1","Provider","children","get","opening","LOAD_START_EVENT","isToggleStateEvent","hasShortenedEventName","getEventName","replace","charAt","toUpperCase","slice","firePlayerEvent","newValue","oldValue","events","__awaiter$x","withPlayerContext","usePlayerContext","playerRef","listeners","map","audioRegex","videoRegex","hlsRegex","hlsTypeRegex","dashRegex","PROVIDER_CHANGE_EVENT","createProviderDispatcher","providerWritableProps","isProviderWritableProp","__awaiter$w","PROVIDER_CACHE_KEY","PROVIDER_CONNECT_EVENT","PROVIDER_DISCONNECT_EVENT","buildProviderConnectEvent","host","withProviderHost","connector","cache","initCache","keys","provider","onProviderDisconnect","stopImmediatePropagation","hostRef","find","logger","warn","withProviderConnect","connectEvent","__awaiter$v","Audio","__registerHost","willAttach","preload","fileProvider","getAdapter","adapter","canPlay","type","test","noConnect","crossOrigin","disableRemotePlayback","captionControlCss","__awaiter$u","CaptionControl","canToggleCaptionVisibility","showIcon","hideIcon","tooltipPosition","hideTooltip","length","canSetTextTrackVisibility","onTextTracksChange","setTextTrackVisibility","tooltip","tooltipWithHint","hidden","label","pressed","onClick","bind","library","position","direction","tooltipDirection","watch$1","collisions","update","controlsEl","controlsHeight","parseFloat","getComputedStyle","height","watchedEl","watchedElCollisions","hasCollided","willCollide","style","setProperty","Math","max","registerControlsForCollisionDetection","getInnerEl","shadowRoot","querySelector","innerEl","withControlsCollisionDetection","captionsCss","__awaiter$t","Captions","sizeDisposal","textDisposal","isEnabled","fontSize","textTrack","renderCues","activeCues","renderCurrentCue","dispatch","onPlayerResize","getContainer","container","resizeObs","ResizeObserver","entries","entry","width","contentRect","observe","cue","div","document","createElement","append","getCueAsHTML","innerHTML","trim","transform","class","fontMd","fontLg","fontXl","inactive","clickToPlayCss","__awaiter$s","ClickToPlay","useOnMobile","clickToPlay","controlCss","__awaiter$r","Control","vmInteractionChange","vmFocus","vmBlur","keyboardDisposal","showTapHighlight","codes","split","includes","key","button","click","findTooltip","onKeysChange","focus","blur","describedBy","id","active","emit","onShowTooltip","onHideTooltip","isMenuExpanded","expanded","isPressed","notTouch","tapHighlight","identifier","menu","onTouchStart","onTouchEnd","onFocus","onBlur","onMouseEnter","onMouseLeave","controlGroupCss","ControlNewLine","space","controlGroup","spaceTop","spaceBottom","controlSpacerCss","ControlSpacer","debounce","func","wait","immediate","executedFunction","args","context","later","delayedFunctionCall","callNow","controlsCss","__awaiter$q","hideControlsTimeout","Controls","isInteracting","fullWidth","fullHeight","align","justify","pin","activeDuration","waitForPlaybackStart","hideWhenPaused","hideOnMouseLeave","onControlsChange","setupPlayerListeners","hide","show","hideWithDelay","pos","s","video","assign","getPosition","flexDirection","alignItems","justifyContent","onStartInteraction","onEndInteraction","currentTimeCss","CurrentTime","alwaysShowHours","seconds","IS_CLIENT","UA","navigator","userAgent","IS_IOS","IS_ANDROID","IS_MOBILE","IS_IPHONE","platform","IS_CHROME","chrome","safari","onMobileChange","onResize","innerWidth","onTouchInputChange","lastTouchTime","offTouchListener","Date","getTime","offMouseListener","canRotateScreen","screen","orientation","lock","canUsePiPInChrome","pictureInPictureEnabled","disablePictureInPicture","canUsePiPInSafari","webkitSupportsPresentationMode","webkitSetPresentationMode","canUsePiP","canAutoplay","setAttribute","opacity","catch","tryParseJSON","json","JSON","parse","isObjOrJSON","input","startsWith","objOrParseJSON","loadImage","src","minWidth","image","Image","onload","onerror","naturalWidth","loadScript","onLoad","onError","script","firstScriptTag","getElementsByTagName","parentNode","insertBefore","decodeJSON","data","tryDecodeURIComponent","fallback","decodeURIComponent","QUERY_STRING_REGEX","parseQueryString","qs","params","match","exec","currValue","serializeQueryString","appendQueryParam","param","v","encodeURIComponent","join","preconnect","url","rel","as","link","href","head","appendQueryStringToURL","mainAndQuery","appendParamsToURL","decodeQueryString","pendingSDKRequests","loadSDK","sdkGlobalVar","sdkReadyVar","isLoaded","loadScriptFn","getGlobal","exports","module","existingGlobal","onLoaded","sdk","request","previousOnReady","withProviderContext","additionalProps","dailymotionCss","__awaiter$p","videoInfoCache$1","Dailymotion","vmLoadStart","vmError","defaultInternalState","internalState","isAdsPlaying","embedSrc","shouldAutoplayQueue","showUpNextQueue","showShareButtons","showDailymotionLogo","showVideoInfo","videoId","getOrigin","fetchVideoInfo","getVideoInfo","pendingMediaTitleCall","remoteControl","poster","Video","onVideoIdChange","initialMuted","command","arg","embed","postMessage","parameters","syndication","color","apiEndpoint","fetch","response","thumbnail_1080_url","msg","all","info","title","time","floor","qualities","q","quality","error","canPlayRegex","getInternalPlayer","setCurrentTime","setMuted","setVolume","canSetPlaybackQuality","setPlaybackQuality","canSetFullscreen","origin","buildParams","decoder","preconnections","getPreconnections","onVmEmbedMessage","onEmbedMessage","onVmEmbedSrcChange","onEmbedSrcChange","dashCss","__awaiter$o","Dash","textTracksDisposal","hasAttached","version","config","enableTextTracksByDefault","dash","attachSource","hideCurrentTextTrack","enableForcedTextStreaming","setTextTrack","track","mediaEl","mode","setupDash","destroyDash","libSrc","DashSDK","MediaPlayer","initialize","setTextDefaultEnabled","on","PLAYBACK_METADATA_LOADED","dispatchLevels","listenToTextTracksForChanges","TRACK_CHANGE_RENDERED","ERROR","reset","level","getBitrateInfoListFor","findIndex","levelToPlaybackQuality","levels","_c","currentTrack","getCurrentTrackFor","index","getTextTracks","videoProvider","canVideoProviderPlay","_e","_d","findLevelIndexFromQuality","updateSettings","streaming","abr","autoSwitchBitrate","setQualityFor","setCurrentTextTrack","trackId","_f","isVisible","_g","enableText","controlsList","autoPiP","disablePiP","hasCustomTextManager","dblClickFullscreenCss","__awaiter$n","DblClickFullscreen","clicks","forceClick","onTriggerClickToPlay","onToggleFullscreen","dblClickFullscreen","defaultControlsCss","DefaultControls","marginLeft","paddingRight","gradient","buildAudioControls","buildMobileVideoControls","buildDesktopVideoControls","defaultSettingsCss","__awaiter$m","DefaultSettings","canSetPlaybackRate","canSetTextTrack","canSetAudioTrack","radio","hint","formatRate","rate","onVmCheck","onPlaybackRateSelect","getBadge","verticalPixels","parseInt","onPlaybackQualitySelect","badge","onTextTrackSelect","concat","i","setCurrentAudioTrack","onAudioTrackSelect","buildAudioTracksMenu","buildPlaybackRateSubmenu","buildPlaybackQualitySubmenu","buildTextTracksSubmenu","defaultUiCss","DefaultUI","noClickToPlay","noDblClickFullscreen","noCaptions","noPoster","noSpinner","noControls","noSettings","noLoadingScreen","LazyLoader","attributes","intersectionObs","canObserveIntersection","IntersectionObserver","onIntersection","mutationObs","canObserveMutations","MutationObserver","onMutation","childList","subtree","attributeFilter","lazyLoad","disconnect","load","intersectionRatio","isIntersecting","unobserve","root","querySelectorAll","requestAnimationFrame","getLazyElements","loadEl","embedCss","__awaiter$l","idCount$4","connected","Embed","vmEmbedSrcChange","vmEmbedMessage","vmEmbedLoaded","srcWithParams","hasEnteredViewport","connection","lazyLoader","getAttribute","removeAttribute","genIframeId","destroy","originMatches","source","iframe","contentWindow","message","stringify","allowFullScreen","allow","endTimeCss","EndTime","fullscreenEnabled","fullscreenElement","requestFullscreen","fullscreenchange","fullscreenerror","webkit","moz","ms","document$1","vendor","fscreen","element","requestFullscreenFunction","fullscreenPseudoClass","val","onfullscreenchange","onfullscreenerror","mitt","n","t","splice","indexOf","__awaiter$k","FullscreenController","emitter","isSupportedNatively","isNativeFullscreen","matches","isFullscreen","isSupported","throwIfNoFullscreenSupport","addFullscreenChangeEventListener","handleFullscreenChange","addFullscreenErrorEventListener","handleFullscreenError","makeEnterFullscreenRequest","makeExitFullscreenRequest","Error","__awaiter$j","VideoFullscreenController","presentationController","isFullscreenMode","setPresentationMode","handlePresentationModeChange","__awaiter$i","VideoPresentationController","tagName","videoElement","webkitPresentationMode","presentationMode","webkitSupportsFullscreen","fileCss","__awaiter$h","File","vmMediaElChange","vmSrcSetChange","wasPausedBeforeSeeking","currentSrcSet","mediaQueryDisposal","fullscreenController","regs","vmPoster","initLazyLoader","onViewTypeChange","onPosterChange","onMediaTitleChange","addPresentationControllerListeners","prevMediaEl","addPresentationModeChangeEventListener","cancelTimeUpdates","refresh","didSrcSetChange","child","sources","srcSet","media","didChange","resource","onSrcSetChange","timeRAF","cancelAnimationFrame","requestTimeUpdates","onProgress","getMediaType","end","attemptToPlay","toggle","requestPictureInPicture","exitPictureInPicture","togglePiPInChrome","togglePiPInSafari","setPlaybackRate","canSetPiP","togglePiP","toggleTextTrackModes","tracks","textTrackList","kind","getFilteredTextTracks","newTrackId","oldTrack","nextTrack","mediaProps","playsInline","crossorigin","controlslist","hasCustomPoster","autoPictureInPicture","onLoadedMetadata","onPlay","onPause","onPlaying","onSeeking","onSeeked","onRateChange","onVolumeChange","onDurationChange","onWaiting","onSuspend","onEnded","onenterpictureinpicture","onEnterPiP","onleavepictureinpicture","onLeavePiP","fullscreenControlCss","__awaiter$g","FullscreenControl","enterIcon","exitIcon","onPlaybackReadyChange","__awaiter$f","HLS","setupHls","destroyHls","currSource","hls","Hls","Events","MEDIA_ATTACHED","onSrcChange","AUDIO_TRACKS_UPDATED","audioTrack","AUDIO_TRACK_SWITCHED","fatal","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","MANIFEST_PARSED","LEVEL_LOADED","_","details","totalduration","attachMedia","loadSource","currentLevel","ICONS_BASE_CDN_URL","vime","iconName","material","watch","withIconRegistry","getIconLibraryResolver","registerIconLibrary","resolver","iconEl","redraw","deregisterIconLibrary","__awaiter$e","iconFiles","requestIcon","ok","text","svg","firstElementChild","status","outerHTML","iconCss","__awaiter$d","parser","DOMParser","Icon","vmLoad","setIcon","file","doc","parseFromString","body","role","getLabel","IconLibrary","register","liveIndicatorCss","LiveIndicator","liveIndicator","loadingScreenCss","LoadingScreen","hideDots","loadingScreen","unwrapSubmenu","submenu","unwrapRadioGroup","radioGroup","slot","assignedElements","menuItemHunter","allowed","reduce","acc","menuCss","__awaiter$c","Menu","vmOpen","vmClose","vmActiveSubmenuChange","vmActiveMenuItemChange","vmMenuHeightChange","hasDisconnected","activeMenuItem","activeSubmenu","controller","calculateHeight","item","focusItem","getMenu","getControllerHeight","firstChild","flatten","getChildren","visibility","onCloseSubmenu","onClose","focusController","focusControl","focusMenu","getMenuItems","items","preventDefault","foucsMenuItem","triggerMenuItem","slideIn","slideInDirection","slideInFromLeft","slideInFromRight","tabindex","onKeyDown","menuItemCss","__awaiter$b","MenuItem","checkIcon","menuItem","isCheckedDefined","checked","isMenuDefined","hasExpanded","isChecked","showCheckedIcon","showLeftNavArrow","showRightNavArrow","showHint","showBadge","hasSpacer","showDivider","MenuRadio","vmCheck","MenuRadioGroup","findRadios","onValueChange","MuteControl","lowVolumeIcon","highVolumeIcon","mutedIcon","volumeIcon","getIcon","pipControlCss","__awaiter$a","PiPControl","PlaybackControl","playIcon","pauseIcon","Logger","silent","console","log","players","withAutopause","p","withPlayerEvents","componentDidRender","__awaiter$9","immediateAdapterCall","withPlayerScheduler","adapterCalls","flushAdapterCalls","hasMediaChanged","onMediaChange","onStateChange","isAdapterCallRequired","safeAdapterCall","method","safeCall","playerCss","__awaiter$8","idCount$3","Player","vmThemeChange","vmPausedChange","vmPlay","vmPlayingChange","vmSeekingChange","vmSeeked","vmBufferingChange","vmDurationChange","vmCurrentTimeChange","vmReady","vmPlaybackReady","vmPlaybackStarted","vmPlaybackEnded","vmBufferedChange","vmCurrentProviderChange","vmCurrentSrcChange","vmCurrentPosterChange","vmMediaTitleChange","vmControlsChange","vmPlaybackRateChange","vmPlaybackRatesChange","vmPlaybackQualityChange","vmPlaybackQualitiesChange","vmMutedChange","vmVolumeChange","vmViewTypeChange","vmMediaTypeChange","vmLiveChange","vmTouchChange","vmLanguageChange","vmI18nChange","vmTranslationsChange","vmLanguagesChange","vmFullscreenChange","vmPiPChange","vmTextTracksChange","vmCurrentTextTrackChange","vmTextTrackVisibleChange","vmAudioTracksChange","vmCurrentAudioTrackChange","lastRateCheck","isActive","rotateDevice","Infinity","min","newRate","prevRate","newQuality","prevQuality","lastQualityCheck","prevLanguage","canProviderSetFullscreen","translation","onPausedChange","onCurrentTimeChange","onMutedChange","onDebugChange","onContainerChange","onTranslationsChange","onLanguageChange","getPlayerState","unlock","canShowCustomUI","isIdle","hasCustomControls","isBlockerVisible","genId","idle","mobile","touch","paddingBottom","calcAspectRatio","posterCss","Poster","vmLoaded","vmWillShow","vmWillHide","isHidden","fit","onEnabledChange","onActiveChange","onVisibilityChange","alt","objectFit","onPosterLoad","scrimCss","Scrim","scrim","gradientUp","gradientDown","getHours","trunc","getMinutes","getSeconds","formatTime","format","hours","mins","secs","scrubberControlCss","__awaiter$7","ScrubberControl","timestamp","endTime","noKeyboard","isLeftArrow","seekTo","onNoKeyboardChange","tooltipRect","bounds","slider","thumbWidth","getPropertyValue","leftLimit","rightLimit","xPos","getSliderInput","rect","percent","pageX","setTooltipPosition","sliderValueText","onMouseMove","onTouchMove","valueText","onVmValueChange","onSeek","loading","toFixed","settingsCss","__awaiter$6","idCount$2","Settings","menuHeight","onVmOpen","onVmClose","onVmMenuHeightChange","onHeightChange","settingsControlCss","__awaiter$5","idCount$1","SettingsControl","icon","vmSettings","setController","control","blurControl","hasSettings","settingsControl","skeletonCss","Skeleton","effect","skeleton","sheen","sliderCss","Slider","vmValueChange","changedTouches","delta","clientRect","sliderThumbWidth","clientX","round","calcTouchedValue","Event","getPercentage","autocomplete","onInput","onTouch","spinnerCss","Spinner","blacklist","YouTube","showWhenMediaLoading","onVisiblityChange","spinner","spin","__awaiter$4","idCount","Submenu","vmOpenSubmenu","vmCloseSubmenu","getHeight","getControllerId","onMenuOpen","onMenuClose","getControllerHeightSync","timeCss","Time","timeProgressCss","TimeProgress","separator","tooltipCss","tooltipIdCount","Tooltip","getId","onTop","onBottom","growLeft","growRight","uiCss","UI","ui","__awaiter$3","VimeoEvent","vimeoCss","__awaiter$2","videoInfoCache","Vimeo","playRequest","byline","portrait","noAutoAspectRatio","cookies","pendingDurationCall","pendingPlayRequest","transparent","dnt","thumnailRegex","thumbnailId","thumbnail_url","abs","onTimeChange","payload","newVolume","onVimeoEvent","onVimeoMethod","aw","ah","padding","offset","fileRegex","hideControls","adjustPosition","volumeControlCss","__awaiter$1","VolumeControl","prevMuted","currentVolume","isSliderActive","muteKeys","isUpArrow","hideSliderTimeout","onShowSlider","onHideSlider","onVmFocus","onVmBlur","mapYouTubePlaybackQuality","youtubeCss","posterCache","lastTimeUpdate","showFullscreenControl","fetchPosterURL","findPosterURL","enablejsapi","cc_lang_pref","hl","fs","disablekb","iv_load_policy","posterURL","img","isPlaying","isBuffering","onCued","elapsedTime","now","calcCurrentTime","videoData","availablePlaybackRates","currentTimeLastUpdated","videoLoadedFraction","onBufferedChange","availableQualityLevels","playerState","onPlayerStateChange","onVmEmbedLoaded","onEmbedLoaded","VmAudio","VmCaptionControl","VmCaptions","VmClickToPlay","VmControl","VmControlGroup","VmControlSpacer","VmControls","VmCurrentTime","VmDailymotion","VmDash","VmDblClickFullscreen","VmDefaultControls","VmDefaultSettings","VmDefaultUi","VmEmbed","VmEndTime","VmFile","VmFullscreenControl","VmHls","VmIcon","VmIconLibrary","VmLiveIndicator","VmLoadingScreen","VmMenu","VmMenuItem","VmMenuRadio","VmMenuRadioGroup","VmMuteControl","VmPipControl","VmPlaybackControl","VmPlayer","VmPoster","VmScrim","VmScrubberControl","VmSettings","VmSettingsControl","VmSkeleton","VmSlider","VmSpinner","VmSubmenu","VmTime","VmTimeProgress","VmTooltip","VmUi","VmVideo","VmVimeo","VmVolumeControl","VmYoutube","defineCustomElements","opts","customElements","cmp","is","define"],"sources":["/root/rankboost/deployment/website/node_modules/@vime/core/dist/custom-elements/index.js"],"sourcesContent":["import { getElement, getRenderingRef, writeTask, h, attachShadow, Host, createEvent, Fragment, proxyCustomElement } from '@stencil/core/internal/client';\nexport { setAssetPath, setPlatformOptions } from '@stencil/core/internal/client';\n\n/**\n * Listen to an event on the given DOM node. Returns a callback to remove the event listener.\n */\nfunction listen(node, event, handler, options) {\n  node.addEventListener(event, handler, options);\n  return () => node.removeEventListener(event, handler, options);\n}\nfunction fireEventAndRetry(el, event, onFail, interval = 300, maxRetries = 10) {\n  let timeout;\n  let attempt = 0;\n  let found = false;\n  function retry() {\n    if (found)\n      return;\n    timeout = setTimeout(() => {\n      if (attempt === maxRetries) {\n        onFail === null || onFail === void 0 ? void 0 : onFail();\n        return;\n      }\n      el.dispatchEvent(event);\n      attempt += 1;\n      retry();\n    }, interval);\n  }\n  retry();\n  return () => {\n    window.clearTimeout(timeout);\n    found = true;\n  };\n}\nconst isColliding = (a, b, translateAx = 0, translateAy = 0, translateBx = 0, translateBy = 0) => {\n  const aRect = a.getBoundingClientRect();\n  const bRect = b.getBoundingClientRect();\n  return (aRect.left + translateAx < bRect.right + translateBx &&\n    aRect.right + translateAx > bRect.left + translateBx &&\n    aRect.top + translateAy < bRect.bottom + translateBy &&\n    aRect.bottom + translateAy > bRect.top + translateBy);\n};\n\n/**\n * No-operation (noop).\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-function\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst noop = (..._) => {\n  // ...\n};\n/**\n * Checks if `value` is `null`.\n *\n * @param value - The value to check.\n */\nconst isNull = (value) => value === null;\n/**\n * Checks if `value` is `undefined`.\n *\n * @param value - The value to check.\n */\nconst isUndefined = (value) => typeof value === 'undefined';\n/**\n * Checks if `value` is `null` or `undefined`.\n *\n * @param value - The value to check.\n */\nconst isNil = (value) => isNull(value) || isUndefined(value);\n/**\n * Returns the constructor of the given `value`.\n *\n * @param value - The value to return the constructor of.\n */\nconst getConstructor = (value) => \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n!isNil(value) ? value.constructor : undefined;\n/**\n * Checks if `value` is classified as a `Object` object.\n *\n * @param value - The value to check.\n */\nconst isObject = (value) => getConstructor(value) === Object;\n/**\n * Checks if `value` is classified as a `Number` object.\n *\n * @param value - The value to check.\n */\nconst isNumber = (value) => getConstructor(value) === Number && !Number.isNaN(value);\n/**\n * Checks if `value` is classified as a `String` object.\n *\n * @param value - The value to check.\n */\nconst isString = (value) => getConstructor(value) === String;\n/**\n * Checks if `value` is classified as a `Boolean` object.\n *\n * @param value - The value to check.\n */\nconst isBoolean = (value) => getConstructor(value) === Boolean;\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @param value - The value to check.\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nconst isFunction = (value) => getConstructor(value) === Function;\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @param value - The value to check.\n */\nconst isArray = (value) => Array.isArray(value);\n/**\n * Checks if `value` is an instanceof the given `constructor`.\n *\n * @param value - The value to check.\n * @param constructor - The constructor to check against.\n */\nconst isInstanceOf = (value, constructor) => Boolean(value && constructor && value instanceof constructor);\n\n/**\n * Creates an empty Promise and defers resolving/rejecting it.\n */\nconst deferredPromise = () => {\n  let resolve = noop;\n  let reject = noop;\n  const promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  return { promise, resolve, reject };\n};\n\nfunction wrapStencilHook(component, lifecycle, hook) {\n  const prevHook = component[lifecycle];\n  component[lifecycle] = function () {\n    hook();\n    return prevHook ? prevHook.call(component) : undefined;\n  };\n}\nfunction createStencilHook(component, onConnect, onDisconnect) {\n  let hasLoaded = false;\n  if (!isUndefined(onConnect)) {\n    wrapStencilHook(component, 'componentWillLoad', () => {\n      onConnect();\n      hasLoaded = true;\n    });\n    wrapStencilHook(component, 'connectedCallback', () => {\n      if (hasLoaded)\n        onConnect();\n    });\n  }\n  if (!isUndefined(onDisconnect)) {\n    wrapStencilHook(component, 'disconnectedCallback', () => {\n      onDisconnect();\n    });\n  }\n}\n\nconst FIND_PLAYER_EVENT = 'vmFindPlayer';\nfunction withFindPlayer(player) {\n  const el = getElement(player);\n  let off;\n  createStencilHook(player, () => {\n    off = listen(el, FIND_PLAYER_EVENT, (event) => {\n      event.stopPropagation();\n      event.detail(el);\n    });\n  }, () => {\n    off === null || off === void 0 ? void 0 : off();\n  });\n}\n/**\n * Finds the closest ancestor player element by firing the `vmFindPlayer` event, and waiting\n * for the player to catch it. This function retries finding the player (`maxRetries`) until it\n * gives up and fails.\n *\n * @param ref - A HTMLElement that is within the player's subtree.\n * @param interval - The length of the timeout before trying again in milliseconds.\n * @param maxRetries - The number of times to retry firing the event.\n */\nconst findPlayer = (ref, interval = 300, maxRetries = 10) => {\n  const el = (isInstanceOf(ref, HTMLElement)\n    ? ref\n    : getElement(ref));\n  const search = deferredPromise();\n  // eslint-disable-next-line prefer-const\n  let stopFiring;\n  const event = new CustomEvent(FIND_PLAYER_EVENT, {\n    bubbles: true,\n    composed: true,\n    detail: player => {\n      search.resolve(player);\n      stopFiring();\n    },\n  });\n  stopFiring = fireEventAndRetry(el, event, () => {\n    search.reject(`Could not find player for ${el.nodeName}`);\n  }, interval, maxRetries);\n  return search.promise;\n};\n\nvar MediaType;\n(function (MediaType) {\n  MediaType[\"Audio\"] = \"audio\";\n  MediaType[\"Video\"] = \"video\";\n})(MediaType || (MediaType = {}));\n\nconst STATE_CHANGE_EVENT = 'vmStateChange';\n/**\n * Creates a dispatcher on the given `ref`, to send updates to the closest ancestor player via\n * the custom `vmStateChange` event.\n *\n * @param ref An element to dispatch the state change events from.\n */\nconst createDispatcher = (ref) => (prop, value) => {\n  const el = isInstanceOf(ref, HTMLElement) ? ref : getElement(ref);\n  const event = new CustomEvent(STATE_CHANGE_EVENT, {\n    bubbles: true,\n    composed: true,\n    detail: { by: el, prop, value },\n  });\n  el.dispatchEvent(event);\n};\n\nconst en = {\n  play: 'Play',\n  pause: 'Pause',\n  playback: 'Playback',\n  scrubber: 'Scrubber',\n  scrubberLabel: '{currentTime} of {duration}',\n  played: 'Played',\n  duration: 'Duration',\n  buffered: 'Buffered',\n  close: 'Close',\n  currentTime: 'Current time',\n  live: 'LIVE',\n  volume: 'Volume',\n  mute: 'Mute',\n  unmute: 'Unmute',\n  audio: 'Audio',\n  default: 'Default',\n  captions: 'Captions',\n  subtitlesOrCc: 'Subtitles/CC',\n  enableCaptions: 'Enable subtitles/captions',\n  disableCaptions: 'Disable subtitles/captions',\n  auto: 'Auto',\n  fullscreen: 'Fullscreen',\n  enterFullscreen: 'Enter fullscreen',\n  exitFullscreen: 'Exit fullscreen',\n  settings: 'Settings',\n  seekForward: 'Seek forward',\n  seekBackward: 'Seek backward',\n  seekTotal: 'Seek total',\n  normal: 'Normal',\n  none: 'None',\n  playbackRate: 'Playback Rate',\n  playbackQuality: 'Playback Quality',\n  loop: 'Loop',\n  disabled: 'Disabled',\n  off: 'Off',\n  enabled: 'Enabled',\n  pip: 'Picture-in-Picture',\n  enterPiP: 'Miniplayer',\n  exitPiP: 'Expand',\n};\n\nconst initialState = {\n  theme: undefined,\n  paused: true,\n  playing: false,\n  duration: -1,\n  currentProvider: undefined,\n  mediaTitle: undefined,\n  currentSrc: undefined,\n  currentPoster: undefined,\n  textTracks: [],\n  currentTextTrack: -1,\n  audioTracks: [],\n  currentAudioTrack: -1,\n  isTextTrackVisible: true,\n  shouldRenderNativeTextTracks: true,\n  icons: 'vime',\n  currentTime: 0,\n  autoplay: false,\n  ready: false,\n  playbackReady: false,\n  loop: false,\n  muted: false,\n  buffered: 0,\n  playbackRate: 1,\n  playbackRates: [1],\n  playbackQuality: undefined,\n  playbackQualities: [],\n  seeking: false,\n  debug: false,\n  playbackStarted: false,\n  playbackEnded: false,\n  buffering: false,\n  controls: false,\n  isControlsActive: false,\n  volume: 50,\n  isFullscreenActive: false,\n  aspectRatio: '16:9',\n  viewType: undefined,\n  isAudioView: false,\n  isVideoView: false,\n  mediaType: undefined,\n  isAudio: false,\n  isVideo: false,\n  isMobile: false,\n  isTouch: false,\n  isSettingsActive: false,\n  isLive: false,\n  isPiPActive: false,\n  autopause: true,\n  playsinline: false,\n  language: 'en',\n  languages: ['en'],\n  translations: { en },\n  i18n: en,\n};\nconst writableProps = new Set([\n  'autoplay',\n  'autopause',\n  'aspectRatio',\n  'controls',\n  'theme',\n  'debug',\n  'paused',\n  'currentTime',\n  'language',\n  'loop',\n  'translations',\n  'playbackQuality',\n  'muted',\n  'playbackRate',\n  'playsinline',\n  'volume',\n  'isSettingsActive',\n  'isControlsActive',\n  'shouldRenderNativeTextTracks',\n]);\nconst isWritableProp = (prop) => writableProps.has(prop);\n/**\n * Player properties that should be reset when the media is changed.\n */\nconst resetableProps = new Set([\n  'paused',\n  'currentTime',\n  'duration',\n  'buffered',\n  'seeking',\n  'playing',\n  'buffering',\n  'playbackReady',\n  'textTracks',\n  'currentTextTrack',\n  'audioTracks',\n  'currentAudioTrack',\n  'mediaTitle',\n  'currentSrc',\n  'currentPoster',\n  'playbackRate',\n  'playbackRates',\n  'playbackStarted',\n  'playbackEnded',\n  'playbackQuality',\n  'playbackQualities',\n  'mediaType',\n]);\nconst shouldPropResetOnMediaChange = (prop) => resetableProps.has(prop);\n\nvar ViewType;\n(function (ViewType) {\n  ViewType[\"Audio\"] = \"audio\";\n  ViewType[\"Video\"] = \"video\";\n})(ViewType || (ViewType = {}));\n\nclass Disposal {\n  constructor(dispose = []) {\n    this.dispose = dispose;\n  }\n  add(callback) {\n    this.dispose.push(callback);\n  }\n  empty() {\n    this.dispose.forEach(fn => fn());\n    this.dispose = [];\n  }\n}\n\nvar __awaiter$y = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n    function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst PLAYER_KEY = Symbol('vmPlayerKey');\nconst COMPONENT_NAME_KEY = Symbol('vmNameKey');\nconst REGISTRY_KEY = Symbol('vmRegistryKey');\nconst REGISTRATION_KEY = Symbol('vmRegistrationKey');\nconst REGISTER_COMPONENT_EVENT = 'vmComponentRegister';\nconst COMPONENT_REGISTERED_EVENT = 'vmComponentRegistered';\nconst COMPONENT_DEREGISTERED_EVENT = 'vmComponentDeregistered';\nconst getRegistrant = (ref) => isInstanceOf(ref, HTMLElement)\n  ? ref\n  : getElement(ref);\n/**\n * Handles registering/deregistering the given `component` in the player registry. All registries\n * are bound per player subtree.\n *\n * @param ref - A Stencil component instance or HTMLElement.\n */\nfunction withComponentRegistry(ref, name) {\n  const registryId = Symbol('vmRegistryId');\n  const registrant = getRegistrant(ref);\n  registrant[COMPONENT_NAME_KEY] = name !== null && name !== void 0 ? name : registrant.nodeName.toLowerCase();\n  registrant[REGISTRATION_KEY] = registryId;\n  const buildEvent = (eventName) => new CustomEvent(eventName, {\n    bubbles: true,\n    composed: true,\n    detail: registrant,\n  });\n  const registerEvent = buildEvent(REGISTER_COMPONENT_EVENT);\n  createStencilHook(ref, () => {\n    registrant.dispatchEvent(registerEvent);\n  });\n}\nfunction withComponentRegistrar(player) {\n  const el = getElement(player);\n  const registry = new Map();\n  const disposal = new Disposal();\n  // TODO properly type this later.\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  el[REGISTRY_KEY] = registry;\n  function onDeregister(registrant) {\n    delete registrant[PLAYER_KEY];\n    delete registrant[REGISTRY_KEY];\n    registry.delete(registrant[REGISTRATION_KEY]);\n    el.dispatchEvent(new CustomEvent(COMPONENT_DEREGISTERED_EVENT, { detail: registrant }));\n  }\n  function onRegister(e) {\n    const ref = e.detail;\n    const registrant = getRegistrant(ref);\n    registrant[PLAYER_KEY] = el;\n    registrant[REGISTRY_KEY] = registry;\n    registry.set(registrant[REGISTRATION_KEY], registrant);\n    el.dispatchEvent(new CustomEvent(COMPONENT_REGISTERED_EVENT, { detail: registrant }));\n    createStencilHook(ref, undefined, () => onDeregister(registrant));\n  }\n  createStencilHook(player, () => {\n    disposal.add(listen(el, REGISTER_COMPONENT_EVENT, onRegister));\n  }, () => {\n    registry.clear();\n    disposal.empty();\n    delete player[REGISTRY_KEY];\n  });\n}\n/**\n * Checks whether any component with the given `name` exists in the registry. All registries\n * are bound per player subtree.\n *\n * @param ref - A Stencil component instance or HTMLElement.\n * @param name - The name of the component to search for.\n */\nfunction isComponentRegistered(ref, name) {\n  var _a;\n  const registrant = getRegistrant(ref);\n  const registry = registrant[REGISTRY_KEY];\n  return Array.from((_a = registry === null || registry === void 0 ? void 0 : registry.values()) !== null && _a !== void 0 ? _a : []).some(r => r[COMPONENT_NAME_KEY] === name);\n}\n/**\n * Returns the player for the given `ref`. This will only work after the component has been\n * registered, prefer using `findPlayer`.\n *\n * @param ref - A Stencil component instance or HTMLElement.\n */\nfunction getPlayerFromRegistry(ref) {\n  const registrant = getRegistrant(ref);\n  return registrant[PLAYER_KEY];\n}\n/**\n * Returns a collection of components from the registry for the given `ref`. All registries\n * are bound per player subtree.\n *\n * @param ref - A Stencil component instance or HTMLElement.\n * @param name - The name of the components to search for in the registry.\n */\nfunction getComponentFromRegistry(ref, name) {\n  var _a, _b;\n  const registrant = getRegistrant(ref);\n  return Array.from((_b = (_a = registrant[REGISTRY_KEY]) === null || _a === void 0 ? void 0 : _a.values()) !== null && _b !== void 0 ? _b : []).filter(r => r[COMPONENT_NAME_KEY] === name);\n}\n/**\n * Watches the current registry on the given `ref` for changes. All registries are bound per\n * player subtree.\n *\n * @param ref - A Stencil component instance or HTMLElement.\n * @param name - The name of the component to watch for.\n * @param onChange - A callback that is called when a component is registered/deregistered.\n */\nfunction watchComponentRegistry(ref, name, onChange) {\n  var _a;\n  return __awaiter$y(this, void 0, void 0, function* () {\n    const player = yield findPlayer(ref);\n    const disposal = new Disposal();\n    const registry = getRegistrant(ref)[REGISTRY_KEY];\n    function listener(e) {\n      if (e.detail[COMPONENT_NAME_KEY] === name)\n        onChange === null || onChange === void 0 ? void 0 : onChange(getComponentFromRegistry(player, name));\n    }\n    // Hydrate.\n    Array.from((_a = registry === null || registry === void 0 ? void 0 : registry.values()) !== null && _a !== void 0 ? _a : []).forEach(reg => listener(new CustomEvent('', { detail: reg })));\n    if (!isUndefined(player)) {\n      disposal.add(listen(player, COMPONENT_REGISTERED_EVENT, listener));\n      disposal.add(listen(player, COMPONENT_DEREGISTERED_EVENT, listener));\n    }\n    createStencilHook(ref, () => {\n      // no-op\n    }, () => {\n      disposal.empty();\n    });\n    return () => {\n      disposal.empty();\n    };\n  });\n}\n\nvar createDeferredPromise = function () {\n    var resolve;\n    var promise = new Promise(function (res) { resolve = res; });\n    return { promise: promise, resolve: resolve };\n};\n\nvar openWormhole = function (Component, props, isBlocking) {\n    if (isBlocking === void 0) { isBlocking = true; }\n    var isConstructor = (Component.constructor.name === 'Function');\n    var Proto = isConstructor ? Component.prototype : Component;\n    var componentWillLoad = Proto.componentWillLoad;\n    Proto.componentWillLoad = function () {\n        var _this = this;\n        var el = getElement(this);\n        var onOpen = createDeferredPromise();\n        var event = new CustomEvent('openWormhole', {\n            bubbles: true,\n            composed: true,\n            detail: {\n                consumer: this,\n                fields: props,\n                updater: function (prop, value) {\n                    var target = (prop in el) ? el : _this;\n                    target[prop] = value;\n                },\n                onOpen: onOpen,\n            },\n        });\n        el.dispatchEvent(event);\n        var willLoad = function () {\n            if (componentWillLoad) {\n                return componentWillLoad.call(_this);\n            }\n        };\n        return isBlocking ? onOpen.promise.then(function () { return willLoad(); }) : (willLoad());\n    };\n};\n\nvar multiverse = new Map();\nvar updateConsumer = function (_a, state) {\n    var fields = _a.fields, updater = _a.updater;\n    fields.forEach(function (field) { updater(field, state[field]); });\n};\nvar Universe = {\n    create: function (creator, initialState) {\n        var el = getElement(creator);\n        var wormholes = new Map();\n        var universe = { wormholes: wormholes, state: initialState };\n        multiverse.set(creator, universe);\n        var connectedCallback = creator.connectedCallback;\n        creator.connectedCallback = function () {\n            multiverse.set(creator, universe);\n            if (connectedCallback) {\n                connectedCallback.call(creator);\n            }\n        };\n        var disconnectedCallback = creator.disconnectedCallback;\n        creator.disconnectedCallback = function () {\n            multiverse.delete(creator);\n            if (disconnectedCallback) {\n                disconnectedCallback.call(creator);\n            }\n        };\n        el.addEventListener('openWormhole', function (event) {\n            event.stopPropagation();\n            var _a = event.detail, consumer = _a.consumer, onOpen = _a.onOpen;\n            if (wormholes.has(consumer))\n                return;\n            if (typeof consumer !== 'symbol') {\n                var connectedCallback_1 = consumer.connectedCallback, disconnectedCallback_1 = consumer.disconnectedCallback;\n                consumer.connectedCallback = function () {\n                    wormholes.set(consumer, event.detail);\n                    if (connectedCallback_1) {\n                        connectedCallback_1.call(consumer);\n                    }\n                };\n                consumer.disconnectedCallback = function () {\n                    wormholes.delete(consumer);\n                    if (disconnectedCallback_1) {\n                        disconnectedCallback_1.call(consumer);\n                    }\n                };\n            }\n            wormholes.set(consumer, event.detail);\n            updateConsumer(event.detail, universe.state);\n            onOpen === null || onOpen === void 0 ? void 0 : onOpen.resolve(function () { wormholes.delete(consumer); });\n        });\n        el.addEventListener('closeWormhole', function (event) {\n            var consumer = event.detail;\n            wormholes.delete(consumer);\n        });\n    },\n    Provider: function (_a, children) {\n        var state = _a.state;\n        var creator = getRenderingRef();\n        if (multiverse.has(creator)) {\n            var universe = multiverse.get(creator);\n            universe.state = state;\n            universe.wormholes.forEach(function (opening) { updateConsumer(opening, state); });\n        }\n        return children;\n    }\n};\n\nconst LOAD_START_EVENT = 'vmLoadStart';\n// Events that toggle state and the prop is named `is{PropName}...`.\nconst isToggleStateEvent = new Set([\n  'isFullscreenActive',\n  'isControlsActive',\n  'isTextTrackVisible',\n  'isPiPActive',\n  'isLive',\n  'isTouch',\n  'isAudio',\n  'isVideo',\n  'isAudioView',\n  'isVideoView',\n]);\n// Events that are emitted without the 'Change' postfix.\nconst hasShortenedEventName = new Set([\n  'ready',\n  'playbackStarted',\n  'playbackEnded',\n  'playbackReady',\n]);\nconst getEventName = (prop) => {\n  // Example: isFullscreenActive -> vmFullscreenChange\n  if (isToggleStateEvent.has(prop)) {\n    return `vm${prop.replace('is', '').replace('Active', '')}Change`;\n  }\n  // Example: playbackStarted -> vmPlaybackStarted\n  if (hasShortenedEventName.has(prop)) {\n    return `vm${prop.charAt(0).toUpperCase()}${prop.slice(1)}`;\n  }\n  // Example: currentTime -> vmCurrentTimeChange\n  return `vm${prop.charAt(0).toUpperCase()}${prop.slice(1)}Change`;\n};\nfunction firePlayerEvent(el, prop, newValue, oldValue) {\n  const events = [];\n  events.push(new CustomEvent(getEventName(prop), { detail: newValue }));\n  if (prop === 'paused' && !newValue)\n    events.push(new CustomEvent('vmPlay'));\n  if (prop === 'seeking' && oldValue && !newValue)\n    events.push(new CustomEvent('vmSeeked'));\n  events.forEach(event => {\n    el.dispatchEvent(event);\n  });\n}\n\nvar __awaiter$x = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n    function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n/**\n * Binds props between an instance of a given component class and it's closest ancestor player.\n *\n * @param component A Stencil component instance.\n * @param props A set of props to watch and update on the given component instance.\n */\nconst withPlayerContext = (component, props) => openWormhole(component, props);\n/**\n * Finds the closest ancestor player to the given `ref` and watches the given props for changes. On\n * a prop change the given `updater` fn is called.\n *\n * @param ref A element within any player's subtree.\n * @param props A set of props to watch and call the `updater` fn with.\n * @param updater This function is called with the prop/value of any watched properties.\n */\nconst usePlayerContext = (ref, props, updater, playerRef) => __awaiter$x(void 0, void 0, void 0, function* () {\n  const player = playerRef !== null && playerRef !== void 0 ? playerRef : (yield findPlayer(ref));\n  const listeners = !isUndefined(player)\n    ? props.map(prop => {\n      const event = getEventName(prop);\n      return listen(player, event, () => {\n        updater(prop, player[prop]);\n      });\n    })\n    : [];\n  return () => {\n    listeners.forEach(off => off());\n  };\n});\n\nvar Provider;\n(function (Provider) {\n  Provider[\"Audio\"] = \"audio\";\n  Provider[\"Video\"] = \"video\";\n  Provider[\"HLS\"] = \"hls\";\n  Provider[\"Dash\"] = \"dash\";\n  Provider[\"YouTube\"] = \"youtube\";\n  Provider[\"Vimeo\"] = \"vimeo\";\n  Provider[\"Dailymotion\"] = \"dailymotion\";\n})(Provider || (Provider = {}));\n\nconst audioRegex = /\\.(m4a|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\\?)/i;\nconst videoRegex = /\\.(mp4|og[gv]|webm|mov|m4v)($|\\?)/i;\nconst hlsRegex = /\\.(m3u8)($|\\?)/i;\nconst hlsTypeRegex = /^application\\/(x-mpegURL|vnd\\.apple\\.mpegURL)$/i;\nconst dashRegex = /\\.(mpd)($|\\?)/i;\n\nconst PROVIDER_CHANGE_EVENT = 'vmProviderChange';\n/**\n * Creates a dispatcher on the given `ref`, to send updates to the closest ancestor player via\n * the custom `vmProviderChange` event.\n *\n * @param ref A component reference to dispatch the state change events from.\n */\nconst createProviderDispatcher = (ref) => (prop, value) => {\n  const el = isInstanceOf(ref, HTMLElement) ? ref : getElement(ref);\n  const event = new CustomEvent(PROVIDER_CHANGE_EVENT, {\n    bubbles: true,\n    composed: true,\n    detail: { by: el, prop, value },\n  });\n  el.dispatchEvent(event);\n};\n\nconst providerWritableProps = new Set([\n  'ready',\n  'playing',\n  'playbackReady',\n  'playbackStarted',\n  'playbackEnded',\n  'seeking',\n  'buffered',\n  'buffering',\n  'duration',\n  'viewType',\n  'mediaTitle',\n  'mediaType',\n  'currentSrc',\n  'currentPoster',\n  'playbackRates',\n  'playbackQualities',\n  'textTracks',\n  'currentTextTrack',\n  'isTextTrackVisible',\n  'audioTracks',\n  'currentAudioTrack',\n  'isPiPActive',\n  'isFullscreenActive',\n]);\nconst isProviderWritableProp = (prop) => isWritableProp(prop) || providerWritableProps.has(prop);\n\nvar __awaiter$w = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n    function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst PROVIDER_CACHE_KEY = Symbol('vmProviderCache');\nconst PROVIDER_CONNECT_EVENT = 'vmMediaProviderConnect';\nconst PROVIDER_DISCONNECT_EVENT = 'vmMediaProviderDisconnect';\nfunction buildProviderConnectEvent(name, host) {\n  return new CustomEvent(name, {\n    bubbles: true,\n    composed: true,\n    detail: host,\n  });\n}\nfunction withProviderHost(connector) {\n  const el = getElement(connector);\n  const disposal = new Disposal();\n  const cache = new Map();\n  connector[PROVIDER_CACHE_KEY] = cache;\n  function initCache() {\n    Object.keys(connector).forEach(prop => {\n      cache.set(prop, connector[prop]);\n    });\n  }\n  function onDisconnect() {\n    writeTask(() => __awaiter$w(this, void 0, void 0, function* () {\n      var _a;\n      connector.ready = false;\n      connector.provider = undefined;\n      cache.clear();\n      (_a = connector.onProviderDisconnect) === null || _a === void 0 ? void 0 : _a.call(connector);\n      el.dispatchEvent(buildProviderConnectEvent(PROVIDER_DISCONNECT_EVENT));\n    }));\n  }\n  function onConnect(event) {\n    event.stopImmediatePropagation();\n    initCache();\n    const hostRef = event.detail;\n    const host = getElement(event.detail);\n    if (connector.provider === host)\n      return;\n    const name = host === null || host === void 0 ? void 0 : host.nodeName.toLowerCase().replace('vm-', '');\n    writeTask(() => __awaiter$w(this, void 0, void 0, function* () {\n      connector.provider = host;\n      connector.currentProvider = Object.values(Provider).find(provider => name === provider);\n      createStencilHook(hostRef, undefined, () => onDisconnect());\n    }));\n  }\n  function onChange(event) {\n    var _a;\n    event.stopImmediatePropagation();\n    const { by, prop, value } = event.detail;\n    if (!isProviderWritableProp(prop)) {\n      (_a = connector.logger) === null || _a === void 0 ? void 0 : _a.warn(`${by.nodeName} tried to change \\`${prop}\\` but it is readonly.`);\n      return;\n    }\n    writeTask(() => {\n      cache.set(prop, value);\n      connector[prop] = value;\n    });\n  }\n  createStencilHook(connector, () => {\n    disposal.add(listen(el, PROVIDER_CONNECT_EVENT, onConnect));\n    disposal.add(listen(el, PROVIDER_CHANGE_EVENT, onChange));\n  }, () => {\n    disposal.empty();\n    cache.clear();\n  });\n}\nfunction withProviderConnect(ref) {\n  const connectEvent = buildProviderConnectEvent(PROVIDER_CONNECT_EVENT, ref);\n  createStencilHook(ref, () => {\n    getElement(ref).dispatchEvent(connectEvent);\n  });\n}\n\nvar __awaiter$v = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst Audio = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    /**\n     * @internal Whether an external SDK will attach itself to the media player and control it.\n     */\n    this.willAttach = false;\n    /** @inheritdoc */\n    this.preload = 'metadata';\n    withComponentRegistry(this);\n    if (!this.willAttach)\n      withProviderConnect(this);\n  }\n  /** @internal */\n  getAdapter() {\n    var _a, _b;\n    return __awaiter$v(this, void 0, void 0, function* () {\n      const adapter = (_b = (yield ((_a = this.fileProvider) === null || _a === void 0 ? void 0 : _a.getAdapter()))) !== null && _b !== void 0 ? _b : {};\n      adapter.canPlay = (type) => __awaiter$v(this, void 0, void 0, function* () { return isString(type) && audioRegex.test(type); });\n      return adapter;\n    });\n  }\n  render() {\n    return (\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    h(\"vm-file\", { noConnect: true, willAttach: this.willAttach, crossOrigin: this.crossOrigin, preload: this.preload, disableRemotePlayback: this.disableRemotePlayback, mediaTitle: this.mediaTitle, viewType: ViewType.Audio, ref: (el) => {\n        this.fileProvider = el;\n      } }, h(\"slot\", null)));\n  }\n};\n\nconst captionControlCss = \":host([hidden]){display:none}\";\n\nvar __awaiter$u = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst CaptionControl = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.canToggleCaptionVisibility = false;\n    /**\n     * The URL to an SVG element or fragment to load.\n     */\n    this.showIcon = 'captions-on';\n    /**\n     * The URL to an SVG element or fragment to load.\n     */\n    this.hideIcon = 'captions-off';\n    /**\n     * Whether the tooltip is positioned above/below the control.\n     */\n    this.tooltipPosition = 'top';\n    /**\n     * Whether the tooltip should not be displayed.\n     */\n    this.hideTooltip = false;\n    /** @inheritdoc */\n    this.keys = 'c';\n    /** @internal */\n    this.i18n = {};\n    /** @internal */\n    this.playbackReady = false;\n    /** @internal */\n    this.textTracks = [];\n    /** @internal */\n    this.isTextTrackVisible = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, [\n      'i18n',\n      'textTracks',\n      'isTextTrackVisible',\n      'playbackReady',\n    ]);\n  }\n  onTextTracksChange() {\n    var _a;\n    return __awaiter$u(this, void 0, void 0, function* () {\n      const player = getPlayerFromRegistry(this);\n      this.canToggleCaptionVisibility =\n        this.textTracks.length > 0 &&\n          ((_a = (yield (player === null || player === void 0 ? void 0 : player.canSetTextTrackVisibility()))) !== null && _a !== void 0 ? _a : false);\n    });\n  }\n  componentDidLoad() {\n    this.onTextTracksChange();\n  }\n  onClick() {\n    var _a;\n    const player = getPlayerFromRegistry(this);\n    (_a = player === null || player === void 0 ? void 0 : player.setTextTrackVisibility) === null || _a === void 0 ? void 0 : _a.call(player, !this.isTextTrackVisible);\n  }\n  render() {\n    const tooltip = this.isTextTrackVisible\n      ? this.i18n.disableCaptions\n      : this.i18n.enableCaptions;\n    const tooltipWithHint = !isUndefined(this.keys)\n      ? `${tooltip} (${this.keys})`\n      : tooltip;\n    return (h(Host, { hidden: !this.canToggleCaptionVisibility }, h(\"vm-control\", { label: this.i18n.captions, keys: this.keys, hidden: !this.canToggleCaptionVisibility, pressed: this.isTextTrackVisible, onClick: this.onClick.bind(this) }, h(\"vm-icon\", { name: this.isTextTrackVisible ? this.showIcon : this.hideIcon, library: this.icons }), h(\"vm-tooltip\", { hidden: this.hideTooltip, position: this.tooltipPosition, direction: this.tooltipDirection }, tooltipWithHint))));\n  }\n  static get watchers() { return {\n    \"textTracks\": [\"onTextTracksChange\"],\n    \"playbackReady\": [\"onTextTracksChange\"]\n  }; }\n  static get style() { return captionControlCss; }\n};\n\n/* eslint-disable func-names */\nconst watch$1 = new Set();\nconst controls = new Set();\n// watchedEl -> (controlsEl -> controlsHeight) saved on collision. Basically keeps track of\n// every collision with all controls for each watched element.\nconst collisions = new Map();\nfunction update() {\n  writeTask(() => {\n    controls.forEach(controlsEl => {\n      const controlsHeight = parseFloat(window.getComputedStyle(controlsEl).height);\n      watch$1.forEach(watchedEl => {\n        const watchedElCollisions = collisions.get(watchedEl);\n        const hasCollided = isColliding(watchedEl, controlsEl);\n        const willCollide = isColliding(watchedEl, controlsEl, 0, controlsHeight) ||\n          isColliding(watchedEl, controlsEl, 0, -controlsHeight);\n        watchedElCollisions.set(controlsEl, hasCollided || willCollide ? controlsHeight : 0);\n      });\n    });\n    // Update after assessing all collisions so there are no glitchy movements.\n    watch$1.forEach(watchedEl => {\n      const watchedElCollisions = collisions.get(watchedEl);\n      watchedEl.style.setProperty('--vm-controls-height', `${Math.max(0, Math.max(...watchedElCollisions.values()))}px`);\n    });\n  });\n}\nfunction registerControlsForCollisionDetection(component) {\n  const el = getElement(component);\n  function getInnerEl() {\n    return el.shadowRoot.querySelector('.controls');\n  }\n  createStencilHook(component, () => {\n    const innerEl = getInnerEl();\n    if (!isNull(innerEl)) {\n      controls.add(innerEl);\n      update();\n    }\n  }, () => {\n    controls.delete(getInnerEl());\n    update();\n  });\n  wrapStencilHook(component, 'componentDidLoad', () => {\n    controls.add(getInnerEl());\n    update();\n  });\n  wrapStencilHook(component, 'componentDidRender', update);\n}\nfunction withControlsCollisionDetection(component) {\n  const el = getElement(component);\n  createStencilHook(component, () => {\n    watch$1.add(el);\n    collisions.set(el, new Map());\n    update();\n  }, () => {\n    watch$1.delete(el);\n    collisions.delete(el);\n  });\n}\n\nconst captionsCss = \":host{position:absolute;left:0;bottom:0;width:100%;pointer-events:none;z-index:var(--vm-captions-z-index)}.captions{width:100%;text-align:center;color:var(--vm-captions-text-color);font-size:var(--vm-captions-font-size);padding:$control-spacing;display:none;pointer-events:none;transition:transform 0.4s ease-in-out, opacity 0.3s ease-in-out}.captions.enabled{display:inline-block}.captions.hidden{display:none !important}.captions.inactive{opacity:0;visibility:hidden}.captions.fontMd{font-size:var(--vm-captions-font-size-medium)}.captions.fontLg{font-size:var(--vm-captions-font-size-large)}.captions.fontXl{font-size:var(--vm-captions-font-size-xlarge)}.cue{display:inline-block;background:var(--vm-captions-cue-bg-color);border-radius:var(--vm-captions-cue-border-radius);box-decoration-break:clone;line-height:185%;padding:var(--vm-captions-cue-padding);white-space:pre-wrap;pointer-events:none}.cue>div{display:inline}.cue:empty{display:none}\";\n\nvar __awaiter$t = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst Captions = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.sizeDisposal = new Disposal();\n    this.textDisposal = new Disposal();\n    this.isEnabled = false;\n    this.fontSize = 'sm';\n    /**\n     * Whether the captions should be visible or not.\n     */\n    this.hidden = false;\n    /** @internal */\n    this.isControlsActive = false;\n    /** @internal */\n    this.isVideoView = false;\n    /** @internal */\n    this.playbackStarted = false;\n    /** @internal */\n    this.textTracks = [];\n    /** @internal */\n    this.currentTextTrack = -1;\n    /** @internal */\n    this.isTextTrackVisible = true;\n    withComponentRegistry(this);\n    withControlsCollisionDetection(this);\n    withPlayerContext(this, [\n      'isVideoView',\n      'playbackStarted',\n      'isControlsActive',\n      'textTracks',\n      'currentTextTrack',\n      'isTextTrackVisible',\n    ]);\n  }\n  onEnabledChange() {\n    this.isEnabled = this.playbackStarted && this.isVideoView;\n  }\n  onTextTracksChange() {\n    const textTrack = this.textTracks[this.currentTextTrack];\n    const renderCues = () => {\n      var _a;\n      const activeCues = Array.from((_a = textTrack.activeCues) !== null && _a !== void 0 ? _a : []);\n      this.renderCurrentCue(activeCues[0]);\n    };\n    this.textDisposal.empty();\n    if (!isNil(textTrack)) {\n      renderCues();\n      this.textDisposal.add(listen(textTrack, 'cuechange', renderCues));\n    }\n  }\n  connectedCallback() {\n    this.dispatch = createDispatcher(this);\n    this.dispatch('shouldRenderNativeTextTracks', false);\n    this.onTextTracksChange();\n    this.onPlayerResize();\n  }\n  disconnectedCallback() {\n    this.textDisposal.empty();\n    this.sizeDisposal.empty();\n    this.dispatch('shouldRenderNativeTextTracks', true);\n  }\n  onPlayerResize() {\n    return __awaiter$t(this, void 0, void 0, function* () {\n      const player = yield findPlayer(this);\n      if (isUndefined(player))\n        return;\n      const container = (yield player.getContainer());\n      const resizeObs = new ResizeObserver(entries => {\n        const entry = entries[0];\n        const { width } = entry.contentRect;\n        if (width >= 1360) {\n          this.fontSize = 'xl';\n        }\n        else if (width >= 1024) {\n          this.fontSize = 'lg';\n        }\n        else if (width >= 768) {\n          this.fontSize = 'md';\n        }\n        else {\n          this.fontSize = 'sm';\n        }\n      });\n      resizeObs.observe(container);\n    });\n  }\n  renderCurrentCue(cue) {\n    if (isNil(cue)) {\n      this.cue = '';\n      return;\n    }\n    const div = document.createElement('div');\n    div.append(cue.getCueAsHTML());\n    this.cue = div.innerHTML.trim();\n  }\n  render() {\n    return (h(\"div\", { style: {\n        transform: `translateY(calc(${this.isControlsActive ? 'var(--vm-controls-height)' : '24px'} * -1))`,\n      }, class: {\n        captions: true,\n        enabled: this.isEnabled,\n        hidden: this.hidden,\n        fontMd: this.fontSize === 'md',\n        fontLg: this.fontSize === 'lg',\n        fontXl: this.fontSize === 'xl',\n        inactive: !this.isTextTrackVisible,\n      } }, h(\"span\", { class: \"cue\" }, this.cue)));\n  }\n  static get watchers() { return {\n    \"isVideoView\": [\"onEnabledChange\"],\n    \"playbackStarted\": [\"onEnabledChange\"],\n    \"textTracks\": [\"onTextTracksChange\"],\n    \"currentTextTrack\": [\"onTextTracksChange\"]\n  }; }\n  static get style() { return captionsCss; }\n};\n\nconst clickToPlayCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-click-to-play-z-index)}.clickToPlay{display:none;width:100%;height:100%;pointer-events:none}.clickToPlay.enabled{display:inline-block;pointer-events:auto}\";\n\nvar __awaiter$s = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst ClickToPlay = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /**\n     * By default this is disabled on mobile to not interfere with playback, set this to `true` to\n     * enable it.\n     */\n    this.useOnMobile = false;\n    /** @internal */\n    this.paused = true;\n    /** @internal */\n    this.isVideoView = false;\n    /** @internal */\n    this.isMobile = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, ['paused', 'isVideoView', 'isMobile']);\n  }\n  connectedCallback() {\n    this.dispatch = createDispatcher(this);\n  }\n  /** @internal */\n  forceClick() {\n    return __awaiter$s(this, void 0, void 0, function* () {\n      this.onClick();\n    });\n  }\n  onClick() {\n    this.dispatch('paused', !this.paused);\n  }\n  render() {\n    return (h(\"div\", { class: {\n        clickToPlay: true,\n        enabled: this.isVideoView && (!this.isMobile || this.useOnMobile),\n      }, onClick: this.onClick.bind(this) }));\n  }\n  static get style() { return clickToPlayCss; }\n};\n\nconst controlCss = \"button{display:flex;align-items:center;flex-direction:row;border:var(--vm-control-border);cursor:pointer;flex-shrink:0;font-size:var(--vm-control-icon-size);color:var(--vm-control-color);background:var(--vm-control-bg, transparent);border-radius:var(--vm-control-border-radius);padding:var(--vm-control-padding);position:relative;pointer-events:auto;transition:all 0.3s ease;transform:scale(var(--vm-control-scale, 1));touch-action:manipulation;box-sizing:border-box}button.hidden{display:none}button:focus{outline:0}button.tapHighlight{background:var(--vm-control-tap-highlight)}button.notTouch:focus,button.notTouch:hover,button.notTouch[aria-expanded='true']{background:var(--vm-control-focus-bg);color:var(--vm-control-focus-color);transform:scale(calc(var(--vm-control-scale, 1) + 0.06))}\";\n\nvar __awaiter$r = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst Control = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmInteractionChange = createEvent(this, \"vmInteractionChange\", 7);\n    this.vmFocus = createEvent(this, \"vmFocus\", 7);\n    this.vmBlur = createEvent(this, \"vmBlur\", 7);\n    this.keyboardDisposal = new Disposal();\n    this.showTapHighlight = false;\n    /**\n     * Whether the control should be displayed or not.\n     */\n    this.hidden = false;\n    /** @internal */\n    this.isTouch = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, ['isTouch']);\n  }\n  onKeysChange() {\n    return __awaiter$r(this, void 0, void 0, function* () {\n      this.keyboardDisposal.empty();\n      if (isUndefined(this.keys))\n        return;\n      const player = yield findPlayer(this);\n      const codes = this.keys.split('/');\n      if (isUndefined(player))\n        return;\n      this.keyboardDisposal.add(listen(player, 'keydown', (event) => {\n        if (codes.includes(event.key)) {\n          this.button.click();\n        }\n      }));\n    });\n  }\n  connectedCallback() {\n    this.findTooltip();\n    this.onKeysChange();\n  }\n  componentWillLoad() {\n    this.findTooltip();\n  }\n  disconnectedCallback() {\n    this.keyboardDisposal.empty();\n  }\n  /**\n   * Focuses the control.\n   */\n  focusControl() {\n    var _a;\n    return __awaiter$r(this, void 0, void 0, function* () {\n      (_a = this.button) === null || _a === void 0 ? void 0 : _a.focus();\n    });\n  }\n  /**\n   * Removes focus from the control.\n   */\n  blurControl() {\n    var _a;\n    return __awaiter$r(this, void 0, void 0, function* () {\n      (_a = this.button) === null || _a === void 0 ? void 0 : _a.blur();\n    });\n  }\n  onTouchStart() {\n    this.showTapHighlight = true;\n  }\n  onTouchEnd() {\n    setTimeout(() => {\n      this.showTapHighlight = false;\n    }, 100);\n  }\n  findTooltip() {\n    const tooltip = this.host.querySelector('vm-tooltip');\n    if (!isNull(tooltip))\n      this.describedBy = tooltip.id;\n    return tooltip;\n  }\n  onShowTooltip() {\n    const tooltip = this.findTooltip();\n    if (!isNull(tooltip))\n      tooltip.active = true;\n    this.vmInteractionChange.emit(true);\n  }\n  onHideTooltip() {\n    const tooltip = this.findTooltip();\n    if (!isNull(tooltip))\n      tooltip.active = false;\n    this.button.blur();\n    this.vmInteractionChange.emit(false);\n  }\n  onFocus() {\n    this.vmFocus.emit();\n    this.onShowTooltip();\n  }\n  onBlur() {\n    this.vmBlur.emit();\n    this.onHideTooltip();\n  }\n  onMouseEnter() {\n    this.onShowTooltip();\n  }\n  onMouseLeave() {\n    this.onHideTooltip();\n  }\n  render() {\n    const isMenuExpanded = this.expanded ? 'true' : 'false';\n    const isPressed = this.pressed ? 'true' : 'false';\n    return (h(\"button\", { class: {\n        hidden: this.hidden,\n        notTouch: !this.isTouch,\n        tapHighlight: this.showTapHighlight,\n      }, id: this.identifier, type: \"button\", \"aria-label\": this.label, \"aria-haspopup\": !isUndefined(this.menu) ? 'true' : undefined, \"aria-controls\": this.menu, \"aria-expanded\": !isUndefined(this.menu) ? isMenuExpanded : undefined, \"aria-pressed\": !isUndefined(this.pressed) ? isPressed : undefined, \"aria-hidden\": this.hidden ? 'true' : 'false', \"aria-describedby\": this.describedBy, onTouchStart: this.onTouchStart.bind(this), onTouchEnd: this.onTouchEnd.bind(this), onFocus: this.onFocus.bind(this), onBlur: this.onBlur.bind(this), onMouseEnter: this.onMouseEnter.bind(this), onMouseLeave: this.onMouseLeave.bind(this), ref: (el) => {\n        this.button = el;\n      } }, h(\"slot\", null)));\n  }\n  get host() { return this; }\n  static get watchers() { return {\n    \"keys\": [\"onKeysChange\"]\n  }; }\n  static get style() { return controlCss; }\n};\n\nconst controlGroupCss = \":host{width:100%}.controlGroup{position:relative;width:100%;display:flex;flex-wrap:wrap;flex-direction:inherit;align-items:inherit;justify-content:inherit;box-sizing:border-box}.controlGroup.spaceTop{margin-top:var(--vm-control-group-spacing)}.controlGroup.spaceBottom{margin-bottom:var(--vm-control-group-spacing)}::slotted(*){margin-left:var(--vm-controls-spacing)}::slotted(*:first-child){margin-left:0}\";\n\nconst ControlNewLine = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /**\n     * Determines where to add spacing/margin. The amount of spacing is determined by the CSS variable\n     * `--control-group-spacing`.\n     */\n    this.space = 'none';\n    withComponentRegistry(this);\n  }\n  render() {\n    return (h(\"div\", { class: {\n        controlGroup: true,\n        spaceTop: this.space !== 'none' && this.space !== 'bottom',\n        spaceBottom: this.space !== 'none' && this.space !== 'top',\n      } }, h(\"slot\", null)));\n  }\n  get host() { return this; }\n  static get style() { return controlGroupCss; }\n};\n\nconst controlSpacerCss = \":host{flex:1}\";\n\nconst ControlSpacer = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    withComponentRegistry(this);\n  }\n  static get style() { return controlSpacerCss; }\n};\n\nconst debounce = (func, wait = 1000, immediate = false) => {\n  let timeout;\n  return function executedFunction(...args) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const context = this;\n    const later = function delayedFunctionCall() {\n      timeout = undefined;\n      if (!immediate)\n        func.apply(context, args);\n    };\n    const callNow = immediate && isUndefined(timeout);\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow)\n      func.apply(context, args);\n  };\n};\n\nconst controlsCss = \":host{position:relative;width:100%;z-index:var(--vm-controls-z-index)}:host([video]){position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.controls{display:flex;width:100%;position:absolute;flex-wrap:wrap;pointer-events:auto;box-sizing:border-box;background:var(--vm-controls-bg);padding:var(--vm-controls-padding);border-radius:var(--vm-controls-border-radius);opacity:0;visibility:hidden;transition:var(--vm-fade-transition)}.controls.audio{position:relative}.controls.hidden{display:none}.controls.active{opacity:1;visibility:visible}.controls.fullWidth{width:100%}.controls.fullHeight{height:100%}::slotted(*:not(vm-control-group)){margin-left:var(--vm-controls-spacing)}::slotted(*:not(vm-control-group):first-child){margin-left:0}\";\n\nvar __awaiter$q = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n/**\n * We want to keep the controls active state in-sync per player.\n */\nconst playerRef = {};\nconst hideControlsTimeout = {};\nconst Controls = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.disposal = new Disposal();\n    this.isInteracting = false;\n    /**\n     * Whether the controls are visible or not.\n     */\n    this.hidden = false;\n    /**\n     * Whether the controls container should be 100% width. This has no effect if the view is of\n     * type `audio`.\n     */\n    this.fullWidth = false;\n    /**\n     * Whether the controls container should be 100% height. This has no effect if the view is of\n     * type `audio`.\n     */\n    this.fullHeight = false;\n    /**\n     * Sets the `flex-direction` property that manages the direction in which the controls are layed\n     * out.\n     */\n    this.direction = 'row';\n    /**\n     * Sets the `align-items` flex property that aligns the individual controls on the cross-axis.\n     */\n    this.align = 'center';\n    /**\n     * Sets the `justify-content` flex property that aligns the individual controls on the main-axis.\n     */\n    this.justify = 'start';\n    /**\n     * Pins the controls to the defined position inside the video player. This has no effect when\n     * the view is of type `audio`.\n     */\n    this.pin = 'bottomLeft';\n    /**\n     * The length in milliseconds that the controls are active for before fading out. Audio players\n     * are not effected by this prop.\n     */\n    this.activeDuration = 2750;\n    /**\n     * Whether the controls should wait for playback to start before being shown. Audio players\n     * are not effected by this prop.\n     */\n    this.waitForPlaybackStart = false;\n    /**\n     * Whether the controls should show/hide when paused. Audio players are not effected by this prop.\n     */\n    this.hideWhenPaused = false;\n    /**\n     * Whether the controls should hide when the mouse leaves the player. Audio players are not\n     * effected by this prop.\n     */\n    this.hideOnMouseLeave = false;\n    /** @internal */\n    this.isAudioView = false;\n    /** @internal */\n    this.isSettingsActive = false;\n    /** @internal */\n    this.playbackReady = false;\n    /** @internal */\n    this.isControlsActive = false;\n    /** @internal */\n    this.paused = true;\n    /** @internal */\n    this.playbackStarted = false;\n    withComponentRegistry(this);\n    registerControlsForCollisionDetection(this);\n    withPlayerContext(this, [\n      'playbackReady',\n      'isAudioView',\n      'isControlsActive',\n      'isSettingsActive',\n      'paused',\n      'playbackStarted',\n    ]);\n  }\n  connectedCallback() {\n    this.dispatch = createDispatcher(this);\n    this.onControlsChange();\n    this.setupPlayerListeners();\n  }\n  componentWillLoad() {\n    this.onControlsChange();\n  }\n  disconnectedCallback() {\n    this.disposal.empty();\n    delete hideControlsTimeout[playerRef[this]];\n    delete playerRef[this];\n  }\n  setupPlayerListeners() {\n    return __awaiter$q(this, void 0, void 0, function* () {\n      const player = yield findPlayer(this);\n      if (isUndefined(player))\n        return;\n      const events = ['focus', 'keydown', 'click', 'touchstart', 'mouseleave'];\n      events.forEach(event => {\n        this.disposal.add(listen(player, event, this.onControlsChange.bind(this)));\n      });\n      this.disposal.add(listen(player, 'mousemove', debounce(this.onControlsChange, 50, true).bind(this)));\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      playerRef[this] = player;\n    });\n  }\n  show() {\n    this.dispatch('isControlsActive', true);\n  }\n  hide() {\n    this.dispatch('isControlsActive', false);\n  }\n  hideWithDelay() {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    clearTimeout(hideControlsTimeout[playerRef[this]]);\n    hideControlsTimeout[playerRef[this]] = setTimeout(() => {\n      this.hide();\n    }, this.activeDuration);\n  }\n  onControlsChange(event) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    clearTimeout(hideControlsTimeout[playerRef[this]]);\n    if (this.hidden || !this.playbackReady) {\n      this.hide();\n      return;\n    }\n    if (this.isAudioView) {\n      this.show();\n      return;\n    }\n    if (this.waitForPlaybackStart && !this.playbackStarted) {\n      this.hide();\n      return;\n    }\n    if (this.isInteracting || this.isSettingsActive) {\n      this.show();\n      return;\n    }\n    if (this.hideWhenPaused && this.paused) {\n      this.hideWithDelay();\n      return;\n    }\n    if (this.hideOnMouseLeave && !this.paused && (event === null || event === void 0 ? void 0 : event.type) === 'mouseleave') {\n      this.hide();\n      return;\n    }\n    if (!this.paused) {\n      this.show();\n      this.hideWithDelay();\n      return;\n    }\n    this.show();\n  }\n  getPosition() {\n    if (this.isAudioView)\n      return {};\n    if (this.pin === 'center') {\n      return {\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n      };\n    }\n    // topLeft => { top: 0, left: 0 }\n    const pos = this.pin.split(/(?=[L|R])/).map(s => s.toLowerCase());\n    return { [pos[0]]: 0, [pos[1]]: 0 };\n  }\n  onStartInteraction() {\n    this.isInteracting = true;\n  }\n  onEndInteraction() {\n    this.isInteracting = false;\n  }\n  render() {\n    return (h(Host, { video: !this.isAudioView }, h(\"div\", { style: Object.assign(Object.assign({}, this.getPosition()), { flexDirection: this.direction, alignItems: this.align === 'center' ? 'center' : `flex-${this.align}`, justifyContent: this.justify }), class: {\n        controls: true,\n        audio: this.isAudioView,\n        hidden: this.hidden,\n        active: this.playbackReady && this.isControlsActive,\n        fullWidth: this.isAudioView || this.fullWidth,\n        fullHeight: !this.isAudioView && this.fullHeight,\n      }, onMouseEnter: this.onStartInteraction.bind(this), onMouseLeave: this.onEndInteraction.bind(this), onTouchStart: this.onStartInteraction.bind(this), onTouchEnd: this.onEndInteraction.bind(this) }, h(\"slot\", null))));\n  }\n  static get watchers() { return {\n    \"paused\": [\"onControlsChange\"],\n    \"hidden\": [\"onControlsChange\"],\n    \"isAudioView\": [\"onControlsChange\"],\n    \"isInteracting\": [\"onControlsChange\"],\n    \"isSettingsActive\": [\"onControlsChange\"],\n    \"hideWhenPaused\": [\"onControlsChange\"],\n    \"hideOnMouseLeave\": [\"onControlsChange\"],\n    \"playbackStarted\": [\"onControlsChange\"],\n    \"waitForPlaybackStart\": [\"onControlsChange\"],\n    \"playbackReady\": [\"onControlsChange\"]\n  }; }\n  static get style() { return controlsCss; }\n};\n\nconst currentTimeCss = \":host{display:flex;align-items:center;justify-content:center}\";\n\nconst CurrentTime = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /** @internal */\n    this.currentTime = 0;\n    /** @internal */\n    this.i18n = {};\n    /**\n     * Whether the time should always show the hours unit, even if the time is less than\n     * 1 hour (eg: `20:35` -> `00:20:35`).\n     */\n    this.alwaysShowHours = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, ['currentTime', 'i18n']);\n  }\n  render() {\n    return (h(\"vm-time\", { label: this.i18n.currentTime, seconds: this.currentTime, alwaysShowHours: this.alwaysShowHours }));\n  }\n  static get style() { return currentTimeCss; }\n};\n\nvar _a, _b;\nconst IS_CLIENT = typeof window !== 'undefined';\nconst UA = IS_CLIENT ? (_a = window.navigator) === null || _a === void 0 ? void 0 : _a.userAgent.toLowerCase() : '';\nconst IS_IOS = /iphone|ipad|ipod|ios|CriOS|FxiOS/.test(UA);\nconst IS_ANDROID = /android/.test(UA);\nconst IS_MOBILE = IS_CLIENT && (IS_IOS || IS_ANDROID);\nconst IS_IPHONE = IS_CLIENT && /(iPhone|iPod)/gi.test((_b = window.navigator) === null || _b === void 0 ? void 0 : _b.platform);\n/firefox/.test(UA);\nconst IS_CHROME = IS_CLIENT && window.chrome;\nIS_CLIENT &&\n  !IS_CHROME &&\n  (window.safari || IS_IOS || /(apple|safari)/.test(UA));\nconst onMobileChange = (callback) => {\n  if (!IS_CLIENT || isUndefined(window.ResizeObserver)) {\n    callback(IS_MOBILE);\n    return noop;\n  }\n  function onResize() {\n    callback(window.innerWidth <= 480 || IS_MOBILE);\n  }\n  callback(window.innerWidth <= 480 || IS_MOBILE);\n  return listen(window, 'resize', onResize);\n};\nconst onTouchInputChange = (callback) => {\n  if (!IS_CLIENT)\n    return noop;\n  let lastTouchTime = 0;\n  const offTouchListener = listen(document, 'touchstart', () => {\n    lastTouchTime = new Date().getTime();\n    callback(true);\n  }, true);\n  const offMouseListener = listen(document, 'mousemove', () => {\n    // Filter emulated events coming from touch events\n    if (new Date().getTime() - lastTouchTime < 500)\n      return;\n    callback(false);\n  }, true);\n  return () => {\n    offTouchListener();\n    offMouseListener();\n  };\n};\n/**\n * Checks if the screen orientation can be changed.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Screen/orientation\n */\nconst canRotateScreen = () => IS_CLIENT && window.screen.orientation && !!window.screen.orientation.lock;\n/**\n * Checks if the native HTML5 video player can enter picture-in-picture (PIP) mode when using\n * the Chrome browser.\n *\n * @see  https://developers.google.com/web/updates/2018/10/watch-video-using-picture-in-picture\n */\nconst canUsePiPInChrome = () => {\n  if (!IS_CLIENT)\n    return false;\n  const video = document.createElement('video');\n  return !!document.pictureInPictureEnabled && !video.disablePictureInPicture;\n};\n/**\n * Checks if the native HTML5 video player can enter picture-in-picture (PIP) mode when using\n * the desktop Safari browser, iOS Safari appears to \"support\" PiP through the check, however PiP\n * does not function.\n *\n * @see https://developer.apple.com/documentation/webkitjs/adding_picture_in_picture_to_your_safari_media_controls\n */\nconst canUsePiPInSafari = () => {\n  if (!IS_CLIENT)\n    return false;\n  const video = document.createElement('video');\n  return (isFunction(video.webkitSupportsPresentationMode) &&\n    isFunction(video.webkitSetPresentationMode) &&\n    !IS_IPHONE);\n};\n// Checks if the native HTML5 video player can enter PIP.\nconst canUsePiP = () => canUsePiPInChrome() || canUsePiPInSafari();\n/**\n * To detect autoplay, we create a video element and call play on it, if it is `paused` after\n * a `play()` call, autoplay is supported. Although this unintuitive, it works across browsers\n * and is currently the lightest way to detect autoplay without using a data source.\n *\n * @see https://github.com/ampproject/amphtml/blob/9bc8756536956780e249d895f3e1001acdee0bc0/src/utils/video.js#L25\n */\nconst canAutoplay = (muted = true, playsinline = true) => {\n  if (!IS_CLIENT)\n    return Promise.resolve(false);\n  const video = document.createElement('video');\n  if (muted) {\n    video.setAttribute('muted', '');\n    video.muted = true;\n  }\n  if (playsinline) {\n    video.setAttribute('playsinline', '');\n    video.setAttribute('webkit-playsinline', '');\n  }\n  video.setAttribute('height', '0');\n  video.setAttribute('width', '0');\n  video.style.position = 'fixed';\n  video.style.top = '0';\n  video.style.width = '0';\n  video.style.height = '0';\n  video.style.opacity = '0';\n  // Promise wrapped this way to catch both sync throws and async rejections.\n  // More info: https://github.com/tc39/proposal-promise-try\n  new Promise(resolve => resolve(video.play())).catch(noop);\n  return Promise.resolve(!video.paused);\n};\n\n/**\n * Attempt to parse json into a POJO.\n */\nfunction tryParseJSON(json) {\n  if (!isString(json))\n    return undefined;\n  try {\n    return JSON.parse(json);\n  }\n  catch (e) {\n    return undefined;\n  }\n}\n/**\n * Check if the given input is json or a plain object.\n */\nconst isObjOrJSON = (input) => !isNil(input) &&\n  (isObject(input) || (isString(input) && input.startsWith('{')));\n/**\n * If an object return otherwise try to parse it as json.\n */\nconst objOrParseJSON = (input) => isObject(input) ? input : tryParseJSON(input);\n/**\n * Load image avoiding xhr/fetch CORS issues. Server status can't be obtained this way\n * unfortunately, so this uses \"naturalWidth\" to determine if the image has been loaded. By\n * default it checks if it is at least 1px.\n */\nconst loadImage = (src, minWidth = 1) => new Promise((resolve, reject) => {\n  const image = new Image();\n  const handler = () => {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    delete image.onload;\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    delete image.onerror;\n    image.naturalWidth >= minWidth ? resolve(image) : reject(image);\n  };\n  Object.assign(image, { onload: handler, onerror: handler, src });\n});\nconst loadScript = (src, onLoad, onError = noop) => {\n  var _a;\n  const script = document.createElement('script');\n  script.src = src;\n  script.onload = onLoad;\n  script.onerror = onError;\n  const firstScriptTag = document.getElementsByTagName('script')[0];\n  (_a = firstScriptTag.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(script, firstScriptTag);\n};\n/**\n * Tries to parse json and return a object.\n */\nconst decodeJSON = (data) => {\n  if (!isObjOrJSON(data))\n    return undefined;\n  return objOrParseJSON(data);\n};\n/**\n * Attempts to safely decode a URI component, on failure it returns the given fallback.\n */\nconst tryDecodeURIComponent = (component, fallback = '') => {\n  if (!IS_CLIENT)\n    return fallback;\n  try {\n    return window.decodeURIComponent(component);\n  }\n  catch (e) {\n    return fallback;\n  }\n};\n/**\n * Returns a simple key/value map and duplicate keys are merged into an array.\n *\n * @see https://github.com/ampproject/amphtml/blob/c7c46cec71bac92f5c5da31dcc6366c18577f566/src/url-parse-query-string.js#L31\n */\nconst QUERY_STRING_REGEX = /(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;\nconst parseQueryString = (qs) => {\n  const params = Object.create(null);\n  if (isUndefined(qs))\n    return params;\n  let match;\n  // eslint-disable-next-line no-cond-assign\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  while ((match = QUERY_STRING_REGEX.exec(qs))) {\n    const name = tryDecodeURIComponent(match[1], match[1]).replace('[]', '');\n    const value = isString(match[2])\n      ? tryDecodeURIComponent(match[2].replace(/\\+/g, ' '), match[2])\n      : '';\n    const currValue = params[name];\n    if (currValue && !isArray(currValue))\n      params[name] = [currValue];\n    currValue ? params[name].push(value) : (params[name] = value);\n  }\n  return params;\n};\n/**\n * Serializes the given params into a query string.\n */\nconst serializeQueryString = (params) => {\n  const qs = [];\n  const appendQueryParam = (param, v) => {\n    qs.push(`${encodeURIComponent(param)}=${encodeURIComponent(v)}`);\n  };\n  Object.keys(params).forEach(param => {\n    const value = params[param];\n    if (isNil(value))\n      return;\n    if (isArray(value)) {\n      value.forEach((v) => appendQueryParam(param, v));\n    }\n    else {\n      appendQueryParam(param, value);\n    }\n  });\n  return qs.join('&');\n};\n/**\n * Notifies the browser to start establishing a connection with the given URL.\n */\nconst preconnect = (url, rel = 'preconnect', as) => {\n  if (!IS_CLIENT)\n    return false;\n  const link = document.createElement('link');\n  link.rel = rel;\n  link.href = url;\n  if (!isUndefined(as))\n    link.as = as;\n  link.crossOrigin = 'true';\n  document.head.append(link);\n  return true;\n};\n/**\n * Safely appends the given query string to the given URL.\n */\nconst appendQueryStringToURL = (url, qs) => {\n  if (isUndefined(qs) || qs.length === 0)\n    return url;\n  const mainAndQuery = url.split('?', 2);\n  return (mainAndQuery[0] +\n    (!isUndefined(mainAndQuery[1]) ? `?${mainAndQuery[1]}&${qs}` : `?${qs}`));\n};\n/**\n * Serializes the given params into a query string and appends them to the given URL.\n */\nconst appendParamsToURL = (url, params) => appendQueryStringToURL(url, isObject(params)\n  ? serializeQueryString(params)\n  : params);\n/**\n * Tries to convert a query string into a object.\n */\nconst decodeQueryString = (qs) => {\n  if (!isString(qs))\n    return undefined;\n  return parseQueryString(qs);\n};\nconst pendingSDKRequests = {};\n/**\n * Loads an SDK into the global window namespace.\n *\n * @see https://github.com/CookPete/react-player/blob/master/src/utils.js#L77\n */\nconst loadSDK = (url, sdkGlobalVar, sdkReadyVar, isLoaded = () => true, loadScriptFn = loadScript) => {\n  const getGlobal = (key) => {\n    if (!isUndefined(window[key]))\n      return window[key];\n    if (window.exports && window.exports[key])\n      return window.exports[key];\n    if (window.module && window.module.exports && window.module.exports[key]) {\n      return window.module.exports[key];\n    }\n    return undefined;\n  };\n  const existingGlobal = getGlobal(sdkGlobalVar);\n  if (existingGlobal && isLoaded(existingGlobal)) {\n    return Promise.resolve(existingGlobal);\n  }\n  return new Promise((resolve, reject) => {\n    if (!isUndefined(pendingSDKRequests[url])) {\n      pendingSDKRequests[url].push({ resolve, reject });\n      return;\n    }\n    pendingSDKRequests[url] = [{ resolve, reject }];\n    const onLoaded = (sdk) => {\n      pendingSDKRequests[url].forEach(request => request.resolve(sdk));\n    };\n    if (!isUndefined(sdkReadyVar)) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const previousOnReady = window[sdkReadyVar];\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      window[sdkReadyVar] = function () {\n        if (!isUndefined(previousOnReady))\n          previousOnReady();\n        onLoaded(getGlobal(sdkGlobalVar));\n      };\n    }\n    loadScriptFn(url, () => {\n      if (isUndefined(sdkReadyVar))\n        onLoaded(getGlobal(sdkGlobalVar));\n    }, e => {\n      pendingSDKRequests[url].forEach(request => {\n        request.reject(e);\n      });\n      delete pendingSDKRequests[url];\n    });\n  });\n};\n\nconst withProviderContext = (provider, additionalProps = []) => withPlayerContext(provider, [\n  'autoplay',\n  'controls',\n  'language',\n  'muted',\n  'logger',\n  'loop',\n  'aspectRatio',\n  'playsinline',\n  ...additionalProps,\n]);\n\nconst dailymotionCss = \":host{z-index:var(--vm-media-z-index)}\";\n\nvar __awaiter$p = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst videoInfoCache$1 = new Map();\nconst Dailymotion = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmLoadStart = createEvent(this, \"vmLoadStart\", 7);\n    this.vmError = createEvent(this, \"vmError\", 7);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.defaultInternalState = {};\n    this.internalState = {\n      currentTime: 0,\n      volume: 0,\n      muted: false,\n      isAdsPlaying: false,\n      playbackReady: false,\n    };\n    this.embedSrc = '';\n    this.mediaTitle = '';\n    /**\n     * Whether to automatically play the next video in the queue.\n     */\n    this.shouldAutoplayQueue = false;\n    /**\n     * Whether to show the 'Up Next' queue.\n     */\n    this.showUpNextQueue = false;\n    /**\n     * Whether to show buttons for sharing the video.\n     */\n    this.showShareButtons = false;\n    /**\n     * Whether to display the Dailymotion logo.\n     */\n    this.showDailymotionLogo = false;\n    /**\n     * Whether to show video information (title and owner) on the start screen.\n     */\n    this.showVideoInfo = true;\n    /** @internal */\n    this.language = 'en';\n    /** @internal */\n    this.autoplay = false;\n    /** @internal */\n    this.controls = false;\n    /** @internal */\n    this.loop = false;\n    /** @internal */\n    this.muted = false;\n    /** @internal */\n    this.playsinline = false;\n    withComponentRegistry(this);\n    withProviderConnect(this);\n    withProviderContext(this);\n  }\n  onVideoIdChange() {\n    this.internalState = Object.assign({}, this.defaultInternalState);\n    if (!this.videoId) {\n      this.embedSrc = '';\n      return;\n    }\n    this.embedSrc = `${this.getOrigin()}/embed/video/${this.videoId}?api=1`;\n    this.fetchVideoInfo = this.getVideoInfo();\n    this.pendingMediaTitleCall = deferredPromise();\n  }\n  onControlsChange() {\n    if (this.internalState.playbackReady) {\n      this.remoteControl(\"controls\" /* Controls */, this.controls);\n    }\n  }\n  onCustomPosterChange() {\n    this.dispatch('currentPoster', this.poster);\n  }\n  connectedCallback() {\n    this.dispatch = createProviderDispatcher(this);\n    this.dispatch('viewType', ViewType.Video);\n    this.onVideoIdChange();\n    this.internalState.muted = this.muted;\n    this.defaultInternalState = Object.assign({}, this.internalState);\n  }\n  componentDidLoad() {\n    this.initialMuted = this.muted;\n  }\n  getOrigin() {\n    return 'https://www.dailymotion.com';\n  }\n  getPreconnections() {\n    return [this.getOrigin(), 'https://static1.dmcdn.net'];\n  }\n  remoteControl(command, arg) {\n    return this.embed.postMessage({\n      command,\n      parameters: arg ? [arg] : [],\n    });\n  }\n  buildParams() {\n    return {\n      autoplay: this.autoplay,\n      mute: this.initialMuted,\n      controls: this.controls,\n      'queue-autoplay-next': this.shouldAutoplayQueue,\n      'queue-enable': this.showUpNextQueue,\n      'sharing-enable': this.showShareButtons,\n      syndication: this.syndication,\n      'ui-highlight': this.color,\n      'ui-logo': this.showDailymotionLogo,\n      'ui-start-screen-info': this.showVideoInfo,\n    };\n  }\n  getVideoInfo() {\n    return __awaiter$p(this, void 0, void 0, function* () {\n      if (videoInfoCache$1.has(this.videoId))\n        return videoInfoCache$1.get(this.videoId);\n      const apiEndpoint = 'https://api.dailymotion.com';\n      return window\n        .fetch(`${apiEndpoint}/video/${this.videoId}?fields=duration,thumbnail_1080_url`)\n        .then(response => response.json())\n        .then(data => {\n        const poster = data.thumbnail_1080_url;\n        const duration = parseFloat(data.duration);\n        videoInfoCache$1.set(this.videoId, { poster, duration });\n        return { poster, duration };\n      });\n    });\n  }\n  onEmbedSrcChange() {\n    this.vmLoadStart.emit();\n    this.dispatch('viewType', ViewType.Video);\n  }\n  onEmbedMessage(event) {\n    var _a, _b;\n    const msg = event.detail;\n    switch (msg.event) {\n      case \"playback_ready\" /* PlaybackReady */:\n        this.onControlsChange();\n        this.dispatch('currentSrc', this.embedSrc);\n        this.dispatch('mediaType', MediaType.Video);\n        Promise.all([\n          this.fetchVideoInfo,\n          (_a = this.pendingMediaTitleCall) === null || _a === void 0 ? void 0 : _a.promise,\n        ]).then(([info, mediaTitle]) => {\n          var _a, _b;\n          this.dispatch('duration', (_a = info === null || info === void 0 ? void 0 : info.duration) !== null && _a !== void 0 ? _a : -1);\n          this.dispatch('currentPoster', (_b = this.poster) !== null && _b !== void 0 ? _b : info === null || info === void 0 ? void 0 : info.poster);\n          this.dispatch('mediaTitle', mediaTitle);\n          this.dispatch('playbackReady', true);\n        });\n        break;\n      case \"videochange\" /* VideoChange */:\n        (_b = this.pendingMediaTitleCall) === null || _b === void 0 ? void 0 : _b.resolve(msg.title);\n        break;\n      case \"start\" /* Start */:\n        this.dispatch('paused', false);\n        this.dispatch('playbackStarted', true);\n        this.dispatch('buffering', true);\n        break;\n      case \"video_start\" /* VideoStart */:\n        // Commands don't go through until ads have finished, so we store them and then replay them\n        // once the video starts.\n        this.remoteControl(\"muted\" /* Muted */, this.internalState.muted);\n        this.remoteControl(\"volume\" /* Volume */, this.internalState.volume);\n        if (this.internalState.currentTime > 0) {\n          this.remoteControl(\"seek\" /* Seek */, this.internalState.currentTime);\n        }\n        break;\n      case \"play\" /* Play */:\n        this.dispatch('paused', false);\n        break;\n      case \"pause\" /* Pause */:\n        this.dispatch('paused', true);\n        this.dispatch('playing', false);\n        this.dispatch('buffering', false);\n        break;\n      case \"playing\" /* Playing */:\n        this.dispatch('playing', true);\n        this.dispatch('buffering', false);\n        break;\n      case \"video_end\" /* VideoEnd */:\n        if (this.loop) {\n          setTimeout(() => {\n            this.remoteControl(\"play\" /* Play */);\n          }, 300);\n        }\n        else {\n          this.dispatch('playbackEnded', true);\n        }\n        break;\n      case \"timeupdate\" /* TimeUpdate */:\n        this.dispatch('currentTime', parseFloat(msg.time));\n        break;\n      case \"volumechange\" /* VolumeChange */:\n        this.dispatch('muted', msg.muted === 'true');\n        this.dispatch('volume', Math.floor(parseFloat(msg.volume) * 100));\n        break;\n      case \"seeking\" /* Seeking */:\n        this.dispatch('currentTime', parseFloat(msg.time));\n        this.dispatch('seeking', true);\n        break;\n      case \"seeked\" /* Seeked */:\n        this.dispatch('currentTime', parseFloat(msg.time));\n        this.dispatch('seeking', false);\n        break;\n      case \"waiting\" /* Waiting */:\n        this.dispatch('buffering', true);\n        break;\n      case \"progress\" /* Progress */:\n        this.dispatch('buffered', parseFloat(msg.time));\n        break;\n      case \"durationchange\" /* DurationChange */:\n        this.dispatch('duration', parseFloat(msg.duration));\n        break;\n      case \"qualitiesavailable\" /* QualitiesAvailable */:\n        this.dispatch('playbackQualities', msg.qualities.map((q) => `${q}p`));\n        break;\n      case \"qualitychange\" /* QualityChange */:\n        this.dispatch('playbackQuality', `${msg.quality}p`);\n        break;\n      case \"fullscreenchange\" /* FullscreenChange */:\n        this.dispatch('isFullscreenActive', msg.fullscreen === 'true');\n        break;\n      case \"error\" /* Error */:\n        this.vmError.emit(msg.error);\n        break;\n    }\n  }\n  /** @internal */\n  getAdapter() {\n    return __awaiter$p(this, void 0, void 0, function* () {\n      const canPlayRegex = /(?:dai\\.ly|dailymotion|dailymotion\\.com)\\/(?:video\\/|embed\\/|)(?:video\\/|)((?:\\w)+)/;\n      return {\n        getInternalPlayer: () => __awaiter$p(this, void 0, void 0, function* () { return this.embed; }),\n        play: () => __awaiter$p(this, void 0, void 0, function* () {\n          this.remoteControl(\"play\" /* Play */);\n        }),\n        pause: () => __awaiter$p(this, void 0, void 0, function* () {\n          this.remoteControl(\"pause\" /* Pause */);\n        }),\n        canPlay: (type) => __awaiter$p(this, void 0, void 0, function* () { return isString(type) && canPlayRegex.test(type); }),\n        setCurrentTime: (time) => __awaiter$p(this, void 0, void 0, function* () {\n          if (time !== this.internalState.currentTime) {\n            this.internalState.currentTime = time;\n            this.remoteControl(\"seek\" /* Seek */, time);\n          }\n        }),\n        setMuted: (muted) => __awaiter$p(this, void 0, void 0, function* () {\n          this.internalState.muted = muted;\n          this.remoteControl(\"muted\" /* Muted */, muted);\n        }),\n        setVolume: (volume) => __awaiter$p(this, void 0, void 0, function* () {\n          this.internalState.volume = volume / 100;\n          this.dispatch('volume', volume);\n          this.remoteControl(\"volume\" /* Volume */, volume / 100);\n        }),\n        canSetPlaybackQuality: () => __awaiter$p(this, void 0, void 0, function* () { return true; }),\n        setPlaybackQuality: (quality) => __awaiter$p(this, void 0, void 0, function* () {\n          this.remoteControl(\"quality\" /* Quality */, quality.slice(0, -1));\n        }),\n        canSetFullscreen: () => __awaiter$p(this, void 0, void 0, function* () { return true; }),\n        enterFullscreen: () => __awaiter$p(this, void 0, void 0, function* () {\n          this.remoteControl(\"fullscreen\" /* Fullscreen */, true);\n        }),\n        exitFullscreen: () => __awaiter$p(this, void 0, void 0, function* () {\n          this.remoteControl(\"fullscreen\" /* Fullscreen */, false);\n        }),\n      };\n    });\n  }\n  render() {\n    return (h(\"vm-embed\", { embedSrc: this.embedSrc, mediaTitle: this.mediaTitle, origin: this.getOrigin(), params: this.buildParams(), decoder: decodeQueryString, preconnections: this.getPreconnections(), onVmEmbedMessage: this.onEmbedMessage.bind(this), onVmEmbedSrcChange: this.onEmbedSrcChange.bind(this), ref: (el) => {\n        this.embed = el;\n      } }));\n  }\n  static get watchers() { return {\n    \"videoId\": [\"onVideoIdChange\"],\n    \"controls\": [\"onControlsChange\"],\n    \"poster\": [\"onCustomPosterChange\"]\n  }; }\n  static get style() { return dailymotionCss; }\n};\n\nconst dashCss = \":host{z-index:var(--vm-media-z-index)}\";\n\nvar __awaiter$o = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst Dash = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmLoadStart = createEvent(this, \"vmLoadStart\", 7);\n    this.vmError = createEvent(this, \"vmError\", 7);\n    this.textTracksDisposal = new Disposal();\n    this.hasAttached = false;\n    /**\n     * The NPM package version of the `dashjs` library to download and use.\n     */\n    this.version = 'latest';\n    /**\n     * The `dashjs` configuration.\n     */\n    this.config = {};\n    /** @internal */\n    this.autoplay = false;\n    /** @inheritdoc */\n    this.preload = 'metadata';\n    /**\n     * Are text tracks enabled by default.\n     */\n    this.enableTextTracksByDefault = true;\n    /** @internal */\n    this.shouldRenderNativeTextTracks = true;\n    /** @internal */\n    this.isTextTrackVisible = true;\n    /** @internal */\n    this.currentTextTrack = -1;\n    withComponentRegistry(this);\n    withProviderConnect(this);\n    withPlayerContext(this, [\n      'autoplay',\n      'shouldRenderNativeTextTracks',\n      'isTextTrackVisible',\n      'currentTextTrack',\n    ]);\n  }\n  onSrcChange() {\n    var _a;\n    if (!this.hasAttached)\n      return;\n    this.vmLoadStart.emit();\n    (_a = this.dash) === null || _a === void 0 ? void 0 : _a.attachSource(this.src);\n  }\n  onShouldRenderNativeTextTracks() {\n    var _a;\n    if (this.shouldRenderNativeTextTracks) {\n      this.textTracksDisposal.empty();\n    }\n    else {\n      this.hideCurrentTextTrack();\n    }\n    (_a = this.dash) === null || _a === void 0 ? void 0 : _a.enableForcedTextStreaming(!this.shouldRenderNativeTextTracks);\n  }\n  onTextTrackChange() {\n    var _a, _b;\n    if (!this.shouldRenderNativeTextTracks || isUndefined(this.dash))\n      return;\n    this.dash.setTextTrack(!this.isTextTrackVisible ? -1 : this.currentTextTrack);\n    if (!this.isTextTrackVisible) {\n      const track = Array.from((_b = (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.textTracks) !== null && _b !== void 0 ? _b : [])[this.currentTextTrack];\n      if ((track === null || track === void 0 ? void 0 : track.mode) === 'hidden')\n        this.dispatch('currentTextTrack', -1);\n    }\n  }\n  connectedCallback() {\n    this.dispatch = createProviderDispatcher(this);\n    if (this.mediaEl)\n      this.setupDash();\n  }\n  disconnectedCallback() {\n    this.textTracksDisposal.empty();\n    this.destroyDash();\n  }\n  setupDash() {\n    return __awaiter$o(this, void 0, void 0, function* () {\n      try {\n        const url = this.libSrc ||\n          `https://cdn.jsdelivr.net/npm/dashjs@${this.version}/dist/dash.all.min.js`;\n        const DashSDK = (yield loadSDK(url, 'dashjs'));\n        this.dash = DashSDK.MediaPlayer(this.config).create();\n        this.dash.initialize(this.mediaEl, null, this.autoplay);\n        this.dash.setTextDefaultEnabled(this.enableTextTracksByDefault);\n        this.dash.enableForcedTextStreaming(!this.shouldRenderNativeTextTracks);\n        this.dash.on(DashSDK.MediaPlayer.events.PLAYBACK_METADATA_LOADED, () => {\n          this.dispatch('mediaType', MediaType.Video);\n          this.dispatch('currentSrc', this.src);\n          this.dispatchLevels();\n          this.listenToTextTracksForChanges();\n          this.dispatch('playbackReady', true);\n        });\n        this.dash.on(DashSDK.MediaPlayer.events.TRACK_CHANGE_RENDERED, () => {\n          if (!this.shouldRenderNativeTextTracks)\n            this.hideCurrentTextTrack();\n        });\n        this.dash.on(DashSDK.MediaPlayer.events.ERROR, (e) => {\n          this.vmError.emit(e);\n        });\n        this.hasAttached = true;\n      }\n      catch (e) {\n        this.vmError.emit(e);\n      }\n    });\n  }\n  destroyDash() {\n    var _a;\n    return __awaiter$o(this, void 0, void 0, function* () {\n      (_a = this.dash) === null || _a === void 0 ? void 0 : _a.reset();\n      this.hasAttached = false;\n    });\n  }\n  onMediaElChange(event) {\n    return __awaiter$o(this, void 0, void 0, function* () {\n      this.destroyDash();\n      if (isUndefined(event.detail))\n        return;\n      this.mediaEl = event.detail;\n      yield this.setupDash();\n    });\n  }\n  levelToPlaybackQuality(level) {\n    return level === -1 ? 'Auto' : `${level.height}p`;\n  }\n  findLevelIndexFromQuality(quality) {\n    return this.dash\n      .getBitrateInfoListFor('video')\n      .findIndex((level) => this.levelToPlaybackQuality(level) === quality);\n  }\n  dispatchLevels() {\n    try {\n      const levels = this.dash.getBitrateInfoListFor('video');\n      if ((levels === null || levels === void 0 ? void 0 : levels.length) > 0) {\n        this.dispatch('playbackQualities', [\n          'Auto',\n          ...levels.map(this.levelToPlaybackQuality),\n        ]);\n        this.dispatch('playbackQuality', 'Auto');\n      }\n    }\n    catch (e) {\n      this.vmError.emit(e);\n    }\n  }\n  listenToTextTracksForChanges() {\n    var _a, _b, _c;\n    this.textTracksDisposal.empty();\n    if (isUndefined(this.mediaEl) || this.shouldRenderNativeTextTracks)\n      return;\n    // Init current track.\n    const currentTrack = (_c = ((_b = (_a = this.dash) === null || _a === void 0 ? void 0 : _a.getCurrentTrackFor('text')) === null || _b === void 0 ? void 0 : _b.index) - 1) !== null && _c !== void 0 ? _c : -1;\n    this.currentTextTrack = currentTrack;\n    this.dispatch('currentTextTrack', currentTrack);\n    this.textTracksDisposal.add(listen(this.mediaEl.textTracks, 'change', this.onTextTracksChange.bind(this)));\n  }\n  getTextTracks() {\n    var _a, _b;\n    return Array.from((_b = (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.textTracks) !== null && _b !== void 0 ? _b : []);\n  }\n  hideCurrentTextTrack() {\n    const textTracks = this.getTextTracks();\n    if (textTracks[this.currentTextTrack] && this.isTextTrackVisible) {\n      textTracks[this.currentTextTrack].mode = 'hidden';\n    }\n  }\n  onTextTracksChange() {\n    this.hideCurrentTextTrack();\n    this.dispatch('textTracks', this.getTextTracks());\n    this.dispatch('isTextTrackVisible', this.isTextTrackVisible);\n    this.dispatch('currentTextTrack', this.currentTextTrack);\n  }\n  /** @internal */\n  getAdapter() {\n    var _a, _b;\n    return __awaiter$o(this, void 0, void 0, function* () {\n      const adapter = (_b = (yield ((_a = this.videoProvider) === null || _a === void 0 ? void 0 : _a.getAdapter()))) !== null && _b !== void 0 ? _b : {};\n      const canVideoProviderPlay = adapter.canPlay;\n      return Object.assign(Object.assign({}, adapter), { getInternalPlayer: () => __awaiter$o(this, void 0, void 0, function* () { return this.dash; }), canPlay: (type) => __awaiter$o(this, void 0, void 0, function* () {\n          var _c;\n          return (isString(type) && dashRegex.test(type)) ||\n            ((_c = canVideoProviderPlay === null || canVideoProviderPlay === void 0 ? void 0 : canVideoProviderPlay(type)) !== null && _c !== void 0 ? _c : false);\n        }), canSetPlaybackQuality: () => __awaiter$o(this, void 0, void 0, function* () {\n          var _d, _e;\n          try {\n            return ((_e = (_d = this.dash) === null || _d === void 0 ? void 0 : _d.getBitrateInfoListFor('video')) === null || _e === void 0 ? void 0 : _e.length) > 0;\n          }\n          catch (e) {\n            this.vmError.emit(e);\n            return false;\n          }\n        }), setPlaybackQuality: (quality) => __awaiter$o(this, void 0, void 0, function* () {\n          if (!isUndefined(this.dash)) {\n            const index = this.findLevelIndexFromQuality(quality);\n            this.dash.updateSettings({\n              streaming: {\n                abr: {\n                  autoSwitchBitrate: {\n                    video: index === -1,\n                  },\n                },\n              },\n            });\n            if (index >= 0)\n              this.dash.setQualityFor('video', index);\n            // Update the provider cache.\n            this.dispatch('playbackQuality', quality);\n          }\n        }), setCurrentTextTrack: (trackId) => __awaiter$o(this, void 0, void 0, function* () {\n          var _f;\n          if (this.shouldRenderNativeTextTracks) {\n            adapter.setCurrentTextTrack(trackId);\n          }\n          else {\n            this.currentTextTrack = trackId;\n            (_f = this.dash) === null || _f === void 0 ? void 0 : _f.setTextTrack(trackId);\n            this.onTextTracksChange();\n          }\n        }), setTextTrackVisibility: (isVisible) => __awaiter$o(this, void 0, void 0, function* () {\n          var _g;\n          if (this.shouldRenderNativeTextTracks) {\n            adapter.setTextTrackVisibility(isVisible);\n          }\n          else {\n            this.isTextTrackVisible = isVisible;\n            (_g = this.dash) === null || _g === void 0 ? void 0 : _g.enableText(isVisible);\n            this.onTextTracksChange();\n          }\n        }) });\n    });\n  }\n  render() {\n    return (h(\"vm-video\", { willAttach: true, crossOrigin: this.crossOrigin, preload: this.preload, poster: this.poster, controlsList: this.controlsList, autoPiP: this.autoPiP, disablePiP: this.disablePiP, hasCustomTextManager: !this.shouldRenderNativeTextTracks, disableRemotePlayback: this.disableRemotePlayback, mediaTitle: this.mediaTitle, ref: (el) => {\n        this.videoProvider = el;\n      } }));\n  }\n  static get watchers() { return {\n    \"src\": [\"onSrcChange\"],\n    \"hasAttached\": [\"onSrcChange\"],\n    \"shouldRenderNativeTextTracks\": [\"onShouldRenderNativeTextTracks\"],\n    \"isTextTrackVisible\": [\"onTextTrackChange\"],\n    \"currentTextTrack\": [\"onTextTrackChange\"]\n  }; }\n  static get style() { return dashCss; }\n};\n\nconst dblClickFullscreenCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-dbl-click-fullscreen-z-index)}.dblClickFullscreen{display:none;width:100%;height:100%;pointer-events:none}.dblClickFullscreen.enabled{display:inline-block;pointer-events:auto}\";\n\nvar __awaiter$n = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst DblClickFullscreen = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.canSetFullscreen = false;\n    /**\n     * By default this is disabled on mobile to not interfere with playback, set this to `true` to\n     * enable it.\n     */\n    this.useOnMobile = false;\n    /** @internal */\n    this.isFullscreenActive = true;\n    /** @internal */\n    this.isVideoView = false;\n    /** @internal */\n    this.playbackReady = false;\n    /** @internal */\n    this.isMobile = false;\n    this.clicks = 0;\n    withComponentRegistry(this);\n    withPlayerContext(this, [\n      'playbackReady',\n      'isFullscreenActive',\n      'isVideoView',\n      'isMobile',\n    ]);\n  }\n  onPlaybackReadyChange() {\n    return __awaiter$n(this, void 0, void 0, function* () {\n      const player = yield findPlayer(this);\n      if (isUndefined(player))\n        return;\n      this.canSetFullscreen = yield player.canSetFullscreen();\n    });\n  }\n  onTriggerClickToPlay() {\n    return __awaiter$n(this, void 0, void 0, function* () {\n      const [clickToPlay] = getComponentFromRegistry(this, 'vm-click-to-play');\n      yield (clickToPlay === null || clickToPlay === void 0 ? void 0 : clickToPlay.forceClick());\n    });\n  }\n  onToggleFullscreen() {\n    return __awaiter$n(this, void 0, void 0, function* () {\n      const player = yield findPlayer(this);\n      if (isUndefined(player))\n        return;\n      this.isFullscreenActive\n        ? player.exitFullscreen()\n        : player.enterFullscreen();\n    });\n  }\n  onClick() {\n    this.clicks += 1;\n    if (this.clicks === 1) {\n      setTimeout(() => {\n        if (this.clicks === 1) {\n          this.onTriggerClickToPlay();\n        }\n        else {\n          this.onToggleFullscreen();\n        }\n        this.clicks = 0;\n      }, 300);\n    }\n  }\n  render() {\n    return (h(\"div\", { class: {\n        dblClickFullscreen: true,\n        enabled: this.playbackReady &&\n          this.canSetFullscreen &&\n          this.isVideoView &&\n          (!this.isMobile || this.useOnMobile),\n      }, onClick: this.onClick.bind(this) }));\n  }\n  static get watchers() { return {\n    \"playbackReady\": [\"onPlaybackReadyChange\"]\n  }; }\n  static get style() { return dblClickFullscreenCss; }\n};\n\nconst defaultControlsCss = \":host{display:contents;pointer-events:none;z-index:var(--vm-controls-z-index)}\";\n\nconst DefaultControls = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /**\n     * The length in milliseconds that the controls are active for before fading out. Audio players\n     * are not effected by this prop.\n     */\n    this.activeDuration = 2750;\n    /**\n     * Whether the controls should wait for playback to start before being shown. Audio players\n     * are not effected by this prop.\n     */\n    this.waitForPlaybackStart = false;\n    /**\n     * Whether the controls should show/hide when paused. Audio players are not effected by this prop.\n     */\n    this.hideWhenPaused = false;\n    /**\n     * Whether the controls should hide when the mouse leaves the player. Audio players are not\n     * effected by this prop.\n     */\n    this.hideOnMouseLeave = false;\n    /** @internal */\n    this.isMobile = false;\n    /** @internal */\n    this.isLive = false;\n    /** @internal */\n    this.isAudioView = false;\n    /** @internal */\n    this.isVideoView = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, [\n      'theme',\n      'isMobile',\n      'isAudioView',\n      'isVideoView',\n      'isLive',\n    ]);\n  }\n  buildAudioControls() {\n    return (h(\"vm-controls\", { fullWidth: true }, h(\"vm-playback-control\", { tooltipDirection: \"right\" }), h(\"vm-volume-control\", null), !this.isLive && h(\"vm-current-time\", null), this.isLive && h(\"vm-control-spacer\", null), !this.isLive && h(\"vm-scrubber-control\", null), this.isLive && h(\"vm-live-indicator\", null), !this.isLive && h(\"vm-end-time\", null), !this.isLive && h(\"vm-settings-control\", { tooltipDirection: \"left\" }), h(\"div\", { style: { marginLeft: '0', paddingRight: '2px' } })));\n  }\n  buildMobileVideoControls() {\n    return (h(Fragment, null, h(\"vm-scrim\", { gradient: \"up\" }), h(\"vm-controls\", { pin: \"topLeft\", fullWidth: true, activeDuration: this.activeDuration, waitForPlaybackStart: this.waitForPlaybackStart, hideWhenPaused: this.hideWhenPaused }, h(\"vm-control-spacer\", null), h(\"vm-volume-control\", null), !this.isLive && h(\"vm-caption-control\", null), !this.isLive && h(\"vm-settings-control\", null), this.isLive && h(\"vm-fullscreen-control\", null)), h(\"vm-controls\", { pin: \"center\", justify: \"center\", activeDuration: this.activeDuration, waitForPlaybackStart: this.waitForPlaybackStart, hideWhenPaused: this.hideWhenPaused }, h(\"vm-playback-control\", { style: { '--vm-control-scale': '1.3' } })), !this.isLive && (h(\"vm-controls\", { pin: \"bottomLeft\", fullWidth: true, activeDuration: this.activeDuration, waitForPlaybackStart: this.waitForPlaybackStart, hideWhenPaused: this.hideWhenPaused }, h(\"vm-control-group\", null, h(\"vm-current-time\", null), h(\"vm-control-spacer\", null), h(\"vm-end-time\", null), h(\"vm-fullscreen-control\", null)), h(\"vm-control-group\", { space: \"top\" }, h(\"vm-scrubber-control\", null))))));\n  }\n  buildDesktopVideoControls() {\n    return (h(Fragment, null, this.theme !== 'light' && h(\"vm-scrim\", { gradient: \"up\" }), h(\"vm-controls\", { fullWidth: true, pin: \"bottomRight\", activeDuration: this.activeDuration, waitForPlaybackStart: this.waitForPlaybackStart, hideWhenPaused: this.hideWhenPaused, hideOnMouseLeave: this.hideOnMouseLeave }, !this.isLive && (h(\"vm-control-group\", null, h(\"vm-scrubber-control\", null))), h(\"vm-control-group\", { space: this.isLive ? 'none' : 'top' }, h(\"vm-playback-control\", { tooltipDirection: \"right\" }), h(\"vm-volume-control\", null), !this.isLive && h(\"vm-time-progress\", null), h(\"vm-control-spacer\", null), !this.isLive && h(\"vm-caption-control\", null), this.isLive && h(\"vm-live-indicator\", null), h(\"vm-pip-control\", null), !this.isLive && h(\"vm-settings-control\", null), h(\"vm-fullscreen-control\", { tooltipDirection: \"left\" })))));\n  }\n  render() {\n    if (this.isAudioView)\n      return this.buildAudioControls();\n    if (this.isVideoView && this.isMobile)\n      return this.buildMobileVideoControls();\n    if (this.isVideoView)\n      return this.buildDesktopVideoControls();\n    return null;\n  }\n  static get style() { return defaultControlsCss; }\n};\n\nconst defaultSettingsCss = \":host{z-index:var(--vm-menu-z-index)}\";\n\nvar __awaiter$m = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst DefaultSettings = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.textTracksDisposal = new Disposal();\n    this.canSetPlaybackRate = false;\n    this.canSetPlaybackQuality = false;\n    this.canSetTextTrack = false;\n    this.canSetAudioTrack = false;\n    /**\n     * Pins the settings to the defined position inside the video player. This has no effect when\n     * the view is of type `audio`, it will always be `bottomRight`.\n     */\n    this.pin = 'bottomRight';\n    /** @internal */\n    this.i18n = {};\n    /** @internal */\n    this.playbackReady = false;\n    /** @internal */\n    this.playbackRate = 1;\n    /** @internal */\n    this.playbackRates = [1];\n    /** @internal */\n    this.isVideoView = false;\n    /** @internal */\n    this.playbackQualities = [];\n    /** @internal */\n    this.textTracks = [];\n    /** @internal */\n    this.currentTextTrack = -1;\n    /** @internal */\n    this.audioTracks = [];\n    /** @internal */\n    this.currentAudioTrack = -1;\n    /** @internal */\n    this.isTextTrackVisible = true;\n    withComponentRegistry(this);\n    withPlayerContext(this, [\n      'i18n',\n      'playbackReady',\n      'playbackRate',\n      'playbackRates',\n      'playbackQuality',\n      'playbackQualities',\n      'isVideoView',\n      'textTracks',\n      'currentTextTrack',\n      'isTextTrackVisible',\n      'audioTracks',\n      'currentAudioTrack',\n    ]);\n  }\n  onPlaybackReady() {\n    return __awaiter$m(this, void 0, void 0, function* () {\n      const player = yield findPlayer(this);\n      if (isUndefined(player))\n        return;\n      this.canSetPlaybackQuality = yield player.canSetPlaybackQuality();\n      this.canSetPlaybackRate = yield player.canSetPlaybackRate();\n    });\n  }\n  onAudioTracksChange() {\n    var _a;\n    return __awaiter$m(this, void 0, void 0, function* () {\n      const player = getPlayerFromRegistry(this);\n      this.canSetAudioTrack = (_a = (yield (player === null || player === void 0 ? void 0 : player.canSetAudioTrack()))) !== null && _a !== void 0 ? _a : false;\n    });\n  }\n  onTextTracksChange() {\n    var _a;\n    return __awaiter$m(this, void 0, void 0, function* () {\n      const player = getPlayerFromRegistry(this);\n      this.canSetTextTrack = (_a = (yield (player === null || player === void 0 ? void 0 : player.canSetTextTrack()))) !== null && _a !== void 0 ? _a : false;\n    });\n  }\n  connectedCallback() {\n    this.dispatch = createDispatcher(this);\n  }\n  componentDidLoad() {\n    this.onTextTracksChange();\n  }\n  disconnectedCallback() {\n    this.textTracksDisposal.empty();\n  }\n  onPlaybackRateSelect(event) {\n    const radio = event.target;\n    this.dispatch('playbackRate', parseFloat(radio.value));\n  }\n  buildPlaybackRateSubmenu() {\n    if (this.playbackRates.length <= 1 || !this.canSetPlaybackRate) {\n      return (h(\"vm-menu-item\", { label: this.i18n.playbackRate, hint: this.i18n.normal }));\n    }\n    const formatRate = (rate) => rate === 1 ? this.i18n.normal : `${rate}`;\n    return (h(\"vm-submenu\", { label: this.i18n.playbackRate, hint: formatRate(this.playbackRate) }, h(\"vm-menu-radio-group\", { value: `${this.playbackRate}`, onVmCheck: this.onPlaybackRateSelect.bind(this) }, this.playbackRates.map(rate => (h(\"vm-menu-radio\", { label: formatRate(rate), value: `${rate}` }))))));\n  }\n  onPlaybackQualitySelect(event) {\n    const radio = event.target;\n    this.dispatch('playbackQuality', radio.value);\n  }\n  buildPlaybackQualitySubmenu() {\n    var _a;\n    if (this.playbackQualities.length <= 1 || !this.canSetPlaybackQuality) {\n      return (h(\"vm-menu-item\", { label: this.i18n.playbackQuality, hint: (_a = this.playbackQuality) !== null && _a !== void 0 ? _a : this.i18n.auto }));\n    }\n    // @TODO this doesn't account for audio qualities yet.\n    const getBadge = (quality) => {\n      const verticalPixels = parseInt(quality.slice(0, -1), 10);\n      if (verticalPixels >= 2160)\n        return 'UHD';\n      if (verticalPixels >= 1080)\n        return 'HD';\n      return undefined;\n    };\n    return (h(\"vm-submenu\", { label: this.i18n.playbackQuality, hint: this.playbackQuality }, h(\"vm-menu-radio-group\", { value: this.playbackQuality, onVmCheck: this.onPlaybackQualitySelect.bind(this) }, this.playbackQualities.map(quality => (h(\"vm-menu-radio\", { label: quality, value: quality, badge: getBadge(quality) }))))));\n  }\n  onTextTrackSelect(event) {\n    const radio = event.target;\n    const trackId = parseInt(radio.value, 10);\n    const player = getPlayerFromRegistry(this);\n    if (trackId === -1) {\n      player === null || player === void 0 ? void 0 : player.setTextTrackVisibility(false);\n      return;\n    }\n    player === null || player === void 0 ? void 0 : player.setTextTrackVisibility(true);\n    player === null || player === void 0 ? void 0 : player.setCurrentTextTrack(trackId);\n  }\n  buildTextTracksSubmenu() {\n    var _a, _b, _c;\n    if (this.textTracks.length <= 1 || !this.canSetTextTrack) {\n      return (h(\"vm-menu-item\", { label: this.i18n.subtitlesOrCc, hint: (_b = (_a = this.textTracks[this.currentTextTrack]) === null || _a === void 0 ? void 0 : _a.label) !== null && _b !== void 0 ? _b : this.i18n.none }));\n    }\n    return (h(\"vm-submenu\", { label: this.i18n.subtitlesOrCc, hint: this.isTextTrackVisible\n        ? (_c = this.textTracks[this.currentTextTrack]) === null || _c === void 0 ? void 0 : _c.label\n        : this.i18n.off }, h(\"vm-menu-radio-group\", { value: `${!this.isTextTrackVisible ? -1 : this.currentTextTrack}`, onVmCheck: this.onTextTrackSelect.bind(this) }, [h(\"vm-menu-radio\", { label: this.i18n.off, value: \"-1\" })].concat(this.textTracks.map((track, i) => (h(\"vm-menu-radio\", { label: track.label, value: `${i}` })))))));\n  }\n  onAudioTrackSelect(event) {\n    const radio = event.target;\n    const trackId = parseInt(radio.value, 10);\n    const player = getPlayerFromRegistry(this);\n    player === null || player === void 0 ? void 0 : player.setCurrentAudioTrack(trackId);\n  }\n  buildAudioTracksMenu() {\n    var _a, _b, _c;\n    if (this.audioTracks.length <= 1 || !this.canSetAudioTrack) {\n      return (h(\"vm-menu-item\", { label: this.i18n.audio, hint: (_b = (_a = this.audioTracks[this.currentAudioTrack]) === null || _a === void 0 ? void 0 : _a.label) !== null && _b !== void 0 ? _b : this.i18n.default }));\n    }\n    return (h(\"vm-submenu\", { label: this.i18n.audio, hint: (_c = this.audioTracks[this.currentAudioTrack]) === null || _c === void 0 ? void 0 : _c.label }, h(\"vm-menu-radio-group\", { value: `${this.currentAudioTrack}`, onVmCheck: this.onAudioTrackSelect.bind(this) }, this.audioTracks.map((track, i) => (h(\"vm-menu-radio\", { label: track.label, value: `${i}` }))))));\n  }\n  render() {\n    return (h(\"vm-settings\", { pin: this.pin }, this.buildAudioTracksMenu(), this.buildPlaybackRateSubmenu(), this.buildPlaybackQualitySubmenu(), this.isVideoView && this.buildTextTracksSubmenu(), h(\"slot\", null)));\n  }\n  static get watchers() { return {\n    \"playbackReady\": [\"onPlaybackReady\", \"onAudioTracksChange\", \"onTextTracksChange\"],\n    \"audioTracks\": [\"onAudioTracksChange\"],\n    \"textTracks\": [\"onTextTracksChange\"]\n  }; }\n  static get style() { return defaultSettingsCss; }\n};\n\nconst defaultUiCss = \":host{display:contents;pointer-events:none}\";\n\nconst DefaultUI = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /**\n     * Whether clicking the player should not toggle playback.\n     */\n    this.noClickToPlay = false;\n    /**\n     * Whether double clicking the player should not toggle fullscreen mode.\n     */\n    this.noDblClickFullscreen = false;\n    /**\n     * Whether the custom captions UI should not be loaded.\n     */\n    this.noCaptions = false;\n    /**\n     * Whether the custom poster UI should not be loaded.\n     */\n    this.noPoster = false;\n    /**\n     * Whether the custom spinner UI should not be loaded.\n     */\n    this.noSpinner = false;\n    /**\n     * Whether the custom default controls should not be loaded.\n     */\n    this.noControls = false;\n    /**\n     * Whether the custom default settings menu should not be loaded.\n     */\n    this.noSettings = false;\n    /**\n     * Whether the default loading screen should not be loaded.\n     */\n    this.noLoadingScreen = false;\n    withComponentRegistry(this);\n  }\n  render() {\n    return (h(\"vm-ui\", null, !this.noClickToPlay && h(\"vm-click-to-play\", null), !this.noDblClickFullscreen && h(\"vm-dbl-click-fullscreen\", null), !this.noCaptions && h(\"vm-captions\", null), !this.noPoster && h(\"vm-poster\", null), !this.noSpinner && h(\"vm-spinner\", null), !this.noLoadingScreen && h(\"vm-loading-screen\", null), !this.noControls && h(\"vm-default-controls\", null), !this.noSettings && h(\"vm-default-settings\", null), h(\"slot\", null)));\n  }\n  static get style() { return defaultUiCss; }\n};\n\nclass LazyLoader {\n  constructor(el, attributes, onLoad) {\n    var _a;\n    this.el = el;\n    this.attributes = attributes;\n    this.onLoad = onLoad;\n    this.hasLoaded = false;\n    if (isNil(this.el))\n      return;\n    this.intersectionObs = this.canObserveIntersection()\n      ? new IntersectionObserver(this.onIntersection.bind(this))\n      : undefined;\n    this.mutationObs = this.canObserveMutations()\n      ? new MutationObserver(this.onMutation.bind(this))\n      : undefined;\n    (_a = this.mutationObs) === null || _a === void 0 ? void 0 : _a.observe(this.el, {\n      childList: true,\n      subtree: true,\n      attributeFilter: this.attributes,\n    });\n    this.lazyLoad();\n  }\n  didLoad() {\n    return this.hasLoaded;\n  }\n  destroy() {\n    var _a, _b;\n    (_a = this.intersectionObs) === null || _a === void 0 ? void 0 : _a.disconnect();\n    (_b = this.mutationObs) === null || _b === void 0 ? void 0 : _b.disconnect();\n  }\n  canObserveIntersection() {\n    return IS_CLIENT && window.IntersectionObserver;\n  }\n  canObserveMutations() {\n    return IS_CLIENT && window.MutationObserver;\n  }\n  lazyLoad() {\n    var _a;\n    if (this.canObserveIntersection()) {\n      (_a = this.intersectionObs) === null || _a === void 0 ? void 0 : _a.observe(this.el);\n    }\n    else {\n      this.load();\n    }\n  }\n  onIntersection(entries) {\n    entries.forEach(entry => {\n      if (entry.intersectionRatio > 0 || entry.isIntersecting) {\n        this.load();\n        this.intersectionObs.unobserve(entry.target);\n      }\n    });\n  }\n  onMutation() {\n    if (this.hasLoaded)\n      this.load();\n  }\n  getLazyElements() {\n    const root = !isNil(this.el.shadowRoot) ? this.el.shadowRoot : this.el;\n    return root.querySelectorAll('.lazy');\n  }\n  load() {\n    window.requestAnimationFrame(() => {\n      this.getLazyElements().forEach(this.loadEl.bind(this));\n    });\n  }\n  loadEl(el) {\n    var _a, _b;\n    (_a = this.intersectionObs) === null || _a === void 0 ? void 0 : _a.unobserve(el);\n    this.hasLoaded = true;\n    (_b = this.onLoad) === null || _b === void 0 ? void 0 : _b.call(this, el);\n  }\n}\n\nconst embedCss = \":host{z-index:var(--vm-media-z-index)}iframe{position:absolute;top:0;left:0;border:0;width:100%;height:100%;user-select:none}\";\n\nvar __awaiter$l = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nlet idCount$4 = 0;\nconst connected = new Set();\nconst Embed = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmEmbedSrcChange = createEvent(this, \"vmEmbedSrcChange\", 3);\n    this.vmEmbedMessage = createEvent(this, \"vmEmbedMessage\", 3);\n    this.vmEmbedLoaded = createEvent(this, \"vmEmbedLoaded\", 3);\n    this.srcWithParams = '';\n    this.hasEnteredViewport = false;\n    /**\n     * A URL that will load the external player and media (Eg: https://www.youtube.com/embed/DyTCOwB0DVw).\n     */\n    this.embedSrc = '';\n    /**\n     * The title of the current media so it can be set on the inner `iframe` for screen readers.\n     */\n    this.mediaTitle = '';\n    /**\n     * The parameters to pass to the embedded player which are appended to the `embedSrc` prop. These\n     * can be passed in as a query string or object.\n     */\n    this.params = '';\n    /**\n     * A collection of URLs to that the browser should immediately start establishing a connection\n     * with.\n     */\n    this.preconnections = [];\n    withComponentRegistry(this);\n  }\n  onEmbedSrcChange() {\n    this.srcWithParams =\n      isString(this.embedSrc) && this.embedSrc.length > 0\n        ? appendParamsToURL(this.embedSrc, this.params)\n        : undefined;\n  }\n  srcWithParamsChange() {\n    if (isUndefined(this.srcWithParams)) {\n      this.vmEmbedSrcChange.emit(this.srcWithParams);\n      return;\n    }\n    if (!this.hasEnteredViewport && !connected.has(this.embedSrc)) {\n      if (preconnect(this.srcWithParams))\n        connected.add(this.embedSrc);\n    }\n    this.vmEmbedSrcChange.emit(this.srcWithParams);\n  }\n  preconnectionsChange() {\n    if (this.hasEnteredViewport) {\n      return;\n    }\n    this.preconnections\n      .filter(connection => !connected.has(connection))\n      .forEach(connection => {\n      if (preconnect(connection))\n        connected.add(connection);\n    });\n  }\n  connectedCallback() {\n    this.lazyLoader = new LazyLoader(this.host, ['data-src'], el => {\n      const src = el.getAttribute('data-src');\n      el.removeAttribute('src');\n      if (!isNull(src))\n        el.setAttribute('src', src);\n    });\n    this.onEmbedSrcChange();\n    this.genIframeId();\n  }\n  disconnectedCallback() {\n    this.lazyLoader.destroy();\n  }\n  onWindowMessage(e) {\n    var _a, _b, _c;\n    const originMatches = e.source === ((_a = this.iframe) === null || _a === void 0 ? void 0 : _a.contentWindow) &&\n      (!isString(this.origin) || this.origin === e.origin);\n    if (!originMatches)\n      return;\n    const message = (_c = (_b = this.decoder) === null || _b === void 0 ? void 0 : _b.call(this, e.data)) !== null && _c !== void 0 ? _c : e.data;\n    if (message)\n      this.vmEmbedMessage.emit(message);\n  }\n  /**\n   * Posts a message to the embedded media player.\n   */\n  postMessage(message, target) {\n    var _a, _b;\n    return __awaiter$l(this, void 0, void 0, function* () {\n      (_b = (_a = this.iframe) === null || _a === void 0 ? void 0 : _a.contentWindow) === null || _b === void 0 ? void 0 : _b.postMessage(JSON.stringify(message), target !== null && target !== void 0 ? target : '*');\n    });\n  }\n  onLoad() {\n    this.vmEmbedLoaded.emit();\n  }\n  genIframeId() {\n    idCount$4 += 1;\n    this.id = `vm-iframe-${idCount$4}`;\n  }\n  render() {\n    return (h(\"iframe\", { id: this.id, class: \"lazy\", title: this.mediaTitle, \"data-src\": this.srcWithParams, allowFullScreen: true, allow: \"autoplay; encrypted-media; picture-in-picture;\", onLoad: this.onLoad.bind(this), ref: (el) => {\n        this.iframe = el;\n      } }));\n  }\n  get host() { return this; }\n  static get watchers() { return {\n    \"embedSrc\": [\"onEmbedSrcChange\"],\n    \"params\": [\"onEmbedSrcChange\"],\n    \"srcWithParams\": [\"srcWithParamsChange\"],\n    \"preconnections\": [\"preconnectionsChange\"]\n  }; }\n  static get style() { return embedCss; }\n};\n\nconst endTimeCss = \":host{display:flex;align-items:center;justify-content:center}\";\n\nconst EndTime = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /** @internal */\n    this.duration = -1;\n    /** @internal */\n    this.i18n = {};\n    /**\n     * Whether the time should always show the hours unit, even if the time is less than\n     * 1 hour (eg: `20:35` -> `00:20:35`).\n     */\n    this.alwaysShowHours = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, ['duration', 'i18n']);\n  }\n  render() {\n    return (h(\"vm-time\", { label: this.i18n.duration, seconds: Math.max(0, this.duration), alwaysShowHours: this.alwaysShowHours }));\n  }\n  static get style() { return endTimeCss; }\n};\n\nvar key = {\r\n    fullscreenEnabled: 0,\r\n    fullscreenElement: 1,\r\n    requestFullscreen: 2,\r\n    exitFullscreen: 3,\r\n    fullscreenchange: 4,\r\n    fullscreenerror: 5,\r\n    fullscreen: 6\r\n};\r\nvar webkit = [\r\n    'webkitFullscreenEnabled',\r\n    'webkitFullscreenElement',\r\n    'webkitRequestFullscreen',\r\n    'webkitExitFullscreen',\r\n    'webkitfullscreenchange',\r\n    'webkitfullscreenerror',\r\n    '-webkit-full-screen',\r\n];\r\nvar moz = [\r\n    'mozFullScreenEnabled',\r\n    'mozFullScreenElement',\r\n    'mozRequestFullScreen',\r\n    'mozCancelFullScreen',\r\n    'mozfullscreenchange',\r\n    'mozfullscreenerror',\r\n    '-moz-full-screen',\r\n];\r\nvar ms = [\r\n    'msFullscreenEnabled',\r\n    'msFullscreenElement',\r\n    'msRequestFullscreen',\r\n    'msExitFullscreen',\r\n    'MSFullscreenChange',\r\n    'MSFullscreenError',\r\n    '-ms-fullscreen',\r\n];\r\n// so it doesn't throw if no window or document\r\nvar document$1 = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\r\nvar vendor = (('fullscreenEnabled' in document$1 && Object.keys(key)) ||\r\n    (webkit[0] in document$1 && webkit) ||\r\n    (moz[0] in document$1 && moz) ||\r\n    (ms[0] in document$1 && ms) ||\r\n    []);\r\nvar fscreen = {\r\n    requestFullscreen: function (element) { return element[vendor[key.requestFullscreen]](); },\r\n    requestFullscreenFunction: function (element) { return element[vendor[key.requestFullscreen]]; },\r\n    get exitFullscreen() { return document$1[vendor[key.exitFullscreen]].bind(document$1); },\r\n    get fullscreenPseudoClass() { return \":\" + vendor[key.fullscreen]; },\r\n    addEventListener: function (type, handler, options) { return document$1.addEventListener(vendor[key[type]], handler, options); },\r\n    removeEventListener: function (type, handler, options) { return document$1.removeEventListener(vendor[key[type]], handler, options); },\r\n    get fullscreenEnabled() { return Boolean(document$1[vendor[key.fullscreenEnabled]]); },\r\n    set fullscreenEnabled(val) { },\r\n    get fullscreenElement() { return document$1[vendor[key.fullscreenElement]]; },\r\n    set fullscreenElement(val) { },\r\n    get onfullscreenchange() { return document$1[(\"on\" + vendor[key.fullscreenchange]).toLowerCase()]; },\r\n    set onfullscreenchange(handler) { return document$1[(\"on\" + vendor[key.fullscreenchange]).toLowerCase()] = handler; },\r\n    get onfullscreenerror() { return document$1[(\"on\" + vendor[key.fullscreenerror]).toLowerCase()]; },\r\n    set onfullscreenerror(handler) { return document$1[(\"on\" + vendor[key.fullscreenerror]).toLowerCase()] = handler; },\r\n};\n\nfunction mitt(n){return {all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e]);},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]));},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e);}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e);});}}}\n\nvar __awaiter$k = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n    function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n/**\n * Unfortunately fullscreen isn't straight forward due to cross-browser inconsistencies. This\n * class abstract the logic for handling fullscreen across browsers.\n */\nclass FullscreenController {\n  constructor(host) {\n    this.host = host;\n    this.disposal = new Disposal();\n    this.emitter = mitt();\n  }\n  /**\n   * Whether fullscreen mode can be requested, generally is an API available to do so.\n   */\n  get isSupported() {\n    return this.isSupportedNatively;\n  }\n  /**\n   * Whether the native Fullscreen API is enabled/available.\n   */\n  get isSupportedNatively() {\n    return fscreen.fullscreenEnabled;\n  }\n  /**\n   * Whether the host element is in fullscreen mode.\n   */\n  get isFullscreen() {\n    return this.isNativeFullscreen;\n  }\n  /**\n   * Whether the host element is in fullscreen mode via the native Fullscreen API.\n   */\n  get isNativeFullscreen() {\n    if (fscreen.fullscreenElement === this.host)\n      return true;\n    try {\n      // Throws in iOS Safari...\n      return this.host.matches(\n      // Property `fullscreenPseudoClass` is missing from `@types/fscreen`.\n      fscreen\n        .fullscreenPseudoClass);\n    }\n    catch (error) {\n      return false;\n    }\n  }\n  on(type, handler) {\n    // @ts-expect-error - not typed yet.\n    this.emitter.on(type, handler);\n  }\n  off(type, handler) {\n    // @ts-expect-error - not typed yet.\n    this.emitter.off(type, handler);\n  }\n  /**\n   * Dispose of any event listeners and exit fullscreen (if active).\n   */\n  destroy() {\n    return __awaiter$k(this, void 0, void 0, function* () {\n      if (this.isFullscreen)\n        yield this.exitFullscreen();\n      this.disposal.empty();\n      this.emitter.all.clear();\n    });\n  }\n  addFullscreenChangeEventListener(handler) {\n    if (!this.isSupported)\n      return noop;\n    return listen(fscreen, 'fullscreenchange', handler);\n  }\n  addFullscreenErrorEventListener(handler) {\n    if (!this.isSupported)\n      return noop;\n    return listen(fscreen, 'fullscreenerror', handler);\n  }\n  requestFullscreen() {\n    return __awaiter$k(this, void 0, void 0, function* () {\n      if (this.isFullscreen)\n        return;\n      this.throwIfNoFullscreenSupport();\n      // TODO: Check if PiP is active, if so make sure to exit - need PipController.\n      this.disposal.add(this.addFullscreenChangeEventListener(this.handleFullscreenChange.bind(this)));\n      this.disposal.add(this.addFullscreenErrorEventListener(this.handleFullscreenError.bind(this)));\n      return this.makeEnterFullscreenRequest();\n    });\n  }\n  makeEnterFullscreenRequest() {\n    return __awaiter$k(this, void 0, void 0, function* () {\n      return fscreen.requestFullscreen(this.host);\n    });\n  }\n  handleFullscreenChange() {\n    if (!this.isFullscreen)\n      this.disposal.empty();\n    this.emitter.emit('change', this.isFullscreen);\n  }\n  handleFullscreenError(event) {\n    this.emitter.emit('error', event);\n  }\n  exitFullscreen() {\n    return __awaiter$k(this, void 0, void 0, function* () {\n      if (!this.isFullscreen)\n        return;\n      this.throwIfNoFullscreenSupport();\n      return this.makeExitFullscreenRequest();\n    });\n  }\n  makeExitFullscreenRequest() {\n    return __awaiter$k(this, void 0, void 0, function* () {\n      return fscreen.exitFullscreen();\n    });\n  }\n  throwIfNoFullscreenSupport() {\n    if (this.isSupported)\n      return;\n    throw Error('Fullscreen API is not enabled or supported in this environment.');\n  }\n}\n\nvar __awaiter$j = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n    function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n/**\n * Extends the base `FullscreenController` with additional logic for handling fullscreen\n * on iOS Safari where the native Fullscreen API is not available (in this case it fallsback to\n * using the `VideoPresentationController`).\n */\nclass VideoFullscreenController extends FullscreenController {\n  constructor(host, presentationController) {\n    super(host);\n    this.host = host;\n    this.presentationController = presentationController;\n  }\n  get isFullscreen() {\n    return this.presentationController.isFullscreenMode;\n  }\n  /**\n   * Whether a fallback fullscreen API is available on Safari using presentation modes. This\n   * is only used on iOS where the native fullscreen API is not available.\n   *\n   * @link https://developer.apple.com/documentation/webkitjs/htmlvideoelement/1631913-webkitpresentationmode\n   */\n  get isSupported() {\n    return this.presentationController.isSupported;\n  }\n  makeEnterFullscreenRequest() {\n    return __awaiter$j(this, void 0, void 0, function* () {\n      return this.presentationController.setPresentationMode('fullscreen');\n    });\n  }\n  makeExitFullscreenRequest() {\n    return __awaiter$j(this, void 0, void 0, function* () {\n      return this.presentationController.setPresentationMode('inline');\n    });\n  }\n  addFullscreenChangeEventListener() {\n    if (!this.isSupported)\n      return noop;\n    this.presentationController.on('change', this.handlePresentationModeChange.bind(this));\n    return () => {\n      this.presentationController.off('change', this.handlePresentationModeChange.bind(this));\n    };\n  }\n  handlePresentationModeChange() {\n    this.handleFullscreenChange();\n  }\n  addFullscreenErrorEventListener() {\n    return noop;\n  }\n}\n\nvar __awaiter$i = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n    function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n/**\n * Contains the logic for handling presentation modes on Safari. This class is used by\n * the `VideoFullscreenController` as a fallback when the native Fullscreen API is not\n * available (ie: iOS Safari).\n */\nclass VideoPresentationController {\n  constructor(host) {\n    this.host = host;\n    this.disposal = new Disposal();\n    this.emitter = mitt();\n    const disconnectedCallback = host.disconnectedCallback;\n    host.disconnectedCallback = () => __awaiter$i(this, void 0, void 0, function* () {\n      yield this.destroy();\n      disconnectedCallback === null || disconnectedCallback === void 0 ? void 0 : disconnectedCallback.call(host);\n    });\n  }\n  get videoElement() {\n    var _a;\n    if (((_a = this.host.mediaEl) === null || _a === void 0 ? void 0 : _a.tagName.toLowerCase()) === 'video') {\n      return this.host.mediaEl;\n    }\n    return undefined;\n  }\n  /**\n   * The current presentation mode, possible values include `inline`, `picture-in-picture` and\n   * `fullscreen`. Only available in Safari.\n   *\n   * @default undefined\n   * @link https://developer.apple.com/documentation/webkitjs/htmlvideoelement/1631913-webkitpresentationmode\n   */\n  get presentationMode() {\n    var _a;\n    return (_a = this.videoElement) === null || _a === void 0 ? void 0 : _a.webkitPresentationMode;\n  }\n  /**\n   * Whether the current `presentationMode` is `inline`.\n   */\n  get isInlineMode() {\n    return this.presentationMode === 'inline';\n  }\n  /**\n   * Whether the current `presentationMode` is `picture-in-picture`.\n   */\n  get isPictureInPictureMode() {\n    return this.presentationMode === 'inline';\n  }\n  /**\n   * Whether the current `presentationMode` is `fullscreen`.\n   */\n  get isFullscreenMode() {\n    return this.presentationMode === 'fullscreen';\n  }\n  /**\n   * Whether the presentation mode API is available.\n   *\n   * @link https://developer.apple.com/documentation/webkitjs/htmlvideoelement/1628805-webkitsupportsfullscreen\n   */\n  get isSupported() {\n    var _a, _b, _c;\n    return (IS_IOS &&\n      isFunction((_a = this.videoElement) === null || _a === void 0 ? void 0 : _a.webkitSetPresentationMode) &&\n      ((_c = (_b = this.videoElement) === null || _b === void 0 ? void 0 : _b.webkitSupportsFullscreen) !== null && _c !== void 0 ? _c : false));\n  }\n  setPresentationMode(mode) {\n    var _a, _b;\n    (_b = (_a = this.videoElement) === null || _a === void 0 ? void 0 : _a.webkitSetPresentationMode) === null || _b === void 0 ? void 0 : _b.call(_a, mode);\n  }\n  on(type, handler) {\n    // @ts-expect-error - not typed yet.\n    this.emitter.on(type, handler);\n  }\n  off(type, handler) {\n    // @ts-expect-error - not typed yet.\n    this.emitter.off(type, handler);\n  }\n  destroy() {\n    this.setPresentationMode('inline');\n    this.disposal.empty();\n  }\n  addPresentationModeChangeEventListener() {\n    if (!this.isSupported || isNil(this.videoElement))\n      return noop;\n    return listen(this.videoElement, 'webkitpresentationmodechanged', this.handlePresentationModeChange.bind(this));\n  }\n  handlePresentationModeChange() {\n    this.emitter.emit('change', this.presentationMode);\n  }\n}\n\nconst fileCss = \"audio.sc-vm-file,video.sc-vm-file{border-radius:inherit;vertical-align:middle;width:100%;outline:0}video.sc-vm-file{position:absolute;top:0;left:0;border:0;height:100%;user-select:none}\";\n\nvar __awaiter$h = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst File = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    this.vmLoadStart = createEvent(this, \"vmLoadStart\", 7);\n    this.vmError = createEvent(this, \"vmError\", 7);\n    this.vmMediaElChange = createEvent(this, \"vmMediaElChange\", 7);\n    this.vmSrcSetChange = createEvent(this, \"vmSrcSetChange\", 7);\n    this.textTracksDisposal = new Disposal();\n    this.wasPausedBeforeSeeking = true;\n    this.currentSrcSet = [];\n    this.mediaQueryDisposal = new Disposal();\n    /** @internal Whether an external SDK will attach itself to the media player and control it. */\n    this.willAttach = false;\n    /** @inheritdoc */\n    this.preload = 'metadata';\n    /**\n     * The playback rates that are available for this media.\n     */\n    this.playbackRates = [0.25, 0.5, 0.75, 1, 1.25, 1.5, 2];\n    /** @internal */\n    this.language = 'en';\n    /** @internal */\n    this.autoplay = false;\n    /** @internal */\n    this.controls = false;\n    /** @internal */\n    this.loop = false;\n    /** @internal */\n    this.muted = false;\n    /** @internal */\n    this.playsinline = false;\n    /** @internal */\n    this.noConnect = false;\n    /** @internal */\n    this.paused = true;\n    /** @internal */\n    this.currentTime = 0;\n    /** @internal */\n    this.volume = 0;\n    /** @internal */\n    this.playbackReady = false;\n    /** @internal */\n    this.playbackStarted = false;\n    this.presentationController = new VideoPresentationController(this);\n    this.fullscreenController = new VideoFullscreenController(this, this.presentationController);\n    /** @internal */\n    this.currentTextTrack = -1;\n    /** @internal */\n    this.hasCustomTextManager = false;\n    /** @internal */\n    this.isTextTrackVisible = true;\n    /** @internal */\n    this.shouldRenderNativeTextTracks = true;\n    withComponentRegistry(this);\n    withProviderConnect(this);\n    withProviderContext(this, [\n      'playbackReady',\n      'playbackStarted',\n      'currentTime',\n      'volume',\n      'paused',\n      'currentTextTrack',\n      'isTextTrackVisible',\n      'shouldRenderNativeTextTracks',\n    ]);\n    watchComponentRegistry(this, 'vm-poster', regs => {\n      [this.vmPoster] = regs;\n    });\n  }\n  onMediaTitleChange() {\n    this.dispatch('mediaTitle', this.mediaTitle);\n  }\n  onPosterChange() {\n    var _a;\n    if (!this.playbackStarted)\n      (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.load();\n  }\n  onViewTypeChange() {\n    this.dispatch('viewType', this.viewType);\n  }\n  connectedCallback() {\n    this.initLazyLoader();\n    this.dispatch = createProviderDispatcher(this);\n    this.onViewTypeChange();\n    this.onPosterChange();\n    this.onMediaTitleChange();\n    this.addPresentationControllerListeners();\n  }\n  componentDidRender() {\n    if (this.prevMediaEl !== this.mediaEl) {\n      this.prevMediaEl = this.mediaEl;\n      this.vmMediaElChange.emit(this.mediaEl);\n      this.presentationController.addPresentationModeChangeEventListener();\n    }\n  }\n  componentDidLoad() {\n    this.onViewTypeChange();\n  }\n  disconnectedCallback() {\n    var _a;\n    this.mediaQueryDisposal.empty();\n    this.textTracksDisposal.empty();\n    this.cancelTimeUpdates();\n    (_a = this.lazyLoader) === null || _a === void 0 ? void 0 : _a.destroy();\n    this.wasPausedBeforeSeeking = true;\n  }\n  initLazyLoader() {\n    this.lazyLoader = new LazyLoader(this.host, ['data-src', 'data-poster'], () => {\n      if (isNil(this.mediaEl))\n        return;\n      const poster = this.mediaEl.getAttribute('data-poster');\n      if (!isNull(poster))\n        this.mediaEl.setAttribute('poster', poster);\n      this.refresh();\n      this.didSrcSetChange();\n    });\n  }\n  refresh() {\n    if (isNil(this.mediaEl))\n      return;\n    const { children } = this.mediaEl;\n    for (let i = 0; i <= children.length - 1; i += 1) {\n      const child = children[i];\n      const src = child.getAttribute('data-src') ||\n        child.getAttribute('src') ||\n        child.getAttribute('data-vs');\n      child.removeAttribute('src');\n      if (isNull(src))\n        continue;\n      child.setAttribute('data-vs', src);\n      child.setAttribute('src', src);\n    }\n  }\n  didSrcSetChange() {\n    if (isNil(this.mediaEl))\n      return;\n    const sources = Array.from(this.mediaEl.querySelectorAll('source'));\n    const srcSet = sources.map(source => {\n      var _a;\n      return ({\n        src: source.getAttribute('data-vs'),\n        media: (_a = source.getAttribute('data-media')) !== null && _a !== void 0 ? _a : undefined,\n        ref: source,\n      });\n    });\n    const didChange = this.currentSrcSet.length !== srcSet.length ||\n      srcSet.some((resource, i) => this.currentSrcSet[i].src !== resource.src);\n    if (didChange) {\n      this.currentSrcSet = srcSet;\n      this.onSrcSetChange();\n    }\n  }\n  onSrcSetChange() {\n    var _a;\n    this.textTracksDisposal.empty();\n    this.mediaQueryDisposal.empty();\n    this.vmLoadStart.emit();\n    this.vmSrcSetChange.emit(this.currentSrcSet);\n    if (!this.willAttach)\n      (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.load();\n  }\n  hasCustomPoster() {\n    return !IS_IOS && !isUndefined(this.vmPoster);\n  }\n  cancelTimeUpdates() {\n    if (isNumber(this.timeRAF))\n      window.cancelAnimationFrame(this.timeRAF);\n    this.timeRAF = undefined;\n  }\n  requestTimeUpdates() {\n    var _a, _b;\n    this.dispatch('currentTime', (_b = (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.currentTime) !== null && _b !== void 0 ? _b : 0);\n    this.timeRAF = window.requestAnimationFrame(() => {\n      this.requestTimeUpdates();\n    });\n  }\n  getMediaType() {\n    const { currentSrc } = this.mediaEl;\n    if (audioRegex.test(currentSrc))\n      return MediaType.Audio;\n    if (videoRegex.test(currentSrc) || hlsRegex.test(currentSrc))\n      return MediaType.Video;\n    return undefined;\n  }\n  onLoadedMetadata() {\n    this.mediaEl.volume = this.volume / 100;\n    this.listenToTextTracksForChanges();\n    this.onTextTracksChange();\n    this.onProgress();\n    this.dispatch('currentPoster', this.poster);\n    this.dispatch('duration', this.mediaEl.duration);\n    this.dispatch('playbackRates', this.playbackRates);\n    if (!this.willAttach) {\n      this.dispatch('currentSrc', this.mediaEl.currentSrc);\n      this.dispatch('mediaType', this.getMediaType());\n      this.dispatch('playbackReady', true);\n    }\n  }\n  onProgress() {\n    const { buffered, duration } = this.mediaEl;\n    const end = buffered.length === 0 ? 0 : buffered.end(buffered.length - 1);\n    this.dispatch('buffered', end > duration ? duration : end);\n  }\n  onPlay() {\n    this.requestTimeUpdates();\n    this.dispatch('paused', false);\n    if (!this.playbackStarted)\n      this.dispatch('playbackStarted', true);\n  }\n  onPause() {\n    this.cancelTimeUpdates();\n    this.dispatch('paused', true);\n    this.dispatch('buffering', false);\n  }\n  onPlaying() {\n    this.dispatch('playing', true);\n    this.dispatch('buffering', false);\n  }\n  onSeeking() {\n    if (!this.wasPausedBeforeSeeking)\n      this.wasPausedBeforeSeeking = this.mediaEl.paused;\n    this.dispatch('currentTime', this.mediaEl.currentTime);\n    this.dispatch('seeking', true);\n  }\n  onSeeked() {\n    // Avoid calling `attemptToPlay` if seeking to 0 on 0.\n    if (this.currentTime === 0 && !this.playbackStarted)\n      return;\n    this.dispatch('seeking', false);\n    if (!this.playbackStarted || !this.wasPausedBeforeSeeking)\n      this.attemptToPlay();\n    this.wasPausedBeforeSeeking = true;\n  }\n  onRateChange() {\n    this.dispatch('playbackRate', this.mediaEl.playbackRate);\n  }\n  onVolumeChange() {\n    this.dispatch('muted', this.mediaEl.muted);\n    this.dispatch('volume', this.mediaEl.volume * 100);\n  }\n  onDurationChange() {\n    this.dispatch('duration', this.mediaEl.duration);\n  }\n  onWaiting() {\n    this.dispatch('buffering', true);\n  }\n  onSuspend() {\n    this.dispatch('buffering', false);\n  }\n  onEnded() {\n    if (!this.loop)\n      this.dispatch('playbackEnded', true);\n  }\n  onError() {\n    this.vmError.emit(this.mediaEl.error);\n  }\n  attemptToPlay() {\n    var _a;\n    try {\n      (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.play();\n    }\n    catch (e) {\n      this.vmError.emit(e);\n    }\n  }\n  togglePiPInChrome(toggle) {\n    var _a;\n    return toggle\n      ? (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.requestPictureInPicture()\n      : document.exitPictureInPicture();\n  }\n  togglePiPInSafari(toggle) {\n    var _a, _b;\n    const mode = toggle\n      ? \"picture-in-picture\" /* PiP */\n      : \"inline\" /* Inline */;\n    if (!((_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.webkitSupportsPresentationMode(mode))) {\n      throw new Error('PiP API is not available.');\n    }\n    return (_b = this.mediaEl) === null || _b === void 0 ? void 0 : _b.webkitSetPresentationMode(mode);\n  }\n  togglePiP(toggle) {\n    return __awaiter$h(this, void 0, void 0, function* () {\n      if (canUsePiPInChrome())\n        return this.togglePiPInChrome(toggle);\n      if (canUsePiPInSafari())\n        return this.togglePiPInSafari(toggle);\n      throw new Error('PiP API is not available.');\n    });\n  }\n  onEnterPiP() {\n    this.dispatch('isPiPActive', true);\n  }\n  onLeavePiP() {\n    this.dispatch('isPiPActive', false);\n  }\n  addPresentationControllerListeners() {\n    this.presentationController.on('change', mode => {\n      this.dispatch('isPiPActive', mode === \"picture-in-picture\" /* PiP */);\n      this.dispatch('isFullscreenActive', mode === \"fullscreen\" /* Fullscreen */);\n    });\n  }\n  /** @internal */\n  getAdapter() {\n    return __awaiter$h(this, void 0, void 0, function* () {\n      return {\n        getInternalPlayer: () => __awaiter$h(this, void 0, void 0, function* () { return this.mediaEl; }),\n        play: () => __awaiter$h(this, void 0, void 0, function* () { var _a; return (_a = this.mediaEl) === null || _a === void 0 ? void 0 : _a.play(); }),\n        pause: () => __awaiter$h(this, void 0, void 0, function* () { var _b; return (_b = this.mediaEl) === null || _b === void 0 ? void 0 : _b.pause(); }),\n        canPlay: (type) => __awaiter$h(this, void 0, void 0, function* () { return isString(type) && (audioRegex.test(type) || videoRegex.test(type)); }),\n        setCurrentTime: (time) => __awaiter$h(this, void 0, void 0, function* () {\n          if (this.mediaEl)\n            this.mediaEl.currentTime = time;\n        }),\n        setMuted: (muted) => __awaiter$h(this, void 0, void 0, function* () {\n          if (this.mediaEl)\n            this.mediaEl.muted = muted;\n        }),\n        setVolume: (volume) => __awaiter$h(this, void 0, void 0, function* () {\n          if (this.mediaEl)\n            this.mediaEl.volume = volume / 100;\n        }),\n        canSetPlaybackRate: () => __awaiter$h(this, void 0, void 0, function* () { return true; }),\n        setPlaybackRate: (rate) => __awaiter$h(this, void 0, void 0, function* () {\n          if (this.mediaEl)\n            this.mediaEl.playbackRate = rate;\n        }),\n        canSetPiP: () => __awaiter$h(this, void 0, void 0, function* () { return canUsePiP(); }),\n        enterPiP: () => this.togglePiP(true),\n        exitPiP: () => this.togglePiP(false),\n        canSetFullscreen: () => __awaiter$h(this, void 0, void 0, function* () { return this.fullscreenController.isSupported; }),\n        enterFullscreen: () => this.fullscreenController.requestFullscreen(),\n        exitFullscreen: () => this.fullscreenController.exitFullscreen(),\n        setCurrentTextTrack: (trackId) => __awaiter$h(this, void 0, void 0, function* () {\n          if (trackId !== this.currentTextTrack)\n            this.toggleTextTrackModes(trackId);\n        }),\n        setTextTrackVisibility: (isVisible) => __awaiter$h(this, void 0, void 0, function* () {\n          this.isTextTrackVisible = isVisible;\n          this.toggleTextTrackModes(this.currentTextTrack);\n        }),\n      };\n    });\n  }\n  onHasCustomTextManagerChange() {\n    if (this.hasCustomTextManager) {\n      this.textTracksDisposal.empty();\n    }\n    else if (this.playbackReady) {\n      this.listenToTextTracksForChanges();\n    }\n  }\n  onShouldRenderNativeTextTracksChange() {\n    if (this.hasCustomTextManager)\n      return;\n    this.toggleTextTrackModes(this.currentTextTrack);\n  }\n  onProviderConnect(event) {\n    if (this.noConnect)\n      event.stopImmediatePropagation();\n  }\n  onProviderDisconnect(event) {\n    if (this.noConnect)\n      event.stopImmediatePropagation();\n  }\n  getFilteredTextTracks() {\n    const tracks = [];\n    const textTrackList = Array.from(this.mediaEl.textTracks);\n    for (let i = 0; i < textTrackList.length; i += 1) {\n      const track = textTrackList[i];\n      // Edge adds a track without a label; we don't want to use it.\n      if ((track.kind === 'subtitles' || track.kind === 'captions') &&\n        track.label) {\n        tracks.push(textTrackList[i]);\n      }\n    }\n    return tracks;\n  }\n  listenToTextTracksForChanges() {\n    if (this.hasCustomTextManager)\n      return;\n    this.textTracksDisposal.empty();\n    if (isUndefined(this.mediaEl))\n      return;\n    this.textTracksDisposal.add(listen(this.mediaEl.textTracks, 'change', this.onTextTracksChange.bind(this)));\n  }\n  onTextTracksChange() {\n    var _a;\n    const tracks = this.getFilteredTextTracks();\n    let trackId = -1;\n    for (let id = 0; id < tracks.length; id += 1) {\n      if (tracks[id].mode === 'hidden') {\n        // Do not break in case there is a following track with showing.\n        trackId = id;\n      }\n      else if (tracks[id].mode === 'showing') {\n        trackId = id;\n        break;\n      }\n    }\n    if (!this.shouldRenderNativeTextTracks &&\n      ((_a = tracks[trackId]) === null || _a === void 0 ? void 0 : _a.mode) === 'showing') {\n      tracks[trackId].mode = 'hidden';\n      return;\n    }\n    if (this.shouldRenderNativeTextTracks) {\n      this.isTextTrackVisible =\n        trackId !== -1 && tracks[trackId].mode === 'showing';\n      this.dispatch('isTextTrackVisible', this.isTextTrackVisible);\n    }\n    this.dispatch('textTracks', tracks);\n    this.dispatch('currentTextTrack', this.shouldRenderNativeTextTracks && !this.isTextTrackVisible\n      ? -1\n      : trackId);\n  }\n  toggleTextTrackModes(newTrackId) {\n    if (isNil(this.mediaEl))\n      return;\n    const { textTracks } = this.mediaEl;\n    if (newTrackId === -1) {\n      Array.from(textTracks).forEach(track => {\n        track.mode = 'disabled';\n      });\n    }\n    else {\n      const oldTrack = textTracks[this.currentTextTrack];\n      if (oldTrack)\n        oldTrack.mode = 'disabled';\n    }\n    const nextTrack = textTracks[newTrackId];\n    if (nextTrack) {\n      nextTrack.mode =\n        this.isTextTrackVisible && this.shouldRenderNativeTextTracks\n          ? 'showing'\n          : 'hidden';\n    }\n    this.dispatch('currentTextTrack', this.shouldRenderNativeTextTracks && !this.isTextTrackVisible\n      ? -1\n      : newTrackId);\n    this.dispatch('isTextTrackVisible', this.isTextTrackVisible);\n  }\n  render() {\n    const mediaProps = {\n      autoplay: this.autoplay,\n      muted: this.muted,\n      playsinline: this.playsinline,\n      playsInline: this.playsinline,\n      'x5-playsinline': this.playsinline,\n      'webkit-playsinline': this.playsinline,\n      controls: this.controls,\n      crossorigin: this.crossOrigin === '' ? 'anonymous' : this.crossOrigin,\n      controlslist: this.controlsList,\n      'data-poster': !this.hasCustomPoster() ? this.poster : undefined,\n      loop: this.loop,\n      preload: this.preload,\n      disablePictureInPicture: this.disablePiP,\n      autoPictureInPicture: this.autoPiP,\n      disableRemotePlayback: this.disableRemotePlayback,\n      'x-webkit-airplay': this.disableRemotePlayback ? 'deny' : 'allow',\n      ref: (el) => {\n        this.mediaEl = el;\n      },\n      onLoadedMetadata: this.onLoadedMetadata.bind(this),\n      onProgress: this.onProgress.bind(this),\n      onPlay: this.onPlay.bind(this),\n      onPause: this.onPause.bind(this),\n      onPlaying: this.onPlaying.bind(this),\n      onSeeking: this.onSeeking.bind(this),\n      onSeeked: this.onSeeked.bind(this),\n      onRateChange: this.onRateChange.bind(this),\n      onVolumeChange: this.onVolumeChange.bind(this),\n      onDurationChange: this.onDurationChange.bind(this),\n      onWaiting: this.onWaiting.bind(this),\n      onSuspend: this.onSuspend.bind(this),\n      onEnded: this.onEnded.bind(this),\n      onError: this.onError.bind(this),\n    };\n    const audio = (h(\"audio\", Object.assign({ class: \"lazy\" }, mediaProps), h(\"slot\", null), \"Your browser does not support the\", h(\"code\", null, \"audio\"), \"element.\"));\n    const video = (h(\"video\", Object.assign({ class: \"lazy\" }, mediaProps, {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      onenterpictureinpicture: this.onEnterPiP.bind(this), onleavepictureinpicture: this.onLeavePiP.bind(this)\n    }), h(\"slot\", null), \"Your browser does not support the\", h(\"code\", null, \"video\"), \"element.\"));\n    return this.viewType === ViewType.Audio ? audio : video;\n  }\n  get host() { return this; }\n  static get watchers() { return {\n    \"mediaTitle\": [\"onMediaTitleChange\"],\n    \"poster\": [\"onPosterChange\"],\n    \"viewType\": [\"onViewTypeChange\"],\n    \"hasCustomTextManager\": [\"onHasCustomTextManagerChange\"],\n    \"shouldRenderNativeTextTracks\": [\"onShouldRenderNativeTextTracksChange\"]\n  }; }\n  static get style() { return fileCss; }\n};\n\nconst fullscreenControlCss = \":host([hidden]){display:none}\";\n\nvar __awaiter$g = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst FullscreenControl = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.canSetFullscreen = false;\n    /**\n     * The name of the enter fullscreen icon to resolve from the icon library.\n     */\n    this.enterIcon = 'fullscreen-enter';\n    /**\n     * The name of the exit fullscreen icon to resolve from the icon library.\n     */\n    this.exitIcon = 'fullscreen-exit';\n    /**\n     * Whether the tooltip is positioned above/below the control.\n     */\n    this.tooltipPosition = 'top';\n    /**\n     * Whether the tooltip should not be displayed.\n     */\n    this.hideTooltip = false;\n    /** @inheritdoc */\n    this.keys = 'f';\n    /** @internal */\n    this.isFullscreenActive = false;\n    /** @internal */\n    this.i18n = {};\n    /** @internal */\n    this.playbackReady = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, ['isFullscreenActive', 'playbackReady', 'i18n']);\n  }\n  onPlaybackReadyChange() {\n    var _a;\n    return __awaiter$g(this, void 0, void 0, function* () {\n      const player = getPlayerFromRegistry(this);\n      this.canSetFullscreen = (_a = (yield (player === null || player === void 0 ? void 0 : player.canSetFullscreen()))) !== null && _a !== void 0 ? _a : false;\n    });\n  }\n  componentDidLoad() {\n    this.onPlaybackReadyChange();\n  }\n  onClick() {\n    const player = getPlayerFromRegistry(this);\n    !this.isFullscreenActive\n      ? player === null || player === void 0 ? void 0 : player.enterFullscreen()\n      : player === null || player === void 0 ? void 0 : player.exitFullscreen();\n  }\n  render() {\n    const tooltip = this.isFullscreenActive\n      ? this.i18n.exitFullscreen\n      : this.i18n.enterFullscreen;\n    const tooltipWithHint = !isUndefined(this.keys)\n      ? `${tooltip} (${this.keys})`\n      : tooltip;\n    return (h(Host, { hidden: !this.canSetFullscreen }, h(\"vm-control\", { label: this.i18n.fullscreen, keys: this.keys, pressed: this.isFullscreenActive, hidden: !this.canSetFullscreen, onClick: this.onClick.bind(this) }, h(\"vm-icon\", { name: this.isFullscreenActive ? this.exitIcon : this.enterIcon, library: this.icons }), h(\"vm-tooltip\", { hidden: this.hideTooltip, position: this.tooltipPosition, direction: this.tooltipDirection }, tooltipWithHint))));\n  }\n  static get watchers() { return {\n    \"playbackReady\": [\"onPlaybackReadyChange\"]\n  }; }\n  static get style() { return fullscreenControlCss; }\n};\n\nvar __awaiter$f = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst HLS = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    this.vmLoadStart = createEvent(this, \"vmLoadStart\", 7);\n    this.vmError = createEvent(this, \"vmError\", 7);\n    this.hasAttached = false;\n    /**\n     * The NPM package version of the `hls.js` library to download and use if HLS is not natively\n     * supported.\n     */\n    this.version = 'latest';\n    /** @inheritdoc */\n    this.preload = 'metadata';\n    /** @internal */\n    this.playbackReady = false;\n    withComponentRegistry(this);\n    withProviderConnect(this);\n    withPlayerContext(this, ['playbackReady']);\n  }\n  connectedCallback() {\n    this.dispatch = createProviderDispatcher(this);\n    if (this.mediaEl)\n      this.setupHls();\n  }\n  disconnectedCallback() {\n    this.destroyHls();\n  }\n  get src() {\n    if (isNil(this.videoProvider))\n      return undefined;\n    const sources = this.videoProvider.querySelectorAll('source');\n    const currSource = Array.from(sources).find(source => hlsRegex.test(source.src) || hlsTypeRegex.test(source.type));\n    return currSource === null || currSource === void 0 ? void 0 : currSource.src;\n  }\n  setupHls() {\n    return __awaiter$f(this, void 0, void 0, function* () {\n      if (!isUndefined(this.hls))\n        return;\n      try {\n        const url = this.libSrc ||\n          `https://cdn.jsdelivr.net/npm/hls.js@${this.version}/dist/hls.min.js`;\n        const Hls = (yield loadSDK(url, 'Hls'));\n        if (!Hls.isSupported()) {\n          this.vmError.emit('hls.js is not supported');\n          return;\n        }\n        this.hls = new Hls(this.config);\n        this.hls.on(Hls.Events.MEDIA_ATTACHED, () => {\n          this.hasAttached = true;\n          this.onSrcChange();\n        });\n        this.hls.on(Hls.Events.AUDIO_TRACKS_UPDATED, () => {\n          this.dispatch('audioTracks', this.hls.audioTracks);\n          this.dispatch('currentAudioTrack', this.hls.audioTrack);\n        });\n        this.hls.on(Hls.Events.AUDIO_TRACK_SWITCHED, () => {\n          this.dispatch('currentAudioTrack', this.hls.audioTrack);\n        });\n        this.hls.on(Hls.Events.ERROR, (event, data) => {\n          if (data.fatal) {\n            switch (data.type) {\n              case Hls.ErrorTypes.NETWORK_ERROR:\n                this.hls.startLoad();\n                break;\n              case Hls.ErrorTypes.MEDIA_ERROR:\n                this.hls.recoverMediaError();\n                break;\n              default:\n                this.destroyHls();\n                break;\n            }\n          }\n          this.vmError.emit({ event, data });\n        });\n        this.hls.on(Hls.Events.MANIFEST_PARSED, () => {\n          this.dispatch('mediaType', MediaType.Video);\n          this.dispatch('currentSrc', this.src);\n          this.dispatchLevels();\n        });\n        this.hls.on(Hls.Events.LEVEL_LOADED, (_, data) => {\n          if (!this.playbackReady) {\n            this.dispatch('duration', data.details.totalduration);\n            this.dispatch('playbackReady', true);\n          }\n        });\n        this.hls.attachMedia(this.mediaEl);\n      }\n      catch (e) {\n        this.vmError.emit(e);\n      }\n    });\n  }\n  dispatchLevels() {\n    if (!this.hls.levels || this.hls.levels.length === 0)\n      return;\n    this.dispatch('playbackQualities', [\n      'Auto',\n      ...this.hls.levels.map(this.levelToPlaybackQuality),\n    ]);\n    this.dispatch('playbackQuality', 'Auto');\n  }\n  levelToPlaybackQuality(level) {\n    return level === -1 ? 'Auto' : `${level.height}p`;\n  }\n  findLevelIndexFromQuality(quality) {\n    return this.hls.levels.findIndex((level) => this.levelToPlaybackQuality(level) === quality);\n  }\n  destroyHls() {\n    var _a;\n    (_a = this.hls) === null || _a === void 0 ? void 0 : _a.destroy();\n    this.hasAttached = false;\n  }\n  onMediaElChange(event) {\n    return __awaiter$f(this, void 0, void 0, function* () {\n      this.destroyHls();\n      if (isUndefined(event.detail))\n        return;\n      this.mediaEl = event.detail;\n      // Need a small delay incase the media element changes rapidly and Hls.js can't reattach.\n      setTimeout(() => __awaiter$f(this, void 0, void 0, function* () {\n        yield this.setupHls();\n      }), 50);\n    });\n  }\n  onSrcChange() {\n    var _a;\n    return __awaiter$f(this, void 0, void 0, function* () {\n      if (this.hasAttached && this.hls.url !== this.src) {\n        this.vmLoadStart.emit();\n        (_a = this.hls) === null || _a === void 0 ? void 0 : _a.loadSource(this.src);\n      }\n    });\n  }\n  /** @internal */\n  getAdapter() {\n    var _a, _b;\n    return __awaiter$f(this, void 0, void 0, function* () {\n      const adapter = (_b = (yield ((_a = this.videoProvider) === null || _a === void 0 ? void 0 : _a.getAdapter()))) !== null && _b !== void 0 ? _b : {};\n      const canVideoProviderPlay = adapter.canPlay;\n      return Object.assign(Object.assign({}, adapter), { getInternalPlayer: () => __awaiter$f(this, void 0, void 0, function* () { return this.hls; }), canPlay: (type) => __awaiter$f(this, void 0, void 0, function* () {\n          var _c;\n          return (isString(type) && hlsRegex.test(type)) ||\n            ((_c = canVideoProviderPlay === null || canVideoProviderPlay === void 0 ? void 0 : canVideoProviderPlay(type)) !== null && _c !== void 0 ? _c : false);\n        }), canSetPlaybackQuality: () => __awaiter$f(this, void 0, void 0, function* () { var _d, _e; return ((_e = (_d = this.hls) === null || _d === void 0 ? void 0 : _d.levels) === null || _e === void 0 ? void 0 : _e.length) > 0; }), setPlaybackQuality: (quality) => __awaiter$f(this, void 0, void 0, function* () {\n          if (!isUndefined(this.hls)) {\n            this.hls.currentLevel = this.findLevelIndexFromQuality(quality);\n            // Update the provider cache.\n            this.dispatch('playbackQuality', quality);\n          }\n        }), setCurrentAudioTrack: (trackId) => __awaiter$f(this, void 0, void 0, function* () {\n          if (!isUndefined(this.hls)) {\n            this.hls.audioTrack = trackId;\n          }\n        }) });\n    });\n  }\n  render() {\n    return (h(\"vm-video\", { willAttach: true, crossOrigin: this.crossOrigin, preload: this.preload, poster: this.poster, controlsList: this.controlsList, autoPiP: this.autoPiP, disablePiP: this.disablePiP, disableRemotePlayback: this.disableRemotePlayback, mediaTitle: this.mediaTitle, ref: (el) => {\n        this.videoProvider = el;\n      } }, h(\"slot\", null)));\n  }\n};\n\n/**\n * INSPIRED BY: https://github.com/shoelace-style/shoelace/blob/next/src/components/icon-library/icon-library-registry.ts\n */\nconst ICONS_BASE_CDN_URL = 'https://cdn.jsdelivr.net/npm/@vime/core@latest/icons';\nconst registry = new Map(Object.entries({\n  vime: iconName => `${ICONS_BASE_CDN_URL}/vime/vm-${iconName}.svg`,\n  material: iconName => `${ICONS_BASE_CDN_URL}/material/md-${iconName}.svg`,\n}));\nconst watch = new Set();\nfunction withIconRegistry(component) {\n  const el = getElement(component);\n  createStencilHook(component, () => {\n    watch.add(el);\n  }, () => {\n    watch.delete(el);\n  });\n}\nconst getIconLibraryResolver = (name) => registry.get(name);\nfunction registerIconLibrary(name, resolver) {\n  if (!isUndefined(resolver)) {\n    registry.set(name, resolver);\n  }\n  // Redraw watched icons.\n  watch.forEach(iconEl => {\n    if (iconEl.library === name)\n      iconEl.redraw();\n  });\n}\nfunction deregisterIconLibrary(name) {\n  registry.delete(name);\n}\n\n/**\n * INSPIRED BY: https://github.com/shoelace-style/shoelace/blob/next/src/components/icon/request.ts\n */\nvar __awaiter$e = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n    function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst iconFiles = new Map();\nconst requestIcon = (url) => {\n  if (iconFiles.has(url))\n    return iconFiles.get(url);\n  const request = fetch(url).then((response) => __awaiter$e(void 0, void 0, void 0, function* () {\n    if (response.ok) {\n      const div = document.createElement('div');\n      div.innerHTML = yield response.text();\n      const svg = div.firstElementChild;\n      return {\n        ok: response.ok,\n        status: response.status,\n        svg: svg && svg.tagName.toLowerCase() === 'svg' ? svg.outerHTML : '',\n      };\n    }\n    return {\n      ok: response.ok,\n      status: response.status,\n    };\n  }));\n  iconFiles.set(url, request);\n  return request;\n};\n\nconst iconCss = \":host{display:inline-block;width:1em;height:1em;contain:strict;box-sizing:content-box !important}.icon,svg{display:block;height:100%;width:100%;transition:var(--vm-icon-transition);transform:var(--vm-icon-transform);fill:var(--vm-icon-fill, currentColor);stroke:var(--vm-icon-stroke)}\";\n\n/**\n * INSPIRED BY: https://github.com/shoelace-style/shoelace/blob/next/src/components/icon/icon.tsx\n */\nvar __awaiter$d = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst parser = new DOMParser();\nconst Icon = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmLoad = createEvent(this, \"vmLoad\", 7);\n    this.vmError = createEvent(this, \"vmError\", 7);\n    /** @internal */\n    this.icons = 'material';\n    withComponentRegistry(this);\n    withIconRegistry(this);\n  }\n  handleChange() {\n    this.setIcon();\n  }\n  connectedCallback() {\n    withPlayerContext(this, ['icons']);\n  }\n  componentDidLoad() {\n    this.setIcon();\n  }\n  /**\n   * @internal Fetches the icon and redraws it. Used to handle library registrations.\n   */\n  redraw() {\n    return __awaiter$d(this, void 0, void 0, function* () {\n      this.setIcon();\n    });\n  }\n  getLabel() {\n    let label = '';\n    if (this.label) {\n      label = this.label;\n    }\n    else if (this.name) {\n      label = this.name.replace(/-/g, ' ');\n    }\n    else if (this.src) {\n      label = this.src\n        .replace(/.*\\//, '')\n        .replace(/-/g, ' ')\n        .replace(/\\.svg/i, '');\n    }\n    return label;\n  }\n  setIcon() {\n    var _a;\n    return __awaiter$d(this, void 0, void 0, function* () {\n      const resolver = getIconLibraryResolver((_a = this.library) !== null && _a !== void 0 ? _a : this.icons);\n      let url = this.src;\n      if (this.name && resolver) {\n        url = resolver(this.name);\n      }\n      if (url) {\n        try {\n          const file = yield requestIcon(url);\n          if (file.ok) {\n            const doc = parser.parseFromString(file.svg, 'text/html');\n            const svg = doc.body.querySelector('svg');\n            if (svg) {\n              this.svg = svg.outerHTML;\n              this.vmLoad.emit();\n            }\n            else {\n              this.svg = '';\n              this.vmError.emit({ status: file.status });\n            }\n          }\n        }\n        catch (_b) {\n          this.vmError.emit();\n        }\n      }\n    });\n  }\n  render() {\n    return (h(\"div\", { class: \"icon\", role: \"img\", \"aria-label\": this.getLabel(), innerHTML: this.svg }));\n  }\n  static get watchers() { return {\n    \"name\": [\"handleChange\"],\n    \"src\": [\"handleChange\"],\n    \"library\": [\"handleChange\"],\n    \"icons\": [\"handleChange\"]\n  }; }\n  static get style() { return iconCss; }\n};\n\nconst IconLibrary = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /** @internal */\n    this.icons = 'material';\n    withComponentRegistry(this);\n    withPlayerContext(this, ['icons']);\n  }\n  handleUpdate() {\n    this.register();\n  }\n  connectedCallback() {\n    this.register();\n  }\n  disconnectedCallback() {\n    if (!isUndefined(this.name))\n      deregisterIconLibrary(this.name);\n  }\n  register() {\n    var _a;\n    registerIconLibrary((_a = this.name) !== null && _a !== void 0 ? _a : this.icons, this.name ? this.resolver : undefined);\n  }\n  get host() { return this; }\n  static get watchers() { return {\n    \"name\": [\"handleUpdate\"],\n    \"resolver\": [\"handleUpdate\"],\n    \"icons\": [\"handleUpdate\"]\n  }; }\n};\n\nconst liveIndicatorCss = \".liveIndicator{display:flex;align-items:center;font-size:13px;font-weight:bold;letter-spacing:0.6px;color:var(--vm-control-color)}.liveIndicator.hidden{display:none}.indicator{display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:4px;background-color:var(--vm-live-indicator-color, red)}\";\n\nconst LiveIndicator = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /** @internal */\n    this.isLive = false;\n    /** @internal */\n    this.i18n = {};\n    withComponentRegistry(this);\n    withPlayerContext(this, ['isLive', 'i18n']);\n  }\n  render() {\n    return (h(\"div\", { class: {\n        liveIndicator: true,\n        hidden: !this.isLive,\n      } }, h(\"div\", { class: \"indicator\" }), this.i18n.live));\n  }\n  static get style() { return liveIndicatorCss; }\n};\n\nconst loadingScreenCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-loading-screen-z-index);display:flex;align-items:center;justify-content:center}.loadingScreen{opacity:100;transition:var(--vm-fade-transition)}.loadingScreen.inactive{opacity:0}.dotPulse{position:relative;left:-9999px;width:var(--vm-loading-screen-dot-size);height:var(--vm-loading-screen-dot-size);border-radius:calc(var(--vm-loading-screen-dot-size) / 2);background-color:var(--vm-loading-screen-dot-color);color:var(--vm-loading-screen-dot-color);box-shadow:9999px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n    var(--vm-loading-screen-dot-color);animation:dotPulse var(--vm-loading-screen-pulse-duration) infinite linear;animation-delay:calc(var(--vm-loading-screen-pulse-duration) / 6)}.dotPulse::before,.dotPulse::after{content:'';display:inline-block;position:absolute;top:0;width:var(--vm-loading-screen-dot-size);height:var(--vm-loading-screen-dot-size);border-radius:calc(var(--vm-loading-screen-dot-size) / 2);background-color:var(--vm-loading-screen-dot-color);color:var(--vm-loading-screen-dot-color)}.dotPulse::before{box-shadow:9984px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n    var(--vm-loading-screen-dot-color);animation:dotPulseBefore var(--vm-loading-screen-pulse-duration) infinite\\n    linear;animation-delay:0s}.dotPulse::after{box-shadow:10014px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n    var(--vm-loading-screen-dot-color);animation:dotPulseAfter var(--vm-loading-screen-pulse-duration) infinite\\n    linear;animation-delay:calc(var(--vm-loading-screen-pulse-duration) / 3)}@keyframes dotPulseBefore{0%{box-shadow:9984px 0 0\\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n      var(--vm-loading-screen-dot-color)}30%{box-shadow:9984px 0 0 2px var(--vm-loading-screen-dot-color)}60%,100%{box-shadow:9984px 0 0\\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n      var(--vm-loading-screen-dot-color)}}@keyframes dotPulse{0%{box-shadow:9999px 0 0\\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n      var(--vm-loading-screen-dot-color)}30%{box-shadow:9999px 0 0 2px var(--vm-loading-screen-dot-color)}60%,100%{box-shadow:9999px 0 0\\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n      var(--vm-loading-screen-dot-color)}}@keyframes dotPulseAfter{0%{box-shadow:10014px 0 0\\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n      var(--vm-loading-screen-dot-color)}30%{box-shadow:10014px 0 0 2px var(--vm-loading-screen-dot-color)}60%,100%{box-shadow:10014px 0 0\\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\\n      var(--vm-loading-screen-dot-color)}}\";\n\nconst LoadingScreen = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /** @internal */\n    this.playbackReady = false;\n    /**\n     * Whether the loading dots are hidden or not.\n     */\n    this.hideDots = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, ['playbackReady']);\n  }\n  render() {\n    return (h(\"div\", { class: {\n        loadingScreen: true,\n        inactive: this.playbackReady,\n      } }, h(\"slot\", null), !this.hideDots && h(\"div\", { class: \"dotPulse\" })));\n  }\n  static get style() { return loadingScreenCss; }\n};\n\nfunction unwrapSubmenu(el) {\n  if (el.tagName.toLowerCase() !== 'vm-submenu')\n    return el;\n  const submenu = el;\n  return submenu.shadowRoot.querySelector('vm-menu-item');\n}\nfunction unwrapRadioGroup(el) {\n  var _a;\n  if (el.tagName.toLowerCase() !== 'vm-menu-radio-group')\n    return el;\n  const radioGroup = el;\n  const slot = radioGroup.shadowRoot.querySelector('slot');\n  const assignedElements = Array.from((_a = slot === null || slot === void 0 ? void 0 : slot.assignedElements()) !== null && _a !== void 0 ? _a : []);\n  return assignedElements\n    .filter(radio => radio.tagName.toLowerCase() === 'vm-menu-radio')\n    .map(radio => radio.shadowRoot.querySelector('vm-menu-item'));\n}\nfunction menuItemHunter(assignedElements) {\n  if (isUndefined(assignedElements))\n    return [];\n  const allowed = ['vm-menu-item', 'vm-menu-radio-group', 'vm-submenu'];\n  return Array.from(assignedElements !== null && assignedElements !== void 0 ? assignedElements : [])\n    .filter(el => allowed.includes(el.tagName.toLowerCase()))\n    .map(el => unwrapSubmenu(el))\n    .map(el => unwrapRadioGroup(el))\n    .reduce((acc, val) => acc.concat(val), []);\n}\n\nconst menuCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;pointer-events:none;z-index:var(--vm-menu-z-index)}:host([active]){pointer-events:auto;z-index:calc(var(--vm-menu-z-index) + 1)}.menu{position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box;transition:var(--vm-menu-transition)}.menu.slideIn{transform:translateX(0)}.menu[aria-hidden='true'].slideInFromLeft{transform:translateX(-100%)}.menu[aria-hidden='true'].slideInFromRight{transform:translateX(100%)}.container{display:flex;flex-direction:column;position:relative;text-align:left;width:100%;height:100%;color:var(--vm-menu-color);background:var(--vm-menu-bg);font-size:var(--vm-menu-font-size);font-weight:var(--vm-menu-font-weight)}.menu:focus{outline:0}\";\n\nvar __awaiter$c = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst Menu = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmOpen = createEvent(this, \"vmOpen\", 7);\n    this.vmClose = createEvent(this, \"vmClose\", 7);\n    this.vmFocus = createEvent(this, \"vmFocus\", 7);\n    this.vmBlur = createEvent(this, \"vmBlur\", 7);\n    this.vmActiveSubmenuChange = createEvent(this, \"vmActiveSubmenuChange\", 7);\n    this.vmActiveMenuItemChange = createEvent(this, \"vmActiveMenuItemChange\", 7);\n    this.vmMenuHeightChange = createEvent(this, \"vmMenuHeightChange\", 3);\n    this.hasDisconnected = false;\n    /**\n     * Whether the menu is open/visible.\n     */\n    this.active = false;\n    withComponentRegistry(this);\n  }\n  onActiveMenuitemChange() {\n    this.vmActiveMenuItemChange.emit(this.activeMenuItem);\n  }\n  onActiveSubmenuChange() {\n    this.vmActiveSubmenuChange.emit(this.activeSubmenu);\n  }\n  onActiveChange() {\n    var _a;\n    if (this.hasDisconnected)\n      return;\n    this.active ? this.vmOpen.emit(this.host) : this.vmClose.emit(this.host);\n    if (((_a = this.controller) === null || _a === void 0 ? void 0 : _a.tagName.toLowerCase()) === 'vm-menu-item') {\n      this.controller.expanded = true;\n    }\n  }\n  connectedCallback() {\n    this.hasDisconnected = false;\n  }\n  componentDidRender() {\n    writeTask(() => {\n      if (!this.hasDisconnected)\n        this.calculateHeight();\n    });\n  }\n  disconnectedCallback() {\n    this.controller = undefined;\n    this.hasDisconnected = true;\n  }\n  /**\n   * Focuses the menu.\n   */\n  focusMenu() {\n    var _a;\n    return __awaiter$c(this, void 0, void 0, function* () {\n      (_a = this.menu) === null || _a === void 0 ? void 0 : _a.focus();\n    });\n  }\n  /**\n   * Removes focus from the menu.\n   */\n  blurMenu() {\n    var _a;\n    return __awaiter$c(this, void 0, void 0, function* () {\n      (_a = this.menu) === null || _a === void 0 ? void 0 : _a.blur();\n    });\n  }\n  /**\n   * Returns the currently focused menu item.\n   */\n  getActiveMenuItem() {\n    return __awaiter$c(this, void 0, void 0, function* () {\n      return this.activeMenuItem;\n    });\n  }\n  /**\n   * Sets the currently focused menu item.\n   */\n  setActiveMenuItem(item) {\n    return __awaiter$c(this, void 0, void 0, function* () {\n      item === null || item === void 0 ? void 0 : item.focusItem();\n      this.activeMenuItem = item;\n    });\n  }\n  /**\n   * Calculates the height of the settings menu based on its children.\n   */\n  calculateHeight() {\n    var _a, _b;\n    return __awaiter$c(this, void 0, void 0, function* () {\n      let height = 0;\n      if (this.activeSubmenu) {\n        const submenu = yield this.activeSubmenu.getMenu();\n        height = (_a = (yield (submenu === null || submenu === void 0 ? void 0 : submenu.calculateHeight()))) !== null && _a !== void 0 ? _a : 0;\n        height += yield this.activeSubmenu.getControllerHeight();\n      }\n      else {\n        const children = ((_b = this.container) === null || _b === void 0 ? void 0 : _b.firstChild).assignedElements({ flatten: true });\n        children === null || children === void 0 ? void 0 : children.forEach(child => {\n          height += parseFloat(window.getComputedStyle(child).height);\n        });\n      }\n      this.vmMenuHeightChange.emit(height);\n      return height;\n    });\n  }\n  onOpenSubmenu(event) {\n    event.stopPropagation();\n    if (!isUndefined(this.activeSubmenu))\n      this.activeSubmenu.active = false;\n    this.activeSubmenu = event.detail;\n    this.getChildren().forEach(child => {\n      if (child !== this.activeSubmenu) {\n        child.style.opacity = '0';\n        child.style.visibility = 'hidden';\n      }\n    });\n    writeTask(() => {\n      this.activeSubmenu.active = true;\n    });\n  }\n  onCloseSubmenu(event) {\n    event === null || event === void 0 ? void 0 : event.stopPropagation();\n    if (!isUndefined(this.activeSubmenu))\n      this.activeSubmenu.active = false;\n    this.getChildren().forEach(child => {\n      if (child !== this.activeSubmenu) {\n        child.style.opacity = '';\n        child.style.visibility = '';\n      }\n    });\n    writeTask(() => {\n      this.activeSubmenu = undefined;\n    });\n  }\n  onWindowClick() {\n    this.onCloseSubmenu();\n    this.onClose();\n  }\n  onWindowKeyDown(event) {\n    if (this.active && event.key === 'Escape') {\n      this.onCloseSubmenu();\n      this.onClose();\n      this.focusController();\n    }\n  }\n  getChildren() {\n    var _a;\n    const assignedElements = (_a = this.host\n      .shadowRoot.querySelector('slot')) === null || _a === void 0 ? void 0 : _a.assignedElements({ flatten: true });\n    return (assignedElements !== null && assignedElements !== void 0 ? assignedElements : []);\n  }\n  getMenuItems() {\n    var _a;\n    const assignedElements = (_a = this.host\n      .shadowRoot.querySelector('slot')) === null || _a === void 0 ? void 0 : _a.assignedElements({ flatten: true });\n    return menuItemHunter(assignedElements);\n  }\n  focusController() {\n    var _a, _b, _c, _d, _e;\n    if (!isUndefined((_a = this.controller) === null || _a === void 0 ? void 0 : _a.focusItem)) {\n      (_b = this.controller) === null || _b === void 0 ? void 0 : _b.focusItem();\n    }\n    else if (!isUndefined((_c = this.controller) === null || _c === void 0 ? void 0 : _c.focusControl)) {\n      (_d = this.controller) === null || _d === void 0 ? void 0 : _d.focusControl();\n    }\n    else {\n      (_e = this.controller) === null || _e === void 0 ? void 0 : _e.focus();\n    }\n  }\n  triggerMenuItem() {\n    var _a;\n    if (isUndefined(this.activeMenuItem))\n      return;\n    this.activeMenuItem.click();\n    // If it controls a menu then focus it essentially opening it.\n    (_a = this.activeMenuItem.menu) === null || _a === void 0 ? void 0 : _a.focusMenu();\n  }\n  onClose() {\n    this.activeMenuItem = undefined;\n    this.active = false;\n  }\n  onClick(event) {\n    // Stop the event from propagating while playing with menu so that when it is clicked outside\n    // the menu we can close it in the `onWindowClick` handler above.\n    event.stopPropagation();\n  }\n  onFocus() {\n    var _a;\n    this.active = true;\n    [this.activeMenuItem] = this.getMenuItems();\n    (_a = this.activeMenuItem) === null || _a === void 0 ? void 0 : _a.focusItem();\n    this.vmFocus.emit();\n  }\n  onBlur() {\n    this.vmBlur.emit();\n  }\n  foucsMenuItem(items, index) {\n    if (index < 0)\n      index = items.length - 1;\n    if (index > items.length - 1)\n      index = 0;\n    this.activeMenuItem = items[index];\n    this.activeMenuItem.focusItem();\n  }\n  onKeyDown(event) {\n    if (!this.active)\n      return;\n    event.preventDefault();\n    event.stopPropagation();\n    const items = this.getMenuItems();\n    let index = items.findIndex(item => item === this.activeMenuItem);\n    switch (event.key) {\n      case 'Escape':\n        this.onClose();\n        this.focusController();\n        break;\n      case 'ArrowDown':\n      case 'Tab':\n        this.foucsMenuItem(items, (index += 1));\n        break;\n      case 'ArrowUp':\n        this.foucsMenuItem(items, (index -= 1));\n        break;\n      case 'ArrowLeft':\n        this.onClose();\n        this.focusController();\n        break;\n      case 'ArrowRight':\n      case 'Enter':\n      case ' ':\n        this.triggerMenuItem();\n        break;\n      case 'Home':\n      case 'PageUp':\n        this.foucsMenuItem(items, 0);\n        break;\n      case 'End':\n      case 'PageDown':\n        this.foucsMenuItem(items, items.length - 1);\n        break;\n    }\n  }\n  render() {\n    var _a, _b, _c;\n    return (h(\"div\", { id: this.identifier, class: {\n        menu: true,\n        slideIn: !isUndefined(this.slideInDirection),\n        slideInFromLeft: this.slideInDirection === 'left',\n        slideInFromRight: this.slideInDirection === 'right',\n      }, role: \"menu\", tabindex: \"-1\", \"aria-labelledby\": (_b = (_a = this.controller) === null || _a === void 0 ? void 0 : _a.identifier) !== null && _b !== void 0 ? _b : (_c = this.controller) === null || _c === void 0 ? void 0 : _c.id, \"aria-hidden\": !this.active ? 'true' : 'false', onFocus: this.onFocus.bind(this), onBlur: this.onBlur.bind(this), onClick: this.onClick.bind(this), onKeyDown: this.onKeyDown.bind(this), ref: el => {\n        this.menu = el;\n      } }, h(\"div\", { class: \"container\", ref: el => {\n        this.container = el;\n      } }, h(\"slot\", null))));\n  }\n  get host() { return this; }\n  static get watchers() { return {\n    \"activeMenuItem\": [\"onActiveMenuitemChange\"],\n    \"activeSubmenu\": [\"onActiveSubmenuChange\"],\n    \"active\": [\"onActiveChange\"]\n  }; }\n  static get style() { return menuCss; }\n};\n\nconst menuItemCss = \":host{display:block}.menuItem{display:flex;position:relative;align-items:center;flex-direction:row;cursor:pointer;color:var(--vm-menu-color);background:var(--vm-menu-bg);font-size:var(--vm-menu-font-size);font-weight:var(--vm-menu-font-weight);padding:var(--vm-menu-item-padding);touch-action:manipulation;box-sizing:border-box}.menuItem:focus{outline:0}.menuItem.hidden{display:none}.menuItem.tapHighlight{background:var(--vm-menu-item-tap-highlight)}.menuItem.showDivider{border-bottom:0.5px solid var(--vm-menu-item-divider-color)}.menuItem.notTouch:hover,.menuItem.notTouch:focus{outline:0;color:var(--vm-menu-item-focus-color);background-color:var(--vm-menu-item-focus-bg)}.menuItem[aria-expanded='true']{position:absolute;z-index:2;top:0;width:100%}.menuItem[aria-hidden='true']{display:none}.menuItem[aria-checked='true'] vm-icon{opacity:1;visibility:visible}vm-icon{display:inline-block}vm-icon{fill:currentColor;pointer-events:none;font-size:var(--vm-menu-item-check-icon-size);margin-right:10px;opacity:0;visibility:hidden;transition:var(--vm-fade-transition)}.hint{display:inline-block;margin-left:auto;overflow:hidden;pointer-events:none;margin-right:6px;font-size:var(--vm-menu-item-hint-font-size);opacity:var(--vm-menu-item-hint-opacity);color:var(--vm-menu-item-hint-color)}.badge{display:inline-block;line-height:1;overflow:hidden;pointer-events:none;margin-left:6px;color:var(--vm-menu-item-badge-color);background:var(--vm-menu-item-badge-bg);font-size:var(--vm-menu-item-badge-font-size)}.spacer{flex:1}.arrow{color:var(--vm-menu-item-arrow-color);border:2px solid;padding:2px;display:inline-block;border-width:0 2px 2px 0}.arrow.left{margin-right:6px;transform:rotate(135deg)}.arrow.right{transform:rotate(-45deg);opacity:0.38}\";\n\nvar __awaiter$b = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst MenuItem = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmFocus = createEvent(this, \"vmFocus\", 7);\n    this.vmBlur = createEvent(this, \"vmBlur\", 7);\n    this.showTapHighlight = false;\n    /**\n     * Whether the item is displayed or not.\n     */\n    this.hidden = false;\n    /**\n     * The name of the checkmark icon to resolve from the icon library.\n     */\n    this.checkIcon = 'check';\n    /** @internal */\n    this.isTouch = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, ['isTouch']);\n  }\n  /**\n   * Focuses the menu item.\n   */\n  focusItem() {\n    var _a;\n    return __awaiter$b(this, void 0, void 0, function* () {\n      (_a = this.menuItem) === null || _a === void 0 ? void 0 : _a.focus();\n    });\n  }\n  /**\n   * Removes focus from the menu item.\n   */\n  blurItem() {\n    var _a;\n    return __awaiter$b(this, void 0, void 0, function* () {\n      (_a = this.menuItem) === null || _a === void 0 ? void 0 : _a.blur();\n    });\n  }\n  /**\n   * Returns the height of the menu item.\n   */\n  getHeight() {\n    return __awaiter$b(this, void 0, void 0, function* () {\n      return parseFloat(this.menuItem ? window.getComputedStyle(this.menuItem).height : '0');\n    });\n  }\n  onClick() {\n    if (!isNil(this.menu))\n      this.menu.active = !this.expanded;\n  }\n  onFocus() {\n    this.vmFocus.emit();\n  }\n  onBlur() {\n    this.vmBlur.emit();\n  }\n  onTouchStart() {\n    this.showTapHighlight = true;\n  }\n  onTouchEnd() {\n    setTimeout(() => {\n      this.showTapHighlight = false;\n    }, 100);\n  }\n  onMouseLeave() {\n    var _a;\n    (_a = this.menuItem) === null || _a === void 0 ? void 0 : _a.blur();\n  }\n  render() {\n    var _a, _b, _c, _d;\n    const isCheckedDefined = !isUndefined(this.checked);\n    const isMenuDefined = !isUndefined(this.menu);\n    const hasExpanded = this.expanded ? 'true' : 'false';\n    const isChecked = this.checked ? 'true' : 'false';\n    const showCheckedIcon = isCheckedDefined && !isUndefined(this.checkIcon);\n    const showLeftNavArrow = isMenuDefined && this.expanded;\n    const showRightNavArrow = isMenuDefined && !this.expanded;\n    const showHint = !isUndefined(this.hint) &&\n      !isCheckedDefined &&\n      (!isMenuDefined || !this.expanded);\n    const showBadge = !isUndefined(this.badge) && !showHint && !showRightNavArrow;\n    const hasSpacer = showHint || showRightNavArrow;\n    return (h(\"div\", { class: {\n        menuItem: true,\n        notTouch: !this.isTouch,\n        tapHighlight: this.showTapHighlight,\n        showDivider: isMenuDefined && ((_a = this.expanded) !== null && _a !== void 0 ? _a : false),\n      }, id: this.identifier, role: isCheckedDefined ? 'menuitemradio' : 'menuitem', tabindex: \"0\", \"aria-label\": this.label, \"aria-hidden\": this.hidden ? 'true' : 'false', \"aria-haspopup\": isMenuDefined ? 'true' : undefined, \"aria-controls\": (_c = (_b = this.menu) === null || _b === void 0 ? void 0 : _b.identifier) !== null && _c !== void 0 ? _c : (_d = this.menu) === null || _d === void 0 ? void 0 : _d.id, \"aria-expanded\": isMenuDefined ? hasExpanded : undefined, \"aria-checked\": isCheckedDefined ? isChecked : undefined, onClick: this.onClick.bind(this), onFocus: this.onFocus.bind(this), onBlur: this.onBlur.bind(this), onTouchStart: this.onTouchStart.bind(this), onTouchEnd: this.onTouchEnd.bind(this), onMouseLeave: this.onMouseLeave.bind(this), ref: el => {\n        this.menuItem = el;\n      } }, showCheckedIcon && (h(\"vm-icon\", { name: this.checkIcon, library: this.icons })), showLeftNavArrow && h(\"span\", { class: \"arrow left\" }), this.label, hasSpacer && h(\"span\", { class: \"spacer\" }), showHint && h(\"span\", { class: \"hint\" }, this.hint), showBadge && h(\"span\", { class: \"badge\" }, this.badge), showRightNavArrow && h(\"span\", { class: \"arrow right\" })));\n  }\n  get host() { return this; }\n  static get style() { return menuItemCss; }\n};\n\nconst MenuRadio = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmCheck = createEvent(this, \"vmCheck\", 7);\n    /**\n     * Whether the radio item is selected or not.\n     */\n    this.checked = false;\n    /**\n     * The URL to an SVG element or fragment to load.\n     */\n    this.checkIcon = 'check';\n    withComponentRegistry(this);\n  }\n  onClick() {\n    this.checked = true;\n    this.vmCheck.emit();\n  }\n  render() {\n    return (h(\"vm-menu-item\", { label: this.label, checked: this.checked, badge: this.badge, checkIcon: this.checkIcon, icons: this.icons, onClick: this.onClick.bind(this) }));\n  }\n};\n\nconst MenuRadioGroup = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmCheck = createEvent(this, \"vmCheck\", 7);\n    withComponentRegistry(this);\n  }\n  onValueChange() {\n    var _a;\n    (_a = this.findRadios()) === null || _a === void 0 ? void 0 : _a.forEach(radio => {\n      radio.checked = radio.value === this.value;\n    });\n  }\n  connectedCallback() {\n    this.onValueChange();\n  }\n  componentDidLoad() {\n    this.onValueChange();\n  }\n  onSelectionChange(event) {\n    const radio = event.target;\n    this.value = radio.value;\n  }\n  findRadios() {\n    var _a;\n    return (_a = this.host\n      .shadowRoot.querySelector('slot')) === null || _a === void 0 ? void 0 : _a.assignedElements();\n  }\n  render() {\n    return h(\"slot\", null);\n  }\n  get host() { return this; }\n  static get watchers() { return {\n    \"value\": [\"onValueChange\"]\n  }; }\n};\n\nconst MuteControl = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmFocus = createEvent(this, \"vmFocus\", 7);\n    this.vmBlur = createEvent(this, \"vmBlur\", 7);\n    /**\n     * The name of the low volume icon to resolve from the icon library.\n     */\n    this.lowVolumeIcon = 'volume-low';\n    /**\n     * The name of the high volume icon to resolve from the icon library.\n     */\n    this.highVolumeIcon = 'volume-high';\n    /**\n     * The name of the muted volume icon to resolve from the icon library.\n     */\n    this.mutedIcon = 'volume-mute';\n    /**\n     * Whether the tooltip is positioned above/below the control.\n     */\n    this.tooltipPosition = 'top';\n    /**\n     * Whether the tooltip should not be displayed.\n     */\n    this.hideTooltip = false;\n    /** @inheritdoc */\n    this.keys = 'm';\n    /** @internal */\n    this.volume = 50;\n    /** @internal */\n    this.muted = false;\n    /** @internal */\n    this.i18n = {};\n    withComponentRegistry(this);\n    withPlayerContext(this, ['muted', 'volume', 'i18n']);\n  }\n  connectedCallback() {\n    this.dispatch = createDispatcher(this);\n  }\n  getIcon() {\n    const volumeIcon = this.volume < 50 ? this.lowVolumeIcon : this.highVolumeIcon;\n    return this.muted || this.volume === 0 ? this.mutedIcon : volumeIcon;\n  }\n  onClick() {\n    this.dispatch('muted', !this.muted);\n  }\n  render() {\n    const tooltip = this.muted ? this.i18n.unmute : this.i18n.mute;\n    const tooltipWithHint = !isUndefined(this.keys)\n      ? `${tooltip} (${this.keys})`\n      : tooltip;\n    return (h(\"vm-control\", { label: this.i18n.mute, pressed: this.muted, keys: this.keys, onClick: this.onClick.bind(this) }, h(\"vm-icon\", { name: this.getIcon(), library: this.icons }), h(\"vm-tooltip\", { hidden: this.hideTooltip, position: this.tooltipPosition, direction: this.tooltipDirection }, tooltipWithHint)));\n  }\n};\n\nconst pipControlCss = \":host([hidden]){display:none}\";\n\nvar __awaiter$a = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst PiPControl = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.canSetPiP = false;\n    /**\n     * The name of the enter pip icon to resolve from the icon library.\n     */\n    this.enterIcon = 'pip-enter';\n    /**\n     * The name of the exit pip icon to resolve from the icon library.\n     */\n    this.exitIcon = 'pip-exit';\n    /**\n     * Whether the tooltip is positioned above/below the control.\n     */\n    this.tooltipPosition = 'top';\n    /**\n     * Whether the tooltip should not be displayed.\n     */\n    this.hideTooltip = false;\n    /** @inheritdoc */\n    this.keys = 'p';\n    /** @internal */\n    this.isPiPActive = false;\n    /** @internal */\n    this.i18n = {};\n    /** @internal */\n    this.playbackReady = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, ['isPiPActive', 'playbackReady', 'i18n']);\n  }\n  onPlaybackReadyChange() {\n    var _a;\n    return __awaiter$a(this, void 0, void 0, function* () {\n      const player = getPlayerFromRegistry(this);\n      this.canSetPiP = (_a = (yield (player === null || player === void 0 ? void 0 : player.canSetPiP()))) !== null && _a !== void 0 ? _a : false;\n    });\n  }\n  componentDidLoad() {\n    this.onPlaybackReadyChange();\n  }\n  onClick() {\n    const player = getPlayerFromRegistry(this);\n    !this.isPiPActive ? player === null || player === void 0 ? void 0 : player.enterPiP() : player === null || player === void 0 ? void 0 : player.exitPiP();\n  }\n  render() {\n    const tooltip = this.isPiPActive ? this.i18n.exitPiP : this.i18n.enterPiP;\n    const tooltipWithHint = !isUndefined(this.keys)\n      ? `${tooltip} (${this.keys})`\n      : tooltip;\n    return (h(Host, { hidden: !this.canSetPiP }, h(\"vm-control\", { label: this.i18n.pip, keys: this.keys, pressed: this.isPiPActive, hidden: !this.canSetPiP, onClick: this.onClick.bind(this) }, h(\"vm-icon\", { name: this.isPiPActive ? this.exitIcon : this.enterIcon, library: this.icons }), h(\"vm-tooltip\", { hidden: this.hideTooltip, position: this.tooltipPosition, direction: this.tooltipDirection }, tooltipWithHint))));\n  }\n  static get watchers() { return {\n    \"playbackReady\": [\"onPlaybackReadyChange\"]\n  }; }\n  static get style() { return pipControlCss; }\n};\n\nconst PlaybackControl = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /**\n     * The name of the play icon to resolve from the icon library.\n     */\n    this.playIcon = 'play';\n    /**\n     * The name of the pause icon to resolve from the icon library.\n     */\n    this.pauseIcon = 'pause';\n    /**\n     * Whether the tooltip is positioned above/below the control.\n     */\n    this.tooltipPosition = 'top';\n    /**\n     * Whether the tooltip should not be displayed.\n     */\n    this.hideTooltip = false;\n    /** @inheritdoc */\n    this.keys = 'k';\n    /** @internal */\n    this.paused = true;\n    /** @internal */\n    this.i18n = {};\n    withComponentRegistry(this);\n    withPlayerContext(this, ['paused', 'i18n']);\n  }\n  connectedCallback() {\n    this.dispatch = createDispatcher(this);\n  }\n  onClick() {\n    this.dispatch('paused', !this.paused);\n  }\n  render() {\n    const tooltip = this.paused ? this.i18n.play : this.i18n.pause;\n    const tooltipWithHint = !isUndefined(this.keys)\n      ? `${tooltip} (${this.keys})`\n      : tooltip;\n    return (h(\"vm-control\", { label: this.i18n.playback, keys: this.keys, pressed: !this.paused, onClick: this.onClick.bind(this) }, h(\"vm-icon\", { name: this.paused ? this.playIcon : this.pauseIcon, library: this.icons }), h(\"vm-tooltip\", { hidden: this.hideTooltip, position: this.tooltipPosition, direction: this.tooltipDirection }, tooltipWithHint)));\n  }\n};\n\nclass Logger {\n  constructor() {\n    this.silent = false;\n  }\n  log(...args) {\n    if (!this.silent && !isUndefined(console))\n      console.log('[Vime tip]:', ...args);\n  }\n  warn(...args) {\n    if (!this.silent && !isUndefined(console))\n      console.error('[Vime warn]:', ...args);\n  }\n}\n\nconst players = new Set();\nfunction withAutopause(player) {\n  const el = getElement(player);\n  createStencilHook(player, () => {\n    players.add(el);\n  }, () => {\n    players.delete(el);\n  });\n}\nfunction autopause(player) {\n  const el = getElement(player);\n  players.forEach(p => {\n    if (p !== el && p.autopause)\n      p.paused = true;\n  });\n}\n\n/* eslint-disable func-names */\nfunction withPlayerEvents(player) {\n  const el = getElement(player);\n  const cache = new Map();\n  function initCache() {\n    Object.keys(initialState).forEach(prop => {\n      cache.set(prop, player[prop]);\n    });\n  }\n  createStencilHook(player, () => {\n    initCache();\n  }, () => {\n    cache.clear();\n  });\n  const { componentDidRender } = player;\n  player.componentDidRender = function () {\n    componentDidRender === null || componentDidRender === void 0 ? void 0 : componentDidRender();\n    const props = Array.from(cache.keys());\n    for (let i = 0; i < props.length; i += 1) {\n      const prop = props[i];\n      const oldValue = cache.get(prop);\n      const newValue = player[prop];\n      if (oldValue !== newValue) {\n        firePlayerEvent(el, prop, newValue, oldValue);\n        cache.set(prop, newValue);\n      }\n    }\n  };\n}\n\nvar __awaiter$9 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n    function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n// These changes need to be called immediately to avoid the browser blocking the request.\nconst immediateAdapterCall = new Set(['currentTime', 'paused']);\nfunction withPlayerScheduler(player) {\n  const el = getElement(player);\n  const disposal = new Disposal();\n  const cache = new Map();\n  function initCache() {\n    Object.keys(initialState).forEach(prop => {\n      cache.set(prop, player[prop]);\n    });\n  }\n  // Queue of adapter calls to be run when the media is ready for playback.\n  let adapterCalls = [];\n  function flushAdapterCalls() {\n    return __awaiter$9(this, void 0, void 0, function* () {\n      const adapter = yield player.adapter;\n      if (isUndefined(adapter))\n        return;\n      for (let i = 0; i < adapterCalls.length; i += 1) {\n        // eslint-disable-next-line no-await-in-loop\n        yield adapterCalls[i](adapter);\n      }\n      adapterCalls = [];\n    });\n  }\n  let hasMediaChanged = false;\n  function onMediaChange(e) {\n    e === null || e === void 0 ? void 0 : e.stopImmediatePropagation();\n    // Don't reset first time otherwise props intialized by the user will be reset.\n    if (!hasMediaChanged) {\n      hasMediaChanged = true;\n      return;\n    }\n    adapterCalls = [];\n    writeTask(() => {\n      Object.keys(initialState)\n        .filter(shouldPropResetOnMediaChange)\n        .forEach(prop => {\n        player[prop] = initialState[prop];\n      });\n    });\n  }\n  function onStateChange(event) {\n    var _a;\n    return __awaiter$9(this, void 0, void 0, function* () {\n      event.stopImmediatePropagation();\n      const { by, prop, value } = event.detail;\n      if (!isWritableProp(prop)) {\n        (_a = player.logger) === null || _a === void 0 ? void 0 : _a.warn(`${by.nodeName} tried to change \\`${prop}\\` but it is readonly.`);\n        return;\n      }\n      if (!player.playbackStarted && immediateAdapterCall.has(prop)) {\n        const adapter = yield player.adapter;\n        if (prop === 'paused' && !value) {\n          adapter === null || adapter === void 0 ? void 0 : adapter.play();\n        }\n        if (prop === 'currentTime') {\n          adapter === null || adapter === void 0 ? void 0 : adapter.play();\n          adapter === null || adapter === void 0 ? void 0 : adapter.setCurrentTime(value);\n        }\n      }\n      writeTask(() => {\n        player[prop] = value;\n      });\n    });\n  }\n  // Called by ProviderConnect.\n  const { onProviderDisconnect } = player;\n  player.onProviderDisconnect = function () {\n    onMediaChange();\n    if (onProviderDisconnect)\n      onProviderDisconnect.call(player);\n  };\n  createStencilHook(player, () => {\n    initCache();\n    disposal.add(listen(el, LOAD_START_EVENT, onMediaChange));\n    disposal.add(listen(el, STATE_CHANGE_EVENT, onStateChange));\n  }, () => {\n    cache.clear();\n    disposal.empty();\n  });\n  wrapStencilHook(player, 'componentWillRender', () => __awaiter$9(this, void 0, void 0, function* () {\n    if (player.playbackReady && adapterCalls.length > 0)\n      yield flushAdapterCalls();\n  }));\n  function isAdapterCallRequired(prop, value) {\n    var _a;\n    return value !== ((_a = player[PROVIDER_CACHE_KEY]) === null || _a === void 0 ? void 0 : _a.get(prop));\n  }\n  return function safeAdapterCall(prop, method) {\n    return __awaiter$9(this, void 0, void 0, function* () {\n      if (!isAdapterCallRequired(prop, player[prop]))\n        return;\n      const value = player[prop];\n      const safeCall = (adapter) => __awaiter$9(this, void 0, void 0, function* () {\n        var _a;\n        try {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          yield ((_a = adapter === null || adapter === void 0 ? void 0 : adapter[method]) === null || _a === void 0 ? void 0 : _a.call(adapter, value));\n        }\n        catch (e) {\n          el.dispatchEvent(new CustomEvent('vmError', { detail: e }));\n        }\n      });\n      if (player.playbackReady) {\n        yield safeCall(yield player.adapter);\n      }\n      else {\n        adapterCalls.push(safeCall);\n      }\n    });\n  };\n}\n\nconst playerCss = \".player{box-sizing:border-box;direction:ltr;font-family:var(--vm-player-font-family);-moz-osx-font-smoothing:auto;-webkit-font-smoothing:subpixel-antialiased;-webkit-tap-highlight-color:transparent;font-variant-numeric:tabular-nums;font-weight:500;line-height:1.7;width:100%;display:block;max-width:100%;min-width:275px;min-height:40px;position:relative;text-shadow:none;outline:0;transition:box-shadow 0.3s ease;box-shadow:var(--vm-player-box-shadow);border-radius:var(--vm-player-border-radius)}.player.idle{cursor:none}.player.audio{background-color:transparent !important}.player.video{height:0;overflow:hidden;background-color:var(--vm-player-bg, #000)}.player.fullscreen{margin:0;border-radius:0;width:100%;height:100%;padding-bottom:0 !important}.blocker{position:absolute;top:0;left:0;width:100%;height:100%;display:inline-block;z-index:var(--vm-blocker-z-index)}\";\n\nvar __awaiter$8 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nlet idCount$3 = 0;\nconst Player = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmThemeChange = createEvent(this, \"vmThemeChange\", 7);\n    this.vmPausedChange = createEvent(this, \"vmPausedChange\", 7);\n    this.vmPlay = createEvent(this, \"vmPlay\", 7);\n    this.vmPlayingChange = createEvent(this, \"vmPlayingChange\", 7);\n    this.vmSeekingChange = createEvent(this, \"vmSeekingChange\", 7);\n    this.vmSeeked = createEvent(this, \"vmSeeked\", 7);\n    this.vmBufferingChange = createEvent(this, \"vmBufferingChange\", 7);\n    this.vmDurationChange = createEvent(this, \"vmDurationChange\", 7);\n    this.vmCurrentTimeChange = createEvent(this, \"vmCurrentTimeChange\", 7);\n    this.vmReady = createEvent(this, \"vmReady\", 7);\n    this.vmPlaybackReady = createEvent(this, \"vmPlaybackReady\", 7);\n    this.vmPlaybackStarted = createEvent(this, \"vmPlaybackStarted\", 7);\n    this.vmPlaybackEnded = createEvent(this, \"vmPlaybackEnded\", 7);\n    this.vmBufferedChange = createEvent(this, \"vmBufferedChange\", 7);\n    this.vmError = createEvent(this, \"vmError\", 7);\n    this.vmLoadStart = createEvent(this, \"vmLoadStart\", 7);\n    this.vmCurrentProviderChange = createEvent(this, \"vmCurrentProviderChange\", 7);\n    this.vmCurrentSrcChange = createEvent(this, \"vmCurrentSrcChange\", 7);\n    this.vmCurrentPosterChange = createEvent(this, \"vmCurrentPosterChange\", 7);\n    this.vmMediaTitleChange = createEvent(this, \"vmMediaTitleChange\", 7);\n    this.vmControlsChange = createEvent(this, \"vmControlsChange\", 7);\n    this.vmPlaybackRateChange = createEvent(this, \"vmPlaybackRateChange\", 7);\n    this.vmPlaybackRatesChange = createEvent(this, \"vmPlaybackRatesChange\", 7);\n    this.vmPlaybackQualityChange = createEvent(this, \"vmPlaybackQualityChange\", 7);\n    this.vmPlaybackQualitiesChange = createEvent(this, \"vmPlaybackQualitiesChange\", 7);\n    this.vmMutedChange = createEvent(this, \"vmMutedChange\", 7);\n    this.vmVolumeChange = createEvent(this, \"vmVolumeChange\", 7);\n    this.vmViewTypeChange = createEvent(this, \"vmViewTypeChange\", 7);\n    this.vmMediaTypeChange = createEvent(this, \"vmMediaTypeChange\", 7);\n    this.vmLiveChange = createEvent(this, \"vmLiveChange\", 7);\n    this.vmTouchChange = createEvent(this, \"vmTouchChange\", 7);\n    this.vmLanguageChange = createEvent(this, \"vmLanguageChange\", 7);\n    this.vmI18nChange = createEvent(this, \"vmI18nChange\", 7);\n    this.vmTranslationsChange = createEvent(this, \"vmTranslationsChange\", 7);\n    this.vmLanguagesChange = createEvent(this, \"vmLanguagesChange\", 7);\n    this.vmFullscreenChange = createEvent(this, \"vmFullscreenChange\", 7);\n    this.vmPiPChange = createEvent(this, \"vmPiPChange\", 7);\n    this.vmTextTracksChange = createEvent(this, \"vmTextTracksChange\", 7);\n    this.vmCurrentTextTrackChange = createEvent(this, \"vmCurrentTextTrackChange\", 7);\n    this.vmTextTrackVisibleChange = createEvent(this, \"vmTextTrackVisibleChange\", 7);\n    this.vmAudioTracksChange = createEvent(this, \"vmAudioTracksChange\", 7);\n    this.vmCurrentAudioTrackChange = createEvent(this, \"vmCurrentAudioTrackChange\", 7);\n    this.disposal = new Disposal();\n    /**\n     * ------------------------------------------------------\n     * Props\n     * ------------------------------------------------------\n     */\n    /** @internal @readonly */\n    this.logger = new Logger();\n    /** @inheritDoc */\n    this.icons = 'vime';\n    /** @inheritDoc */\n    this.paused = true;\n    /** @inheritDoc @readonly */\n    this.playing = false;\n    /** @inheritDoc @readonly */\n    this.duration = -1;\n    /** @inheritDoc */\n    this.currentTime = 0;\n    /** @inheritDoc */\n    this.autoplay = false;\n    /** @inheritDoc @readonly */\n    this.ready = false;\n    /** @inheritDoc @readonly */\n    this.playbackReady = false;\n    /** @inheritDoc */\n    this.loop = false;\n    /** @inheritDoc */\n    this.muted = false;\n    /** @inheritDoc @readonly */\n    this.buffered = 0;\n    /** @inheritDoc */\n    this.playbackRate = 1;\n    this.lastRateCheck = 1;\n    /** @inheritDoc @readonly */\n    this.playbackRates = [1];\n    /** @inheritDoc @readonly */\n    this.playbackQualities = [];\n    /** @inheritDoc @readonly */\n    this.seeking = false;\n    /** @inheritDoc */\n    this.debug = false;\n    /** @inheritDoc @readonly */\n    this.playbackStarted = false;\n    /** @inheritDoc @readonly */\n    this.playbackEnded = false;\n    /** @inheritDoc @readonly */\n    this.buffering = false;\n    /** @inheritDoc */\n    this.controls = false;\n    /** @inheritDoc */\n    this.isControlsActive = false;\n    /** @inheritDoc @readonly */\n    this.isSettingsActive = false;\n    /** @inheritDoc */\n    this.volume = 50;\n    /** @inheritDoc @readonly */\n    this.isFullscreenActive = false;\n    /** @inheritDoc */\n    this.aspectRatio = '16:9';\n    /** @inheritDoc @readonly */\n    this.isAudioView = false;\n    /** @inheritDoc @readonly */\n    this.isVideoView = false;\n    /** @inheritDoc @readonly */\n    this.isAudio = false;\n    /** @inheritDoc @readonly */\n    this.isVideo = false;\n    /** @inheritDoc @readonly */\n    this.isLive = false;\n    /** @inheritDoc @readonly */\n    this.isMobile = false;\n    /** @inheritDoc @readonly */\n    this.isTouch = false;\n    /** @inheritDoc @readonly */\n    this.isPiPActive = false;\n    /** @inheritDoc @readonly */\n    this.textTracks = [];\n    /** @inheritDoc @readonly */\n    this.currentTextTrack = -1;\n    /** @inheritDoc @readonly */\n    this.isTextTrackVisible = true;\n    /** @inheritDoc */\n    this.shouldRenderNativeTextTracks = true;\n    /** @inheritDoc @readonly */\n    this.audioTracks = [];\n    /** @inheritDoc @readonly */\n    this.currentAudioTrack = -1;\n    /** @inheritDoc */\n    this.autopause = true;\n    /** @inheritDoc */\n    this.playsinline = false;\n    /** @inheritDoc */\n    this.language = 'en';\n    /** @inheritDoc */\n    this.translations = { en };\n    /** @inheritDoc @readonly */\n    this.languages = ['en'];\n    /** @inheritDoc @readonly */\n    this.i18n = en;\n    withFindPlayer(this);\n    withComponentRegistrar(this);\n    withAutopause(this);\n    withProviderHost(this);\n    withPlayerEvents(this);\n    this.safeAdapterCall = withPlayerScheduler(this);\n  }\n  get adapter() {\n    var _a;\n    return (_a = this.provider) === null || _a === void 0 ? void 0 : _a.getAdapter();\n  }\n  onContainerChange() {\n    var _a;\n    (_a = this.fullscreenController) === null || _a === void 0 ? void 0 : _a.destroy();\n    if (isUndefined(this.container))\n      return;\n    this.fullscreenController = new FullscreenController(this.container);\n    this.fullscreenController.on('change', isActive => {\n      this.isFullscreenActive = isActive;\n      if (isActive)\n        this.rotateDevice();\n    });\n    this.fullscreenController.on('error', error => {\n      this.vmError.emit(error);\n    });\n  }\n  onPausedChange() {\n    if (this.paused) {\n      this.playing = false;\n    }\n    else {\n      autopause(this);\n    }\n    this.safeAdapterCall('paused', !this.paused ? 'play' : 'pause');\n  }\n  onDurationChange() {\n    this.isLive = this.duration === Infinity;\n  }\n  onCurrentTimeChange() {\n    const duration = this.playbackReady ? this.duration : Infinity;\n    this.currentTime = Math.max(0, Math.min(this.currentTime, duration));\n    this.safeAdapterCall('currentTime', 'setCurrentTime');\n  }\n  onPlaybackReadyChange() {\n    if (!this.ready)\n      this.ready = true;\n  }\n  onMutedChange() {\n    this.safeAdapterCall('muted', 'setMuted');\n  }\n  onPlaybackRateChange(newRate, prevRate) {\n    var _a, _b;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      if (newRate === this.lastRateCheck)\n        return;\n      if (!(yield ((_b = (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.canSetPlaybackRate) === null || _b === void 0 ? void 0 : _b.call(_a)))) {\n        this.logger.log('provider cannot change `playbackRate`.');\n        this.lastRateCheck = prevRate;\n        this.playbackRate = prevRate;\n        return;\n      }\n      if (!this.playbackRates.includes(newRate)) {\n        this.logger.log(`invalid \\`playbackRate\\` of ${newRate}, ` +\n          `valid values are [${this.playbackRates.join(', ')}]`);\n        this.lastRateCheck = prevRate;\n        this.playbackRate = prevRate;\n        return;\n      }\n      this.lastRateCheck = newRate;\n      this.safeAdapterCall('playbackRate', 'setPlaybackRate');\n    });\n  }\n  onPlaybackQualityChange(newQuality, prevQuality) {\n    var _a, _b;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      if (isUndefined(newQuality) || newQuality === this.lastQualityCheck)\n        return;\n      if (!(yield ((_b = (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.canSetPlaybackQuality) === null || _b === void 0 ? void 0 : _b.call(_a)))) {\n        this.logger.log('provider cannot change `playbackQuality`.');\n        this.lastQualityCheck = prevQuality;\n        this.playbackQuality = prevQuality;\n        return;\n      }\n      if (!this.playbackQualities.includes(newQuality)) {\n        this.logger.log(`invalid \\`playbackQuality\\` of ${newQuality}, ` +\n          `valid values are [${this.playbackQualities.join(', ')}]`);\n        this.lastQualityCheck = prevQuality;\n        this.playbackQuality = prevQuality;\n        return;\n      }\n      this.lastQualityCheck = newQuality;\n      this.safeAdapterCall('playbackQuality', 'setPlaybackQuality');\n    });\n  }\n  onDebugChange() {\n    this.logger.silent = !this.debug;\n  }\n  onVolumeChange() {\n    return __awaiter$8(this, void 0, void 0, function* () {\n      this.volume = Math.max(0, Math.min(this.volume, 100));\n      this.safeAdapterCall('volume', 'setVolume');\n    });\n  }\n  onViewTypeChange() {\n    this.isAudioView = this.viewType === ViewType.Audio;\n    this.isVideoView = this.viewType === ViewType.Video;\n  }\n  onMediaTypeChange() {\n    this.isAudio = this.mediaType === MediaType.Audio;\n    this.isVideo = this.mediaType === MediaType.Video;\n  }\n  onLanguageChange(_, prevLanguage) {\n    if (!this.languages.includes(this.language)) {\n      this.logger.log(`invalid \\`language\\` of ${this.language}, ` +\n        `valid values are [${this.languages.join(', ')}]`);\n      this.language = prevLanguage;\n      return;\n    }\n    this.i18n = this.translations[this.language];\n  }\n  onTranslationsChange() {\n    Object.assign(this.translations, { en });\n    this.languages = Object.keys(this.translations);\n    this.i18n = this.translations[this.language];\n  }\n  onError(event) {\n    this.logger.warn(event.detail);\n  }\n  /**\n   * ------------------------------------------------------\n   * Methods\n   * ------------------------------------------------------\n   */\n  /** @inheritDoc */\n  getProvider() {\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return this.provider;\n    });\n  }\n  /** @internal */\n  getAdapter() {\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return this.adapter;\n    });\n  }\n  /** @inheritDoc */\n  play() {\n    var _a;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.play();\n    });\n  }\n  /** @inheritDoc */\n  pause() {\n    var _a;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.pause();\n    });\n  }\n  /** @inheritDoc */\n  canPlay(type) {\n    var _a, _b;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return (_b = (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.canPlay(type)) !== null && _b !== void 0 ? _b : false;\n    });\n  }\n  /** @inheritDoc */\n  canAutoplay() {\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return canAutoplay();\n    });\n  }\n  /** @inheritDoc */\n  canMutedAutoplay() {\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return canAutoplay(true);\n    });\n  }\n  /** @inheritDoc */\n  canSetPlaybackRate() {\n    var _a, _b, _c;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return (_c = (_b = (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.canSetPlaybackRate) === null || _b === void 0 ? void 0 : _b.call(_a)) !== null && _c !== void 0 ? _c : false;\n    });\n  }\n  /** @inheritDoc */\n  canSetPlaybackQuality() {\n    var _a, _b, _c;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return (_c = (_b = (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.canSetPlaybackQuality) === null || _b === void 0 ? void 0 : _b.call(_a)) !== null && _c !== void 0 ? _c : false;\n    });\n  }\n  /** @inheritDoc */\n  canSetFullscreen() {\n    var _a, _b, _c;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return (this.fullscreenController.isSupported ||\n        ((_c = (_b = (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.canSetFullscreen) === null || _b === void 0 ? void 0 : _b.call(_a)) !== null && _c !== void 0 ? _c : false));\n    });\n  }\n  /** @inheritDoc */\n  enterFullscreen(options) {\n    var _a, _b, _c;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      if (!this.isVideoView) {\n        throw Error('Cannot enter fullscreen on an audio player view.');\n      }\n      if (this.fullscreenController.isSupported) {\n        return this.fullscreenController.requestFullscreen();\n      }\n      const adapter = yield this.adapter;\n      const canProviderSetFullscreen = (_b = (yield ((_a = adapter === null || adapter === void 0 ? void 0 : adapter.canSetFullscreen) === null || _a === void 0 ? void 0 : _a.call(adapter)))) !== null && _b !== void 0 ? _b : false;\n      if (canProviderSetFullscreen) {\n        return (_c = adapter === null || adapter === void 0 ? void 0 : adapter.enterFullscreen) === null || _c === void 0 ? void 0 : _c.call(adapter, options);\n      }\n      throw Error('Fullscreen API is not available.');\n    });\n  }\n  /** @inheritDoc */\n  exitFullscreen() {\n    var _a, _b;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      if (this.fullscreenController.isSupported) {\n        return this.fullscreenController.exitFullscreen();\n      }\n      return (_b = (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.exitFullscreen) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  }\n  /** @inheritDoc */\n  canSetPiP() {\n    var _a, _b, _c;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return (_c = (_b = (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.canSetPiP) === null || _b === void 0 ? void 0 : _b.call(_a)) !== null && _c !== void 0 ? _c : false;\n    });\n  }\n  /** @inheritDoc */\n  enterPiP() {\n    var _a, _b;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      if (!this.isVideoView)\n        throw Error('Cannot enter PiP mode on an audio player view.');\n      if (!(yield this.canSetPiP()))\n        throw Error('Picture-in-Picture API is not available.');\n      return (_b = (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.enterPiP) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  }\n  /** @inheritDoc */\n  exitPiP() {\n    var _a, _b;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return (_b = (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.exitPiP) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  }\n  /** @inheritDoc */\n  canSetAudioTrack() {\n    var _a;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return !isUndefined((_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.setCurrentAudioTrack);\n    });\n  }\n  /** @inheritDoc */\n  setCurrentAudioTrack(trackId) {\n    var _a, _b;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      (_b = (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.setCurrentAudioTrack) === null || _b === void 0 ? void 0 : _b.call(_a, trackId);\n    });\n  }\n  /** @inheritDoc */\n  canSetTextTrack() {\n    var _a;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return !isUndefined((_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.setCurrentTextTrack);\n    });\n  }\n  /** @inheritDoc */\n  setCurrentTextTrack(trackId) {\n    var _a, _b;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      (_b = (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.setCurrentTextTrack) === null || _b === void 0 ? void 0 : _b.call(_a, trackId);\n    });\n  }\n  /** @inheritDoc */\n  canSetTextTrackVisibility() {\n    var _a;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return !isUndefined((_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.setTextTrackVisibility);\n    });\n  }\n  /** @inheritDoc */\n  setTextTrackVisibility(isVisible) {\n    var _a, _b;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      (_b = (_a = (yield this.adapter)) === null || _a === void 0 ? void 0 : _a.setTextTrackVisibility) === null || _b === void 0 ? void 0 : _b.call(_a, isVisible);\n    });\n  }\n  /** @inheritDoc */\n  extendLanguage(language, translation) {\n    var _a;\n    return __awaiter$8(this, void 0, void 0, function* () {\n      const translations = Object.assign(Object.assign({}, this.translations), { [language]: Object.assign(Object.assign({}, ((_a = this.translations[language]) !== null && _a !== void 0 ? _a : {})), translation) });\n      this.translations = translations;\n    });\n  }\n  connectedCallback() {\n    this.onPausedChange();\n    this.onCurrentTimeChange();\n    this.onVolumeChange();\n    this.onMutedChange();\n    this.onDebugChange();\n    this.onContainerChange();\n    this.onTranslationsChange();\n    this.onLanguageChange(this.language, initialState.language);\n    this.disposal.add(onMobileChange(isMobile => {\n      this.isMobile = isMobile;\n    }));\n    this.disposal.add(onTouchInputChange(isTouch => {\n      this.isTouch = isTouch;\n    }));\n  }\n  componentWillLoad() {\n    Universe.create(this, this.getPlayerState());\n  }\n  disconnectedCallback() {\n    var _a;\n    (_a = this.fullscreenController) === null || _a === void 0 ? void 0 : _a.destroy();\n    this.disposal.empty();\n  }\n  rotateDevice() {\n    return __awaiter$8(this, void 0, void 0, function* () {\n      if (!this.isMobile || !canRotateScreen())\n        return;\n      try {\n        if (this.isFullscreenActive) {\n          yield window.screen.orientation.lock('landscape');\n        }\n        else {\n          yield window.screen.orientation.unlock();\n        }\n      }\n      catch (err) {\n        this.vmError.emit(err);\n      }\n    });\n  }\n  getPlayerState() {\n    const state = {};\n    const props = Object.keys(initialState);\n    for (let i = 0; i < props.length; i += 1) {\n      state[props[i]] = this[props[i]];\n    }\n    return state;\n  }\n  calcAspectRatio() {\n    const [width, height] = /\\d{1,2}:\\d{1,2}/.test(this.aspectRatio)\n      ? this.aspectRatio.split(':')\n      : [16, 9];\n    return (100 / Number(width)) * Number(height);\n  }\n  /**\n   * Returns the inner container.\n   */\n  getContainer() {\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return this.container;\n    });\n  }\n  /** @internal Exposed for E2E testing. */\n  callAdapter(method, value) {\n    return __awaiter$8(this, void 0, void 0, function* () {\n      return (yield this.adapter)[method](value);\n    });\n  }\n  hasCustomControls() {\n    return isComponentRegistered(this, 'vm-controls');\n  }\n  genId() {\n    var _a;\n    const id = (_a = this.host) === null || _a === void 0 ? void 0 : _a.id;\n    if (isString(id) && id.length > 0)\n      return id;\n    idCount$3 += 1;\n    return `vm-player-${idCount$3}`;\n  }\n  render() {\n    const label = `${this.isAudioView ? 'Audio Player' : 'Video Player'}` +\n      `${!isUndefined(this.mediaTitle) ? ` - ${this.mediaTitle}` : ''}`;\n    const canShowCustomUI = !IS_IOS ||\n      !this.isVideoView ||\n      (this.playsinline && !this.isFullscreenActive);\n    if (!canShowCustomUI) {\n      this.controls = true;\n    }\n    const isIdle = canShowCustomUI &&\n      this.hasCustomControls() &&\n      this.isVideoView &&\n      !this.paused &&\n      !this.isControlsActive;\n    const isBlockerVisible = !this.controls && canShowCustomUI && this.isVideoView;\n    return (h(Host, { id: this.genId(), idle: isIdle, mobile: this.isMobile, touch: this.isTouch, live: this.isLive, audio: this.isAudioView, video: this.isVideoView, pip: this.isPiPActive, fullscreen: this.isFullscreenActive }, h(\"div\", { \"aria-label\": label, \"aria-hidden\": !this.ready ? 'true' : 'false', \"aria-busy\": !this.playbackReady ? 'true' : 'false', class: {\n        player: true,\n        idle: isIdle,\n        audio: this.isAudioView,\n        video: this.isVideoView,\n        fullscreen: this.isFullscreenActive,\n      }, style: {\n        paddingBottom: this.isVideoView\n          ? `${this.calcAspectRatio()}%`\n          : undefined,\n      }, ref: el => {\n        writeTask(() => {\n          this.container = el;\n        });\n      } }, isBlockerVisible && h(\"div\", { class: \"blocker\" }), h(Universe.Provider, { state: this.getPlayerState() }, h(\"slot\", null)))));\n  }\n  get host() { return this; }\n  static get watchers() { return {\n    \"container\": [\"onContainerChange\"],\n    \"paused\": [\"onPausedChange\"],\n    \"duration\": [\"onDurationChange\"],\n    \"currentTime\": [\"onCurrentTimeChange\"],\n    \"playbackReady\": [\"onPlaybackReadyChange\"],\n    \"muted\": [\"onMutedChange\"],\n    \"playbackRate\": [\"onPlaybackRateChange\"],\n    \"playbackQuality\": [\"onPlaybackQualityChange\"],\n    \"debug\": [\"onDebugChange\"],\n    \"volume\": [\"onVolumeChange\"],\n    \"viewType\": [\"onViewTypeChange\"],\n    \"isAudioView\": [\"onViewTypeChange\"],\n    \"isVideoView\": [\"onViewTypeChange\"],\n    \"mediaType\": [\"onMediaTypeChange\"],\n    \"language\": [\"onLanguageChange\"],\n    \"translations\": [\"onTranslationsChange\"]\n  }; }\n  static get style() { return playerCss; }\n};\n\nconst posterCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-poster-z-index)}.poster{width:100%;height:100%;background:#000;opacity:0;visibility:hidden;pointer-events:none;transition:var(--vm-fade-transition)}.poster.hidden{display:none}.poster.active{opacity:1;visibility:visible}img{width:100%;height:100%;pointer-events:none}\";\n\nconst Poster = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmLoaded = createEvent(this, \"vmLoaded\", 3);\n    this.vmWillShow = createEvent(this, \"vmWillShow\", 3);\n    this.vmWillHide = createEvent(this, \"vmWillHide\", 3);\n    this.isHidden = true;\n    this.isActive = false;\n    this.hasLoaded = false;\n    /**\n     * How the poster image should be resized to fit the container (sets the `object-fit` property).\n     */\n    this.fit = 'cover';\n    /** @internal */\n    this.isVideoView = false;\n    /** @internal */\n    this.playbackStarted = false;\n    /** @internal */\n    this.currentTime = 0;\n    withComponentRegistry(this);\n    withPlayerContext(this, [\n      'mediaTitle',\n      'currentPoster',\n      'playbackStarted',\n      'currentTime',\n      'isVideoView',\n    ]);\n  }\n  onCurrentPosterChange() {\n    var _a;\n    this.hasLoaded = false;\n    (_a = this.lazyLoader) === null || _a === void 0 ? void 0 : _a.onMutation();\n  }\n  connectedCallback() {\n    this.lazyLoader = new LazyLoader(this.host, ['data-src', 'src'], el => {\n      const src = el.getAttribute('data-src');\n      el.removeAttribute('src');\n      if (!isNull(src)) {\n        el.setAttribute('src', src);\n      }\n    });\n    this.onEnabledChange();\n    this.onActiveChange();\n  }\n  disconnectedCallback() {\n    this.lazyLoader.destroy();\n  }\n  onVisibilityChange() {\n    !this.isHidden && this.isActive\n      ? this.vmWillShow.emit()\n      : this.vmWillHide.emit();\n  }\n  onEnabledChange() {\n    this.isHidden = !this.isVideoView;\n    this.onVisibilityChange();\n  }\n  onActiveChange() {\n    this.isActive = !this.playbackStarted || this.currentTime <= 0.1;\n    this.onVisibilityChange();\n  }\n  onPosterLoad() {\n    this.vmLoaded.emit();\n    this.hasLoaded = true;\n  }\n  render() {\n    return (h(\"div\", { class: {\n        poster: true,\n        hidden: this.isHidden,\n        active: this.isActive && this.hasLoaded,\n      } }, h(\"img\", { class: \"lazy\", \"data-src\": this.currentPoster, alt: !isUndefined(this.mediaTitle)\n        ? `${this.mediaTitle} Poster`\n        : 'Media Poster', style: { objectFit: this.fit }, onLoad: this.onPosterLoad.bind(this) })));\n  }\n  get host() { return this; }\n  static get watchers() { return {\n    \"currentPoster\": [\"onCurrentPosterChange\"],\n    \"isVideoView\": [\"onEnabledChange\"],\n    \"currentTime\": [\"onActiveChange\"],\n    \"playbackStarted\": [\"onActiveChange\"]\n  }; }\n  static get style() { return posterCss; }\n};\n\nconst scrimCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-scrim-z-index)}.scrim{position:absolute;width:100%;background:var(--vm-scrim-bg);display:inline-block;opacity:0;visibility:hidden;transition:var(--vm-fade-transition)}.scrim.gradient{height:258px;background:none;background-position:bottom;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAECCAYAAAA/9r2TAAABKklEQVQ4T2XI50cFABiF8dvee++67b33uM17b1MkkSSSSBJJJIkkkkQSSSKJ9Efmeb8cr86HH88JBP4thkfEkiKOFPGkSCCNRE8SKZJJkUIaqZ40UqSTIoMUmaSR5ckmRQ4pckkjz5NPigJSFJKiiDSKPSWkKCVFGWmUeypIUUmKKlJUk0aNJ0iKWlLUkUa9p4EUjaRoIkUzabR4WknRRop20ujwdJKiixTdpOghjV5PHyn6STFAGoOeIVIMk2KEFKOkMeYZJ8UEKUKkMemZIsU0KWZIMUsac54wKSKkiJLGvGeBFIukWCLFMrkCq7AG67ABm7AF27ADu7AH+3AAh3AEx3ACp3AG53ABl3AF13ADt3AH9/AAj/AEz/ACr/AG7/ABn/AF3/ADv39LujSyJPVJ0QAAAABJRU5ErkJggg==')}.scrim.gradientUp{top:unset;bottom:0}.scrim.gradientDown{transform:rotate(180deg)}.scrim.hidden{display:none}.scrim.active{opacity:1;visibility:visible}\";\n\nconst Scrim = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /** @internal */\n    this.isVideoView = false;\n    /** @internal */\n    this.isControlsActive = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, ['isVideoView', 'isControlsActive']);\n  }\n  render() {\n    return (h(\"div\", { class: {\n        scrim: true,\n        gradient: !isUndefined(this.gradient),\n        gradientUp: this.gradient === 'up',\n        gradientDown: this.gradient === 'down',\n        hidden: !this.isVideoView,\n        active: this.isControlsActive,\n      } }));\n  }\n  static get style() { return scrimCss; }\n};\n\nconst getHours = (value) => Math.trunc((value / 60 / 60) % 60);\nconst getMinutes = (value) => Math.trunc((value / 60) % 60);\nconst getSeconds = (value) => Math.trunc(value % 60);\nconst formatTime = (seconds = 0, alwaysShowHours = false) => {\n  // Format time component to add leading zero.\n  const format = (value) => `0${value}`.slice(-2);\n  const hours = getHours(seconds);\n  const mins = getMinutes(seconds);\n  const secs = getSeconds(seconds);\n  return `${alwaysShowHours || hours > 0 ? `${hours}:` : ''}${format(mins)}:${format(secs)}`;\n};\n\nconst scrubberControlCss = \":host{--vm-tooltip-spacing:var(--vm-scrubber-tooltip-spacing);flex:1;position:relative;cursor:pointer;pointer-events:auto;box-sizing:border-box;left:calc(var(--vm-slider-thumb-width) / 2);margin-right:var(--vm-slider-thumb-width);margin-bottom:var(--vm-slider-track-height)}@keyframes progress{to{background-position:var(--vm-scrubber-loading-stripe-size) 0}}.scrubber{position:relative;width:100%}vm-slider,progress{margin-left:calc(calc(var(--vm-slider-thumb-width) / 2) * -1);margin-right:calc(calc(var(--vm-slider-thumb-width) / 2) * -1);width:calc(100% + var(--vm-slider-thumb-width));height:var(--vm-slider-track-height)}vm-slider:hover,progress:hover{cursor:pointer}vm-slider{position:absolute;top:0;left:0;z-index:3}progress{-webkit-appearance:none;background:transparent;border:0;border-radius:100px;position:absolute;left:0;top:50%;padding:0;color:var(--vm-scrubber-buffered-bg);height:var(--vm-slider-track-height)}progress::-webkit-progress-bar{background:transparent}progress::-webkit-progress-value{background:currentColor;border-radius:100px;min-width:var(--vm-slider-track-height);transition:width 0.2s ease}progress::-moz-progress-bar{background:currentColor;border-radius:100px;min-width:var(--vm-slider-track-height);transition:width 0.2s ease}progress::-ms-fill{border-radius:100px;transition:width 0.2s ease}progress.loading{animation:progress 1s linear infinite;background-image:linear-gradient(\\n    -45deg,\\n    var(--vm-scrubber-loading-stripe-color) 25%,\\n    transparent 25%,\\n    transparent 50%,\\n    var(--vm-scrubber-loading-stripe-color) 50%,\\n    var(--vm-scrubber-loading-stripe-color) 75%,\\n    transparent 75%,\\n    transparent\\n  );background-repeat:repeat-x;background-size:var(--vm-scrubber-loading-stripe-size)\\n    var(--vm-scrubber-loading-stripe-size);color:transparent;background-color:transparent}\";\n\nvar __awaiter$7 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst ScrubberControl = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.keyboardDisposal = new Disposal();\n    this.timestamp = '';\n    this.endTime = 0;\n    /**\n     * Whether the timestamp in the tooltip should show the hours unit, even if the time is less than\n     * 1 hour (eg: `20:35` -> `00:20:35`).\n     */\n    this.alwaysShowHours = false;\n    /**\n     * Whether the tooltip should not be displayed.\n     */\n    this.hideTooltip = false;\n    /** @internal */\n    this.currentTime = 0;\n    /** @internal */\n    this.duration = -1;\n    /**\n     * Prevents seeking forward/backward by using the Left/Right arrow keys.\n     */\n    this.noKeyboard = false;\n    /** @internal */\n    this.buffering = false;\n    /** @internal */\n    this.buffered = 0;\n    /** @internal */\n    this.i18n = {};\n    withComponentRegistry(this);\n    withPlayerContext(this, [\n      'i18n',\n      'currentTime',\n      'duration',\n      'buffering',\n      'buffered',\n    ]);\n  }\n  onNoKeyboardChange() {\n    return __awaiter$7(this, void 0, void 0, function* () {\n      this.keyboardDisposal.empty();\n      if (this.noKeyboard)\n        return;\n      const player = yield findPlayer(this);\n      if (isUndefined(player))\n        return;\n      const onKeyDown = (event) => {\n        if (event.key !== 'ArrowLeft' && event.key !== 'ArrowRight')\n          return;\n        event.preventDefault();\n        const isLeftArrow = event.key === 'ArrowLeft';\n        const seekTo = isLeftArrow\n          ? Math.max(0, this.currentTime - 5)\n          : Math.min(this.duration, this.currentTime + 5);\n        this.dispatch('currentTime', seekTo);\n      };\n      this.keyboardDisposal.add(listen(player, 'keydown', onKeyDown));\n    });\n  }\n  onDurationChange() {\n    // Avoid -1.\n    this.endTime = Math.max(0, this.duration);\n  }\n  connectedCallback() {\n    this.dispatch = createDispatcher(this);\n    this.timestamp = formatTime(this.currentTime, this.alwaysShowHours);\n    this.onNoKeyboardChange();\n  }\n  disconnectedCallback() {\n    this.keyboardDisposal.empty();\n  }\n  setTooltipPosition(value) {\n    var _a, _b;\n    const tooltipRect = (_b = (_a = this.tooltip.shadowRoot) === null || _a === void 0 ? void 0 : _a.querySelector('.tooltip')) === null || _b === void 0 ? void 0 : _b.getBoundingClientRect();\n    const bounds = this.slider.getBoundingClientRect();\n    const thumbWidth = parseFloat(window\n      .getComputedStyle(this.slider)\n      .getPropertyValue('--vm-slider-thumb-width'));\n    const leftLimit = tooltipRect.width / 2 - thumbWidth / 2;\n    const rightLimit = bounds.width - tooltipRect.width / 2 - thumbWidth / 2;\n    const xPos = Math.max(leftLimit, Math.min(value, rightLimit));\n    this.tooltip.style = `--vm-tooltip-left: ${xPos}px`;\n  }\n  onSeek(event) {\n    this.dispatch('currentTime', event.detail);\n  }\n  onSeeking(event) {\n    if (this.duration < 0 || this.tooltip.hidden)\n      return;\n    if (event.type === 'mouseleave') {\n      this.getSliderInput().blur();\n      this.tooltip.active = false;\n      return;\n    }\n    const rect = this.host.getBoundingClientRect();\n    const percent = Math.max(0, Math.min(100, (100 / rect.width) * (event.pageX - rect.left)));\n    this.timestamp = formatTime((this.duration / 100) * percent, this.alwaysShowHours);\n    this.setTooltipPosition((percent / 100) * rect.width);\n    if (!this.tooltip.active) {\n      this.getSliderInput().focus();\n      this.tooltip.active = true;\n    }\n  }\n  getSliderInput() {\n    var _a;\n    return (_a = this.slider.shadowRoot) === null || _a === void 0 ? void 0 : _a.querySelector('input');\n  }\n  render() {\n    const sliderValueText = this.i18n.scrubberLabel\n      .replace(/{currentTime}/, formatTime(this.currentTime))\n      .replace(/{duration}/, formatTime(this.endTime));\n    return (h(\"div\", { class: \"scrubber\", onMouseEnter: this.onSeeking.bind(this), onMouseLeave: this.onSeeking.bind(this), onMouseMove: this.onSeeking.bind(this), onTouchMove: () => {\n        this.getSliderInput().focus();\n      }, onTouchEnd: () => {\n        this.getSliderInput().blur();\n      } }, h(\"vm-slider\", { step: 0.01, max: this.endTime, value: this.currentTime, label: this.i18n.scrubber, valueText: sliderValueText, onVmValueChange: this.onSeek.bind(this), ref: (el) => {\n        this.slider = el;\n      } }), h(\"progress\", { class: {\n        loading: this.buffering,\n      },\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      min: 0, max: this.endTime, value: this.buffered, \"aria-label\": this.i18n.buffered, \"aria-valuemin\": \"0\", \"aria-valuemax\": this.endTime, \"aria-valuenow\": this.buffered, \"aria-valuetext\": `${(this.endTime > 0\n        ? this.buffered / this.endTime\n        : 0).toFixed(0)}%` }, \"% buffered\"), h(\"vm-tooltip\", { hidden: this.hideTooltip, ref: (el) => {\n        this.tooltip = el;\n      } }, this.timestamp)));\n  }\n  get host() { return this; }\n  static get watchers() { return {\n    \"noKeyboard\": [\"onNoKeyboardChange\"],\n    \"duration\": [\"onDurationChange\"]\n  }; }\n  static get style() { return scrubberControlCss; }\n};\n\nconst settingsCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-menu-z-index)}.settings{position:absolute;opacity:0;pointer-events:none;overflow-x:hidden;overflow-y:auto;background-color:var(--vm-menu-bg);max-height:var(--vm-settings-max-height);border-radius:var(--vm-settings-border-radius);padding:var(--vm-settings-padding);box-shadow:var(--vm-settings-shadow);box-sizing:border-box;scrollbar-width:thin;scroll-behavior:smooth;scrollbar-color:var(--vm-settings-scroll-thumb-color)\\n    var(--vm-settings-scroll-track-color);transform:translateY(8px);transition:var(--vm-settings-transition)}.container{display:block;width:var(--vm-settings-width);height:100%;position:relative;transition:width 0.25s ease-in, height 0.25s ease-in}.settings.hydrated{visibility:hidden !important}.settings::-webkit-scrollbar{width:var(--vm-settings-scroll-width)}.settings::-webkit-scrollbar-track{background:var(--vm-settings-scroll-track-color)}.settings::-webkit-scrollbar-thumb{border-radius:var(--vm-settings-scroll-width);background-color:var(--vm-settings-scroll-thumb-color);border:2px solid var(--vm-menu-bg)}.settings.active{transform:translateY(0);opacity:1;pointer-events:auto;visibility:visible !important}.settings.mobile{position:fixed;top:auto !important;left:0 !important;right:0 !important;bottom:0 !important;width:100%;min-height:56px;max-height:50%;border-radius:0;z-index:2147483647;transform:translateY(100%)}.settings.mobile.active{transform:translateY(0)}.settings.mobile>vm-menu{height:100% !important;overflow:auto !important}\";\n\nvar __awaiter$6 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nlet idCount$2 = 0;\nconst Settings = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.disposal = new Disposal();\n    this.menuHeight = 0;\n    /**\n     * Pins the settings to the defined position inside the video player. This has no effect when\n     * the view is of type `audio` (always `bottomRight`) and on mobile devices (always bottom sheet).\n     */\n    this.pin = 'bottomRight';\n    /**\n     * Whether the settings menu is opened/closed.\n     */\n    this.active = false;\n    /** @internal */\n    this.isMobile = false;\n    /** @internal */\n    this.isAudioView = false;\n    withComponentRegistry(this);\n    withControlsCollisionDetection(this);\n    withPlayerContext(this, ['isMobile', 'isAudioView']);\n  }\n  onActiveChange() {\n    this.dispatch('isSettingsActive', this.active);\n    if (isUndefined(this.controller))\n      return;\n    this.controller.expanded = this.active;\n  }\n  connectedCallback() {\n    this.dispatch = createDispatcher(this);\n    idCount$2 += 1;\n    this.id = `vm-settings-${idCount$2}`;\n  }\n  disconnectedCallback() {\n    this.disposal.empty();\n  }\n  /**\n   * Sets the controller responsible for opening/closing this settings menu.\n   */\n  setController(controller) {\n    return __awaiter$6(this, void 0, void 0, function* () {\n      this.controller = controller;\n      this.controller.menu = this.id;\n      this.disposal.empty();\n      this.disposal.add(listen(this.controller, 'click', () => {\n        this.active = !this.active;\n      }));\n      this.disposal.add(listen(this.controller, 'keydown', (event) => {\n        if (event.key !== 'Enter')\n          return;\n        // We're looking for !active because the `click` event above will toggle it to active.\n        if (!this.active)\n          this.menu.focusMenu();\n      }));\n    });\n  }\n  getPosition() {\n    if (this.isAudioView) {\n      return {\n        right: '0',\n        bottom: 'calc(var(--vm-controls-height, 0) + 4px)',\n      };\n    }\n    // topLeft => { top: 0, left: 0 }\n    const pos = this.pin.split(/(?=[L|R])/).map(s => s.toLowerCase());\n    return {\n      [pos.includes('top') ? 'top' : 'bottom']: 'var(--vm-controls-height, 0)',\n      [pos.includes('left') ? 'left' : 'right']: '8px',\n    };\n  }\n  onOpen(event) {\n    var _a;\n    if (((_a = event.detail) === null || _a === void 0 ? void 0 : _a.identifier) !== this.id)\n      return;\n    this.active = true;\n  }\n  onClose(event) {\n    var _a;\n    if (((_a = event.detail) === null || _a === void 0 ? void 0 : _a.identifier) !== this.id)\n      return;\n    this.active = false;\n  }\n  onHeightChange(event) {\n    this.menuHeight = event.detail;\n  }\n  render() {\n    return (h(\"div\", { style: Object.assign({}, this.getPosition()), class: {\n        settings: true,\n        active: this.active,\n        mobile: this.isMobile,\n      } }, h(\"div\", { class: \"container\", style: { height: `${this.menuHeight}px` } }, h(\"vm-menu\", { identifier: this.id, active: this.active, controller: this.controller, onVmOpen: this.onOpen.bind(this), onVmClose: this.onClose.bind(this), onVmMenuHeightChange: this.onHeightChange.bind(this), ref: (el) => {\n        this.menu = el;\n      } }, h(\"slot\", null)))));\n  }\n  get host() { return this; }\n  static get watchers() { return {\n    \"active\": [\"onActiveChange\"]\n  }; }\n  static get style() { return settingsCss; }\n};\n\nconst settingsControlCss = \".settingsControl.hidden{display:none}.settingsControl{--vm-icon-transition:transform 0.3s ease}.settingsControl.active{--vm-icon-transform:rotate(90deg)}\";\n\nvar __awaiter$5 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nlet idCount$1 = 0;\nconst SettingsControl = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /**\n     * The name of the settings icon to resolve from the icon library.\n     */\n    this.icon = 'settings';\n    /**\n     * Whether the tooltip is positioned above/below the control.\n     */\n    this.tooltipPosition = 'top';\n    /**\n     * Whether the settings menu this control manages is open.\n     */\n    this.expanded = false;\n    /** @internal */\n    this.i18n = {};\n    withComponentRegistry(this);\n    withPlayerContext(this, ['i18n']);\n  }\n  onComponentsChange() {\n    if (!isUndefined(this.vmSettings)) {\n      this.vmSettings.setController(this.host);\n    }\n  }\n  connectedCallback() {\n    idCount$1 += 1;\n    this.id = `vm-settings-control-${idCount$1}`;\n    watchComponentRegistry(this, 'vm-settings', regs => {\n      [this.vmSettings] = regs;\n    });\n  }\n  /**\n   * Focuses the control.\n   */\n  focusControl() {\n    var _a;\n    return __awaiter$5(this, void 0, void 0, function* () {\n      (_a = this.control) === null || _a === void 0 ? void 0 : _a.focusControl();\n    });\n  }\n  /**\n   * Removes focus from the control.\n   */\n  blurControl() {\n    var _a;\n    return __awaiter$5(this, void 0, void 0, function* () {\n      (_a = this.control) === null || _a === void 0 ? void 0 : _a.blurControl();\n    });\n  }\n  render() {\n    const hasSettings = !isUndefined(this.menu);\n    return (h(\"div\", { class: {\n        settingsControl: true,\n        hidden: !hasSettings,\n        active: hasSettings && this.expanded,\n      } }, h(\"vm-control\", { identifier: this.id, menu: this.menu, hidden: !hasSettings, expanded: this.expanded, label: this.i18n.settings, ref: control => {\n        this.control = control;\n      } }, h(\"vm-icon\", { name: this.icon, library: this.icons }), h(\"vm-tooltip\", { hidden: this.expanded, position: this.tooltipPosition, direction: this.tooltipDirection }, this.i18n.settings))));\n  }\n  get host() { return this; }\n  static get watchers() { return {\n    \"vmSettings\": [\"onComponentsChange\"]\n  }; }\n  static get style() { return settingsControlCss; }\n};\n\nconst skeletonCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-skeleton-z-index)}@keyframes sheen{0%{background-position:200% 0}to{background-position:-200% 0}}.skeleton{width:100%;height:100%;display:flex;min-height:1rem;pointer-events:auto}.sheen.hidden{opacity:0;visibility:hidden;transition:var(--vm-fade-transition);pointer-events:none}.indicator{flex:1 1 auto;background:var(--vm-skeleton-color)}.skeleton.sheen .indicator{background:linear-gradient(\\n    270deg,\\n    var(--vm-skeleton-sheen-color),\\n    var(--vm-skeleton-color),\\n    var(--vm-skeleton-color),\\n    var(--vm-skeleton-sheen-color)\\n  );background-size:400% 100%;background-size:400% 100%;animation:sheen 8s ease-in-out infinite}\";\n\nconst Skeleton = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.hidden = false;\n    /**\n     * Determines which animation effect the skeleton will use.\n     * */\n    this.effect = 'sheen';\n    /** @internal */\n    this.ready = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, ['ready']);\n  }\n  onReadyChange() {\n    if (!this.ready) {\n      this.hidden = false;\n    }\n    else {\n      setTimeout(() => {\n        this.hidden = true;\n      }, 500);\n    }\n  }\n  render() {\n    return (h(\"div\", { class: {\n        skeleton: true,\n        hidden: this.hidden,\n        sheen: this.effect === 'sheen',\n      } }, h(\"div\", { class: \"indicator\" })));\n  }\n  static get watchers() { return {\n    \"ready\": [\"onReadyChange\"]\n  }; }\n  static get style() { return skeletonCss; }\n};\n\nconst sliderCss = \":host{width:100%}.slider{width:100%}input{width:100%;-webkit-appearance:none;background:transparent;border:0;outline:0;cursor:pointer;box-sizing:border-box;border-radius:calc(var(--vm-slider-thumb-height) * 2);user-select:none;-webkit-user-select:none;touch-action:manipulation;color:var(--vm-slider-value-color);display:block;height:var(--vm-slider-track-height);margin:0;padding:0;transition:box-shadow 0.3s ease}input::-webkit-slider-runnable-track{background:transparent;border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none;background-image:linear-gradient(\\n    to right,\\n    currentColor var(--vm-value, 0%),\\n    transparent var(--vm-value, 0%)\\n  );background-color:var(--vm-slider-track-color)}input::-webkit-slider-thumb{opacity:0;background:var(--vm-slider-thumb-bg);border:0;border-radius:100%;position:relative;transition:all 0.2s ease;width:var(--vm-slider-thumb-width);height:var(--vm-slider-thumb-height);box-shadow:var(--vm-slider-thumb-shadow);-webkit-appearance:none;margin-top:calc(\\n    0px -\\n      calc(\\n        calc(var(--vm-slider-thumb-height) - var(--vm-slider-track-height)) / 2\\n      )\\n  )}input::-moz-range-track{background:transparent;border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none;background-color:var(--vm-slider-track-color)}input::-moz-range-thumb{opacity:0;background:var(--vm-slider-thumb-bg);border:0;border-radius:100%;position:relative;transition:all 0.2s ease;width:var(--vm-slider-thumb-width);height:var(--vm-slider-thumb-height);box-shadow:var(--vm-slider-thumb-shadow)}input::-moz-range-progress{background:currentColor;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height)}input::-ms-track{border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none;color:transparent;background-color:var(--vm-slider-track-color)}input::-ms-fill-upper{background:transparent;border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none}input::-ms-fill-lower{border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none;background:currentColor}input::-ms-thumb{opacity:0;background:var(--vm-slider-thumb-bg);border:0;border-radius:100%;position:relative;transition:all 0.2s ease;width:var(--vm-slider-thumb-width);height:var(--vm-slider-thumb-height);box-shadow:var(--vm-slider-thumb-shadow);margin-top:0}input::-ms-tooltip{display:none}input:hover::-webkit-slider-runnable-track{height:var(--vm-slider-track-focused-height)}input:hover::-moz-range-track{height:var(--vm-slider-track-focused-height)}input:hover::-ms-track{height:var(--vm-slider-track-focused-height)}input:hover::-ms-fill-upper{height:var(--vm-slider-track-focused-height)}input:hover::-ms-fill-lower{height:var(--vm-slider-track-focused-height)}input:hover::-webkit-slider-thumb{opacity:1}input:hover::-moz-range-thumb{opacity:1}input:hover::-ms-thumb{opacity:1}input:focus{outline:0}input:focus::-webkit-slider-runnable-track{outline:0;height:var(--vm-slider-track-focused-height)}input:focus::-moz-range-track{outline:0;height:var(--vm-slider-track-focused-height)}input:focus::-ms-track{outline:0;height:var(--vm-slider-track-focused-height)}input::-moz-focus-outer{border:0}\";\n\nconst Slider = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmValueChange = createEvent(this, \"vmValueChange\", 7);\n    this.vmFocus = createEvent(this, \"vmFocus\", 7);\n    this.vmBlur = createEvent(this, \"vmBlur\", 7);\n    /**\n     * A number that specifies the granularity that the value must adhere to.\n     */\n    this.step = 1;\n    /**\n     * The lowest value in the range of permitted values.\n     */\n    this.min = 0;\n    /**\n     * The greatest permitted value.\n     */\n    this.max = 10;\n    /**\n     * The current value.\n     */\n    this.value = 5;\n    withComponentRegistry(this);\n  }\n  getPercentage() {\n    return `${(this.value / this.max) * 100}%`;\n  }\n  onValueChange(event) {\n    var _a;\n    const value = parseFloat((_a = event.target) === null || _a === void 0 ? void 0 : _a.value);\n    this.vmValueChange.emit(value);\n  }\n  calcTouchedValue(event) {\n    const input = event.target;\n    const touch = event.changedTouches[0];\n    const min = parseFloat(input.getAttribute('min'));\n    const max = parseFloat(input.getAttribute('max'));\n    const step = parseFloat(input.getAttribute('step'));\n    const delta = max - min;\n    // Calculate percentage.\n    let percent;\n    const clientRect = input.getBoundingClientRect();\n    const sliderThumbWidth = parseFloat(window\n      .getComputedStyle(this.host)\n      .getPropertyValue('--vm-slider-thumb-width'));\n    const thumbWidth = ((100 / clientRect.width) * (sliderThumbWidth / 2)) / 100;\n    percent = (100 / clientRect.width) * (touch.clientX - clientRect.left);\n    // Don't allow outside bounds.\n    percent = Math.max(0, Math.min(percent, 100));\n    // Factor in the thumb offset.\n    if (percent < 50) {\n      percent -= (100 - percent * 2) * thumbWidth;\n    }\n    else if (percent > 50) {\n      percent += (percent - 50) * 2 * thumbWidth;\n    }\n    const position = delta * (percent / 100);\n    if (step >= 1) {\n      return min + Math.round(position / step) * step;\n    }\n    /**\n     * This part differs from original implementation to save space. Only supports 2 decimal\n     * places (0.01) as the step.\n     */\n    return min + parseFloat(position.toFixed(2));\n  }\n  /**\n   * Basically input[range=\"type\"] on touch devices sucks (particularly iOS), so this helps make it\n   * better.\n   *\n   * @see https://github.com/sampotts/rangetouch\n   */\n  onTouch(event) {\n    const input = event.target;\n    if (input.disabled)\n      return;\n    event.preventDefault();\n    this.value = this.calcTouchedValue(event);\n    this.vmValueChange.emit(this.value);\n    input.dispatchEvent(new window.Event(event.type === 'touchend' ? 'change' : 'input', {\n      bubbles: true,\n    }));\n  }\n  render() {\n    var _a;\n    return (h(\"div\", { class: \"slider\", style: {\n        '--vm-value': this.getPercentage(),\n      } }, h(\"input\", { type: \"range\", step: this.step, min: this.min, max: this.max, value: this.value, autocomplete: \"off\", \"aria-label\": this.label, \"aria-valuemin\": this.min, \"aria-valuemax\": this.max, \"aria-valuenow\": this.value, \"aria-valuetext\": (_a = this.valueText) !== null && _a !== void 0 ? _a : this.getPercentage(), \"aria-orientation\": \"horizontal\", onInput: this.onValueChange.bind(this), onFocus: () => {\n        this.vmFocus.emit();\n      }, onBlur: () => {\n        this.vmBlur.emit();\n      }, onTouchStart: this.onTouch.bind(this), onTouchMove: this.onTouch.bind(this), onTouchEnd: this.onTouch.bind(this) })));\n  }\n  get host() { return this; }\n  static get style() { return sliderCss; }\n};\n\nconst spinnerCss = \":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-spinner-z-index)}.spinner{width:100%;height:100%;display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;pointer-events:none;transition:var(--vm-fade-transition)}.spinner.hidden{display:none}.spinner.active{opacity:1;visibility:visible}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.spin{background:transparent;margin:60px auto;font-size:10px;position:relative;text-indent:-9999em;pointer-events:none;border-top:var(--vm-spinner-thickness) solid var(--vm-spinner-fill-color);border-left:var(--vm-spinner-thickness) solid var(--vm-spinner-fill-color);border-right:var(--vm-spinner-thickness) solid var(--vm-spinner-track-color);border-bottom:var(--vm-spinner-thickness) solid var(--vm-spinner-track-color);transform:translateZ(0)}.spin.active{animation:spin var(--vm-spinner-spin-duration) infinite\\n    var(--vm-spinner-spin-timing-func)}.spin,.spin::after{border-radius:50%;width:var(--vm-spinner-width);height:var(--vm-spinner-height)}\";\n\nconst Spinner = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmWillShow = createEvent(this, \"vmWillShow\", 3);\n    this.vmWillHide = createEvent(this, \"vmWillHide\", 3);\n    this.blacklist = [Provider.YouTube];\n    this.isHidden = true;\n    this.isActive = false;\n    /** @internal */\n    this.isVideoView = false;\n    /**\n     * Whether the spinner should be active when the player is booting or media is loading.\n     */\n    this.showWhenMediaLoading = false;\n    /** @internal */\n    this.playbackReady = false;\n    /** @internal */\n    this.buffering = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, [\n      'isVideoView',\n      'buffering',\n      'playbackReady',\n      'currentProvider',\n    ]);\n  }\n  onVideoViewChange() {\n    this.isHidden = !this.isVideoView;\n    this.onVisiblityChange();\n  }\n  onActiveChange() {\n    this.isActive =\n      this.buffering || (this.showWhenMediaLoading && !this.playbackReady);\n    this.onVisiblityChange();\n  }\n  onVisiblityChange() {\n    !this.isHidden && this.isActive\n      ? this.vmWillShow.emit()\n      : this.vmWillHide.emit();\n  }\n  render() {\n    return (h(\"div\", { class: {\n        spinner: true,\n        hidden: this.isHidden || this.blacklist.includes(this.currentProvider),\n        active: this.isActive,\n      } }, h(\"div\", { class: {\n        spin: true,\n        active: this.isActive,\n      } }, \"Loading...\")));\n  }\n  static get watchers() { return {\n    \"isVideoView\": [\"onVideoViewChange\"],\n    \"buffering\": [\"onActiveChange\"],\n    \"playbackReady\": [\"onActiveChange\"]\n  }; }\n  static get style() { return spinnerCss; }\n};\n\nvar __awaiter$4 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nlet idCount = 0;\nconst Submenu = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmOpenSubmenu = createEvent(this, \"vmOpenSubmenu\", 7);\n    this.vmCloseSubmenu = createEvent(this, \"vmCloseSubmenu\", 7);\n    /**\n     * The direction the submenu should slide in from.\n     */\n    this.slideInDirection = 'right';\n    /**\n     * Whether the submenu is open/closed.\n     */\n    this.active = false;\n    withComponentRegistry(this);\n  }\n  connectedCallback() {\n    this.genId();\n  }\n  /**\n   * Returns the controller (`vm-menu-item`) for this submenu.\n   */\n  getController() {\n    return __awaiter$4(this, void 0, void 0, function* () {\n      return this.controller;\n    });\n  }\n  /**\n   * Returns the menu (`vm-menu`) for this submenu.\n   */\n  getMenu() {\n    return __awaiter$4(this, void 0, void 0, function* () {\n      return this.menu;\n    });\n  }\n  /**\n   * Returns the height of the submenu controller.\n   */\n  getControllerHeight() {\n    var _a, _b;\n    return __awaiter$4(this, void 0, void 0, function* () {\n      return (_b = (_a = this.controller) === null || _a === void 0 ? void 0 : _a.getHeight()) !== null && _b !== void 0 ? _b : 0;\n    });\n  }\n  getControllerHeightSync() {\n    var _a;\n    const el = (_a = this.controller) === null || _a === void 0 ? void 0 : _a.shadowRoot.querySelector(\"[role='menuitem']\");\n    return el ? parseFloat(window.getComputedStyle(el).height) : 0;\n  }\n  onMenuOpen() {\n    this.active = true;\n    this.vmOpenSubmenu.emit(this.host);\n  }\n  onMenuClose() {\n    this.active = false;\n    this.vmCloseSubmenu.emit(this.host);\n  }\n  genId() {\n    idCount += 1;\n    this.id = `vm-submenu-${idCount}`;\n  }\n  getControllerId() {\n    return `${this.id}-controller`;\n  }\n  render() {\n    return (h(\"div\", null, h(\"vm-menu-item\", { identifier: this.getControllerId(), menu: this.menu, label: this.label, hint: this.hint, expanded: this.active, ref: el => {\n        writeTask(() => {\n          this.controller = el;\n        });\n      } }), h(\"vm-menu\", { identifier: this.id, controller: this.controller, active: this.active, slideInDirection: this.slideInDirection, onVmOpen: this.onMenuOpen.bind(this), onVmClose: this.onMenuClose.bind(this), ref: el => {\n        writeTask(() => {\n          this.menu = el;\n        });\n      }, style: { top: `${this.getControllerHeightSync() + 1}px` } }, h(\"slot\", null))));\n  }\n  get host() { return this; }\n};\n\nconst timeCss = \".time{display:flex;align-items:center;color:var(--vm-time-color);font-size:var(--vm-time-font-size);font-weight:var(--vm-time-font-weight)}\";\n\nconst Time = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /**\n     * The length of time in seconds.\n     */\n    this.seconds = 0;\n    /**\n     * Whether the time should always show the hours unit, even if the time is less than\n     * 1 hour (eg: `20:35` -> `00:20:35`).\n     */\n    this.alwaysShowHours = false;\n    withComponentRegistry(this);\n  }\n  render() {\n    return (h(\"div\", { class: \"time\", \"aria-label\": this.label }, formatTime(Math.max(0, this.seconds), this.alwaysShowHours)));\n  }\n  static get style() { return timeCss; }\n};\n\nconst timeProgressCss = \".timeProgress{display:flex;width:100%;height:100%;align-items:center;color:var(--vm-time-color)}.separator{margin:0 4px}\";\n\nconst TimeProgress = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /**\n     * The string used to separate the current time and end time.\n     */\n    this.separator = '/';\n    /**\n     * Whether the times should always show the hours unit, even if the time is less than\n     * 1 hour (eg: `20:35` -> `00:20:35`).\n     */\n    this.alwaysShowHours = false;\n    withComponentRegistry(this);\n  }\n  render() {\n    return (h(\"div\", { class: \"timeProgress\" }, h(\"vm-current-time\", { alwaysShowHours: this.alwaysShowHours }), h(\"span\", { class: \"separator\" }, this.separator), h(\"vm-end-time\", { alwaysShowHours: this.alwaysShowHours })));\n  }\n  static get style() { return timeProgressCss; }\n};\n\nconst tooltipCss = \":host{display:contents;z-index:var(--vm-tooltip-z-index)}.tooltip{left:var(--vm-tooltip-left, 50%);transform:translateX(-50%);line-height:1.3;pointer-events:none;position:absolute;opacity:0;white-space:nowrap;visibility:hidden;background:var(--vm-tooltip-bg);border-radius:var(--vm-tooltip-border-radius);box-sizing:border-box;box-shadow:var(--vm-tooltip-box-shadow);color:var(--vm-tooltip-color);font-size:var(--vm-tooltip-font-size);padding:var(--vm-tooltip-padding);transition:opacity var(--vm-tooltip-fade-duration)\\n    var(--vm-tooltip-fade-timing-func)}.tooltip[aria-hidden='false']{opacity:1;visibility:visible}.tooltip.hidden{display:none}.tooltip.onTop{bottom:100%;margin-bottom:var(--vm-tooltip-spacing)}.tooltip.onBottom{top:100%;margin-top:var(--vm-tooltip-spacing)}.tooltip.growLeft{left:auto;right:0;transform:none}.tooltip.growRight{left:0;transform:none}\";\n\nlet tooltipIdCount = 0;\nconst Tooltip = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    // Avoid tooltips flashing when player initializing.\n    this.hasLoaded = false;\n    /**\n     * Whether the tooltip is displayed or not.\n     */\n    this.hidden = false;\n    /**\n     * Whether the tooltip is visible or not.\n     */\n    this.active = false;\n    /**\n     * Determines if the tooltip appears on top/bottom of it's parent.\n     */\n    this.position = 'top';\n    /** @internal */\n    this.isTouch = false;\n    /** @internal */\n    this.isMobile = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, ['isTouch', 'isMobile']);\n  }\n  componentDidLoad() {\n    this.hasLoaded = true;\n  }\n  getId() {\n    // eslint-disable-next-line prefer-destructuring\n    const id = this.host.id;\n    if (isString(id) && id.length > 0)\n      return id;\n    tooltipIdCount += 1;\n    return `vm-tooltip-${tooltipIdCount}`;\n  }\n  render() {\n    return (h(\"div\", { id: this.getId(), role: \"tooltip\", \"aria-hidden\": !this.active || this.isTouch || this.isMobile ? 'true' : 'false', class: {\n        tooltip: true,\n        hidden: !this.hasLoaded || this.hidden,\n        onTop: this.position === 'top',\n        onBottom: this.position === 'bottom',\n        growLeft: this.direction === 'left',\n        growRight: this.direction === 'right',\n      } }, h(\"slot\", null)));\n  }\n  get host() { return this; }\n  static get style() { return tooltipCss; }\n};\n\nconst uiCss = \":host{z-index:var(--vm-ui-z-index)}.ui{width:100%;pointer-events:none}.ui.hidden{display:none}.ui.video{position:absolute;top:0;left:0;height:100%}\";\n\nconst UI = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    /** @internal */\n    this.isVideoView = false;\n    /** @internal */\n    this.playsinline = false;\n    /** @internal */\n    this.isFullscreenActive = false;\n    withComponentRegistry(this);\n    withPlayerContext(this, [\n      'isVideoView',\n      'playsinline',\n      'isFullscreenActive',\n    ]);\n  }\n  render() {\n    const canShowCustomUI = !IS_IOS ||\n      !this.isVideoView ||\n      (this.playsinline && !this.isFullscreenActive);\n    return (h(\"div\", { class: {\n        ui: true,\n        hidden: !canShowCustomUI,\n        video: this.isVideoView,\n      } }, canShowCustomUI && h(\"slot\", null)));\n  }\n  static get style() { return uiCss; }\n};\n\nvar __awaiter$3 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst Video = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    /**\n     * @internal Whether an external SDK will attach itself to the media player and control it.\n     */\n    this.willAttach = false;\n    /**\n     * @internal Whether an external SDK will manage the text tracks.\n     */\n    this.hasCustomTextManager = false;\n    /** @inheritdoc */\n    this.preload = 'metadata';\n    withComponentRegistry(this);\n    withProviderConnect(this);\n  }\n  onProviderConnect(event) {\n    if (this.willAttach)\n      event.stopImmediatePropagation();\n  }\n  onProviderDisconnect(event) {\n    if (this.willAttach)\n      event.stopImmediatePropagation();\n  }\n  /** @internal */\n  getAdapter() {\n    var _a;\n    return __awaiter$3(this, void 0, void 0, function* () {\n      return (_a = this.fileProvider) === null || _a === void 0 ? void 0 : _a.getAdapter();\n    });\n  }\n  render() {\n    return (h(\"vm-file\", { noConnect: true, willAttach: this.willAttach, crossOrigin: this.crossOrigin, poster: this.poster, preload: this.preload, controlsList: this.controlsList, autoPiP: this.autoPiP, disablePiP: this.disablePiP, disableRemotePlayback: this.disableRemotePlayback, hasCustomTextManager: this.hasCustomTextManager, mediaTitle: this.mediaTitle, viewType: ViewType.Video, ref: (el) => {\n        this.fileProvider = el;\n      } }, h(\"slot\", null)));\n  }\n};\n\n/**\n * @see https://developer.vimeo.com/player/sdk/reference#events-for-playback-controls\n */\nvar VimeoEvent;\n(function (VimeoEvent) {\n  VimeoEvent[\"Play\"] = \"play\";\n  VimeoEvent[\"Pause\"] = \"pause\";\n  VimeoEvent[\"Seeking\"] = \"seeking\";\n  VimeoEvent[\"Seeked\"] = \"seeked\";\n  VimeoEvent[\"TimeUpdate\"] = \"timeupdate\";\n  VimeoEvent[\"VolumeChange\"] = \"volumechange\";\n  VimeoEvent[\"DurationChange\"] = \"durationchange\";\n  VimeoEvent[\"FullscreenChange\"] = \"fullscreenchange\";\n  VimeoEvent[\"CueChange\"] = \"cuechange\";\n  VimeoEvent[\"Progress\"] = \"progress\";\n  VimeoEvent[\"Error\"] = \"error\";\n  VimeoEvent[\"PlaybackRateChange\"] = \"playbackratechange\";\n  VimeoEvent[\"Loaded\"] = \"loaded\";\n  VimeoEvent[\"BufferStart\"] = \"bufferstart\";\n  VimeoEvent[\"BufferEnd\"] = \"bufferend\";\n  VimeoEvent[\"TextTrackChange\"] = \"texttrackchange\";\n  VimeoEvent[\"Waiting\"] = \"waiting\";\n  VimeoEvent[\"Ended\"] = \"ended\";\n})(VimeoEvent || (VimeoEvent = {}));\n\nconst vimeoCss = \":host{z-index:var(--vm-media-z-index)}vm-embed{position:absolute;top:0;left:0;width:100%;height:100%}vm-embed.hideControls{display:block;width:100%;height:auto;position:relative}\";\n\nvar __awaiter$2 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst videoInfoCache = new Map();\nconst Vimeo = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmLoadStart = createEvent(this, \"vmLoadStart\", 7);\n    this.vmError = createEvent(this, \"vmError\", 7);\n    this.defaultInternalState = {};\n    this.volume = 50;\n    this.hasLoaded = false;\n    this.internalState = {\n      paused: true,\n      playing: false,\n      seeking: false,\n      currentTime: 0,\n      buffered: 0,\n      playbackStarted: false,\n      playRequest: false,\n    };\n    this.embedSrc = '';\n    this.mediaTitle = '';\n    /**\n     * Whether to display the video owner's name.\n     */\n    this.byline = true;\n    /**\n     * Whether to display the video owner's portrait.\n     */\n    this.portrait = true;\n    /**\n     * Turns off automatically determining the aspect ratio of the current video.\n     */\n    this.noAutoAspectRatio = false;\n    /**\n     * Whether cookies should be enabled on the embed.\n     */\n    this.cookies = true;\n    /** @internal */\n    this.language = 'en';\n    /** @internal */\n    this.aspectRatio = '16:9';\n    /** @internal */\n    this.autoplay = false;\n    /** @internal */\n    this.controls = false;\n    /** @internal */\n    this.loop = false;\n    /** @internal */\n    this.muted = false;\n    /** @internal */\n    this.playsinline = false;\n    withComponentRegistry(this);\n    withProviderConnect(this);\n    withProviderContext(this);\n  }\n  onVideoIdChange() {\n    this.cancelTimeUpdates();\n    if (!this.videoId) {\n      this.embedSrc = '';\n      return;\n    }\n    this.embedSrc = `${this.getOrigin()}/video/${this.videoId}`;\n    this.pendingDurationCall = deferredPromise();\n    this.pendingMediaTitleCall = deferredPromise();\n    this.fetchVideoInfo = this.getVideoInfo();\n  }\n  onCustomPosterChange() {\n    this.dispatch('currentPoster', this.poster);\n  }\n  connectedCallback() {\n    this.dispatch = createProviderDispatcher(this);\n    this.dispatch('viewType', ViewType.Video);\n    this.onVideoIdChange();\n    this.defaultInternalState = Object.assign({}, this.internalState);\n  }\n  componentDidLoad() {\n    this.initialMuted = this.muted;\n  }\n  disconnectedCallback() {\n    this.cancelTimeUpdates();\n    this.pendingPlayRequest = undefined;\n  }\n  getOrigin() {\n    return 'https://player.vimeo.com';\n  }\n  getPreconnections() {\n    return [\n      this.getOrigin(),\n      'https://i.vimeocdn.com',\n      'https://f.vimeocdn.com',\n      'https://fresnel.vimeocdn.com',\n    ];\n  }\n  remoteControl(command, arg) {\n    return this.embed.postMessage({\n      method: command,\n      value: arg,\n    });\n  }\n  buildParams() {\n    return {\n      byline: this.byline,\n      color: this.color,\n      portrait: this.portrait,\n      autopause: false,\n      transparent: false,\n      autoplay: this.autoplay,\n      muted: this.initialMuted,\n      playsinline: this.playsinline,\n      dnt: !this.cookies,\n    };\n  }\n  getVideoInfo() {\n    return __awaiter$2(this, void 0, void 0, function* () {\n      if (videoInfoCache.has(this.videoId))\n        return videoInfoCache.get(this.videoId);\n      return window\n        .fetch(`https://vimeo.com/api/oembed.json?url=${this.embedSrc}`)\n        .then(response => response.json())\n        .then(data => {\n        var _a;\n        const thumnailRegex = /vimeocdn.com\\/video\\/(.*)?_/;\n        const thumbnailId = (_a = data === null || data === void 0 ? void 0 : data.thumbnail_url) === null || _a === void 0 ? void 0 : _a.match(thumnailRegex)[1];\n        const poster = `https://i.vimeocdn.com/video/${thumbnailId}_1920x1080.jpg`;\n        const info = { poster, width: data === null || data === void 0 ? void 0 : data.width, height: data === null || data === void 0 ? void 0 : data.height };\n        videoInfoCache.set(this.videoId, info);\n        return info;\n      });\n    });\n  }\n  onTimeChange(time) {\n    if (this.internalState.currentTime === time)\n      return;\n    this.dispatch('currentTime', time);\n    // This is how we detect `seeking` early.\n    if (Math.abs(this.internalState.currentTime - time) > 1.5) {\n      this.internalState.seeking = true;\n      this.dispatch('seeking', true);\n      if (this.internalState.playing && this.internalState.buffered < time) {\n        this.dispatch('buffering', true);\n      }\n      // Player doesn't resume playback once seeked.\n      window.clearTimeout(this.pendingPlayRequest);\n      if (!this.internalState.paused) {\n        this.internalState.playRequest = true;\n      }\n      this.remoteControl(this.internalState.playbackStarted\n        ? \"pause\" /* Pause */\n        : \"play\" /* Play */);\n    }\n    this.internalState.currentTime = time;\n  }\n  cancelTimeUpdates() {\n    if (isNumber(this.timeRAF))\n      window.cancelAnimationFrame(this.timeRAF);\n  }\n  requestTimeUpdates() {\n    this.remoteControl(\"getCurrentTime\" /* GetCurrentTime */);\n    this.timeRAF = window.requestAnimationFrame(() => {\n      this.requestTimeUpdates();\n    });\n  }\n  onSeeked() {\n    if (!this.internalState.seeking)\n      return;\n    this.dispatch('seeking', false);\n    this.internalState.seeking = false;\n    if (this.internalState.playRequest) {\n      window.setTimeout(() => {\n        this.remoteControl(\"play\" /* Play */);\n      }, 150);\n    }\n  }\n  onVimeoMethod(method, arg) {\n    var _a, _b;\n    switch (method) {\n      case \"getCurrentTime\" /* GetCurrentTime */:\n        if (!this.internalState.seeking)\n          this.onTimeChange(arg);\n        break;\n      case \"getDuration\" /* GetDuration */:\n        (_a = this.pendingDurationCall) === null || _a === void 0 ? void 0 : _a.resolve(arg);\n        break;\n      case \"getVideoTitle\" /* GetVideoTitle */:\n        (_b = this.pendingMediaTitleCall) === null || _b === void 0 ? void 0 : _b.resolve(arg);\n        break;\n    }\n  }\n  onLoaded() {\n    var _a, _b;\n    if (this.hasLoaded)\n      return;\n    this.pendingPlayRequest = undefined;\n    this.internalState = Object.assign({}, this.defaultInternalState);\n    this.dispatch('currentSrc', this.embedSrc);\n    this.dispatch('mediaType', MediaType.Video);\n    this.remoteControl(\"getDuration\" /* GetDuration */);\n    this.remoteControl(\"getVideoTitle\" /* GetVideoTitle */);\n    Promise.all([\n      this.fetchVideoInfo,\n      (_a = this.pendingDurationCall) === null || _a === void 0 ? void 0 : _a.promise,\n      (_b = this.pendingMediaTitleCall) === null || _b === void 0 ? void 0 : _b.promise,\n    ]).then(([info, duration, mediaTitle]) => {\n      var _a, _b, _c;\n      this.requestTimeUpdates();\n      this.dispatch('aspectRatio', `${(_a = info === null || info === void 0 ? void 0 : info.width) !== null && _a !== void 0 ? _a : 16}:${(_b = info === null || info === void 0 ? void 0 : info.height) !== null && _b !== void 0 ? _b : 9}`);\n      this.dispatch('currentPoster', (_c = this.poster) !== null && _c !== void 0 ? _c : info === null || info === void 0 ? void 0 : info.poster);\n      this.dispatch('duration', duration !== null && duration !== void 0 ? duration : -1);\n      this.dispatch('mediaTitle', mediaTitle);\n      this.dispatch('playbackReady', true);\n    });\n    this.hasLoaded = true;\n  }\n  onVimeoEvent(event, payload) {\n    switch (event) {\n      case \"ready\" /* Ready */:\n        Object.values(VimeoEvent).forEach(e => {\n          this.remoteControl(\"addEventListener\" /* AddEventListener */, e);\n        });\n        break;\n      case \"loaded\" /* Loaded */:\n        this.onLoaded();\n        break;\n      case \"play\" /* Play */:\n        // Incase of autoplay which might skip `Loaded` event.\n        this.onLoaded();\n        this.internalState.paused = false;\n        this.dispatch('paused', false);\n        break;\n      case \"playProgress\" /* PlayProgress */:\n        if (!this.internalState.playing) {\n          this.dispatch('playing', true);\n          this.internalState.playing = true;\n          this.internalState.playbackStarted = true;\n          this.pendingPlayRequest = window.setTimeout(() => {\n            this.internalState.playRequest = false;\n            this.pendingPlayRequest = undefined;\n          }, 1000);\n        }\n        this.dispatch('buffering', false);\n        this.onSeeked();\n        break;\n      case \"pause\" /* Pause */:\n        this.internalState.paused = true;\n        this.internalState.playing = false;\n        this.dispatch('paused', true);\n        this.dispatch('buffering', false);\n        break;\n      case \"loadProgress\" /* LoadProgress */:\n        this.internalState.buffered = payload.seconds;\n        this.dispatch('buffered', payload.seconds);\n        break;\n      case \"bufferstart\" /* BufferStart */:\n        this.dispatch('buffering', true);\n        // Attempt to detect `play` events early.\n        if (this.internalState.paused) {\n          this.internalState.paused = false;\n          this.dispatch('paused', false);\n          this.dispatch('playbackStarted', true);\n        }\n        break;\n      case \"bufferend\" /* BufferEnd */:\n        this.dispatch('buffering', false);\n        if (this.internalState.paused)\n          this.onSeeked();\n        break;\n      case \"volumechange\" /* VolumeChange */:\n        if (payload.volume > 0) {\n          const newVolume = Math.floor(payload.volume * 100);\n          this.dispatch('muted', false);\n          if (this.volume !== newVolume) {\n            this.volume = newVolume;\n            this.dispatch('volume', this.volume);\n          }\n        }\n        else {\n          this.dispatch('muted', true);\n        }\n        break;\n      case \"durationchange\" /* DurationChange */:\n        this.dispatch('duration', payload.duration);\n        break;\n      case \"playbackratechange\" /* PlaybackRateChange */:\n        this.dispatch('playbackRate', payload.playbackRate);\n        break;\n      case \"fullscreenchange\" /* FullscreenChange */:\n        this.dispatch('isFullscreenActive', payload.fullscreen);\n        break;\n      case \"finish\" /* Finish */:\n        if (this.loop) {\n          this.remoteControl(\"setCurrentTime\" /* SetCurrentTime */, 0);\n          setTimeout(() => {\n            this.remoteControl(\"play\" /* Play */);\n          }, 200);\n        }\n        else {\n          this.dispatch('playbackEnded', true);\n        }\n        break;\n      case \"error\" /* Error */:\n        this.vmError.emit(payload);\n        break;\n    }\n  }\n  onEmbedSrcChange() {\n    this.hasLoaded = false;\n    this.vmLoadStart.emit();\n    this.dispatch('viewType', ViewType.Video);\n  }\n  onEmbedMessage(event) {\n    const message = event.detail;\n    if (!isUndefined(message.event))\n      this.onVimeoEvent(message.event, message.data);\n    if (!isUndefined(message.method))\n      this.onVimeoMethod(message.method, message.value);\n  }\n  adjustPosition() {\n    if (this.controls) {\n      return {};\n    }\n    const [aw, ah] = this.aspectRatio.split(':').map(r => parseInt(r, 10));\n    const height = 240;\n    const padding = (100 / aw) * ah;\n    const offset = (height - padding) / (height / 50);\n    return {\n      paddingBottom: `${height}%`,\n      transform: `translateY(-${offset + 0.02}%)`,\n    };\n  }\n  /** @internal */\n  getAdapter() {\n    return __awaiter$2(this, void 0, void 0, function* () {\n      const canPlayRegex = /vimeo(?:\\.com|)\\/([0-9]{9,})/;\n      const fileRegex = /vimeo\\.com\\/external\\/[0-9]+\\..+/;\n      return {\n        getInternalPlayer: () => __awaiter$2(this, void 0, void 0, function* () { return this.embed; }),\n        play: () => __awaiter$2(this, void 0, void 0, function* () {\n          this.remoteControl(\"play\" /* Play */);\n        }),\n        pause: () => __awaiter$2(this, void 0, void 0, function* () {\n          this.remoteControl(\"pause\" /* Pause */);\n        }),\n        canPlay: (type) => __awaiter$2(this, void 0, void 0, function* () { return isString(type) && !fileRegex.test(type) && canPlayRegex.test(type); }),\n        setCurrentTime: (time) => __awaiter$2(this, void 0, void 0, function* () {\n          if (time !== this.internalState.currentTime) {\n            this.remoteControl(\"setCurrentTime\" /* SetCurrentTime */, time);\n          }\n        }),\n        setMuted: (muted) => __awaiter$2(this, void 0, void 0, function* () {\n          if (!muted)\n            this.volume = this.volume > 0 ? this.volume : 30;\n          this.remoteControl(\"setVolume\" /* SetVolume */, muted ? 0 : this.volume / 100);\n        }),\n        setVolume: (volume) => __awaiter$2(this, void 0, void 0, function* () {\n          if (!this.muted) {\n            this.remoteControl(\"setVolume\" /* SetVolume */, volume / 100);\n          }\n          else {\n            // Confirm volume was set.\n            this.dispatch('volume', volume);\n          }\n        }),\n        // @TODO how to check if Vimeo pro?\n        canSetPlaybackRate: () => __awaiter$2(this, void 0, void 0, function* () { return false; }),\n        setPlaybackRate: (rate) => __awaiter$2(this, void 0, void 0, function* () {\n          this.remoteControl(\"setPlaybackRate\" /* SetPlaybackRate */, rate);\n        }),\n      };\n    });\n  }\n  render() {\n    return (h(\"vm-embed\", { class: { hideControls: !this.controls }, style: this.adjustPosition(), embedSrc: this.embedSrc, mediaTitle: this.mediaTitle, origin: this.getOrigin(), params: this.buildParams(), decoder: decodeJSON, preconnections: this.getPreconnections(), onVmEmbedMessage: this.onEmbedMessage.bind(this), onVmEmbedSrcChange: this.onEmbedSrcChange.bind(this), ref: (el) => {\n        this.embed = el;\n      } }));\n  }\n  static get watchers() { return {\n    \"videoId\": [\"onVideoIdChange\"],\n    \"poster\": [\"onCustomPosterChange\"]\n  }; }\n  static get style() { return vimeoCss; }\n};\n\nconst volumeControlCss = \".volumeControl{align-items:center;display:flex;position:relative;pointer-events:auto;box-sizing:border-box}vm-slider{width:75px;height:100%;margin:0;max-width:0;position:relative;z-index:3;transition:margin 0.2s cubic-bezier(0.4, 0, 1, 1),\\n    max-width 0.2s cubic-bezier(0.4, 0, 1, 1);margin-left:calc(var(--vm-control-spacing) / 2) !important;visibility:hidden}vm-slider:hover{cursor:pointer}vm-slider.hidden{display:none}vm-slider.active{max-width:75px;visibility:visible;margin:0 calc(var(--vm-control-spacing) / 2)}\";\n\nvar __awaiter$1 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst VolumeControl = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.keyboardDisposal = new Disposal();\n    this.prevMuted = false;\n    this.currentVolume = 50;\n    this.isSliderActive = false;\n    /**\n     * The name of the low volume icon to resolve from the icon library.\n     */\n    this.lowVolumeIcon = 'volume-low';\n    /**\n     * The name of the high volume icon to resolve from the icon library.\n     */\n    this.highVolumeIcon = 'volume-high';\n    /**\n     * The name of the muted volume icon to resolve from the icon library.\n     */\n    this.mutedIcon = 'volume-mute';\n    /**\n     * Whether the tooltip is positioned above/below the control.\n     */\n    this.tooltipPosition = 'top';\n    /**\n     * Whether the tooltip should be hidden.\n     */\n    this.hideTooltip = false;\n    /**\n     * A pipe (`/`) separated string of JS keyboard keys, that when caught in a `keydown` event, will\n     * toggle the muted state of the player.\n     */\n    this.muteKeys = 'm';\n    /**\n     * Prevents the volume being changed using the Up/Down arrow keys.\n     */\n    this.noKeyboard = false;\n    /** @internal */\n    this.muted = false;\n    /** @internal */\n    this.volume = 50;\n    /** @internal */\n    this.isMobile = false;\n    /** @internal */\n    this.i18n = {};\n    withComponentRegistry(this);\n    withPlayerContext(this, ['volume', 'muted', 'isMobile', 'i18n']);\n  }\n  onNoKeyboardChange() {\n    return __awaiter$1(this, void 0, void 0, function* () {\n      this.keyboardDisposal.empty();\n      if (this.noKeyboard)\n        return;\n      const player = yield findPlayer(this);\n      if (isUndefined(player))\n        return;\n      this.keyboardDisposal.add(listen(player, 'keydown', (event) => {\n        if (event.key !== 'ArrowUp' && event.key !== 'ArrowDown')\n          return;\n        const isUpArrow = event.key === 'ArrowUp';\n        const newVolume = isUpArrow\n          ? Math.min(100, this.volume + 5)\n          : Math.max(0, this.volume - 5);\n        this.dispatch('volume', parseInt(`${newVolume}`, 10));\n      }));\n    });\n  }\n  onPlayerVolumeChange() {\n    this.currentVolume = this.muted ? 0 : this.volume;\n    if (!this.muted && this.prevMuted && this.volume === 0) {\n      this.dispatch('volume', 30);\n    }\n    this.prevMuted = this.muted;\n  }\n  connectedCallback() {\n    this.prevMuted = this.muted;\n    this.dispatch = createDispatcher(this);\n    this.onNoKeyboardChange();\n  }\n  disconnectedCallback() {\n    this.keyboardDisposal.empty();\n  }\n  onShowSlider() {\n    clearTimeout(this.hideSliderTimeout);\n    this.isSliderActive = true;\n  }\n  onHideSlider() {\n    this.hideSliderTimeout = setTimeout(() => {\n      this.isSliderActive = false;\n    }, 100);\n  }\n  onVolumeChange(event) {\n    const newVolume = event.detail;\n    this.currentVolume = newVolume;\n    this.dispatch('volume', newVolume);\n    this.dispatch('muted', newVolume === 0);\n  }\n  onKeyDown(event) {\n    if (event.key !== 'ArrowLeft' && event.key !== 'ArrowRight')\n      return;\n    event.stopPropagation();\n  }\n  render() {\n    return (h(\"div\", { class: \"volumeControl\", onMouseEnter: this.onShowSlider.bind(this), onMouseLeave: this.onHideSlider.bind(this) }, h(\"vm-mute-control\", { keys: this.muteKeys, lowVolumeIcon: this.lowVolumeIcon, highVolumeIcon: this.highVolumeIcon, mutedIcon: this.mutedIcon, icons: this.icons, tooltipPosition: this.tooltipPosition, tooltipDirection: this.tooltipDirection, hideTooltip: this.hideTooltip, onVmFocus: this.onShowSlider.bind(this), onVmBlur: this.onHideSlider.bind(this) }), h(\"vm-slider\", { class: {\n        hidden: this.isMobile,\n        active: this.isSliderActive,\n      }, step: 5, max: 100, value: this.currentVolume, label: this.i18n.volume, onKeyDown: this.onKeyDown.bind(this), onVmFocus: this.onShowSlider.bind(this), onVmBlur: this.onHideSlider.bind(this), onVmValueChange: this.onVolumeChange.bind(this) })));\n  }\n  static get watchers() { return {\n    \"noKeyboard\": [\"onNoKeyboardChange\"],\n    \"muted\": [\"onPlayerVolumeChange\"],\n    \"volume\": [\"onPlayerVolumeChange\"]\n  }; }\n  static get style() { return volumeControlCss; }\n};\n\nconst mapYouTubePlaybackQuality = (quality) => {\n  switch (quality) {\n    case \"unknown\" /* Unknown */:\n      return undefined;\n    case \"tiny\" /* Tiny */:\n      return '144p';\n    case \"small\" /* Small */:\n      return '240p';\n    case \"medium\" /* Medium */:\n      return '360p';\n    case \"large\" /* Large */:\n      return '480p';\n    case \"hd720\" /* Hd720 */:\n      return '720p';\n    case \"hd1080\" /* Hd1080 */:\n      return '1080p';\n    case \"highres\" /* Highres */:\n      return '1440p';\n    case \"max\" /* Max */:\n      return '2160p';\n    default:\n      return undefined;\n  }\n};\n\nconst youtubeCss = \":host{z-index:var(--vm-media-z-index)}\";\n\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try {\n      step(generator.next(value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function rejected(value) { try {\n      step(generator[\"throw\"](value));\n    }\n    catch (e) {\n      reject(e);\n    } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst posterCache = new Map();\nconst YouTube = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.vmLoadStart = createEvent(this, \"vmLoadStart\", 7);\n    this.defaultInternalState = {};\n    this.internalState = {\n      paused: true,\n      duration: 0,\n      seeking: false,\n      playbackReady: false,\n      playbackStarted: false,\n      currentTime: 0,\n      lastTimeUpdate: 0,\n      playbackRate: 1,\n      state: -1,\n    };\n    this.embedSrc = '';\n    this.mediaTitle = '';\n    /**\n     * Whether cookies should be enabled on the embed.\n     */\n    this.cookies = false;\n    /**\n     * Whether the fullscreen control should be shown.\n     */\n    this.showFullscreenControl = true;\n    /** @internal */\n    this.language = 'en';\n    /** @internal */\n    this.autoplay = false;\n    /** @internal */\n    this.controls = false;\n    /** @internal */\n    this.loop = false;\n    /** @internal */\n    this.muted = false;\n    /** @internal */\n    this.playsinline = false;\n    withComponentRegistry(this);\n    withProviderConnect(this);\n    withProviderContext(this);\n  }\n  onVideoIdChange() {\n    if (!this.videoId) {\n      this.embedSrc = '';\n      return;\n    }\n    this.embedSrc = `${this.getOrigin()}/embed/${this.videoId}`;\n    this.fetchPosterURL = this.findPosterURL();\n  }\n  onCustomPosterChange() {\n    this.dispatch('currentPoster', this.poster);\n  }\n  connectedCallback() {\n    this.dispatch = createProviderDispatcher(this);\n    this.dispatch('viewType', ViewType.Video);\n    this.onVideoIdChange();\n    this.defaultInternalState = Object.assign({}, this.internalState);\n  }\n  componentDidLoad() {\n    this.initialMuted = this.muted;\n  }\n  /** @internal */\n  getAdapter() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const canPlayRegex = /(?:youtu\\.be|youtube|youtube\\.com|youtube-nocookie\\.com)\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=|)((?:\\w|-){11})/;\n      return {\n        getInternalPlayer: () => __awaiter(this, void 0, void 0, function* () { return this.embed; }),\n        play: () => __awaiter(this, void 0, void 0, function* () {\n          this.remoteControl(\"playVideo\" /* Play */);\n        }),\n        pause: () => __awaiter(this, void 0, void 0, function* () {\n          this.remoteControl(\"pauseVideo\" /* Pause */);\n        }),\n        canPlay: (type) => __awaiter(this, void 0, void 0, function* () { return isString(type) && canPlayRegex.test(type); }),\n        setCurrentTime: (time) => __awaiter(this, void 0, void 0, function* () {\n          if (time !== this.internalState.currentTime) {\n            this.remoteControl(\"seekTo\" /* Seek */, time);\n          }\n        }),\n        setMuted: (muted) => __awaiter(this, void 0, void 0, function* () {\n          muted\n            ? this.remoteControl(\"mute\" /* Mute */)\n            : this.remoteControl(\"unMute\" /* Unmute */);\n        }),\n        setVolume: (volume) => __awaiter(this, void 0, void 0, function* () {\n          this.remoteControl(\"setVolume\" /* SetVolume */, volume);\n        }),\n        canSetPlaybackRate: () => __awaiter(this, void 0, void 0, function* () { return true; }),\n        setPlaybackRate: (rate) => __awaiter(this, void 0, void 0, function* () {\n          this.remoteControl(\"setPlaybackRate\" /* SetPlaybackRate */, rate);\n        }),\n      };\n    });\n  }\n  getOrigin() {\n    return !this.cookies\n      ? 'https://www.youtube-nocookie.com'\n      : 'https://www.youtube.com';\n  }\n  getPreconnections() {\n    return [\n      this.getOrigin(),\n      'https://www.google.com',\n      'https://googleads.g.doubleclick.net',\n      'https://static.doubleclick.net',\n      'https://s.ytimg.com',\n      'https://i.ytimg.com',\n    ];\n  }\n  remoteControl(command, arg) {\n    return this.embed.postMessage({\n      event: 'command',\n      func: command,\n      args: arg ? [arg] : undefined,\n    });\n  }\n  buildParams() {\n    return {\n      enablejsapi: 1,\n      cc_lang_pref: this.language,\n      hl: this.language,\n      fs: this.showFullscreenControl ? 1 : 0,\n      controls: this.controls ? 1 : 0,\n      disablekb: !this.controls ? 1 : 0,\n      iv_load_policy: this.controls ? 1 : 3,\n      mute: this.initialMuted ? 1 : 0,\n      playsinline: this.playsinline ? 1 : 0,\n      autoplay: this.autoplay ? 1 : 0,\n    };\n  }\n  onEmbedSrcChange() {\n    this.vmLoadStart.emit();\n    this.dispatch('viewType', ViewType.Video);\n  }\n  onEmbedLoaded() {\n    // Seems like we have to wait a random small delay or else YT player isn't ready.\n    window.setTimeout(() => this.embed.postMessage({ event: 'listening' }), 100);\n  }\n  findPosterURL() {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (posterCache.has(this.videoId))\n        return posterCache.get(this.videoId);\n      const posterURL = (quality) => `https://i.ytimg.com/vi/${this.videoId}/${quality}.jpg`;\n      /**\n       * We are testing a that the image has a min-width of 121px because if the thumbnail does not\n       * exist YouTube returns a blank/error image that is 120px wide.\n       */\n      return loadImage(posterURL('maxresdefault'), 121) // 1080p (no padding)\n        .catch(() => loadImage(posterURL('sddefault'), 121)) // 640p (padded 4:3)\n        .catch(() => loadImage(posterURL('hqdefault'), 121)) // 480p (padded 4:3)\n        .then(img => {\n        const poster = img.src;\n        posterCache.set(this.videoId, poster);\n        return poster;\n      });\n    });\n  }\n  onCued() {\n    if (this.internalState.playbackReady)\n      return;\n    this.internalState = Object.assign({}, this.defaultInternalState);\n    this.dispatch('currentSrc', this.embedSrc);\n    this.dispatch('mediaType', MediaType.Video);\n    this.fetchPosterURL.then(poster => {\n      var _a;\n      this.dispatch('currentPoster', (_a = this.poster) !== null && _a !== void 0 ? _a : poster);\n      this.dispatch('playbackReady', true);\n    });\n    this.internalState.playbackReady = true;\n  }\n  onPlayerStateChange(state) {\n    // Sometimes the embed falls back to an unstarted state for some unknown reason, this will\n    // make sure the player is configured to the right starting state.\n    if (this.internalState.playbackReady &&\n      state === -1 /* Unstarted */) {\n      this.internalState.paused = true;\n      this.internalState.playbackStarted = false;\n      this.dispatch('buffering', false);\n      this.dispatch('paused', true);\n      this.dispatch('playbackStarted', false);\n      return;\n    }\n    const isPlaying = state === 1 /* Playing */;\n    const isBuffering = state === 3 /* Buffering */;\n    this.dispatch('buffering', isBuffering);\n    // Attempt to detect `play` events early.\n    if (this.internalState.paused && (isBuffering || isPlaying)) {\n      this.internalState.paused = false;\n      this.dispatch('paused', false);\n      if (!this.internalState.playbackStarted) {\n        this.dispatch('playbackStarted', true);\n        this.internalState.playbackStarted = true;\n      }\n    }\n    switch (state) {\n      case 5 /* Cued */:\n        this.onCued();\n        break;\n      case 1 /* Playing */:\n        // Incase of autoplay which might skip `Cued` event.\n        this.onCued();\n        this.dispatch('playing', true);\n        break;\n      case 2 /* Paused */:\n        this.internalState.paused = true;\n        this.dispatch('paused', true);\n        break;\n      case 0 /* Ended */:\n        if (this.loop) {\n          window.setTimeout(() => {\n            this.remoteControl(\"playVideo\" /* Play */);\n          }, 150);\n        }\n        else {\n          this.dispatch('playbackEnded', true);\n          this.internalState.paused = true;\n          this.dispatch('paused', true);\n        }\n        break;\n    }\n    this.internalState.state = state;\n  }\n  calcCurrentTime(time) {\n    let currentTime = time;\n    if (this.internalState.state === 0 /* Ended */) {\n      return this.internalState.duration;\n    }\n    if (this.internalState.state === 1 /* Playing */) {\n      const elapsedTime = (Date.now() / 1e3 - this.defaultInternalState.lastTimeUpdate) *\n        this.internalState.playbackRate;\n      if (elapsedTime > 0)\n        currentTime += Math.min(elapsedTime, 1);\n    }\n    return currentTime;\n  }\n  onTimeChange(time) {\n    const currentTime = this.calcCurrentTime(time);\n    this.dispatch('currentTime', currentTime);\n    // This is the only way to detect `seeking`.\n    if (Math.abs(this.internalState.currentTime - currentTime) > 1.5) {\n      this.internalState.seeking = true;\n      this.dispatch('seeking', true);\n    }\n    this.internalState.currentTime = currentTime;\n  }\n  onBufferedChange(buffered) {\n    this.dispatch('buffered', buffered);\n    /**\n     * This is the only way to detect `seeked`. Unfortunately while the player is `paused` `seeking`\n     * and `seeked` will fire at the same time, there are no updates inbetween -_-. We need an\n     * artifical delay between the two events.\n     */\n    if (this.internalState.seeking &&\n      buffered > this.internalState.currentTime) {\n      window.setTimeout(() => {\n        this.internalState.seeking = false;\n        this.dispatch('seeking', false);\n      }, this.internalState.paused ? 100 : 0);\n    }\n  }\n  onEmbedMessage(event) {\n    const message = event.detail;\n    const { info } = message;\n    if (!info)\n      return;\n    if (isObject(info.videoData))\n      this.dispatch('mediaTitle', info.videoData.title);\n    if (isNumber(info.duration)) {\n      this.internalState.duration = info.duration;\n      this.dispatch('duration', info.duration);\n    }\n    if (isArray(info.availablePlaybackRates)) {\n      this.dispatch('playbackRates', info.availablePlaybackRates);\n    }\n    if (isNumber(info.playbackRate)) {\n      this.internalState.playbackRate = info.playbackRate;\n      this.dispatch('playbackRate', info.playbackRate);\n    }\n    if (isNumber(info.currentTime))\n      this.onTimeChange(info.currentTime);\n    if (isNumber(info.currentTimeLastUpdated)) {\n      this.internalState.lastTimeUpdate = info.currentTimeLastUpdated;\n    }\n    if (isNumber(info.videoLoadedFraction)) {\n      this.onBufferedChange(info.videoLoadedFraction * this.internalState.duration);\n    }\n    if (isNumber(info.volume))\n      this.dispatch('volume', info.volume);\n    if (isBoolean(info.muted))\n      this.dispatch('muted', info.muted);\n    if (isArray(info.availableQualityLevels)) {\n      this.dispatch('playbackQualities', info.availableQualityLevels.map(q => mapYouTubePlaybackQuality(q)));\n    }\n    if (isString(info.playbackQuality)) {\n      this.dispatch('playbackQuality', mapYouTubePlaybackQuality(info.playbackQuality));\n    }\n    if (isNumber(info.playerState))\n      this.onPlayerStateChange(info.playerState);\n  }\n  render() {\n    return (h(\"vm-embed\", { embedSrc: this.embedSrc, mediaTitle: this.mediaTitle, origin: this.getOrigin(), params: this.buildParams(), decoder: decodeJSON, preconnections: this.getPreconnections(), onVmEmbedLoaded: this.onEmbedLoaded.bind(this), onVmEmbedMessage: this.onEmbedMessage.bind(this), onVmEmbedSrcChange: this.onEmbedSrcChange.bind(this), ref: (el) => {\n        this.embed = el;\n      } }));\n  }\n  static get watchers() { return {\n    \"cookies\": [\"onVideoIdChange\"],\n    \"videoId\": [\"onVideoIdChange\"],\n    \"poster\": [\"onCustomPosterChange\"]\n  }; }\n  static get style() { return youtubeCss; }\n};\n\nconst VmAudio = /*@__PURE__*/proxyCustomElement(Audio, [4,\"vm-audio\",{\"willAttach\":[4,\"will-attach\"],\"crossOrigin\":[1,\"cross-origin\"],\"preload\":[1],\"disableRemotePlayback\":[4,\"disable-remote-playback\"],\"mediaTitle\":[1,\"media-title\"]}]);\nconst VmCaptionControl = /*@__PURE__*/proxyCustomElement(CaptionControl, [1,\"vm-caption-control\",{\"showIcon\":[1,\"show-icon\"],\"hideIcon\":[1,\"hide-icon\"],\"tooltipPosition\":[1,\"tooltip-position\"],\"tooltipDirection\":[1,\"tooltip-direction\"],\"hideTooltip\":[4,\"hide-tooltip\"],\"icons\":[1],\"keys\":[1],\"i18n\":[16],\"playbackReady\":[4,\"playback-ready\"],\"textTracks\":[16],\"isTextTrackVisible\":[4,\"is-text-track-visible\"],\"canToggleCaptionVisibility\":[32]}]);\nconst VmCaptions = /*@__PURE__*/proxyCustomElement(Captions, [1,\"vm-captions\",{\"hidden\":[4],\"isControlsActive\":[4,\"is-controls-active\"],\"isVideoView\":[4,\"is-video-view\"],\"playbackStarted\":[4,\"playback-started\"],\"textTracks\":[16],\"currentTextTrack\":[2,\"current-text-track\"],\"isTextTrackVisible\":[4,\"is-text-track-visible\"],\"isEnabled\":[32],\"cue\":[32],\"fontSize\":[32]}]);\nconst VmClickToPlay = /*@__PURE__*/proxyCustomElement(ClickToPlay, [1,\"vm-click-to-play\",{\"useOnMobile\":[4,\"use-on-mobile\"],\"paused\":[4],\"isVideoView\":[4,\"is-video-view\"],\"isMobile\":[4,\"is-mobile\"]}]);\nconst VmControl = /*@__PURE__*/proxyCustomElement(Control, [1,\"vm-control\",{\"keys\":[1],\"identifier\":[1],\"hidden\":[4],\"label\":[1],\"menu\":[1],\"expanded\":[4],\"pressed\":[4],\"isTouch\":[4,\"is-touch\"],\"describedBy\":[32],\"showTapHighlight\":[32]}]);\nconst VmControlGroup = /*@__PURE__*/proxyCustomElement(ControlNewLine, [1,\"vm-control-group\",{\"space\":[1]}]);\nconst VmControlSpacer = /*@__PURE__*/proxyCustomElement(ControlSpacer, [1,\"vm-control-spacer\"]);\nconst VmControls = /*@__PURE__*/proxyCustomElement(Controls, [1,\"vm-controls\",{\"hidden\":[4],\"fullWidth\":[4,\"full-width\"],\"fullHeight\":[4,\"full-height\"],\"direction\":[1],\"align\":[1],\"justify\":[1],\"pin\":[513],\"activeDuration\":[2,\"active-duration\"],\"waitForPlaybackStart\":[4,\"wait-for-playback-start\"],\"hideWhenPaused\":[4,\"hide-when-paused\"],\"hideOnMouseLeave\":[4,\"hide-on-mouse-leave\"],\"isAudioView\":[4,\"is-audio-view\"],\"isSettingsActive\":[4,\"is-settings-active\"],\"playbackReady\":[4,\"playback-ready\"],\"isControlsActive\":[4,\"is-controls-active\"],\"paused\":[4],\"playbackStarted\":[4,\"playback-started\"],\"isInteracting\":[32]}]);\nconst VmCurrentTime = /*@__PURE__*/proxyCustomElement(CurrentTime, [1,\"vm-current-time\",{\"currentTime\":[2,\"current-time\"],\"i18n\":[16],\"alwaysShowHours\":[4,\"always-show-hours\"]}]);\nconst VmDailymotion = /*@__PURE__*/proxyCustomElement(Dailymotion, [1,\"vm-dailymotion\",{\"videoId\":[1,\"video-id\"],\"shouldAutoplayQueue\":[4,\"should-autoplay-queue\"],\"showUpNextQueue\":[4,\"show-up-next-queue\"],\"showShareButtons\":[4,\"show-share-buttons\"],\"color\":[1],\"syndication\":[1],\"showDailymotionLogo\":[4,\"show-dailymotion-logo\"],\"showVideoInfo\":[4,\"show-video-info\"],\"language\":[1],\"autoplay\":[4],\"controls\":[4],\"poster\":[1],\"logger\":[16],\"loop\":[4],\"muted\":[4],\"playsinline\":[4],\"embedSrc\":[32],\"mediaTitle\":[32]}]);\nconst VmDash = /*@__PURE__*/proxyCustomElement(Dash, [1,\"vm-dash\",{\"src\":[1],\"version\":[1],\"libSrc\":[1,\"lib-src\"],\"config\":[16],\"autoplay\":[4],\"crossOrigin\":[1,\"cross-origin\"],\"preload\":[1],\"poster\":[1],\"controlsList\":[1,\"controls-list\"],\"autoPiP\":[4,\"auto-pip\"],\"disablePiP\":[4,\"disable-pip\"],\"disableRemotePlayback\":[4,\"disable-remote-playback\"],\"mediaTitle\":[1,\"media-title\"],\"enableTextTracksByDefault\":[4,\"enable-text-tracks-by-default\"],\"shouldRenderNativeTextTracks\":[4,\"should-render-native-text-tracks\"],\"isTextTrackVisible\":[4,\"is-text-track-visible\"],\"currentTextTrack\":[2,\"current-text-track\"],\"hasAttached\":[32]},[[0,\"vmMediaElChange\",\"onMediaElChange\"]]]);\nconst VmDblClickFullscreen = /*@__PURE__*/proxyCustomElement(DblClickFullscreen, [1,\"vm-dbl-click-fullscreen\",{\"useOnMobile\":[4,\"use-on-mobile\"],\"isFullscreenActive\":[4,\"is-fullscreen-active\"],\"isVideoView\":[4,\"is-video-view\"],\"playbackReady\":[4,\"playback-ready\"],\"isMobile\":[4,\"is-mobile\"],\"canSetFullscreen\":[32]}]);\nconst VmDefaultControls = /*@__PURE__*/proxyCustomElement(DefaultControls, [1,\"vm-default-controls\",{\"activeDuration\":[2,\"active-duration\"],\"waitForPlaybackStart\":[4,\"wait-for-playback-start\"],\"hideWhenPaused\":[4,\"hide-when-paused\"],\"hideOnMouseLeave\":[4,\"hide-on-mouse-leave\"],\"theme\":[1],\"isMobile\":[4,\"is-mobile\"],\"isLive\":[4,\"is-live\"],\"isAudioView\":[4,\"is-audio-view\"],\"isVideoView\":[4,\"is-video-view\"]}]);\nconst VmDefaultSettings = /*@__PURE__*/proxyCustomElement(DefaultSettings, [1,\"vm-default-settings\",{\"pin\":[513],\"i18n\":[16],\"playbackReady\":[4,\"playback-ready\"],\"playbackRate\":[2,\"playback-rate\"],\"playbackRates\":[16],\"isVideoView\":[4,\"is-video-view\"],\"playbackQuality\":[1,\"playback-quality\"],\"playbackQualities\":[16],\"textTracks\":[16],\"currentTextTrack\":[2,\"current-text-track\"],\"audioTracks\":[16],\"currentAudioTrack\":[2,\"current-audio-track\"],\"isTextTrackVisible\":[4,\"is-text-track-visible\"],\"canSetPlaybackRate\":[32],\"canSetPlaybackQuality\":[32],\"canSetTextTrack\":[32],\"canSetAudioTrack\":[32]}]);\nconst VmDefaultUi = /*@__PURE__*/proxyCustomElement(DefaultUI, [1,\"vm-default-ui\",{\"noClickToPlay\":[4,\"no-click-to-play\"],\"noDblClickFullscreen\":[4,\"no-dbl-click-fullscreen\"],\"noCaptions\":[4,\"no-captions\"],\"noPoster\":[4,\"no-poster\"],\"noSpinner\":[4,\"no-spinner\"],\"noControls\":[4,\"no-controls\"],\"noSettings\":[4,\"no-settings\"],\"noLoadingScreen\":[4,\"no-loading-screen\"]}]);\nconst VmEmbed = /*@__PURE__*/proxyCustomElement(Embed, [1,\"vm-embed\",{\"embedSrc\":[1,\"embed-src\"],\"mediaTitle\":[1,\"media-title\"],\"params\":[1],\"origin\":[1],\"preconnections\":[16],\"decoder\":[16],\"srcWithParams\":[32],\"hasEnteredViewport\":[32]},[[8,\"message\",\"onWindowMessage\"]]]);\nconst VmEndTime = /*@__PURE__*/proxyCustomElement(EndTime, [1,\"vm-end-time\",{\"duration\":[2],\"i18n\":[16],\"alwaysShowHours\":[4,\"always-show-hours\"]}]);\nconst VmFile = /*@__PURE__*/proxyCustomElement(File, [6,\"vm-file\",{\"willAttach\":[4,\"will-attach\"],\"crossOrigin\":[1,\"cross-origin\"],\"preload\":[1],\"poster\":[1],\"mediaTitle\":[1,\"media-title\"],\"controlsList\":[1,\"controls-list\"],\"autoPiP\":[4,\"auto-pip\"],\"disablePiP\":[4,\"disable-pip\"],\"disableRemotePlayback\":[4,\"disable-remote-playback\"],\"viewType\":[1,\"view-type\"],\"playbackRates\":[16],\"language\":[1],\"autoplay\":[4],\"controls\":[4],\"logger\":[16],\"loop\":[4],\"muted\":[4],\"playsinline\":[4],\"noConnect\":[4,\"no-connect\"],\"paused\":[4],\"currentTime\":[2,\"current-time\"],\"volume\":[2],\"playbackReady\":[4,\"playback-ready\"],\"playbackStarted\":[4,\"playback-started\"],\"currentTextTrack\":[2,\"current-text-track\"],\"hasCustomTextManager\":[4,\"has-custom-text-manager\"],\"isTextTrackVisible\":[4,\"is-text-track-visible\"],\"shouldRenderNativeTextTracks\":[4,\"should-render-native-text-tracks\"],\"vmPoster\":[32]},[[0,\"vmMediaProviderConnect\",\"onProviderConnect\"],[0,\"vmMediaProviderDisconnect\",\"onProviderDisconnect\"]]]);\nconst VmFullscreenControl = /*@__PURE__*/proxyCustomElement(FullscreenControl, [1,\"vm-fullscreen-control\",{\"enterIcon\":[1,\"enter-icon\"],\"exitIcon\":[1,\"exit-icon\"],\"icons\":[1],\"tooltipPosition\":[1,\"tooltip-position\"],\"tooltipDirection\":[1,\"tooltip-direction\"],\"hideTooltip\":[4,\"hide-tooltip\"],\"keys\":[1],\"isFullscreenActive\":[4,\"is-fullscreen-active\"],\"i18n\":[16],\"playbackReady\":[4,\"playback-ready\"],\"canSetFullscreen\":[32]}]);\nconst VmHls = /*@__PURE__*/proxyCustomElement(HLS, [4,\"vm-hls\",{\"version\":[1],\"libSrc\":[1,\"lib-src\"],\"config\":[8],\"crossOrigin\":[1,\"cross-origin\"],\"preload\":[1],\"poster\":[1],\"controlsList\":[1,\"controls-list\"],\"autoPiP\":[4,\"auto-pip\"],\"disablePiP\":[4,\"disable-pip\"],\"disableRemotePlayback\":[4,\"disable-remote-playback\"],\"playbackReady\":[4,\"playback-ready\"],\"mediaTitle\":[1,\"media-title\"],\"hasAttached\":[32]},[[0,\"vmMediaElChange\",\"onMediaElChange\"],[0,\"vmSrcSetChange\",\"onSrcChange\"]]]);\nconst VmIcon = /*@__PURE__*/proxyCustomElement(Icon, [1,\"vm-icon\",{\"name\":[1],\"src\":[1],\"label\":[1],\"library\":[1],\"icons\":[1],\"svg\":[32]}]);\nconst VmIconLibrary = /*@__PURE__*/proxyCustomElement(IconLibrary, [1,\"vm-icon-library\",{\"name\":[1],\"resolver\":[16],\"icons\":[1]}]);\nconst VmLiveIndicator = /*@__PURE__*/proxyCustomElement(LiveIndicator, [1,\"vm-live-indicator\",{\"isLive\":[4,\"is-live\"],\"i18n\":[16]}]);\nconst VmLoadingScreen = /*@__PURE__*/proxyCustomElement(LoadingScreen, [1,\"vm-loading-screen\",{\"playbackReady\":[4,\"playback-ready\"],\"hideDots\":[4,\"hide-dots\"]}]);\nconst VmMenu = /*@__PURE__*/proxyCustomElement(Menu, [1,\"vm-menu\",{\"active\":[1540],\"identifier\":[1],\"controller\":[16],\"slideInDirection\":[1,\"slide-in-direction\"],\"activeMenuItem\":[32],\"activeSubmenu\":[32]},[[0,\"vmOpenSubmenu\",\"onOpenSubmenu\"],[0,\"vmCloseSubmenu\",\"onCloseSubmenu\"],[8,\"click\",\"onWindowClick\"],[8,\"keydown\",\"onWindowKeyDown\"]]]);\nconst VmMenuItem = /*@__PURE__*/proxyCustomElement(MenuItem, [1,\"vm-menu-item\",{\"identifier\":[1],\"hidden\":[4],\"label\":[1],\"menu\":[16],\"expanded\":[4],\"checked\":[4],\"hint\":[1],\"badge\":[1],\"checkIcon\":[1,\"check-icon\"],\"icons\":[1],\"isTouch\":[4,\"is-touch\"],\"showTapHighlight\":[32]}]);\nconst VmMenuRadio = /*@__PURE__*/proxyCustomElement(MenuRadio, [1,\"vm-menu-radio\",{\"label\":[1],\"value\":[1],\"checked\":[1028],\"badge\":[1],\"checkIcon\":[1,\"check-icon\"],\"icons\":[1]}]);\nconst VmMenuRadioGroup = /*@__PURE__*/proxyCustomElement(MenuRadioGroup, [1,\"vm-menu-radio-group\",{\"value\":[1025]},[[0,\"vmCheck\",\"onSelectionChange\"]]]);\nconst VmMuteControl = /*@__PURE__*/proxyCustomElement(MuteControl, [1,\"vm-mute-control\",{\"lowVolumeIcon\":[1,\"low-volume-icon\"],\"highVolumeIcon\":[1,\"high-volume-icon\"],\"mutedIcon\":[1,\"muted-icon\"],\"icons\":[1],\"tooltipPosition\":[1,\"tooltip-position\"],\"tooltipDirection\":[1,\"tooltip-direction\"],\"hideTooltip\":[4,\"hide-tooltip\"],\"keys\":[1],\"volume\":[2],\"muted\":[4],\"i18n\":[16]}]);\nconst VmPipControl = /*@__PURE__*/proxyCustomElement(PiPControl, [1,\"vm-pip-control\",{\"enterIcon\":[1,\"enter-icon\"],\"exitIcon\":[1,\"exit-icon\"],\"icons\":[1],\"tooltipPosition\":[1,\"tooltip-position\"],\"tooltipDirection\":[1,\"tooltip-direction\"],\"hideTooltip\":[4,\"hide-tooltip\"],\"keys\":[1],\"isPiPActive\":[4,\"is-pi-p-active\"],\"i18n\":[16],\"playbackReady\":[4,\"playback-ready\"],\"canSetPiP\":[32]}]);\nconst VmPlaybackControl = /*@__PURE__*/proxyCustomElement(PlaybackControl, [1,\"vm-playback-control\",{\"playIcon\":[1,\"play-icon\"],\"pauseIcon\":[1,\"pause-icon\"],\"icons\":[1],\"tooltipPosition\":[1,\"tooltip-position\"],\"tooltipDirection\":[1,\"tooltip-direction\"],\"hideTooltip\":[4,\"hide-tooltip\"],\"keys\":[1],\"paused\":[4],\"i18n\":[16]}]);\nconst VmPlayer = /*@__PURE__*/proxyCustomElement(Player, [1,\"vm-player\",{\"logger\":[16],\"theme\":[513],\"icons\":[513],\"paused\":[1028],\"playing\":[1028],\"duration\":[1026],\"mediaTitle\":[1025,\"media-title\"],\"currentProvider\":[1025,\"current-provider\"],\"currentSrc\":[1025,\"current-src\"],\"currentPoster\":[1025,\"current-poster\"],\"currentTime\":[1026,\"current-time\"],\"autoplay\":[4],\"ready\":[1540],\"playbackReady\":[1028,\"playback-ready\"],\"loop\":[4],\"muted\":[1028],\"buffered\":[1026],\"playbackRate\":[1026,\"playback-rate\"],\"playbackRates\":[1040],\"playbackQuality\":[1025,\"playback-quality\"],\"playbackQualities\":[1040],\"seeking\":[1028],\"debug\":[4],\"playbackStarted\":[1028,\"playback-started\"],\"playbackEnded\":[1028,\"playback-ended\"],\"buffering\":[1028],\"controls\":[4],\"isControlsActive\":[4,\"is-controls-active\"],\"isSettingsActive\":[1028,\"is-settings-active\"],\"volume\":[1026],\"isFullscreenActive\":[1028,\"is-fullscreen-active\"],\"aspectRatio\":[1025,\"aspect-ratio\"],\"viewType\":[1025,\"view-type\"],\"isAudioView\":[1028,\"is-audio-view\"],\"isVideoView\":[1028,\"is-video-view\"],\"mediaType\":[1025,\"media-type\"],\"isAudio\":[1028,\"is-audio\"],\"isVideo\":[1028,\"is-video\"],\"isLive\":[1028,\"is-live\"],\"isMobile\":[1028,\"is-mobile\"],\"isTouch\":[1028,\"is-touch\"],\"isPiPActive\":[1028,\"is-pi-p-active\"],\"textTracks\":[16],\"currentTextTrack\":[2,\"current-text-track\"],\"isTextTrackVisible\":[4,\"is-text-track-visible\"],\"shouldRenderNativeTextTracks\":[4,\"should-render-native-text-tracks\"],\"audioTracks\":[16],\"currentAudioTrack\":[2,\"current-audio-track\"],\"autopause\":[4],\"playsinline\":[4],\"language\":[1025],\"translations\":[1040],\"languages\":[1040],\"i18n\":[1040],\"container\":[32]},[[0,\"vmError\",\"onError\"]]]);\nconst VmPoster = /*@__PURE__*/proxyCustomElement(Poster, [1,\"vm-poster\",{\"fit\":[1],\"isVideoView\":[4,\"is-video-view\"],\"currentPoster\":[1,\"current-poster\"],\"mediaTitle\":[1,\"media-title\"],\"playbackStarted\":[4,\"playback-started\"],\"currentTime\":[2,\"current-time\"],\"isHidden\":[32],\"isActive\":[32],\"hasLoaded\":[32]}]);\nconst VmScrim = /*@__PURE__*/proxyCustomElement(Scrim, [1,\"vm-scrim\",{\"gradient\":[1],\"isVideoView\":[4,\"is-video-view\"],\"isControlsActive\":[4,\"is-controls-active\"]}]);\nconst VmScrubberControl = /*@__PURE__*/proxyCustomElement(ScrubberControl, [1,\"vm-scrubber-control\",{\"alwaysShowHours\":[4,\"always-show-hours\"],\"hideTooltip\":[4,\"hide-tooltip\"],\"currentTime\":[2,\"current-time\"],\"duration\":[2],\"noKeyboard\":[4,\"no-keyboard\"],\"buffering\":[4],\"buffered\":[2],\"i18n\":[16],\"timestamp\":[32],\"endTime\":[32]}]);\nconst VmSettings = /*@__PURE__*/proxyCustomElement(Settings, [1,\"vm-settings\",{\"pin\":[513],\"active\":[1540],\"isMobile\":[4,\"is-mobile\"],\"isAudioView\":[4,\"is-audio-view\"],\"menuHeight\":[32]}]);\nconst VmSettingsControl = /*@__PURE__*/proxyCustomElement(SettingsControl, [1,\"vm-settings-control\",{\"icon\":[1],\"icons\":[1],\"tooltipPosition\":[1,\"tooltip-position\"],\"tooltipDirection\":[1,\"tooltip-direction\"],\"menu\":[1],\"expanded\":[4],\"i18n\":[16],\"vmSettings\":[32]}]);\nconst VmSkeleton = /*@__PURE__*/proxyCustomElement(Skeleton, [1,\"vm-skeleton\",{\"effect\":[1],\"ready\":[4],\"hidden\":[32]}]);\nconst VmSlider = /*@__PURE__*/proxyCustomElement(Slider, [1,\"vm-slider\",{\"step\":[2],\"min\":[2],\"max\":[2],\"value\":[2],\"valueText\":[1,\"value-text\"],\"label\":[1]}]);\nconst VmSpinner = /*@__PURE__*/proxyCustomElement(Spinner, [1,\"vm-spinner\",{\"isVideoView\":[4,\"is-video-view\"],\"currentProvider\":[1,\"current-provider\"],\"showWhenMediaLoading\":[4,\"show-when-media-loading\"],\"playbackReady\":[4,\"playback-ready\"],\"buffering\":[4],\"isHidden\":[32],\"isActive\":[32]}]);\nconst VmSubmenu = /*@__PURE__*/proxyCustomElement(Submenu, [1,\"vm-submenu\",{\"label\":[1],\"hint\":[1],\"slideInDirection\":[1,\"slide-in-direction\"],\"active\":[1540],\"menu\":[32],\"controller\":[32]}]);\nconst VmTime = /*@__PURE__*/proxyCustomElement(Time, [1,\"vm-time\",{\"label\":[1],\"seconds\":[2],\"alwaysShowHours\":[4,\"always-show-hours\"]}]);\nconst VmTimeProgress = /*@__PURE__*/proxyCustomElement(TimeProgress, [1,\"vm-time-progress\",{\"separator\":[1],\"alwaysShowHours\":[4,\"always-show-hours\"]}]);\nconst VmTooltip = /*@__PURE__*/proxyCustomElement(Tooltip, [1,\"vm-tooltip\",{\"hidden\":[4],\"active\":[4],\"position\":[1],\"direction\":[1],\"isTouch\":[4,\"is-touch\"],\"isMobile\":[4,\"is-mobile\"]}]);\nconst VmUi = /*@__PURE__*/proxyCustomElement(UI, [1,\"vm-ui\",{\"isVideoView\":[4,\"is-video-view\"],\"playsinline\":[4],\"isFullscreenActive\":[4,\"is-fullscreen-active\"]}]);\nconst VmVideo = /*@__PURE__*/proxyCustomElement(Video, [4,\"vm-video\",{\"willAttach\":[4,\"will-attach\"],\"hasCustomTextManager\":[4,\"has-custom-text-manager\"],\"crossOrigin\":[1,\"cross-origin\"],\"preload\":[1],\"poster\":[1],\"controlsList\":[1,\"controls-list\"],\"autoPiP\":[4,\"auto-pip\"],\"disablePiP\":[4,\"disable-pip\"],\"disableRemotePlayback\":[4,\"disable-remote-playback\"],\"mediaTitle\":[1,\"media-title\"]},[[0,\"vmMediaProviderConnect\",\"onProviderConnect\"],[0,\"vmMediaProviderDisconnect\",\"onProviderDisconnect\"]]]);\nconst VmVimeo = /*@__PURE__*/proxyCustomElement(Vimeo, [1,\"vm-vimeo\",{\"videoId\":[1,\"video-id\"],\"byline\":[4],\"color\":[1],\"portrait\":[4],\"noAutoAspectRatio\":[4,\"no-auto-aspect-ratio\"],\"poster\":[1],\"cookies\":[4],\"language\":[1],\"aspectRatio\":[1,\"aspect-ratio\"],\"autoplay\":[4],\"controls\":[4],\"logger\":[16],\"loop\":[4],\"muted\":[4],\"playsinline\":[4],\"embedSrc\":[32],\"mediaTitle\":[32]}]);\nconst VmVolumeControl = /*@__PURE__*/proxyCustomElement(VolumeControl, [1,\"vm-volume-control\",{\"lowVolumeIcon\":[1,\"low-volume-icon\"],\"highVolumeIcon\":[1,\"high-volume-icon\"],\"mutedIcon\":[1,\"muted-icon\"],\"icons\":[1],\"tooltipPosition\":[1,\"tooltip-position\"],\"tooltipDirection\":[1,\"tooltip-direction\"],\"hideTooltip\":[4,\"hide-tooltip\"],\"muteKeys\":[1,\"mute-keys\"],\"noKeyboard\":[4,\"no-keyboard\"],\"muted\":[4],\"volume\":[2],\"isMobile\":[4,\"is-mobile\"],\"i18n\":[16],\"currentVolume\":[32],\"isSliderActive\":[32]}]);\nconst VmYoutube = /*@__PURE__*/proxyCustomElement(YouTube, [1,\"vm-youtube\",{\"cookies\":[4],\"videoId\":[1,\"video-id\"],\"showFullscreenControl\":[4,\"show-fullscreen-control\"],\"poster\":[1],\"language\":[1],\"autoplay\":[4],\"controls\":[4],\"logger\":[16],\"loop\":[4],\"muted\":[4],\"playsinline\":[4],\"embedSrc\":[32],\"mediaTitle\":[32]}]);\nconst defineCustomElements = (opts) => {\n  if (typeof customElements !== 'undefined') {\n    [\n      VmAudio,\n  VmCaptionControl,\n  VmCaptions,\n  VmClickToPlay,\n  VmControl,\n  VmControlGroup,\n  VmControlSpacer,\n  VmControls,\n  VmCurrentTime,\n  VmDailymotion,\n  VmDash,\n  VmDblClickFullscreen,\n  VmDefaultControls,\n  VmDefaultSettings,\n  VmDefaultUi,\n  VmEmbed,\n  VmEndTime,\n  VmFile,\n  VmFullscreenControl,\n  VmHls,\n  VmIcon,\n  VmIconLibrary,\n  VmLiveIndicator,\n  VmLoadingScreen,\n  VmMenu,\n  VmMenuItem,\n  VmMenuRadio,\n  VmMenuRadioGroup,\n  VmMuteControl,\n  VmPipControl,\n  VmPlaybackControl,\n  VmPlayer,\n  VmPoster,\n  VmScrim,\n  VmScrubberControl,\n  VmSettings,\n  VmSettingsControl,\n  VmSkeleton,\n  VmSlider,\n  VmSpinner,\n  VmSubmenu,\n  VmTime,\n  VmTimeProgress,\n  VmTooltip,\n  VmUi,\n  VmVideo,\n  VmVimeo,\n  VmVolumeControl,\n  VmYoutube\n    ].forEach(cmp => {\n      if (!customElements.get(cmp.is)) {\n        customElements.define(cmp.is, cmp, opts);\n      }\n    });\n  }\n};\n\nexport { COMPONENT_NAME_KEY, MediaType, PLAYER_KEY, Provider, REGISTRATION_KEY, REGISTRY_KEY, ViewType, VmAudio, VmCaptionControl, VmCaptions, VmClickToPlay, VmControl, VmControlGroup, VmControlSpacer, VmControls, VmCurrentTime, VmDailymotion, VmDash, VmDblClickFullscreen, VmDefaultControls, VmDefaultSettings, VmDefaultUi, VmEmbed, VmEndTime, VmFile, VmFullscreenControl, VmHls, VmIcon, VmIconLibrary, VmLiveIndicator, VmLoadingScreen, VmMenu, VmMenuItem, VmMenuRadio, VmMenuRadioGroup, VmMuteControl, VmPipControl, VmPlaybackControl, VmPlayer, VmPoster, VmScrim, VmScrubberControl, VmSettings, VmSettingsControl, VmSkeleton, VmSlider, VmSpinner, VmSubmenu, VmTime, VmTimeProgress, VmTooltip, VmUi, VmVideo, VmVimeo, VmVolumeControl, VmYoutube, createDispatcher, defineCustomElements, findPlayer, getComponentFromRegistry, getPlayerFromRegistry, initialState, isComponentRegistered, isWritableProp, usePlayerContext, watchComponentRegistry, withComponentRegistry, withPlayerContext };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}